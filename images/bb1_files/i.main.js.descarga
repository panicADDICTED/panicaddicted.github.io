!function(e){try{var n=window,r=n.performance,t=n.Promise,o=n.MessageChannel,a=n.requestAnimationFrame;if(!(r&&r.mark&&t&&o&&a))return;var s=function(n){return r.mark("chunk-"+e+"-"+n)},i=!1,c=!1,u=t.resolve();s("exec-start");for(var f=0;f<5;f++)u=u.then();u.then((function(){s("exec-sync-end")}));var m=function(){i&&!c&&(s("after-paint"),c=!0)},p=new o;p.port1.onmessage=m,p.port2.postMessage(null),setTimeout(m),a((function(){i=!0,s("raf"),p.port2.postMessage(null),setTimeout(m)}))}catch(e){window.__jsPerformanceMarksError=e}}("i.main");(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1933:function(t,e,i){},1934:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i(1460),o=i(1461),a=i(1152),s=i(1205),r=i.n(s),l=i(1936),h=i(1937),c=(i(1935),["className","id","labelText"]);function d(){return(d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}var u=a.forwardRef((function(t,e){var i=t.className,s=t.id,u=t.labelText,p=function(t,e){if(null==t)return{};var i,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(o[i]=t[i]);return o}(t,c),m=Object(l.a)(s),g=Object(n.b)().pointerType===o.b.Coarse,f=r()("MarcomTextField",i,{"is-coarse-pointer":g,"has-value":!!p.value}),_=m+"_label";return a.createElement("div",{className:f},a.createElement("input",d({id:m,"aria-labelledby":_,ref:e,className:"MarcomTextField-input"},p)),a.createElement(h.a,{inputId:m,labelId:_,text:u}))}));u.displayName="MarcomTextField"},1935:function(t,e,i){},1936:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i(1152),o=i(1549);function a(t){return n.useMemo((function(){return t||""+Object(o.a)()}),[t])}},1937:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(1152),o=(i(1938),function(t){var e=t.inputId,i=t.labelId,o=t.text;return n.createElement("label",{htmlFor:e,"aria-hidden":!0,id:i,className:"MarcomTextField-label"},o)})},1938:function(t,e,i){},1939:function(t,e,i){},1940:function(t,e,i){},1941:function(t,e,i){var n=i(1942),o=i(1943),a=i(1961),s=i(1948),r=i(1962),l=i(1960),h=i(1963),c=i(2216),d=i(2018);function u(){throw new TypeError("[MapKit] MapKit may not be constructed.")}var p=function(t){var e=new a.Event(t.type);e.status=t.status,t.message&&(e.message=t.message),f.dispatchEvent(e)};u.prototype=s.inheritPrototype(a.EventTarget,u,{init:function(t){o.init(t),o.addEventListener(o.Events.Changed,p),o.addEventListener(o.Events.Error,p)},get version(){return n.version},get build(){return n.build+""+r},get language(){return o.language},set language(t){o.language=t},toString:function(){return["MapKit JS",this.version,"("+this.build+")"].join(" ")},get _tileProvider(){return o.tileProvider},get _countryCode(){return o.countryCode},set _countryCode(t){o.countryCode=t},_restore:function(){o._restore()},get _environment(){return o.environment}});var m=["importGeoJSON","FeatureVisibility","CoordinateRegion","CoordinateSpan","Coordinate","BoundingRegion","MapPoint","MapRect","MapSize","Padding","CameraZoomRange","Style","LineGradient","CircleOverlay","PolylineOverlay","PolygonOverlay","Geocoder","Search","Directions","PointsOfInterestSearch","Map","Annotation","PinAnnotation","ImageAnnotation","MarkerAnnotation","TileOverlay","PointOfInterestCategory","PointOfInterestFilter"],g=!1;h(l),l.addEventListener(l.Events.LOAD,(function(t){var e=t.jsModules;e.mapkit&&Object.keys(e.mapkit).forEach((function(t){var i=m.indexOf(t);-1!==i&&(delete u.prototype[t],u.prototype[t]=e.mapkit[t],m.splice(i,1))})),e.MapInternal&&(delete u.prototype.maps,Object.defineProperty(u.prototype,"maps",{get:function(){return e.MapInternal.maps},configurable:!0})),e.PointOfInterestFilter&&(delete u.prototype.filterIncludingAllCategories,delete u.prototype.filterExcludingAllCategories,Object.defineProperties(u.prototype,{filterIncludingAllCategories:{get:function(){return e.PointOfInterestFilter.filterIncludingAllCategories},configurable:!0},filterExcludingAllCategories:{get:function(){return e.PointOfInterestFilter.filterExcludingAllCategories},configurable:!0}})),!g&&l.jsModules.css&&l.jsModules.utils&&(document.head.appendChild(l.jsModules.utils.htmlElement("style",l.jsModules.css)),g=!0)})),l.IS_CHUNKED?(window.mapkit&&window.mapkit.constructor&&window.mapkit.constructor.__l&&(u.prototype.constructor.__l=window.mapkit.constructor.__l),u.prototype.Libraries=l.Libraries,Object.defineProperty(u.prototype,"loadedLibraries",{get:function(){return l.loadedLibraries.slice()}}),u.prototype.load=function(t){l.load(t)},l.addEventListener(l.Events.LOAD_ERROR,(function(t){var e=new a.Event("load-error");e.libraries=t.libraryNames,f.dispatchEvent(e)})),m.concat(["maps","filterIncludingAllCategories","filterExcludingAllCategories"]).forEach((function(t){Object.defineProperty(u.prototype,t,{get:function(){throw new Error("[MapKit] mapkit."+t+" is not available until the required library is loaded.")},configurable:!0,enumerable:!0})})),l.addEventListener(l.Events.LOADEND,(function(t){var e=new a.Event("load");e.libraries=t.libraryNames,f.dispatchEvent(e)}))):l.loadAll(),c(d.findScriptAndSetBasePath()),o.state!==o.States.UNINITIALIZED&&(o.addEventListener(o.Events.Changed,p),o.addEventListener(o.Events.Error,p));var f=Object.create(u.prototype);t.exports=f},1942:function(t){t.exports=JSON.parse('{"version":"5.72.136","build":"22.33-175","cdnBase":"//cdn.apple-mapkit.com","cdnVersion":"5.72.136"}')},1943:function(t,e,i){var n=i(1942),o=i(1944),a=i(1948),s=i(1952),r=i(1960),l=["language","countryCode","origin","madabaBaseUrl","authorizationCallback","libraries","_showMapsLogo","_mirrorLegalLink","bootstrapTimeout","_showsTileInfo","_distUrl","_syrupUrl","_previewLoCSR","_forcedRenderingMode","_proxyPrefixes"];function h(){}h.prototype=a.inheritPrototype(o,h,{get forcedRenderingMode(){return this._forcedRenderingMode},get didFallback(){return this._syrupRequestedFallback},get fallbackType(){return this._syrupRequestedFallbackType},get proxyPrefixes(){return this._proxyPrefixes},get withCredentials(){return this.proxyPrefixes&&/\b\.geo\.apple\.com\b/.test(this.proxyPrefixes[0])},get distUrlWithCredentials(){return this._distUrl?/\bproxy\.geo\.apple\.com\b/.test(this._distUrl):!n.useLocalResources&&this.withCredentials},get syrupUrlWithCredentials(){return this._syrupUrl?/\bproxy\.geo\.apple\.com\b/.test(this._syrupUrl):this.withCredentials},init:function(t,e){if(a.required(t,this._initMessagePrefix+"`options` object is required.",{checkNull:!0}).checkType(t,"object",this._initMessagePrefix+"`options` object is invalid."),Object.keys(t).forEach(function(t){-1===l.indexOf(t)&&console.warn(this._initMessagePrefix+"ignoring invalid option: `"+t+"`.")}.bind(this)),e||a.required(t.authorizationCallback,this._initMessagePrefix+"`options` is missing `authorizationCallback`.",{checkNull:!0}).checkType(t.authorizationCallback,"function",this._initMessagePrefix+"`authorizationCallback` in `options` must be a function."),t.language&&(a.checkType(t.language,"string",this._initMessagePrefix+"`language` in `options` must be a string."),this._optionsLanguage=t.language),this._userInitializedInit)console.warn(this._initMessagePrefix+"already initialized; ignoring.");else{e||(this._userInitializedInit=!0),t&&"object"===typeof t&&("_previewLoCSR"in t&&t._previewLoCSR&&(this._forcedRenderingMode="HYBRID"),"_forcedRenderingMode"in t&&(this._forcedRenderingMode=t._forcedRenderingMode),"_proxyPrefixes"in t&&Array.isArray(t._proxyPrefixes)&&(this._proxyPrefixes=t._proxyPrefixes),"_distUrl"in t&&(this._distUrl=t._distUrl),"_syrupUrl"in t&&(this._syrupUrl=t._syrupUrl)),o.prototype.init.call(this,t,e),t&&"object"===typeof t&&"libraries"in t&&r.IS_CHUNKED&&r.load(t.libraries);var i=new s.Event(this.Events.Initialized);this.dispatchEvent(i)}}});var c=new h;c.withParameters({mkjsVersion:n.version,poi:"1"}),t.exports=c},1944:function(t,e,i){var n=i(1945),o=i(1948),a=i(1952),s=i(1954),r=i(1957),l=i(1959),h={url:"https://cdn.apple-mapkit.com/ma/bootstrap",apiVersion:"2",accessKeyExpirationBiasMS:3e4},c={OK:200,MULTIPLE_CHOICES:300,BAD_REQUEST:400,UNAUTHORIZED:401,TOO_MANY_REQUESTS:429},d=["mkjsVersion","messagePrefix","poi"],u={READY:0,PENDING:1,ERROR:2,UNINITIALIZED:3},p={BadRequest:"Bad Request",Unauthorized:"Unauthorized",TooManyRequests:"Too Many Requests",MalformedResponse:"Malformed Response",Timeout:"Timeout",NetworkError:"Network Error",Unknown:"Unknown"},m=Math.random().toString(36);function g(){}g.prototype=o.inheritPrototype(a.EventTarget,g,{HTTP:c,ErrorStatus:p,Events:{Initialized:"configuration-init",Changed:"configuration-change",Error:"error"},States:u,state:u.UNINITIALIZED,authorizationCallback:null,tileProvider:"Apple",_countryCode:null,_showMapsLogo:!0,_mirrorLegalLink:!1,_madabaBaseUrl:null,customMadabaUrl:!1,_madabaDomains:null,_accessKey:null,_accessToken:null,_distUrl:null,_syrupUrl:null,apiBaseUrl:null,apiBaseUrlOverride:null,types:{},_acceptLanguage:null,_optionsLanguage:null,_bootstrapRequestParams:null,_showsTileInfo:!1,_messagePrefix:"[MapKit] ",get _initMessagePrefix(){return this._messagePrefix+"mapkit.init(): "},withParameters:function(t){return d.forEach((function(e){e in t&&(this["_"+e]=t[e])}),this),this},init:function(t,e){var i=(this.state===u.UNINITIALIZED||this.state===u.ERROR)&&t.authorizationCallback;i&&(this.state=u.PENDING),this.authorizationCallback=t.authorizationCallback,o.isNode()&&t.origin&&(this.origin=t.origin),this.language?this._l10n&&(this._l10n.localeId=this.language):this.language=this._optionsLanguage,"countryCode"in t&&(this._countryCode=t.countryCode),"_showMapsLogo"in t&&(this._showMapsLogo=!!t._showMapsLogo),"_mirrorLegalLink"in t&&(this._mirrorLegalLink=!!t._mirrorLegalLink),t.bootstrapTimeout&&(this._bootstrapTimeout=t.bootstrapTimeout),t.madabaBaseUrl&&(this._madabaBaseUrl=t.madabaBaseUrl,this.customMadabaUrl=!0),t._showsTileInfo&&(this._showsTileInfo=t._showsTileInfo),i&&this._loadFromServer()},reloadFromServer:function(){this._loadFromServer()},get accessKey(){return this._accessKey},get accessToken(){return this._accessToken},accessKeyHasExpired:function(){this._loadFromServer(r.Highest)},get ready(){return this.state===u.READY},get error(){return this.state===u.ERROR},get language(){return this._language},set language(t){t!==this._language&&(t?o.checkType(t,"string","[MapKit] `language` must be a string or `null`."):t=this._acceptLanguage||this._getClientLanguage(),this._language=n.bestMatch(t,"en"),this.state!==u.UNINITIALIZED&&this._l10n&&(this._l10n.localeId=t))},get countryCode(){return this._countryCode},set countryCode(t){t!==this._countryCode&&(t&&(o.checkType(t,"string","[MapKit] `countryCode` must be a string or `null`."),t=t.toUpperCase()),this._countryCode=t,this._loadFromServer())},get showMapsLogo(){return this._showMapsLogo},get mirrorLegalLink(){return this._mirrorLegalLink},get isAutoNavi(){return"AutoNavi"===this.tileProvider||this.state===u.PENDING&&"CN"===this._countryCode},get showsTileInfo(){return this._showsTileInfo},syrupRequestedFallback:function(t){this._syrupRequestedFallback=!0,this._syrupRequestedFallbackType=t,setTimeout(function(){var t=new a.Event(this.Events.Changed);t.status="Refreshed",this.dispatchEvent(t)}.bind(this),0)},get canRunCSR(){var t="CLIENT"===this.forcedRenderingMode||"HYBRID"===this.forcedRenderingMode,e="SERVER"===this.forcedRenderingMode;return!(!this.ready||e||this._disableCsr&&!t||this._syrupRequestedFallback)},get madabaDomains(){return this.customMadabaUrl||!this._madabaDomains&&this._madabaBaseUrl?[this._madabaBaseUrl]:this._madabaDomains?this._madabaDomains:null},appendAuthOptions:function(t,e){return o.isNode()&&this.origin&&(t.origin=this.origin),(e||this.accessToken)&&(t.headers={Authorization:o.fillTemplate("Bearer {{token}}",{token:e||this.accessToken})}),t},appendServiceAuthOptions:function(t){return t.withCredentials=this.withCredentials,this.isAutoNavi?t:this.appendAuthOptions(t)},setL10n:function(t){this._l10n=t,this.state!==u.UNINITIALIZED&&(this._l10n.localeId=this.language)},loaderWillStart:function(t){this.state=u.PENDING},loaderDidSucceed:function(t,e){this._requestDidLoad(e)},loaderDidFail:function(t,e){this._parseError(t._xhr)},_loadFromServer:function(t){this._bootstrapRequestParams={apiVersion:h.apiVersion,countryCode:this._countryCode,mkjsVersion:this._mkjsVersion,poi:this._poi};var e=h.url+"?"+o.toQueryString(this._bootstrapRequestParams);this.proxyPrefixes&&(e=this.proxyPrefixes[0]+e);var i={retry:!0,delay:0,priority:t,timeout:this._bootstrapTimeout,withCredentials:this.withCredentials};!o.isNode()&&this.withCredentials&&/\bapple\.com\b/.test(this.proxyPrefixes[0])&&!/\bapple\.com$/.test(window.location.hostname)&&console.warn("[MapKit] Request with credentials may fail if the page is not hosted on the same domain as the proxy."),l(this.authorizationCallback,null,[function(t){!function(t){if(t!==m){m=t;var e="[MapKit] Authorization token is invalid.";if("string"===typeof t){var i=t.split(".");if(3===i.length){try{i.pop(),i=i.map((function(t){return JSON.parse(o.atob(t))}))}catch(r){return void console.warn(e)}"alg"in i[0]?"ES256"!==i[0].alg&&console.warn('[MapKit] Authorization token has incorrect "alg" value.'):console.warn('[MapKit] Authorization token has no "alg" value.'),"typ"in i[0]?"JWT"!==i[0].typ&&console.warn('[MapKit] Authorization token has incorrect "typ" value.'):console.warn('[MapKit] Authorization token has no "typ" value.'),"kid"in i[0]||console.warn('[MapKit] Authorization token has no "kid" value.');var n=Date.now(),a=1e3*parseInt(i[1].iat);if(!("iat"in i[1])||isNaN(a)?console.warn('[MapKit] Authorization token has no "iat" value.'):a>n+36e5&&console.warn('[MapKit] Authorization token may have an "iat" value that is in the future ('+new Date(a)+")."),"exp"in i[1]){var s=1e3*parseInt(i[1].exp);s<n||isNaN(s)?console.warn('[MapKit] Authorization token may be expired according to its "exp" value.'):s>n+31536e6&&console.warn("[MapKit] Authorization token with expiration date greater than 1 year is not recommended in production environments.")}else isNaN(a)||console.warn("[MapKit] Authorization token (created on "+new Date(a)+") without an expiration is not recommended in production environments.");o.isNode()||"origin"in i[1]||console.warn("[MapKit] Authorization token without origin restriction is not recommended in production environments.")}else console.warn(e)}else console.warn(e)}}(t),this.appendAuthOptions(i,t),this.accessToken&&(i.headers["X-Maps-Access-Token"]=o.fillTemplate("Bearer {{token}}",{token:this.accessToken})),new s(e,this,i).schedule()}.bind(this)])},_requestDidLoad:function(t){if(!this._parseError(t))try{var e=JSON.parse(t.responseText);this._processLoadedData(e)}catch(i){this._loadFailed(p.MalformedResponse,"Initialization failed because of incorrect server response.")}},_resetReloadTimer:function(t){clearTimeout(this._reloadTimerId),this._reloadTimerId=setTimeout(function(){delete this._reloadTimerId,this.accessKeyHasExpired()}.bind(this),t),o.isNode()&&this._reloadTimerId.unref()},_loadSucceeded:function(t){setTimeout(function(){this.state=u.READY;var e=new a.Event(this.Events.Changed);e.status=t?"Refreshed":"Initialized",this.dispatchEvent(e)}.bind(this),0)},_loadFailed:function(t,e){console.error(this._messagePrefix+e),setTimeout(function(){this.state=u.ERROR;var i=new a.Event(this.Events.Error);i.status=t,i.message=this._messagePrefix+e,this.dispatchEvent(i)}.bind(this),0)},_processLoadedData:function(t){var e=!!this._accessToken;this._parseData(t),this.expiresInSeconds&&this._resetReloadTimer(this._adjustedExpirationInSeconds(this.expiresInSeconds)),this.language||(this.language=this._optionsLanguage),this._loadSucceeded(e)},_parseData:function(t){var e;if(t.apiBaseUrl,this._countryCode="unknown"!==t.countryCode?t.countryCode:null,this.environment=t.environment,this.apiBaseUrl=this.apiBaseUrlOverride||t.apiBaseUrl,this.proxyPrefixes&&(e=this.proxyPrefixes[this.proxyPrefixes.length-1],this.apiBaseUrl=e+this.apiBaseUrl),t.analytics){var i=t.analytics;this.proxyPrefixes&&(i.analyticsUrl=e+i.analyticsUrl,i.errorUrl=e+i.errorUrl),this.analytics=i}t.authInfo&&t.authInfo.team_id&&(this.teamId=t.authInfo.team_id),t.locationShiftUrl&&(this.proxyPrefixes?this.locationShiftUrl=e+t.locationShiftUrl:this.locationShiftUrl=t.locationShiftUrl),this.expiresInSeconds=t.expiresInSeconds,this.customMadabaUrl||!t.madabaBaseUrl&&!t.madabaDomains||(this._madabaBaseUrl=t.madabaBaseUrl,this._madabaDomains=t.madabaDomains&&t.madabaDomains.length&&t.madabaDomains.map(function(t){return t.match(/^(https?:)?\/\//)?t:-1!==t.indexOf(":")&&this.proxyPrefixes?"http://"+t:"https://"+t}.bind(this))),this._disableCsr=!!t.disableCsr,t.accessKey&&(this._accessKey=t.accessKey),t.authInfo&&t.authInfo.access_token&&(this._accessToken=t.authInfo.access_token),this._acceptLanguage=this._parseAcceptLanguage(t.acceptLanguage),this.tileProvider="Apple";var n={};t.attributions&&t.attributions.forEach((function(t){n[t.attributionId]=t,this.tileGroup=t.attributionId}),this);var o={};for(var a in t.tileSources.forEach(function(t){var e=t.tileSource;o[e]={name:e,path:t.path,domains:t.domains,proxyPrefixes:this.proxyPrefixes,withCredentials:this.withCredentials,crossOrigin:!0,protocol:t.protocol||(this.proxyPrefixes&&-1!==t.domains[0].indexOf(":")?"http:":"https:"),attribution:n[t.attributionId],minZoomLevel:t.minZoomLevel,maxZoomLevel:t.maxZoomLevel,supportedSizes:t.supportedSizes,supportedResolutions:t.supportedResolutions,showPrivacyLink:t.showPrivacyLink,showTermsOfUseLink:t.showTermsOfUseLink},t.needsLocationShift&&(this.tileProvider="AutoNavi"),o[e].attribution&&o[e].attribution.global&&(o[e].attribution.name=o[e].attribution.global[0].name,o[e].attribution.url=o[e].attribution.global[0].url)}.bind(this)),this.types={},this.rasterTilesForSyrup={},t.modes){var s=t.modes[a].layers;this.types[a]={name:a,provider:this.tileProvider,lowResolutionTileSource:o[s[0].lowResTileSource],tileSources:s.map((function(t){return o[t.tileSource]}))},this.rasterTilesForSyrup[a]={name:a,provider:this.tileProvider,tileSources:s.map((function(t){return o[t.tileSource]}))}}},_parseError:function(t){var e,i,n=t.status;if(n>=c.OK&&n<c.MULTIPLE_CHOICES)return!1;if(this._userInitializedInit=!1,t.readyState!==t.DONE)i=p.Timeout,e="Initialization failed because the request timed out after "+this._bootstrapTimeout+" ms.";else if(n===c.UNAUTHORIZED){i=p.Unauthorized,e="Initialization failed because the authorization token is invalid.";try{var o=JSON.parse(t.responseText);o.error&&o.error.details&&Array.isArray(o.error.details)&&o.error.details.forEach((function(t){t&&"ORIGIN_CHECK_FAILURE"===t.errorType&&t.message&&(e+=" "+t.message)}))}catch(a){if("SyntaxError"!==a.name)throw a}}else n===c.TOO_MANY_REQUESTS?(i=p.TooManyRequests,e="Initialization failed because the daily usage limit has exceeded."):0===n?(i=p.NetworkError,e="Initialization failed because of network error."):(i=p.Unknown,e="Initialization failed because the server returned error "+n+" ("+t.statusText+").");return this._loadFailed(i,e),!0},_getClientLanguage:function(){return o.isNode()?"en-US":window.navigator.languages?window.navigator.languages[0]:window.navigator.language},_parseAcceptLanguage:function(t){var e=n.constructor.parseAcceptLanguage(t);return e&&e[0].langTag?e[0].langTag.tag:null},_adjustedExpirationInSeconds:function(t){return 1e3*t-h.accessKeyExpirationBiasMS},_restore:function(){delete this._proxyPrefixes,delete this._forcedRenderingMode,delete this._userInitializedInit,this._distUrl=null,this.authorizationCallback=null,this._acceptLanguage=null,this._optionsLanguage=null,delete this._language,this.apiBaseUrl=null,this.apiBaseUrlOverride=null,this.state=u.UNINITIALIZED,this._listeners={},clearTimeout(this._reloadTimerId),delete this._reloadTimerId},_debugInfo:function(){var t={};return["ready","state","_countryCode","tileProvider","apiBaseUrl","language","_acceptLanguage","_optionsLanguage","_getClientLanguage","types"].forEach((function(e){t[e]="function"===typeof this[e]?this[e]():this[e]}),this),t}}),o.isNode()&&(g.prototype.MapsWS=h),t.exports=g},1945:function(t,e,i){var n=new(i(1946))({supportedLocales:i(1949),regionToScriptMap:i(1950),localesMap:i(1951)});t.exports=n},1946:function(t,e,i){"use strict";var n=i(1947);function o(t){this.supportMap=Object.create(null),this.delegate=t,this.delegate.supportedLocales.forEach((function(t){!function(t,e){var i=t.language,n=t.region,o=t.script;e[i]||(e[i]={regions:[],scripts:[]}),n&&e[i].regions.push(n),o&&e[i].scripts.push(o)}(n.parse(t),this.supportMap)}),this)}o.prototype={constructor:o,bestMatch:function(t,e){var i=n.parse(t),o=null;if(i&&this.delegate.localesMap){var a=this.delegate.localesMap;a[i.tag]?i=n.parse(a[i.tag]):a[i.language]&&(i=n.parse(a[i.language]))}return e=e||null,i&&(o=function(t,e,i){var o=t.language,a=t.region,s=t.script,r=i[o];if(!r)return null;if(a){var l=r.regions.filter((function(e){return e.toUpperCase()===t.region.toUpperCase()}))[0];if(l)return new n(o,l);var h=e[o];h&&h[a.toUpperCase()]&&(t.script=s=h[a.toUpperCase()])}if(s){var c=r.scripts.filter((function(e){return e.toUpperCase()===t.script.toUpperCase()}))[0];return new n(o,null,c)}return new n(o)}(i,this.delegate.regionToScriptMap,this.supportMap)),o?o.tag:e}},o.parseAcceptLanguage=function(t){return t?t.split(",").map((function(t){if(!t)return null;var e=t.split(";");return{langTag:n.parse(e[0]),quality:e[1]?parseFloat(e[1].split("=")[1]):1}})).filter((function(t){return!!t})).sort((function(t,e){return e.quality-t.quality})):null},t.exports=o},1947:function(t,e,i){"use strict";var n=i(1948);function o(t,e,i){this.language=t.toLowerCase(),e&&(this.region=e.toUpperCase()),i&&(this.script=n.capitalize(i))}o.prototype={constructor:o,get tag(){var t=this.language;return this.region?t+"-"+this.region:this.script?t+"-"+this.script:t},toString:function(){var t="{ language: "+this.language;return this.region&&(t+=", region: "+this.region),this.script&&(t+=", script: "+this.script),t+" }"}},o.parse=function(t){var e,i,n;if(t&&"string"===typeof t){if(-1!==t.indexOf("_"))return console.warn("Invalid character: '_'"),null;var a=t.split("-");if((e=a[0]).length<2||e.length>4)return console.warn("Invalid language:",t),null;if(!(a.length<4))return console.warn("Don't know how to parse language tags with more than 3 parts:",t),null;for(var s=1;s<a.length;s++){var r=a[s];if(4===r.length)n=r;else{if(!(r.length>1&&r.length<4))return console.warn("Don't know how to parse:",t),null;i=r}}return new o(e,i,n)}return null},t.exports=o},1948:function(t,e,i){var n=Math.log(2),o=[/MSIE [5-9]\./,/Firefox\/[1-9]\./,/Firefox\/[1-2][0-9]\./,/Firefox\/3[0-1]\./,/Firefox\/[0-9]\./,/Firefox\/[1-2][0-9]\./,/Firefox\/3[0-6]\./,/Android [0-3]\./,/Android 4\.[0-3]\./],a=[/\(Macintosh; Intel Mac OS X 11_??\)*/,/\(Macintosh; Intel Mac OS X 10.9*\)*/,/\(Macintosh; Intel Mac OS X 10_9*\)*/,/\(Macintosh; Intel Mac OS X 10_??;*\)*/,/\(Macintosh; Intel Mac OS X 10.??;*\)*/,/\(Macintosh; Intel Mac OS X 10_??_*\)*/,/\(Macintosh; Intel Mac OS X 10.??.*\)*/,/\(Macintosh; Intel Mac OS X 10_??\)*/,/\(Macintosh; Intel Mac OS X 10.??\)*/,/iP(hone|od|ad)/],s={KeyCodes:{Tab:9,Enter:13,Escape:27,SpaceBar:32,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40},get iOSVersion(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]}return null},noop:function(){},isEdge:function(){return/Edge\//i.test(navigator.userAgent)},isIEAndNotEdge:function(){return/MSIE|Trident\//i.test(navigator.userAgent)},isNode:function(){return!1},isUnsupportedBrowser:function(t){return o.some((function(e){return e.test(t)}))},hasMapsApp:function(t){return a.some((function(e){return e.test(t)}))},mod:function(t,e){return t-e*Math.floor(t/e)},log2:function(t){return Math.log(t)/n},clamp:function(t,e,i){return Math.max(e,Math.min(t,i))},inheritPrototype:function(t,e,i){var n={constructor:{enumerable:!0,value:e}};return Object.keys(i).forEach((function(t){var e=Object.getOwnPropertyDescriptor(i,t);e&&(n[t]=e)})),Object.create(t.prototype,n)},checkValueIsInEnum:function(t,e){return Object.keys(e).some((function(i){return e[i]===t}))},required:function(t,e,i){if("checkNull"in(i=i||{})||(i.checkNull=!0),void 0===t||i.checkNull&&null===t)throw new Error(e||"Missing parameter");return this},checkType:function(t,e,i){if(typeof t!==e)throw new TypeError(i||"Expected `"+e+"` but got `"+typeof t+"`");if("number"===e&&isNaN(t))throw new TypeError(i||"Expected `"+e+"` but got `NaN`");if("object"===e&&t instanceof Array)throw new TypeError(i||"Expected a non-array object but got an array");return this},checkInstance:function(t,e,i){if(!(t instanceof e))throw new Error(i||"Unexpected object instance");return this},checkElement:function(t,e){if(!this.isElement(t))throw new Error(e||"Expected an Element");return this},checkArray:function(t,e){if(!Array.isArray(t))throw new Error(e||"Expected an array");return this},checkOptions:function(t,e){return null!==t&&void 0!==t?this.checkType(t,"object",e||"[MapKit] The `options` parameter is not a valid object."):t={},t},isElement:function(t){return t instanceof window.Node&&t.nodeType===window.Node.ELEMENT_NODE},get supportsLocalStorage(){if("_supportsLocalStorage"in this)return this._supportsLocalStorage;if(this._supportsLocalStorage=!1,s.isNode())return!1;try{if(!window.localStorage)return!1;if("function"!==typeof window.localStorage.setItem||"function"!==typeof window.localStorage.getItem||"function"!==typeof window.localStorage.removeItem)return!1;var t="storageTest";if(window.localStorage.setItem(t,t),window.localStorage.getItem(t)!==t)return!1;window.localStorage.removeItem(t),this._supportsLocalStorage=!0}catch(e){return!1}return this._supportsLocalStorage},fillTemplate:function(t,e,i){return t.replace(/{{(.*?)}}/g,(function(t,n){var o=e[n];if(i&&null==o)throw new Error("fillTemplate: Missing value for parameter: "+n);return o}))},generateSrcSetString:function(t){var e=[];if(Array.isArray(t)&&3===t.length)for(var i=0;i<3;i++)e.push(t[i]+" "+(i+1)+"x");else for(var n=t,o=1;o<=3;o++)e.push(this.fillTemplate(n,{scale:o})+" "+o+"x");return e.join(", ")},xhr:function(t){var e;return(e=new XMLHttpRequest).addEventListener("load",t),e.addEventListener("error",t),e.addEventListener("timeout",t),e},parseURL:function(t){var e=document.createElement("a");return e.href=t,e.protocol||(e.protocol=location.protocol),["href","protocol","hostname","port","pathname","search","hash"].reduce((function(t,i){return t[i]=e[i],t}),{})},toQueryString:function(t,e){return null===t||"object"!==typeof t?"":(e||Object.keys(t)).reduce((function(e,i){var n=t[i];return n&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(n)),e}),[]).join("&")},splitStringAtSubStringAndReplace:function(t){var e=[],i=t.text.toLowerCase().indexOf(t.subString.toLowerCase());if(t.text&&!(i<0)&&t.replaceSubString){var n=t.text.substr(0,i);n&&e.push(t.replacePre?t.replacePre(n):n);var o=t.text.substr(i,t.subString.length);e.push(t.replaceSubString(t.subString,o));var a=t.text.substr(i+t.subString.length);return a&&e.push(t.replacePost?t.replacePost(a):a),e}},isSameOrigin:function(t,e){return t=this.parseURL(t),e=this.parseURL(e),t.hostname===e.hostname&&t.protocol===e.protocol},capitalize:function(t){return t?t[0].toUpperCase()+t.substr(1).toLowerCase():t},generateSessionIdValue:function(){return Math.floor(1e15*(9*Math.random()+1))},doNotTrack:function(){var t=window&&(window.navigator&&(navigator.doNotTrack||navigator.msDoNotTrack)||window.doNotTrack);return"1"===t||"yes"===t},supportsTouches:function(){return"ontouchmove"in document},isSpaceKey:function(t){return t.keyCode===this.KeyCodes.SpaceBar},isEnterKey:function(t){return t.keyCode===this.KeyCodes.Enter},isTabKey:function(t){return t.keyCode===this.KeyCodes.Tab},isEscapeKey:function(t){return t.keyCode===this.KeyCodes.Escape},createCanvas:function(){return document.createElement("canvas")},atob:function(t){return window.atob(t)}};t.exports=s},1949:function(t){t.exports=JSON.parse('["ar","ca","cs","da","de","el","en","en-AU","en-GB","es","es-MX","es-US","fi","fr","fr-CA","he","hi","hr","hu","id","it","ja","ko","ms","nb","nl","pl","pt","pt-PT","ro","ru","sk","sv","th","tr","uk","vi","zh-Hans","zh-Hant","zh-HK"]')},1950:function(t){t.exports=JSON.parse('{"zh":{"CN":"Hans","HK":"Hant","TW":"Hant"}}')},1951:function(t){t.exports=JSON.parse('{"en-AU":"en-GB","en-IE":"en-GB","en-IN":"en-GB","en-NZ":"en-GB","en-SG":"en-GB","en-ZA":"en-GB","es-LA":"es-MX","es-XL":"es-MX","nn-NO":"nb-NO","no-NO":"nb-NO","vi-VI":"vi-VN","iw":"he-IL"}')},1952:function(t,e,i){var n=i(1953),o={EventTarget:n.EventTarget,Event:n.Event};t.exports=o},1953:function(t,e,i){function n(t){if(t)return t.addEventListener=n.prototype.addEventListener,t.removeEventListener=n.prototype.removeEventListener,t.dispatchEvent=n.prototype.dispatchEvent,t}function o(t){this.type=t,this.target=null,this.defaultPrevented=!1,this._stoppedPropagation=!1}n.prototype={constructor:n,addEventListener:function(t,e,i){if(i=i||null,!t)return!1;if(!e)return!1;this._listeners||(this._listeners={});var n=this._listeners[t];n||(n=this._listeners[t]=[]);for(var o=0;o<n.length;++o)if(n[o].listener===e&&n[o].thisObject===i)return!1;return n.push({thisObject:i,listener:e}),!0},removeEventListener:function(t,e,i){if(t=t||null,e=e||null,i=i||null,!this._listeners)return!1;if(!t){for(t in this._listeners)this.removeEventListener(t,e,i);return!1}var n=this._listeners[t];if(!n)return!1;for(var o=!1,a=n.length-1;a>=0;--a)if(e&&n[a].listener===e&&n[a].thisObject===i||!e&&i&&n[a].thisObject===i){n.splice(a,1),o=!0;break}return n.length||delete this._listeners[t],Object.keys(this._listeners).length||delete this._listeners,o},dispatchEvent:function(t){if(t.target=this,!this._listeners||!this._listeners[t.type]||t._stoppedPropagation)return!0;for(var e=this._listeners[t.type].slice(0),i=0;i<e.length;++i){var n=e[i].thisObject,o=e[i].listener;if(n||"function"===typeof o||"function"!==typeof o.handleEvent?o.call(n,t):o.handleEvent.call(o,t),t._stoppedPropagation)break}return!t.defaultPrevented}},o.prototype={constructor:o,stopPropagation:function(){this._stoppedPropagation=!0},preventDefault:function(){this.defaultPrevented=!0}},t.exports={EventTarget:n,Event:o}},1954:function(t,e,i){var n=i(1948),o=i(1955),a=i(1957);function s(t,e,i){var s=(i=i||{}).priority||a.Highest;o.call(this,s,e),this._url=t,this._method=i.method||"GET",this._retry=!0===i.retry,this._delay=i.delay,this._headers=i.headers,this._timeout=i.timeout,this._withCredentials=i.withCredentials,n.isNode()&&(this._origin=i.origin)}s.prototype=n.inheritPrototype(o,s,{get xhrData(){return this._xhrData},unschedule:function(){return this._xhr&&this._xhr.abort(),o.prototype.unschedule.call(this)},loaderWillStart:function(){o.prototype.loaderWillStart.call(this),this._xhr=n.xhr(this),this._xhr.open(this._method,this._url,!0),this._xhr.timeout=this._timeout,this._xhr.withCredentials=this._withCredentials,this._origin&&(this._xhr.setDisableHeaderCheck(!0),this._xhr.setRequestHeader("Origin",this._origin)),this._headers&&Object.keys(this._headers).forEach((function(t){this._xhr.setRequestHeader(t,this._headers[t])}),this),("POST"!==this._method||this._xhrData||(this._xhrData=this._delegate.getDataToSend(this._xhr),this._xhrData))&&this._xhr.send(this._xhrData)},handleEvent:function(t){"error"===t.type||"timeout"===t.type||200!==t.target.status?this._retry?o.prototype._reload.call(this):this.loaderDidFail(t.target):"load"===t.type?this.loaderDidSucceed(t.target):console.log("Unhandled XHR event type:",t.type," status:",t.target.status)}}),t.exports=s},1955:function(t,e,i){var n=i(1956),o=i(1958);function a(t,e){this.init(t,e)}a.prototype={constructor:a,get state(){return this._state},schedule:function(){this._state||(this._state=o.Waiting,n.schedule(this))},unschedule:function(){var t=!1;if(this._state===o.Waiting)t=n.unschedule(this);else{if(this._state!==o.Loading)return!1;n.loaderDidComplete(this),t=!0}return this._unscheduled=t,this._state=o.Canceled,"function"===typeof this._delegate.loaderDidCancel&&this._delegate.loaderDidCancel(this),this._reset(),t},loaderWillStart:function(){this._state=o.Loading,"function"===typeof this._delegate.loaderWillStart&&this._delegate.loaderWillStart(this)},loaderDidSucceed:function(t){this._state=o.Succeeded,n.loaderDidComplete(this),"function"===typeof this._delegate.loaderDidSucceed&&this._delegate.loaderDidSucceed(this,t),this._reset()},loaderDidFail:function(t){this._state=o.Failed,n.loaderDidComplete(this),"function"===typeof this._delegate.loaderDidFail&&this._delegate.loaderDidFail(this,t),this._reset()},init:function(t,e){this._delegate=e,this._state=o.Unscheduled,this._retries=0,this._timeoutID=-1,this.priority=t,this._unscheduled=!1},_reset:function(){clearTimeout(this._timeoutID)},_reload:function(){if(this._retries++,this._retries<3){var t="number"===typeof this._delay?this._delay:1e4;this._timeoutID=setTimeout(this.loaderWillStart.bind(this),t)}else this.loaderDidFail()}},t.exports=a},1956:function(t,e,i){var n=i(1957),o=[];o[n.Highest]=12,o[n.High]=12,o[n.Medium]=4,o[n.Low]=1;var a=[],s=[];for(var r in n)a[n[r]]=[],s[n[r]]=0;function l(){for(var t in n){if(a[n[t]].length>0){if(s[n[t]]===o[n[t]])break;return a[n[t]][0]}if(s[n[t]]>0)break}return null}function h(){for(var t in n)if(a[n[t]].length>0)return a[n[t]].shift(),!0;return!1}function c(){for(var t=l();t;)s[t.priority]++,h(),t.loaderWillStart(),t=l()}t.exports={schedule:function(t){a[t.priority].push(t),c()},unschedule:function(t){return function(t){for(var e in n){var i=a[n[e]].indexOf(t);if(-1!==i)return a[n[e]].splice(i,1),!0}return!1}(t)},loaderDidComplete:function(t){s[t.priority]--,c()}}},1957:function(t,e){t.exports={Highest:0,High:1,Medium:2,Low:3}},1958:function(t,e){t.exports={Unscheduled:0,Waiting:1,Loading:2,Canceled:3,Succeeded:4,Failed:5}},1959:function(t,e){var i="function"===typeof ErrorEvent;t.exports=function(t,e,n,o){if(!i)return t.apply(e,n);try{return t.apply(e,n)}catch(s){console.error(s);var a=new ErrorEvent("error",{message:s.message||s.toString()||"(Unknown error)",filename:s.fileName||s.stack||"(Unknown filename)",lineno:s.lineNumber,colno:s.columnNumber,error:s});return window.dispatchEvent(a),o}}},1960:function(t,e,i){var n=i(1952),o={Libraries:[],Events:{LOAD:"load",LOADEND:"loadend",LOAD_ERROR:"load-error"},jsModules:{mapkit:{}},_chunkLoaded:function(t,e){Object.keys(t).forEach(function(e){"mapkit"!==e?this.jsModules[e]=t[e]:Object.keys(t.mapkit).forEach(function(e){this.jsModules.mapkit[e]=t.mapkit[e]}.bind(this))}.bind(this));var i=new n.Event(this.Events.LOAD);i.jsModules=t,this.dispatchEvent(i),e&&e()},_dispatchLoadEndEvent:function(t){var e=new n.Event(this.Events.LOADEND);e.libraryNames=t,this.dispatchEvent(e)}};n.EventTarget(o),t.exports=o},1961:function(t,e,i){var n=i(1953),o=i(1959);function a(){}a.prototype=Object.create(n.EventTarget.prototype),a.prototype.dispatchEvent=function(t){return o(n.EventTarget.prototype.dispatchEvent,this,[t],!0)};var s={EventTarget:a,Event:n.Event};t.exports=s},1962:function(t,e){t.exports=""},1963:function(t,e,i){t.exports=function(t){t.IS_CHUNKED=!1,t.loadAll=function(){var t=i(1964);this._chunkLoaded(t,this._dispatchLoadEndEvent.bind(this,["all"]))}}},1964:function(t,e,i){var n={mapkit:{}},o=i(1965),a=i(2201);[o,i(2209),a].forEach((function(t){Object.keys(t).forEach((function(e){"mapkit"!==e?n[e]=t[e]:Object.keys(t.mapkit).forEach((function(e){n.mapkit[e]=t.mapkit[e]}))}))})),t.exports=n},1965:function(t,e,i){var n={mapkit:{}};[i(1966),i(2102),i(2131),i(2182),i(2188)].forEach((function(t){Object.keys(t).forEach((function(e){"mapkit"!==e?n[e]=t[e]:Object.keys(t.mapkit).forEach((function(e){n.mapkit[e]=t.mapkit[e]}))}))})),t.exports=n},1966:function(t,e,i){var n=i(1967),o=i(1969);t.exports={MapInternal:i(1971),PointOfInterestFilter:n,css:i(2101),utils:i(1986),mapkit:{FeatureVisibility:i(1988).FeatureVisibility,CoordinateRegion:o.CoordinateRegion,CoordinateSpan:o.CoordinateSpan,Coordinate:o.Coordinate,BoundingRegion:o.BoundingRegion,MapPoint:o.MapPoint,MapRect:o.MapRect,MapSize:o.MapSize,Padding:i(2005),CameraZoomRange:o.CameraZoomRange,Map:i(2099),PointOfInterestCategory:i(1968),PointOfInterestFilter:n.exposedConstructor}}},1967:function(t,e,i){var n=i(1948),o=i(1968);function a(t){return t.map((function(t){if(!n.checkValueIsInEnum(t,o))throw new Error("[MapKit] Unknown category `"+t+"`. Choose from mapkit.PointOfInterestCategory.");return t}))}function s(t){if("includes"in(t=n.checkOptions(t))&&"excludes"in t)throw new Error("[MapKit] `includes` and `excludes` may not be specified at the same time.");if(!("includes"in t)&&!("excludes"in t))throw new Error("[MapKit] Either `includes` or `excludes` should be specified.");"includes"in t&&(this._includes=a(t.includes)),"excludes"in t&&(this._excludes=a(t.excludes))}var r=function(){throw new Error("[MapKit] `PointOfInterestFilter` may not be constructed directly. Use the mapkit.PointOfInterestFilter.including or the mapkit.PointOfInterestFilter.excluding methods.")};s.prototype=r.prototype={constructor:r,_includes:null,_excludes:null,includesCategory:function(t){if(!n.checkValueIsInEnum(t,o))throw new Error("[MapKit] Unknown category `"+t+"`. Choose from mapkit.PointOfInterestCategory.");return this._includes?-1!==this._includes.indexOf(t):this._excludes?-1===this._excludes.indexOf(t):void 0},excludesCategory:function(t){if(!n.checkValueIsInEnum(t,o))throw new Error("[MapKit] Unknown category `"+t+"`. Choose from mapkit.PointOfInterestCategory.");return this._includes?-1===this._includes.indexOf(t):this._excludes?-1!==this._excludes.indexOf(t):void 0}},Object.defineProperties(r,{including:{get:function(){return s.including}},excluding:{get:function(){return s.excluding}}}),Object.defineProperties(s,{exposedConstructor:{value:r},including:{value:function(t){return n.checkArray(t,"[MapKit] mapkit.pointOfInterestFilterIncludingCategories expected an array of categories."),new s({includes:t})}},excluding:{value:function(t){return n.checkArray(t,"[MapKit] mapkit.pointOfInterestFilterExcludingCategories expected an array of categories."),new s({excludes:t})}},filterIncludingAllCategories:{get:function(){var t=this.excluding([]);return Object.defineProperty(this,"filterIncludingAllCategories",{value:t}),t},configurable:!0},filterExcludingAllCategories:{get:function(){var t=this.including([]);return Object.defineProperty(this,"filterExcludingAllCategories",{value:t}),t},configurable:!0}}),t.exports=s},1968:function(t,e){t.exports={Airport:"Airport",AmusementPark:"AmusementPark",Aquarium:"Aquarium",ATM:"ATM",Bakery:"Bakery",Bank:"Bank",Beach:"Beach",Brewery:"Brewery",Cafe:"Cafe",Campground:"Campground",CarRental:"CarRental",EVCharger:"EVCharger",FireStation:"FireStation",FitnessCenter:"FitnessCenter",FoodMarket:"FoodMarket",GasStation:"GasStation",Hospital:"Hospital",Hotel:"Hotel",Laundry:"Laundry",Library:"Library",Marina:"Marina",MovieTheater:"MovieTheater",Museum:"Museum",NationalPark:"NationalPark",Nightlife:"Nightlife",Park:"Park",Parking:"Parking",Pharmacy:"Pharmacy",Police:"Police",PostOffice:"PostOffice",PublicTransport:"PublicTransport",Restaurant:"Restaurant",Restroom:"Restroom",School:"School",Stadium:"Stadium",Store:"Store",Theater:"Theater",University:"University",Winery:"Winery",Zoo:"Zoo"}},1969:function(t,e,i){var n=i(1948),o=i(1970),a=Math.PI/180,s=Math.PI/4,r=2*Math.PI;function l(t){var e=n.clamp(t,1e-8-90,90-1e-8)*a;return.5+Math.log(Math.tan(s-e/2))/r}function h(t){var e=Math.pow(Math.E,2*Math.PI*(t-.5));return-2*(Math.atan(e)-Math.PI/4)/Math.PI*180}function c(t){return n.mod(t/360+.5,1)}function d(t){return 360*(n.mod(t,1)-.5)}function u(t){return n.mod(180+t,360)-180}var p=h(0),m=h(1);function g(t,e){o(this,g)&&(void 0===t&&(t=new _),void 0===e&&(e=new f),n.checkInstance(t,_,"[MapKit] `center` is not a Coordinate."),n.checkInstance(e,f,"[MapKit] `span` is not a CoordinateSpan."),this.center=new _(t.latitude,t.longitude),this.span=new f(e.latitudeDelta,e.longitudeDelta))}function f(t,e){o(this,f)&&(void 0===t&&(t=0),void 0===e&&(e=0),n.checkType(t,"number","[MapKit] `latitudeDelta` is not a number."),n.checkType(e,"number","[MapKit] `longitudeDelta` is not a number."),this.latitudeDelta=Math.max(t,0),this.longitudeDelta=Math.max(e,0))}function _(t,e){o(this,_)&&(void 0===t&&(t=0),void 0===e&&(e=0),n.checkType(t,"number","[MapKit] `latitude` is not a number."),n.checkType(e,"number","[MapKit] `longitude` is not a number."),this.latitude=t,this.longitude=e)}function y(t,e,i,a){o(this,y)&&(arguments.length<4&&(a=0,arguments.length<3&&(i=0,arguments.length<2&&(e=0,arguments.length<1&&(t=0)))),n.checkType(t,"number","[MapKit] Expected a number for `northLatitude` in BoundingRegion constructor but got `"+t+"` instead."),n.checkType(e,"number","[MapKit] Expected a number for `eastLongitude` in BoundingRegion constructor but got `"+e+"` instead."),n.checkType(i,"number","[MapKit] Expected a number for `southLatitude` in BoundingRegion constructor but got `"+i+"` instead."),n.checkType(a,"number","[MapKit] Expected a number for `westLongitude` in BoundingRegion constructor but got `"+a+"` instead."),this.northLatitude=t,this.eastLongitude=e,this.southLatitude=i,this.westLongitude=a)}function v(t,e){o(this,v)&&(arguments.length<2&&(e=0,arguments.length<1&&(t=0)),n.checkType(t,"number","[MapKit] Expected a number for `x` in MapPoint constructor but got `"+t+"` instead."),n.checkType(e,"number","[MapKit] Expected a number for `y` in MapPoint constructor but got `"+e+"` instead."),this.x=t,this.y=e)}function b(t,e){o(this,b)&&(arguments.length<2&&(e=0,arguments.length<1&&(t=0)),n.checkType(t,"number","[MapKit] Expected a number for `width` in MapSize constructor but got `"+t+"` instead."),n.checkType(e,"number","[MapKit] Expected a number for `height` in MapSize constructor but got `"+e+"` instead."),this.width=t,this.height=e)}function w(t,e,i,a){o(this,w)&&(arguments.length<4&&(a=0,arguments.length<3&&(i=0,arguments.length<2&&(e=0,arguments.length<1&&(t=0)))),n.checkType(t,"number","[MapKit] Expected a number for `x` in MapRect constructor but got `"+t+"` instead."),n.checkType(e,"number","[MapKit] Expected a number for `y` in MapRect constructor but got `"+e+"` instead."),n.checkType(i,"number","[MapKit] Expected a number for `width` in MapRect constructor but got `"+i+"` instead."),n.checkType(a,"number","[MapKit] Expected a number for `height` in MapRect constructor but got `"+a+"` instead."),this.origin=new v(t,e),this.size=new b(i,a))}function C(t,e){if(o(this,C)){if(null==e)if("number"===typeof t)e=1/0;else{var i=null==t?{}:t,n=Object.prototype.hasOwnProperty;t=n.call(i,"minCameraDistance")?i.minCameraDistance:0,e=n.call(i,"maxCameraDistance")?i.maxCameraDistance:1/0}if("number"!==typeof t||t<0)throw new Error("[MapKit] The `minCameraDistance` property of CameraZoomRange must be a number >= 0");if("number"!==typeof e||e<0)throw new Error("[MapKit] The `maxCameraDistance` property of CameraZoomRange must be a number >= 0");if(e<t)throw new Error("[MapKit] The `maxCameraDistance` property of CameraZoomRange must be greater than the `minCameraDistance` property.");this._minCameraDistance=t,this._maxCameraDistance=e}}g.prototype={constructor:g,copy:function(){return new g(this.center.copy(),this.span.copy())},toString:function(){return["CoordinateRegion(","\tlatitude: "+this.center.latitude,"\tlongitude: "+this.center.longitude,"\tlatitudeDelta: "+this.span.latitudeDelta,"\tlongitudeDelta: "+this.span.longitudeDelta,")"].join("\n")},equals:function(t){return this.center.equals(t.center)&&this.span.equals(t.span)},toBoundingRegion:function(){var t=this.span.latitudeDelta/2,e=this.span.longitudeDelta/2;return new y(this.center.latitude+t,u(this.center.longitude+e),this.center.latitude-t,u(this.center.longitude-e))},toMapRect:function(){if(this.span.latitudeDelta<0)this.span.latitudeDelta=0;else{var t=l(Math.abs(this.center.latitude)),e=p-h(2*t);this.span.latitudeDelta>e&&(this.span.latitudeDelta=e)}var i=u(this.center.longitude),n=this.span.longitudeDelta/2,o=i-n,a=i+n,s=!1;o<-180&&(o+=360,s=!0);var r=!1;a>180&&(a-=360,r=!0);var c=new _(this.center.latitude,o),d=new _(this.center.latitude,a),g=c.toMapPoint(),f=d.toMapPoint();s&&(g.x-=1),r&&(f.x+=1);var y=new w;if(0===this.center.latitude){var b=new _(this.center.latitude+this.span.latitudeDelta/2,this.center.longitude),C=new _(this.center.latitude-this.span.latitudeDelta/2,this.center.longitude);return y.origin.x=g.x,y.size.width=f.x-y.origin.x,y.origin.y=b.toMapPoint().y,y.size.height=C.toMapPoint().y-y.origin.y,y}var k=this.copy();k.center.latitude=m+this.span.latitudeDelta/2;var S=10,T=new _,L=new v;b=new _,C=new _,b.longitude=this.center.longitude,C.longitude=this.center.longitude;var M=0;do{if(k.center.latitude>p&&k.center.latitude>this.center.latitude||k.center.latitude<m&&k.center.latitude<this.center.latitude)k.center.latitude-=S,S*=.1;else if(k.center.latitude>p||k.center.latitude<m)return new w(0,0,1,1);if(M>500)return new w(0,0,1,1);b.latitude=k.center.latitude+k.span.latitudeDelta/2,C.latitude=k.center.latitude-k.span.latitudeDelta/2,y.origin.x=g.x,y.size.width=f.x-y.origin.x,y.origin.y=b.toMapPoint().y,y.size.height=C.toMapPoint().y-y.origin.y,L.x=y.midX(),L.y=y.midY(),T=L.toCoordinate(),(S>0&&T.latitude>this.center.latitude||S<0&&T.latitude<this.center.latitude)&&(S*=-.1),k.center.latitude+=S,M++}while(Math.abs(T.latitude-this.center.latitude)>=1e-8);return y},get radius(){var t,e,i=this.toMapRect();return i.size.width>i.size.height?(t=new v(i.minX(),i.midY()),e=new v(i.maxX(),i.midY())):(t=new v(i.midX(),i.minY()),e=new v(i.midX(),i.maxY())),function(t,e){var i,n=t.toCoordinate(),o=e.toCoordinate();return function(t,e,i,n,o){var s=(i-t)*a,r=(n-e)*a,l=Math.pow(Math.sin(s/2),2)+Math.cos(t*a)*Math.cos(i*a)*Math.pow(Math.sin(r/2),2);return o*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}(i=n.latitude,n.longitude,o.latitude,o.longitude,6378160-21e3*Math.sin(i*a))}(t,e)/2}},f.prototype={constructor:f,copy:function(){return new f(this.latitudeDelta,this.longitudeDelta)},equals:function(t){return Math.abs(this.latitudeDelta-t.latitudeDelta)<1e-8&&Math.abs(this.longitudeDelta-t.longitudeDelta)<1e-8},toString:function(){return["CoordinateSpan(","\tlatitudeDelta: "+this.latitudeDelta,"\tlongitudeDelta: "+this.longitudeDelta,")"].join("\n")}},_.prototype={constructor:_,copy:function(){return new _(this.latitude,this.longitude)},equals:function(t){return Math.abs(this.latitude-t.latitude)<1e-8&&Math.abs(this.longitude-t.longitude)<1e-8},toMapPoint:function(){return new v(c(this.longitude),l(this.latitude))},toUnwrappedMapPoint:function(){return new v(this.longitude/360+.5,l(this.latitude))},toString:function(){return["Coordinate(","latitude:"+this.latitude.toFixed(12),",longitude:"+this.longitude.toFixed(12),")"].join("")}},y.prototype={constructor:y,copy:function(){return new y(this.northLatitude,this.eastLongitude,this.southLatitude,this.westLongitude)},toString:function(){return["BoundingRegion(","\tnorthLatitude: "+this.northLatitude,"\teastLongitude: "+this.eastLongitude,"\tsouthLatitude: "+this.southLatitude,"\twestLongitude: "+this.westLongitude,")"].join("\n")},toCoordinateRegion:function(){var t=u(this.eastLongitude),e=u(this.westLongitude);t<e&&(t+=360);var i=this.northLatitude-this.southLatitude,n=t-e;return new g(new _(this.southLatitude+i/2,u(e+n/2)),new f(i,n))}},v.prototype={constructor:v,z:0,w:1,toString:function(){return"MapPoint("+this.x+", "+this.y+")"},copy:function(){return new v(this.x,this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},toCoordinate:function(){return new _(h(this.y),u(d(this.x)))}},b.prototype={constructor:b,toString:function(){return"MapSize("+this.width+", "+this.height+")"},copy:function(){return new b(this.width,this.height)},equals:function(t){return this.width===t.width&&this.height===t.height}},w.prototype={constructor:w,toString:function(){return"MapRect("+[this.origin.x.toFixed(12),this.origin.y.toFixed(12),this.size.width.toFixed(12),this.size.height.toFixed(12)].join(", ")+")"},copy:function(){return new w(this.origin.x,this.origin.y,this.size.width,this.size.height)},equals:function(t){return this.origin.equals(t.origin)&&this.size.equals(t.size)},minX:function(){return this.origin.x},minY:function(){return this.origin.y},midX:function(){return this.origin.x+this.size.width/2},midY:function(){return this.origin.y+this.size.height/2},maxX:function(){return this.origin.x+this.size.width},maxY:function(){return this.origin.y+this.size.height},scale:function(t,e){if(n.required(t,"[MapKit] Missing `scaleFactor` parameter in call to `MapRect.scale()`."),"number"!==typeof t||isNaN(t))throw new TypeError("[MapKit] The `scaleFactor` parameter passed to `MapRect.scale()` is not a number.");var i=this.size.width*t,o=this.size.height*t;return e?(n.checkInstance(e,v,"[MapKit] The `scaleCenter` parameter passed to `MapRect.scale()` is not a MapPoint."),new w(e.x-t*(e.x-this.origin.x),e.y-t*(e.y-this.origin.y),i,o)):new w(this.midX()-i/2,this.midY()-o/2,i,o)},toCoordinateRegion:function(){var t=this.origin.toCoordinate(),e=new v(this.maxX(),this.maxY()).toCoordinate(),i=Math.abs(e.latitude-t.latitude),n=e.longitude-t.longitude;return e.longitude<t.longitude&&(n+=360),new g(new v(this.midX(),this.midY()).toCoordinate(),new f(i,n))}},C.prototype={get minCameraDistance(){return this._minCameraDistance},get maxCameraDistance(){return this._maxCameraDistance},copy:function(){return new C(this._minCameraDistance,this._maxCameraDistance)}},t.exports={tileSize:256,convertLatitudeToY:l,convertYToLatitude:h,convertLongitudeToX:c,convertXToLongitude:d,wrapLongitude:u,wrapX:function(t,e){for(var i,n=1.5,o=-1;o<=1;++o){var a=Math.abs(t+o-e);a<n&&(n=a,i=t+o)}return i},zoomLevelForMapRectInViewport:function(t,e,i){var o=e.width/(i*t.size.width),a=e.height/(i*t.size.height);return n.log2(Math.min(o,a))},mapUnitsPerMeterAtLatitude:function(t){var e=t*a,i=111132.92+-559.82*Math.cos(2*e)+1.175*Math.cos(4*e)+-.0023*Math.cos(6*e),n=l(t-.5),o=l(t+.5);return Math.abs(n-o)/i},pointsPerAxis:function(t){return 256*Math.pow(2,t)},CameraZoomRange:C,CoordinateRegion:g,CoordinateSpan:f,Coordinate:_,BoundingRegion:y,MapPoint:v,MapRect:w,MapSize:b}},1970:function(t,e){t.exports=function(t,e){return t instanceof e||(console.warn("[MapKit] Unexpected object instance. Did you forget to `new`?"),"function"===typeof console.trace&&console.trace(),!1)}},1971:function(t,e,i){var n=i(1969),o=i(1972),a=i(1987).Tints,s=i(1986),r=i(1961),l=i(1948),h=i(1943),c=i(1960),d=i(2004),u=i(2005),p=i(2006),m=i(2007),g=i(2009),f=i(2024),_=i(2072),y=i(1976),v=i(1977),b=i(1975),w=i(1997),C=i(1981),k=i(2060),S=i(1988),T=S.FeatureVisibility,L=i(1967),M=n.CoordinateRegion,E=n.Coordinate,x=n.MapPoint,I=n.MapSize,A=n.MapRect,P=s.supportsTouches,R=new A(0,0,1,1),O="mk-dragging-annotation",D={padding:"rw",isScrollEnabled:"rw",isZoomEnabled:"rw",center:"rw",region:"rw",rotation:"rw",isRotationEnabled:"rw",showsCompass:"rw",visibleMapRect:"rw",tintColor:"rw",annotations:"rw",selectedAnnotation:"rw",overlays:"rw",selectedOverlay:"rw",showsUserLocation:"rw",tracksUserLocation:"rw",mapType:"rw",colorScheme:"rw",_allowWheelToZoom:"rw",_showsDefaultTiles:"rw",_internalAppDelegate:"rw",_landCoverStartUp:"rw",_startUpMode:"rw",showsPointsOfInterest:"rw",showsMapTypeControl:"rw",showsZoomControl:"rw",showsScale:"rw",showsUserLocationControl:"rw",pointOfInterestFilter:"rw",annotationForCluster:"rw",cameraDistance:"rw",cameraZoomRange:"rw",cameraBoundary:"rw",distances:"rw",tileOverlays:"rw",selectableMapFeatures:"rw",annotationForMapFeature:"rw",element:"ro",userLocationAnnotation:"ro"};function N(t){return new Error("[MapKit] Map."+t+" is not available until the required library is loaded.")}function z(t,e,i){h.state===h.States.READY?this.state="Initialized":this.state="InitializedWithoutConfiguration";try{(e=this._checkParent(e))&&(this._bootstrapSize=new b(e.offsetWidth,e.offsetHeight)),this.public=t,z.maps.push(this.public),i=l.checkOptions(i),this._checkOptions(i),"_internalAppDelegate"in i&&(this.public._internalAppDelegate=i._internalAppDelegate),this._setDefaultState(i),this._setupScene(),this._setupRenderTree(),this._setupControllers(i);var n="isRotationEnabled"in i;this._setIsRotationEnabled(!n||i.isRotationEnabled,n),"selectableMapFeatures"in i&&(this.selectableMapFeatures=i.selectableMapFeatures),this._flushToDOM(e),this._handleOptions(i,e),this._setupListeners(),C.scheduleOnNextFrame(this)}catch(o){throw o}}z.maps=[];function F(t){this.selected=t}function U(t){t.selected=!0,this._logWithMap(k.Events.AnnotationClick)}function K(t,e,i,n){if(!l.checkValueIsInEnum(t,e))throw new Error("[MapKit] Unknown value for `"+i+"`. Choose from "+n+".")}function B(t,e){var i=new r.Event(t),n=e.locationInElement();return i.pointOnPage=new DOMPoint(n.x,n.y),i.domEvents=e.domEvents.slice(),i}z.MapTypes=S.MapTypes,z.Distances=S.Distances,z.ColorSchemes=a,z.prototype={constructor:z,_showsUserLocation:!1,_tracksUserLocation:!1,_tintColor:"",_annotationForCluster:null,_emphasis:S.Emphasis.Standard,get padding(){return this._padding.copy()},set padding(t){if(l.checkInstance(t,u,"[MapKit] The `padding` parameter passed to `Map.padding` is not a Padding."),!this._padding.equals(t)){this._padding=t.copy();var e=this.ensureRenderingFrame();if(!e.equals(v.Zero)){this.rotation=0;var i=this._mapRectAccountingForPadding(),n=i.midX(),o=i.midY();this._setRenderingFrameValue(e);var a=this._mapRectAccountingForPadding(),s=n-a.midX(),r=o-a.midY(),h=new A(a.minX()+s,a.minY()+r,a.size.width,a.size.height);this.setVisibleMapRectAnimated(h,!1)}this.controlsLayer&&this.controlsLayer.mapPaddingDidChange(this._adjustedPadding)}},get isScrollEnabled(){return this._mapNode.pannable},set isScrollEnabled(t){this._mapNode.pannable=!!t,this._mapUserInteractionController.updateGestureEnableState()},get isZoomEnabled(){return this._mapNode.zoomable},set isZoomEnabled(t){this._mapNode.zoomable=!!t,this.controlsLayer&&this.controlsLayer.updateZoomControl(),this._mapUserInteractionController.updateGestureEnableState()},get snapsToIntegralZoomLevels(){return this._mapNode.snapsToIntegralZoomLevels},set snapsToIntegralZoomLevels(t){this._mapNode.snapsToIntegralZoomLevels=!!t},get showsZoomControl(){return this._showsZoomControl},set showsZoomControl(t){(t=!!t)!==this._showsZoomControl&&(this._showsZoomControl=t,this.controlsLayer&&(this.controlsLayer.updateZoomControl(),this.controlsLayer.updateScale()))},get showsScale(){return this._showsScale},set showsScale(t){l.checkValueIsInEnum(t,T)?t!==this._showsScale&&(this._showsScale=t,this.controlsLayer&&this.controlsLayer.updateScale()):console.warn("[MapKit] value passed to `Map.showsScale` setter must be part of the mapkit.FeatureVisibility enum.")},get mapType(){return this._mapType},set mapType(t){t!==this._mapType&&(K(t,z.MapTypes,"mapType","Map.MapTypes"),this._setMapTypeAndEmphasis(t,this._emphasis))},getMapTypeWithEmphasis:function(){return this._mapType===z.MapTypes.Standard&&this._emphasis===S.Emphasis.Muted?z.MapTypes.MutedStandard:this._mapType},setMapTypeWithEmphasis:function(t){var e=S.Emphasis.Standard;t===z.MapTypes.MutedStandard?(t=z.MapTypes.Standard,e=S.Emphasis.Muted):K(t,z.MapTypes,"mapType","Map.MapTypes"),e===this._emphasis&&t===this._mapType||this._setMapTypeAndEmphasis(t,e)},_setMapTypeAndEmphasis:function(t,e){this._mapType=t,this._emphasis=e,this._annotationsController&&this._annotationsController.mapTypeDidChange(),this._updateMapNodeTintAndEmphasis(this._mapNode),this._mapNodeController.handleMapConfigurationChange(),this.controlsLayer&&this.controlsLayer.update(),this.public.dispatchEvent(new r.Event("map-type-change")),this._logWithMap(k.Events.MapTypeChange)},get distances(){return this._distances},set distances(t){t!==this._distances&&(K(t,z.Distances,"distances","Map.Distances"),this._distances=t,this.controlsLayer&&this.controlsLayer.updateScale())},get colorScheme(){return this._colorScheme},set colorScheme(t){t!==this._colorScheme&&(K(t,z.ColorSchemes,"colorScheme","Map.ColorSchemes"),this._colorScheme=t,this._updateMapNodeTintAndEmphasis(this._mapNode))},get _allowWheelToZoom(){return this._mapNode.allowWheelToZoom},set _allowWheelToZoom(t){this._mapNode.allowWheelToZoom=t},get _landCoverStartUp(){return"LandCover"===this._mapNodeController.startUpMode},set _landCoverStartUp(t){this._mapNodeController.startUpMode=t?"LandCover":null},get _startUpMode(){return this._mapNodeController.startUpMode},set _startUpMode(t){this._mapNodeController.startUpMode=t},get _showsTileInfo(){return this._mapNode._impl.debug},set _showsTileInfo(t){this._mapNode._impl.debug=t},get _showsDefaultTiles(){return this._mapNode.showsDefaultTiles},set _showsDefaultTiles(t){this._mapNode.showsDefaultTiles=t},get tileOverlays(){return this._mapNode.tileOverlays},set tileOverlays(t){this._mapNode.tileOverlays=t,this.controlsLayer&&this.controlsLayer.updateZoomControl()},addTileOverlay:function(t){if(!this._overlaysController)throw N("addTileOverlay");var e=this._mapNode.addTileOverlay(t);return this.controlsLayer&&this.controlsLayer.updateZoomControl(),e},addTileOverlays:function(t){if(!this._overlaysController)throw N("addTileOverlays");var e=this._mapNode.addTileOverlays(t);return this.controlsLayer&&this.controlsLayer.updateZoomControl(),e},removeTileOverlay:function(t){if(!this._overlaysController)throw N("removeTileOverlay");var e=this._mapNode.removeTileOverlay(t);return this.controlsLayer&&this.controlsLayer.updateZoomControl(),e},removeTileOverlays:function(t){if(!this._overlaysController)throw N("removeTileOverlays");var e=this._mapNode.removeTileOverlays(t);return this.controlsLayer&&this.controlsLayer.updateZoomControl(),e},get showsMapTypeControl(){return this._showsMapTypeControl},set showsMapTypeControl(t){(t=!!t)!==this._showsMapTypeControl&&(this._showsMapTypeControl=t,this.controlsLayer&&this.controlsLayer.updateMapTypeControl())},get showsUserLocationControl(){return!!this._userLocationController&&this._showsUserLocationControl},set showsUserLocationControl(t){if((t=!!t)!==this._showsUserLocationControl){if(!this._userLocationController)throw N("showsUserLocationControl");this._showsUserLocationControl=t,this.controlsLayer&&(this.controlsLayer.updateUserLocationControl(),this.controlsLayer.updateScale())}},get showsPointsOfInterest(){return null===this.pointOfInterestFilter||null===this.pointOfInterestFilter._includes&&0===this.pointOfInterestFilter._excludes.length},set showsPointsOfInterest(t){if(t){if(null===this.pointOfInterestFilter)return;this.pointOfInterestFilter=null}else{if(this.pointOfInterestFilter===L.filterExcludingAllCategories)return;this.pointOfInterestFilter=L.filterExcludingAllCategories}},get pointOfInterestFilter(){return this._mapNode.pointOfInterestFilter},set pointOfInterestFilter(t){null!==t&&l.checkInstance(t,L,"[MapKit] Value passed to `Map.pointOfInterestFilter` setter must be an instance of mapkit.PointOfInterestFilter."),this._mapNode.pointOfInterestFilter=t,this._mapNodeController.setPointOfInterestFilter(t)},get element(){return this.rootNode&&this.rootNode.element},set element(t){console.warn("[MapKit] The `element` property is read-only.")},get renderingMapRect(){return this._mapNode.visibleMapRect},get visibleMapRect(){return this._visibleMapRect||(this._visibleMapRect=this._mapRectAccountingForPadding()),this._visibleMapRect},set visibleMapRect(t){this.setVisibleMapRectAnimated(t,!1)},setVisibleMapRectAnimated:function(t,e,i){l.required(t,"[MapKit] Missing `visibleMapRect` parameter in call to `Map.setVisibleMapRectAnimated()`.").checkInstance(t,A,"[MapKit] The `visibleMapRect` parameter passed to `Map.setVisibleMapRectAnimated()` is not a MapRect.");var o=this.ensureRenderingFrame();if(0===o.size.width||0===o.size.height)this._visibleMapRect=t;else{delete this._visibleMapRect;var a=this._visibleFrame,r=t,h=this._adjustedPadding;if(!h.equals(u.Zero)){var c=o.size.width/a.size.width,d=o.size.height/a.size.height;r=new A(t.minX()-h.left*c*t.size.width,t.minY()-h.top*d*t.size.height,t.size.width*c,t.size.height*d)}var p=new x(t.midX(),t.midY()),m=n.zoomLevelForMapRectInViewport(r,o.size,n.tileSize);m=l.clamp(this._mapNode.snapsToIntegralZoomLevels?s.getIntegralZoom(m):m,this.minZoomLevel,this.maxZoomLevel);var g=Math.pow(2,Math.ceil(m))*(n.tileSize*Math.pow(2,m-Math.ceil(m))),f=new I(a.size.width/g,a.size.height/g);t=new A(p.x-f.width/2,p.y-f.height/2,f.width,f.height)}return e=null==e||!!e,this._setVisibleMapRect(t,e,i),delete this._delayedShowItems,this.public},get region(){return this.visibleMapRect.toCoordinateRegion()},set region(t){this.setRegionAnimated(t,!1)},setRegionAnimated:function(t,e,i){return l.required(t,"[MapKit] Tried to set `Map.region` property to a non-existent value.").checkInstance(t,M,"[MapKit] Region passed to `Map.region` setter is not a CoordinateRegion."),this.region.equals(t)||this.setVisibleMapRectAnimated(t.toMapRect(),e,i),this.public},get isRotationAvailable(){return"HYBRID"===h.forcedRenderingMode||"CLIENT"===h.forcedRenderingMode?!h.didFallback&&this.csrCapable:h.ready||h.didFallback?h.canRunCSR&&this.csrCapable:this.csrCapable},set isRotationAvailable(t){console.warn("[MapKit] Map.isRotationAvailable is a read-only property")},get isRotationEnabled(){return this._mapNode.isRotationEnabled},set isRotationEnabled(t){this._setIsRotationEnabled(t,!0)},get isRotationLocked(){return this._mapNode.isRotationLocked},get rotation(){return this._mapNode.rotation},set rotation(t){this.setRotationAnimated(t,!1),this.controlsLayer&&this.controlsLayer.updateRotationControl()},get showsCompass(){return this.usingCSR?this._showsCompass:T.Hidden},set showsCompass(t){l.checkValueIsInEnum(t,T)?(this.isRotationEnabled||t!==T.Visible&&t!==T.Adaptive||console.warn("[MapKit] The compass cannot be shown when `Map.isRotationEnabled` is false."),this._usingDefaultShowsCompassValue=!1,t!==this._showsCompass&&(this._showsCompass=t,this.controlsLayer&&this.controlsLayer.updateRotationControl())):console.warn("[MapKit] value passed to `Map.showsCompass` setter must be part of the MapKit.FeatureVisibility enum.")},get usingCSR(){return!this._mapNodeController.usingSSR},setRotationAnimated:function(t,e,i){if(this.isRotationAvailable){if(l.required(t,"[MapKit] Tried to set `Map.rotation` property to a non-existent value."),"number"===typeof t&&isFinite(t)){var n=this._centerMapPoint(),o=t-this._mapNode.getRotation(),a=(e||null==e||!i)&&this.mapCanStartRotating();if((e||null==e)&&a){var s=this.camera.copy();s.rotateAroundCenter(n,o),this._mapNode.setCameraAnimated(s,!0,n)}else(a||i)&&this._mapNode.rotateCameraAroundMapPoint(n,o),i||this.mapDidStopRotating();return this.public}console.warn("[MapKit] Argument for `Map.rotation` is not a finite number.")}else console.warn("[MapKit] Rotation is not available.")},get center(){return this._centerMapPoint().toCoordinate()},set center(t){this.setCenterAnimated(t,!1)},setCenterAnimated:function(t,e,i){l.required(t,"[MapKit] Tried to set `Map.center` property to a non-existent value.").checkInstance(t,E,"[MapKit] Value passed to `Map.center` setter is not a Coordinate object.");var n=this.ensureRenderingFrame();if(0!==n.size.width&&0!==n.size.height){var o=this._offsetCenterWithPaddingAndRotation(t.toMapPoint(),-1);o&&(t=o.toCoordinate())}return this._mapNode.setCenterAnimated(t,null==e||!!e),delete this._visibleMapRect,i||(this.tracksUserLocation=!1),this.public},get cameraZoomRange(){return this._mapNode.cameraZoomRange},set cameraZoomRange(t){this.setCameraZoomRangeAnimated(t,!1)},setCameraZoomRangeAnimated:function(t,e){return null!=t&&l.checkInstance(t,n.CameraZoomRange,"[MapKit] Expected a `mapkit.CameraZoomRange` object for `Map.cameraZoomRange`, but got `"+t+"` instead."),this._mapNode.setCameraZoomRangeAnimated(t,null==e||!!e),this.public},get cameraDistance(){return this._mapNode.getCurrentCameraDistance()},set cameraDistance(t){this.setCameraDistanceAnimated(t,!1)},setCameraDistanceAnimated:function(t,e){if(!(t>=0))throw new Error("[MapKit] Expected a number for Map.cameraDistance, but got `"+t+"` instead");return this._mapNode.setCameraDistanceAnimated(t,null==e||!!e),this.public},get cameraBoundary(){var t=this._cameraBoundary;return t?{region:t.toCoordinateRegion?t.toCoordinateRegion():t.copy(),mapRect:t.toMapRect?t.toMapRect():t.copy()}:null},set cameraBoundary(t){this.setCameraBoundaryAnimated(t,!1)},setCameraBoundaryAnimated:function(t,e){var i=null;if(null==t)delete this._cameraBoundary;else if(t instanceof M)i=t.toMapRect(),this._cameraBoundary=t.copy();else{if(!(t instanceof A))throw new Error("[MapKit] `Map.cameraBoundaryRect` expected a CoordinateRegion or a MapRect, but got `"+t+"` instead.");i=t,this._cameraBoundary=i.copy()}var n=this._centerMapPoint();return this._mapNode.setCameraBoundaryAnimated(i,null==e||!!e),this.tracksUserLocation&&!this._mapNode.isMapPointWithinBounds(n)&&(this.tracksUserLocation=!1),this.public},get overlays(){return this._overlaysController?this._overlaysController.items:[]},set overlays(t){if(!this._overlaysController)throw N("overlays");this._overlaysController.items=t},get selectedOverlay(){return this._overlaysController?this._overlaysController.selectedItem:null},set selectedOverlay(t){if(!this._overlaysController)throw N("selectedOverlay");this._overlaysController.selectedItem=t},addOverlay:function(t){if(this._overlaysController)return this._overlaysController.addItem(t);throw N("addOverlay")},addOverlays:function(t){if(this._overlaysController)return this._overlaysController.addItems(t),t;throw N("addOverlays")},removeOverlay:function(t){if(this._overlaysController)return this._overlaysController.removeItem(t);throw N("removeOverlay")},removeOverlays:function(t){if(this._overlaysController)return this._overlaysController.removeItems(t);throw N("removeOverlays")},topOverlayAtPoint:function(t){if(!this._overlaysController)throw N("topOverlayAtPoint");l.checkInstance(t,window.DOMPoint,"[MapKit] Map.topOverlayAtPoint expected a DOMPoint, but got `"+t+"` instead.");var e=this.rootNode.convertPointFromPage(t),i=this._overlaysController.pickableItemsCloseToPoint(this.overlays,e,0),n=this.selectedOverlay;return n&&i.indexOf(n)>0?n:i[0]},overlaysAtPoint:function(t){if(!this._overlaysController)throw N("overlaysAtPoint");l.checkInstance(t,window.DOMPoint,"[MapKit] Map.overlaysAtPoint expected a DOMPoint, but got `"+t+"` instead.");var e=this.rootNode.convertPointFromPage(t);return this._overlaysController.pickableItemsCloseToPoint(this.overlays,e,0).reverse()},get annotations(){if(this._annotationsController)return this._annotationsController.items;throw N("annotations")},set annotations(t){if(!this._annotationsController)throw N("annotations");this._annotationsController.items=t},get selectedAnnotation(){if(this._annotationsController)return this._annotationsController.selectedItem;throw N("selectedAnnotation")},set selectedAnnotation(t){if(!this._annotationsController)throw N("selectedAnnotation");this._annotationsController.selectedItem=t},addAnnotation:function(t){if(this._annotationsController)return this._annotationsController.addItem(t);throw N("addAnnotation")},addAnnotations:function(t){if(this._annotationsController)return this._annotationsController.addItems(t);throw N("addAnnotations")},removeAnnotation:function(t){if(this._annotationsController)return this._annotationsController.removeItem(t);throw N("removeAnnotation")},removeAnnotations:function(t){if(this._annotationsController)return this._annotationsController.removeItems(t);throw N("removeAnnotations")},showItems:function(t,e){if(!z.LayerItemsController||!z.ItemCollection)throw N("showItems");var i=new z.ItemCollection(t).getFlattenedItemList();e=z.LayerItemsController.checkShowItemsParameters(i,e);var n=[],o=[];return i.forEach((function(t){z.OverlaysController&&t instanceof z.OverlaysController.Overlay&&!t.map&&(t._impl._map=this.public,n.push(t)),z.AnnotationsController&&t instanceof z.AnnotationsController.Annotation&&this._annotationsController&&this._annotationsController.preAddedAnnotation(t)&&o.push(t)}),this),this.isRooted()&&z.LayerItemsController.setRegionForItems(this,i,e)||(this._delayedShowItems=[i,e]),n.forEach((function(t){delete t._impl._map})),o.forEach(this._annotationsController.resetAnnotation.bind(this._annotationsController)),this._addItems(i),t},addItems:function(t){if(!z.ItemCollection)throw N("addItems");var e=new z.ItemCollection(t).getFlattenedItemList();return this._addItems(e),t},removeItems:function(t){if(!z.ItemCollection)throw N("removeItems");var e=new z.ItemCollection(t).getFlattenedItemList(),i=[],n=[];return e.forEach((function(t,e){var o=z.OverlaysController&&t instanceof z.OverlaysController.Overlay,a=z.AnnotationsController&&t instanceof z.AnnotationsController.Annotation;if(!o&&!a)throw new Error("[MapKit] Map.removeItems expected an Annotation, Overlay, ItemCollection, or Array of valid items at index "+e+", but got `"+t+"` instead.");o?i.push(t):n.push(t)}),this),this.removeOverlays(i),this.removeAnnotations(n),t},annotationsInMapRect:function(t){if(this._annotationsController)return this._annotationsController.annotationsInMapRect(t);throw N("annotationsInMapRect")},updateSize:function(t){return console.warn("[MapKit] Map resizing is now automatic, the Map.updateSize() method has been deprecated and will be removed in a future version."),this.public},convertCoordinateToPointOnPage:function(t){l.checkInstance(t,E,"[MapKit] Map.convertCoordinateToPointOnPage expected a Coordinate, but got `"+t+"` instead.");var e=this.camera.transformMapPoint(t.toMapPoint()),i=this.rootNode.convertPointToPage(e);return new window.DOMPoint(i.x,i.y)},convertPointOnPageToCoordinate:function(t){l.checkInstance(t,window.DOMPoint,"[MapKit] Map.convertPointOnPageToCoordinate expected a DOMPoint, but got `"+t+"` instead.");var e=this.camera.transformGestureCenter(this.rootNode.convertPointFromPage(new y(t.x,t.y))),i=this.renderingMapRect.origin;return new E(n.convertYToLatitude(i.y+e.y/this.worldSize),n.convertXToLongitude(i.x+e.x/this.worldSize))},get showsUserLocation(){return!!this._userLocationController&&this._userLocationController.showsUserLocation},set showsUserLocation(t){if((t=!!t)!==this.showsUserLocation){if(!this._userLocationController)throw N("showsUserLocation");this._userLocationController.showsUserLocation=t,t||(this._removeUserLocationDisplay(),this.tracksUserLocation=!1),this.showsUserLocationControl&&this.controlsLayer&&(this.controlsLayer.updateUserLocationControl(),this.controlsLayer.updateScale())}},get userLocationAnnotation(){return this._userLocationController?this._annotationsController.userLocationAnnotation:null},get tracksUserLocation(){return!!this._userLocationController&&this._userLocationController.tracksUserLocation},set tracksUserLocation(t){if((t=!!t)!==this.tracksUserLocation){if(!this._userLocationController)throw N("tracksUserLocation");this._userLocationController.tracksUserLocation=t,this._mapNode.staysCenteredDuringZoom=t,t?this.showsUserLocation=!0:this.userLocationAnnotation||(this.showsUserLocation=!1),this._firstCameraUpdateToTrackUserLocationPending=t,this._updateCameraToTrackUserLocation(this._userLocationController.userLocation),this._userLocationController.tracksUserLocation===t&&(this.controlsLayer&&this.controlsLayer.updateUserLocationControl(),this._userLocationTrackingDelegate&&"function"===typeof this._userLocationTrackingDelegate.mapUserLocationTrackingDidChange&&this._userLocationTrackingDelegate.mapUserLocationTrackingDidChange(this.public))}},get tintColor(){return this._tintColor},set tintColor(t){if(t!==this._tintColor){if(null!=t){if(l.checkType(t,"string","[MapKit] Expected a string value for Map.tintColor, but got `"+t+"` instead"),""!==t&&!s.isValidCSSColor(t))return void console.warn("[MapKit] value passed to `Map.tintColor` is not a valid color value. Ignoring: "+t);this._tintColor=t}else delete this._tintColor;this.controlsLayer&&this.controlsLayer.update()}},get tintColorForControls(){return s.darkColorScheme(this.mapNodeTint)?"":this._tintColor},get minZoomLevel(){return this._mapNode.minZoomLevel},get maxZoomLevel(){return this._mapNode.maxZoomLevel},get zoomLevel(){return this._mapNode.zoomLevel},set zoomLevel(t){this._mapNode.zoomLevel=t},get worldSize(){return n.pointsPerAxis(this._mapNode.zoomLevel)},get camera(){return this._mapNodeController.node.camera},get cameraIsPanning(){return this._mapNode.cameraIsPanning},get cameraIsZooming(){return this._mapNode.cameraIsZooming},get cameraIsRotating(){return this._mapNode.cameraIsRotating},get cameraIsAnimating(){return this._mapNode.cameraIsAnimating},get cameraIsMoving(){return this.cameraIsPanning||this.cameraIsZooming||this.cameraIsRotating||this.cameraIsAnimating},get _mapNode(){return this._mapNodeController.node},get csrCapable(){return this._mapNodeController.csrCapable},destroy:function(){if("Destroyed"!==this.state){this.state="Destroyed",this._annotationsController&&this.removeAnnotations(this.annotations),this._overlaysController&&this.removeOverlays(this.overlays),this._stopStabilizationTimeout(),this._linearZoomController.stop(),this.showsUserLocation&&this._removeUserLocationDisplay(),this.controlsLayer&&(this.controlsLayer.mapWasDestroyed(),this.controlsLayer=null),this._mapUserInteractionController.mapWasDestroyed(),this._overlaysController&&this._overlaysController.mapWasDestroyed(),this._annotationsController&&this._annotationsController.mapWasDestroyed(),this._userLocationController&&this._userLocationController.mapWasDestroyed(),this._linearZoomController._delegate=null,h.removeEventListener(h.Events.Changed,this),g.removeEventListener(g.Events.LocaleChanged,this),this._boundDevicePixelRatioDidChange&&(this._dppxMediaQueryList.removeListener(this._boundDevicePixelRatioDidChange),this._dppxMediaQueryList=null,this._boundDevicePixelRatioDidChange=null),this._iframe&&(this._iframe.removeEventListener("load",this),this._iframe.contentWindow&&this._iframe.contentWindow.removeEventListener("resize",this),this.element.removeChild(this._iframe),this._iframe=null),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),this._mapNodeController.destroy(),this._mapRoot.remove(),this._mapRoot=null,this._scene.destroy(),this._scene=null,this._removePrintListener(),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.rootNode.remove(),this.rootNode=null;var t=z.maps.indexOf(this.public);t>=0&&z.maps.splice(t,1)}else console.warn("[MapKit] Map was already destroyed.")},adjustMapItemPoint:function(t){return this._mapNode.adjustMapItemPoint(t)},get annotationForCluster(){return this._annotationForCluster},set annotationForCluster(t){if(null==t)delete this._annotationForCluster;else{if("function"!==typeof t)throw new Error("[MapKit] annotationForCluster must be a function or null");this._annotationForCluster=t}},selectionMayChange:!0,get selectableMapFeatures(){return this._selectableMapFeatures?h.ready&&(h.didFallback||!h.canRunCSR)||!this.csrCapable||"SERVER"===h.forcedRenderingMode?[]:this._selectableMapFeatures.slice():[]},set selectableMapFeatures(t){if(null!=t){if(!z.MapFeatureType)throw N("selectableMapFeatures");l.checkArray(t,"[MapKit] Map.selectableMapFeatures expected an array of values, but got `"+t+"` instead."),t.forEach((function(t){K(t,z.MapFeatureType,"MapFeatureType","mapkit.MapFeatureType")}));var e=[];Object.values(z.MapFeatureType).forEach((function(i){-1!==t.indexOf(i)&&e.push(i)})),0!==e.length?((!h.ready||!h.didFallback&&h.canRunCSR)&&this.csrCapable&&"SERVER"!==h.forcedRenderingMode||console.warn("[MapKit] Selectable map features is not available."),this._selectableMapFeatures=e):delete this._selectableMapFeatures}else delete this._selectableMapFeatures},get annotationForMapFeature(){return this._annotationForMapFeature},set annotationForMapFeature(t){if(null==t)delete this._annotationForMapFeature;else{if("function"!==typeof t)throw new Error("[MapKit] annotationForMapFeature must be a function or null");this._annotationForMapFeature=t}},handleEvent:function(t){var e=z.ControlsLayer?z.ControlsLayer.ZoomControl.EVENTS.ZOOM_START:void 0,i=z.ControlsLayer?z.ControlsLayer.ZoomControl.EVENTS.ZOOM_END:void 0;switch(t.type){case h.Events.Changed:this._configurationDidBecomeAvailable();break;case e:this._handleZoomStartEvent(t);break;case i:this._handleZoomEndEvent(t);break;case g.Events.LocaleChanged:this._handleLocaleChange(t);break;case"load":this._iframeDidLoad();break;case"resize":this._sizeDidChange()}},elementShouldPreventDragstart:function(t){return!!this._annotationsController&&!this._annotationsController.isElementInCustomCallout(t)},elementWantsDefaultBrowserBehavior:function(t,e,i){if(e&&i&&("touchstart"===e.type||"pointerdown"===e.type&&"touch"===e.pointerType)){if(1===i&&!this.isScrollEnabled)return!0;if(2===i&&!this.isZoomEnabled&&!this.isRotationEnabled)return!0}return!!this._annotationsController&&this._annotationsController.isElementInCallout(t)},getEventTargetFromSubShadowDOM:function(t){var e=t.touches?t.touches[0].target:t.target;return s.supportsShadowDOM&&this._annotationsController&&e===this._annotationsController.node.element&&this._annotationsController.getShadowDOMTargetFromEvent(t)||e},tileAccessForbidden:function(){h.accessKeyHasExpired()},previousMapDidFinishRendering:function(t){"Destroyed"!==this.state&&this.public.dispatchEvent(new r.Event("start-up-complete"))},mapDidFinishRendering:function(t){"Destroyed"!==this.state&&(this.state="Rendered",this._controlsLayer||setTimeout(this._loadControlsLayer.bind(this,!1)),this._mapNodeController.handleMapRendered(),this.addWaitingAnnotations(),this._startStabilizationTimeoutIfNeeded())},mapCanStartPanning:function(t){return this._panningWasPrevented?(delete this._panningWasPrevented,!1):!(this.tracksUserLocation&&this.cameraIsZooming||this._annotationsController&&this._annotationsController.dragging||this._isInitialInteractionTargetInUIElement()||!this.public.dispatchEvent(new r.Event("scroll-start")))},mapWillStartPanning:function(t){this._stopStabilizationTimeout(),this.tracksUserLocation=!1,this.rootNode.classList.add("mk-panning"),this.rootNode.classList.add("mk-dragging-cursor")},mapWillStopPanning:function(t){this.rootNode.classList.remove("mk-dragging-cursor")},mapDidStopPanning:function(t){this._startStabilizationTimeoutIfNeeded(),this.rootNode.classList.remove("mk-panning"),this.public.dispatchEvent(new r.Event("scroll-end"))},mapCanStartZooming:function(t){return!(this._isInitialInteractionTargetInUIElement()||!this.public.dispatchEvent(new r.Event("zoom-start")))},mapWillStartZooming:function(t,e,i,n){this._stopStabilizationTimeout(),n&&(this.tracksUserLocation=!1),this._logWithMap(k.Events.Zoom,{eventValue:e})},mapDidStopZooming:function(t){this._startStabilizationTimeoutIfNeeded(),this.public.dispatchEvent(new r.Event("zoom-end")),this.controlsLayer&&this.controlsLayer.scaleDidChange()},mapCameraWillChange:function(t,e){this.mapNodeCameraBeforeChange=t.camera},mapCameraDidChange:function(t,e){if("Destroyed"!==this.state){var i=this.mapNodeCameraBeforeChange;delete this.mapNodeCameraBeforeChange,delete this._visibleMapRect,this._mapNodeController.mapCameraDidChange(),this._overlaysController&&this._overlaysController.mapCameraDidChange(),this._annotationsController&&this._annotationsController.updateVisibleAnnotations(),this.controlsLayer&&(this.controlsLayer.scaleDidChange(),i&&i.rotation===t.camera.rotation||this.controlsLayer.updateRotationControl())}},mapCameraChangesWillStart:function(t,e){this._mapFeaturesLayerController&&this._mapFeaturesLayerController.node.remove(),this._zoomLevelWhenCameraChangeStarted=this.zoomLevel,this.public.dispatchEvent(new r.Event("region-change-start"))},mapCameraChangesDidEnd:function(t){"Destroyed"!==this.state&&(this._zoomLevelWhenCameraChangeStarted!==this.zoomLevel&&this.controlsLayer&&this.controlsLayer.zoomLevelDidChange(),delete this._zoomLevelWhenCameraChangeStarted,this.public.dispatchEvent(new r.Event("region-change-end")))},mapMinAndMaxZoomLevelsDidChange:function(t){this.controlsLayer&&this.controlsLayer.zoomLevelDidChange()},mapCanStartRotating:function(t){return this.public.dispatchEvent(new r.Event("rotation-start"))},mapRotationDidChange:function(t){this.controlsLayer&&this.controlsLayer.updateRotationControl()},mapDidStopRotating:function(t){this.public.dispatchEvent(new r.Event("rotation-end"))},mapTransformCenter:function(t){return this._centerMapPoint()},userWillTap:function(t){var e=t.locationInElement();if(this._isInitialInteractionTargetInUIElement())s.supportsTouches&&(this._delayedTapFunction=this._elementWasTapped.bind(this,this._mapUserInteractionController.initialEventTargetForCurrentInteraction));else if(!(this._annotationsController&&this._annotationsController.selectedItem&&this._annotationsController.selectedItem._impl.alwaysSelected)){var i=this.rootNode.convertPointFromPage(e),n=this._annotationsController?this._annotationsController.enabledItemCloseToPoint(i):void 0;if(n)this._delayedTapFunction=U.bind(this,n);else{if(this._overlaysController){var o=this._overlaysController.enabledItemCloseToPoint(i);if(o)return void(this._delayedTapFunction=F.bind(o,!0))}if(this._selectableMapFeatures&&this._mapNode.getMapFeatureRegions){for(var a,r=this._mapNode.getMapFeatureRegions(),l=-1!==this._selectableMapFeatures.indexOf(z.MapFeatureType.PointOfInterest),h=-1!==this._selectableMapFeatures.indexOf(z.MapFeatureType.Territory),c=0;c<r.length;c++){var d=r[c];if(-1!==["Poi","Territory"].indexOf(d.category)&&(l||"Poi"!==d.category)&&(h||"Territory"!==d.category)){for(var u=this.camera.transformMapPoint(new x(d.position[0],d.position[1])),p=0;p<d.rects.length;p++){var m=d.rects[p],g=m.size,f=u.x+m.offset[0],_=u.y+m.offset[1];if(g[0]<44&&(f-=(44-g[0])/2,g[0]=44),g[1]<44&&(_-=(44-g[1])/2,g[1]=44),f<i.x&&i.x<f+g[0]&&_<i.y&&i.y<_+g[1]){a=d;break}}if(a)break}}if(a)return void this._annotationsController.mapFeatureDidSelect(a)}var y=B("single-tap",t);this._delayedTapFunction=function(){this.public.dispatchEvent(y),y.defaultPrevented||(this._annotationsController&&(this._annotationsController.selectedItem=null),this._overlaysController&&(this._overlaysController.selectedItem=null))}.bind(this)}}},shouldDelaySingleTap:function(){return this.isZoomEnabled||this.public._listeners&&(this.public._listeners["single-tap"]&&this.public._listeners["single-tap"].length>0||this.public._listeners["double-tap"]&&this.public._listeners["double-tap"].length>0)},userDidTap:function(t){this._delayedTapFunction&&(this._delayedTapFunction(),delete this._delayedTapFunction)},userCanceledTap:function(t){delete this._delayedTapFunction},userDidDoubleTap:function(t){var e=t.modifierKeys.alt;(!this.isZoomEnabled||e&&this.zoomLevel===this._mapNode.minZoomLevel||!e&&this.zoomLevel===this._mapNode.maxZoomLevel)&&this.public.dispatchEvent(B("double-tap",t))},userDidLongPress:function(t){if(this._isInitialInteractionTargetInUIElement())return!1;var e=t.locationInElement(),i=this._annotationsController?this._annotationsController.enabledItemCloseToPoint(this.rootNode.convertPointFromPage(e),!0):void 0;if(!i){var n=B("long-press",t);return this.public.dispatchEvent(n),n.defaultPrevented&&(this._panningWasPrevented=!0),s.supportsTouches}return i._impl.isDraggable()&&!this.cameraIsMoving?(this._annotationsController.startDraggingAnnotation(i,e),!0):s.supportsTouches?(U.call(this,i),!0):s.supportsTouches},userMayStartPanningAfterLongPress:function(){delete this._panningWasPrevented},userDidPanAfterLongPress:function(t){this._annotationsController&&this._annotationsController.annotationDraggingDidChange(t)},userDidStopPanningAfterLongPress:function(t){this._annotationsController&&this._annotationsController.annotationDraggingDidEnd(t)},linearZoomControllerDidZoom:function(t){this.cameraIsZooming&&(this.zoomLevel=t,(t<=this.minZoomLevel&&!this._linearZoomController.zoomsIn||t>=this.maxZoomLevel&&this._linearZoomController.zoomsIn)&&this._mapNode.cameraDidStopZooming())},linearZoomControllerDidStop:function(){this._mapNode.cameraDidStopZooming()},userLocationDidChange:function(t){this._updateUserLocationDisplay(t.target),this.controlsLayer&&this.controlsLayer.userLocationDidChange(t.target),this.tracksUserLocation&&this._updateCameraToTrackUserLocation(t.target),this.public.dispatchEvent(t)},userLocationDidError:function(t){this._updateUserLocationDisplay(t.target),this.controlsLayer&&this.controlsLayer.userLocationDidError(t.target),this.public.dispatchEvent(t)},get mapNodeTint(){var t=this._mapNodeController&&this._mapNodeController.node;return t?t.tint:z.ColorSchemes.Light},isRooted:function(){return this.element&&this.element.ownerDocument.body.contains(this.element)},stopDraggingAnnotation:function(){this._mapUserInteractionController._stopDraggingAnnotation()},translateVisibleMapRectAnimated:function(t,e){var i=this.visibleMapRect;this._setVisibleMapRect(new A(i.minX()+t.x/this.worldSize,i.minY()+t.y/this.worldSize,i.size.width,i.size.height),!!e)},translateCameraAnimated:function(t,e){this._mapNode.setCameraAnimated(this.camera.translate(t),!!e)},setCameraAnimated:function(t,e){this._mapNode.setCameraAnimated(t,!!e)},shouldWaitForTilesAndControls:function(){return"Rendered"!==this.state||!this.controlsLayer||this.controlsLayer.controlsPending},ensureRenderingFrame:function(){return this._renderingFrame||new v},ensureVisibleFrame:function(){return this._visibleFrame||new v},annotationDraggingWillStart:function(){this.rootNode.classList.add(O),this._loadControlsLayer(!1),this.controlsLayer&&(this.controlsLayer.classList.add(O),this.controlsLayer.canShowTooltips=!1)},annotationDraggingDidEnd:function(){this.rootNode.classList.remove(O),this.controlsLayer&&(this.controlsLayer.classList.remove(O),this.controlsLayer.canShowTooltips=!0)},get useMetric(){switch(this.distances){case z.Distances.Adaptive:return g.useMetric();case z.Distances.Metric:return!0;case z.Distances.Imperial:return!1}},get isCompassHidden(){return this.showsCompass===T.Hidden||s.supportsTouches&&this.showsCompass===T.Adaptive&&0===this.rotation||!this.isRotationEnabled},compassDraggingWillStart:function(){var t=this.mapCanStartRotating();return t&&this.rootNode.classList.add("mk-dragging-cursor"),t},compassRotationWillStart:function(){return this._mapNodeController.node.compassRotationWillStart()},compassDraggingDidEnd:function(){this.mapDidStopRotating(),this._mapNodeController.node.compassRotationDidEnd(),this.rootNode.classList.remove("mk-dragging-cursor")},compassRotationDidEnd:function(){this._mapNodeController.node.compassRotationDidEnd()},panningDuringAnnotationDrag:function(){this._annotationsController&&this._annotationsController.mapPanningDuringAnnotationDrag()},padMapRect:function(t,e,i){l.checkType(e,"object","[MapKit] padding must be an object with any of `top`, `left`, `bottom`, `right`"),["top","left","bottom","right"].forEach((function(t){if(t in e){var i=e[t];if("number"!==typeof i||i<0)throw new Error("[MapKit] property `"+t+"` of padding must be a number >= 0; got `"+i+"`")}else e[t]=0}));var o=this.ensureRenderingFrame().size,a=l.log2(Math.min((o.width-(e.left+e.right))/(t.size.width*n.tileSize),(o.height-(e.top+e.bottom))/(t.size.height*n.tileSize))),s=n.pointsPerAxis(a),r=d.padMapRect(t,{top:e.top/s,left:e.left/s,bottom:e.bottom/s,right:e.right/s});if(void 0!==i&&i>=0){a=this._mapNode.zoomLevelForCameraDistanceAtY(i,r.midY());var h=s/n.pointsPerAxis(a);return r.scale(h,new n.MapPoint(r.midX(),r.midY()))}return r},supportsLabelRegions:function(){return!this._mapNodeController.usingSSR},createLabelRegion:function(){return this._mapNode.createLabelRegion()},updatedLabelRegion:function(){this._mapNode.updatedLabelRegion()},unregisterLabelRegion:function(t){this._mapNode.unregisterLabelRegion(t)},_addItems:function(t){var e=[];return t.forEach((function(t,i){var n=z.OverlaysController&&t instanceof z.OverlaysController.Overlay,o=z.AnnotationsController&&t instanceof z.AnnotationsController.Annotation;if(!n&&!o)throw new Error("[MapKit] Map.addItems expected an Annotation, Overlay, ItemCollection, or Array of valid items at index "+i+", but got `"+t+"` instead.");t.map||(n?this.addOverlay(t):e.push(t))}),this),this._annotationsController&&this.addAnnotations(e),t},_configurationDidBecomeAvailable:function(t){var e=t&&"Initialized"===this.state;t||("InitializedWithoutConfiguration"===this.state?(this.state="Initialized",e=!0):"ReadyWithoutConfiguration"===this.state&&(this.state="Ready",e=!0)),this._mapNodeController.configurationDidBecomeAvailable(t),e&&this._logWithMap(k.Events.MapsLoad),this.controlsLayer&&this.controlsLayer.update(),this.public._internalAppDelegate&&"function"===typeof this.public._internalAppDelegate.networkConfigurationUpdated&&this.public._internalAppDelegate.networkConfigurationUpdated({madabaDomains:h.madabaDomains,tileGroup:h.tileGroup,accessKey:h.accessKey})},_setupScene:function(){this._scene=new o.Scene,this._scene.element.className="rt-root",this._scene.element.setAttribute("aria-hidden","true")},_checkOptions:function(t){l.checkType(t,"object","[MapKit] The `options` object is invalid."),Object.keys(t).forEach((function(t){var e=D[t];"rw"===e||("ro"===e?console.warn("[MapKit] `"+t+"` is read-only and can't be set on a Map."):console.warn("[MapKit] `"+t+"` is not a valid property of Map."))}))},_checkParent:function(t){if(void 0!==t&&null!==t){var e="string"===typeof t?document.getElementById(t):t;if(!e||!l.isElement(e))throw new Error("[MapKit] `parent` must either be a DOM element or its ID.");return e}},_setDefaultState:function(t){this._showsScale=T.Hidden,this._visibleMapRect=R,this._padding=new u,this._adjustedPadding=new u,this._showsCompass=T.Adaptive,this._usingDefaultShowsCompassValue=!0,this._distances=z.Distances.Adaptive,this._showsZoomControl="showsZoomControl"in t?!!t.showsZoomControl:!P,this._showsMapTypeControl="showsMapTypeControl"in t?!!t.showsMapTypeControl:!P,this._showsUserLocationControl="showsUserLocationControl"in t&&!!t.showsUserLocationControl;var e=t.mapType||z.MapTypes.Standard;K(e,z.MapTypes,"mapType","Map.MapTypes"),e===z.MapTypes.MutedStandard?(this._emphasis=S.Emphasis.Muted,this._mapType=z.MapTypes.Standard):(this._emphasis=S.Emphasis.Standard,this._mapType=e);var i=t.colorScheme||z.ColorSchemes.Light;K(i,z.ColorSchemes,"colorScheme","Map.ColorSchemes"),this._colorScheme=i},_setIsRotationEnabled:function(t,e){"boolean"===typeof t?(this.isRotationAvailable?this._mapNode.isRotationEnabled=t:e&&t&&console.warn("[MapKit] Rotation can't be enabled because it's not available."),this.controlsLayer&&this.controlsLayer.updateRotationControl(),this._mapUserInteractionController.updateGestureEnableState()):console.warn("[MapKit] Value passed to `Map.isRotationEnabled` is not a Boolean.")},_setupRenderTree:function(){var t=document.createElement("div");t.className="mk-map-view",t.appendChild(this._scene.element),this.rootNode=new w.Node(t)},_setupControllers:function(t){this._loadControlsLayer(!0),z.OverlaysController&&this.addOverlaysController(),z.MapFeaturesLayerController&&this.addMapFeaturesLayerController(),z.AnnotationsController&&this.addAnnotationsController(),z.UserLocationController&&this.addUserLocationController(),this._mapNodeController=new f(this,t),this._linearZoomController=new p(this._mapNode.snapsToIntegralZoomLevels,this),this._mapUserInteractionController=new m(this.rootNode.element,this)},addOverlaysController:function(){"Destroyed"===this.state||this._overlaysController||(this._overlaysController=new z.OverlaysController(this),this._scene.insertAfter(this._overlaysController.node,this._mapNodeController?this._mapNodeController.node:void 0))},addMapFeaturesLayerController:function(){this._mapFeaturesLayerController=new z.MapFeaturesLayerController(this),this._startStabilizationTimeoutIfNeeded()},addAnnotationsController:function(){"Destroyed"===this.state||this._annotationsController||(this._annotationsController=new z.AnnotationsController(this),this._mapRoot&&this._mapRoot.insertAfter(this._annotationsController.node,this._mapFeaturesLayerController.node),this._scene.insertAfter(this._annotationsController.sceneGraphNode,this._overlaysController?this._overlaysController.node:this._mapNodeController?this._mapNodeController.node:void 0))},addUserLocationController:function(){this._userLocationController=new z.UserLocationController(this)},getControlBounds:function(){return this.controlsLayer?this.controlsLayer.controlBounds():[]},_loadControlsLayer:function(t){if(!this._loadControlsLayerHasFailed)return!t&&z.ControlsLayer?(this._insertControlsLayer(),void this._updateInitialControlsLayerState()):void _(function(e){if(!e)return this._showsDefaultTiles=!1,Object.defineProperty(this,"_showsDefaultTiles",{get:function(){return!1},set:function(){throw new Error("[MapKit] Default tiles are not shown because map controls has failed to load.")},configurable:!0}),void(this._loadControlsLayerHasFailed=!0);z.ControlsLayer=e,t?(C.scheduleInBackground(this._insertControlsLayer.bind(this)),C.scheduleInBackground(this._updateInitialControlsLayerState.bind(this))):(this._insertControlsLayer(),this._updateInitialControlsLayerState())}.bind(this))},_insertControlsLayer:function(){"Destroyed"===this.state||this.controlsLayer||(this.controlsLayer=new z.ControlsLayer(this),this._mapRoot.insertAfter(this.controlsLayer,this._annotationsController?this._annotationsController.node:void 0))},_updateInitialControlsLayerState:function(){"Destroyed"===this.state||this._updateInitialControlsLayerStateCalled||(this._updateInitialControlsLayerStateCalled=!0,this.controlsLayer.update(),this.controlsLayer.mapPaddingDidChange(this._adjustedPadding))},_handleOptions:function(t,e){t.showsScale&&(this.showsScale=t.showsScale),t.showsCompass&&(this.showsCompass=t.showsCompass),t.padding&&(this.padding=t.padding),t.cameraZoomRange&&(this.cameraZoomRange=t.cameraZoomRange),t.cameraBoundary&&(this.cameraBoundary=t.cameraBoundary),t.visibleMapRect?this.visibleMapRect=t.visibleMapRect:t.region?this.region=t.region:(t.center&&(this.center=t.center),"cameraDistance"in t&&(this.cameraDistance=t.cameraDistance)),t.rotation&&(this.rotation=t.rotation);var i=[],n=!t.visibleMapRect&&!t.region&&!t.center&&e;if(t.overlays&&(l.checkArray(t.overlays,"[MapKit] Map constructor overlays option expected an array of overlays, but got `"+t.annotations+"` instead."),n?i.push.apply(i,t.overlays):this.overlays=t.overlays),t.annotations&&(l.checkArray(t.annotations,"[MapKit] Map constructor annotations option expected an array of annotations, but got `"+t.annotations+"` instead."),n?i.push.apply(i,t.annotations):this.annotations=t.annotations),i.length>0){var o={};"cameraDistance"in t&&(o.cameraDistance=t.cameraDistance),this.showItems(i,o)}t.selectedOverlay&&(this.selectedOverlay=t.selectedOverlay),t.selectedAnnotation&&(this.selectedAnnotation=t.selectedAnnotation),t.distances&&(this.distances=t.distances),this.tintColor=t.tintColor,this.showsUserLocation=t.showsUserLocation,this.tracksUserLocation=t.tracksUserLocation,t.tileOverlays&&(this.tileOverlays=t.tileOverlays),t.annotationForCluster&&(this.annotationForCluster=t.annotationForCluster),t.annotationForMapFeature&&(this.annotationForMapFeature=t.annotationForMapFeature)},_flushToDOM:function(t){this._addMapToParent(t),C.flush(),this._ensureContainerIsPositioned()},_addMapToParent:function(t){void 0!==t&&null!==t&&(t.appendChild(this.element),this._bootstrapSize.width&&this._bootstrapSize.height&&this._updateRenderingFrameSize(this._bootstrapSize),delete this._bootstrapSize)},performScheduledUpdate:function(){if("Destroyed"!==this.state){var t=this._mapNode.camera.zoom;t%1!==0&&("InitializedWithoutConfiguration"===this.state||"Initialized"===this.state)&&("SERVER"===h.forcedRenderingMode||h.ready&&(h.didFallback||!h.canRunCSR)||!this.csrCapable||"HYBRID"===h.forcedRenderingMode||!this._mapNodeController.knownGoodRendering||!this._mapNodeController.manageableMap||"PointOfInterests"===this._mapNodeController.startUpMode)&&this._mapNode.setZoomLevelAnimated(s.getIntegralZoom(t)),"InitializedWithoutConfiguration"===this.state?this.state="ReadyWithoutConfiguration":"Initialized"===this.state&&(this.state="Ready"),this._loadResizeDetector()}},_loadResizeDetector:function(){if(!this._iframe&&!this._resizeObserver){if(window.ResizeObserver)return this._resizeObserver=new window.ResizeObserver(function(t){this._sizeDidChange()}.bind(this)),this._resizeObserver.observe(this.rootNode.element),void this._resizeDetectorDidInstall();this._iframe=s.htmlElement("iframe",{tabindex:-1,"aria-hidden":!0}),this._iframe.addEventListener("load",this),this.element.insertBefore(this._iframe,this._scene.element)}},_updateUserLocationDisplay:function(t){this._annotationsController.updateUserLocationAnnotation(t),this._overlaysController.updateUserLocationAccuracyRingOverlay(t)},_removeUserLocationDisplay:function(){this._annotationsController.removeUserLocationAnnotation(),this._overlaysController.removeUserLocationAccuracyRingOverlay()},_updateCameraToTrackUserLocation:function(t){var e,i;if(this.tracksUserLocation&&this.showsUserLocation&&t.coordinate){if(this._mapNode.isMapPointWithinBounds(t.coordinate.toMapPoint()))if(this._firstCameraUpdateToTrackUserLocationPending&&this.zoomLevel<9.5){var o=14;if(t.location.accuracy>0){var a=5*t.location.accuracy*n.mapUnitsPerMeterAtLatitude(t.location.latitude),s=new A(0,0,a,a),r=this.ensureVisibleFrame().size;o=Math.max(this.zoomLevel,n.zoomLevelForMapRectInViewport(s,r,n.tileSize))}e=this._mapRectForCenterAndZoomLevel(t.coordinate.toMapPoint(),o),this._userLocationTrackingDelegate&&"function"===typeof this._userLocationTrackingDelegate.mapRegionWillChangeToTrackUserLocation&&(i=e.toCoordinateRegion(),this._userLocationTrackingDelegate.mapRegionWillChangeToTrackUserLocation(this.public,i),e=i.toMapRect()),this._mapNode.setCameraAnimated(this.camera.withNewMapRect(e),!0,!0)}else this._userLocationTrackingDelegate&&"function"===typeof this._userLocationTrackingDelegate.mapRegionWillChangeToTrackUserLocation?(i=(e=this._mapRectForCenterAndZoomLevel(t.coordinate.toMapPoint(),this.zoomLevel)).toCoordinateRegion(),this._userLocationTrackingDelegate.mapRegionWillChangeToTrackUserLocation(this.public,i),this._mapNode.setCameraAnimated(this.camera.withNewMapRect(e),!0,!0)):this.setCenterAnimated(t.coordinate,!0,!0);else this.setCenterAnimated(t.coordinate,!0,!0),this._userLocationController.tracksUserLocation=!1,this._mapNode.staysCenteredDuringZoom=!1,this.controlsLayer&&this.controlsLayer.updateUserLocationControl();delete this._firstCameraUpdateToTrackUserLocationPending}},_updateRenderingFrameFromElement:function(){var t=this.rootNode.element,e=t.offsetWidth,i=t.offsetHeight;0!==e&&0!==i&&this._updateRenderingFrameSize(new b(e,i))},_setRenderingFrameValue:function(t){this._renderingFrame=t,this._visibleFrame=t;var e=this._adjustedPadding.copy(),i=this._adjustedPadding=this._adjustedPaddingForMapSize(t.size);i.equals(u.Zero)||(this._visibleFrame=new v(t.origin.x+i.left,t.origin.y+i.top,t.size.width-i.left-i.right,t.size.height-i.top-i.bottom)),!i.equals(e)&&this.controlsLayer&&this.controlsLayer.mapPaddingDidChange(i)},_adjustedPaddingForMapSize:function(t){var e=new b(Math.min(S.MapSizes.minimumSizeToShowLogo.width,t.width),Math.min(S.MapSizes.minimumSizeToShowLogo.height,t.height)),i=this._padding.copy();i.top<0&&(i.top=0),i.left<0&&(i.left=0),i.bottom<0&&(i.bottom=0),i.right<0&&(i.right=0);var n=i.left+i.right,o=i.top+i.bottom,a=n+e.width-t.width,s=o+e.height-t.height;if(a>0&&n>0){var r=(n-a)/n;i.left*=r,i.right*=r}if(s>0&&o>0){var l=(o-s)/o;i.top*=l,i.bottom*=l}return i},_iframeDidLoad:function(){try{this._iframe.contentWindow.addEventListener("resize",this)}catch(t){console.warn("[MapKit] Map resize detection is disabled when loaded in a sandboxed iframe.")}this._resizeDetectorDidInstall()},_resizeDetectorDidInstall:function(){var t=this._visibleMapRect&&this._visibleMapRect.copy(),e=this.rotation,i=this._padding&&!this._padding.equals(u.Zero);this._ensureContainerIsPositioned(),this._sizeDidChange(),t&&i&&(t.size.width>0||t.size.height>0?(this.setVisibleMapRectAnimated(t,!1),e&&this.setRotationAnimated(e,!1)):this.setCenterAnimated(new x(t.midX(),t.midY()).toCoordinate()))},_sizeDidChange:function(){this._printMediaQueryList&&this._printMediaQueryList.matches||this._updateRenderingFrameFromElement()},_updateRenderingFrameSize:function(t){var e=!this._renderingFrame;0===t.width||0===t.height||!e&&this._renderingFrame.size.equals(t)||(this._setRenderingFrameValue(new v(0,0,t.width,t.height)),this._scene.size=t,this._mapRoot.size=t,this._mapNodeController.updateSize(t),this._delayedShowItems&&(z.LayerItemsController.setRegionForItems(this,this._delayedShowItems[0],this._delayedShowItems[1]),delete this._delayedShowItems),this.controlsLayer&&this.controlsLayer.sizeDidChange(),this._annotationsController&&this._annotationsController.mapSizeDidUpdate())},_mapRectForCenterAndZoomLevel:function(t,e){var i=this.ensureVisibleFrame().size,o=n.pointsPerAxis(e),a=i.width/o,s=i.height/o;return new A(t.x-a/2,t.y-s/2,a,s)},_isInitialInteractionTargetInUIElement:function(){var t=this._mapUserInteractionController.initialEventTargetForCurrentInteraction;return!!t&&(!(!this._annotationsController||!this._annotationsController.isElementInCallout(t))||!(!this.controlsLayer||!this.controlsLayer.element.contains(t)))},_handleZoomStartEvent:function(t){t.zoomIn&&this.zoomLevel>=this.maxZoomLevel||!t.zoomIn&&this.zoomLevel<=this.minZoomLevel||this._linearZoomController.start(this.zoomLevel,t.zoomIn)&&this._mapNode.cameraWillStartZooming(S.ZoomTypes.Button)},_handleZoomEndEvent:function(t){this._linearZoomController.stop()},_centerMapPoint:function(){if(0!==this.rotation){var t=this.renderingMapRect,e=new x(t.midX(),t.midY()),i=this._offsetCenterWithPaddingAndRotation(e,1);if(i)return i}var n=this.visibleMapRect;return new x(n.midX(),n.midY())},_offsetCenterWithPaddingAndRotation:function(t,e){var i=2*e*this.worldSize,n=(this._adjustedPadding.right-this._adjustedPadding.left)/i,o=(this._adjustedPadding.bottom-this._adjustedPadding.top)/i;if(0!==n||0!==o){var a=-this.rotation/180*Math.PI;return new x(t.x-n*Math.cos(a)+o*Math.sin(a),t.y-n*Math.sin(a)-o*Math.cos(a))}},_setVisibleMapRect:function(t,e,i){i||(this.tracksUserLocation=!1);var n=t,o=this._adjustedPadding,a=this.ensureRenderingFrame(),s=this.ensureVisibleFrame();o.equals(u.Zero)||s.equals(v.Zero)||(n=new A(t.minX()-o.left/s.size.width*t.size.width,t.minY()-o.top/s.size.height*t.size.height,t.size.width*(a.size.width/s.size.width),t.size.height*(a.size.height/s.size.height))),this._mapNode.setVisibleMapRectAnimated(n,e)},_ensureContainerIsPositioned:function(){var t=this.rootNode.element;"static"===t.ownerDocument.defaultView.getComputedStyle(t).position&&(t.style.position="relative")},didInsertNewMapNode:function(t){t.delegate=this,"Rendered"===this.state&&(this.state="Switched"),this._updateMapRoot(t),this._updateMapNodeTintAndEmphasis(t),window.setTimeout(function(){this.public.dispatchEvent(new r.Event("map-node-change"))}.bind(this),0)},didReconfigureMapNode:function(t){t.snapsToIntegralZoomLevels&&t.zoomLevel%1!==0&&!t.cameraIsAnimating&&(t.zoomLevel=s.getIntegralZoom(t.zoomLevel)),this._linearZoomController&&(this._linearZoomController.snapsToIntegralZoomLevels=t.snapsToIntegralZoomLevels),this.controlsLayer&&this.controlsLayer.updateZoomControl()},didFinishMapNodeInitialization:function(t){if(t.customCanvas){var e=this._scene.element;t.customCanvas.setAttribute("aria-hidden","true"),e.parentNode.insertBefore(t.customCanvas,e)}else this._scene.addChild(t,0)},mapNodeReady:function(t){window.setTimeout(function(){var e=new r.Event("map-node-ready");e.usingCSR=t,this.public.dispatchEvent(e),this._logWithMap(k.Events.MapNodeReady)}.bind(this),0),this.controlsLayer&&this.controlsLayer.updateRotationControl(),this._annotationsController&&this._annotationsController.mapSupportForLabelRegionsChanged()},_updateMapRoot:function(t){this._mapRoot&&this._mapRoot.remove(),this._mapRoot=this.rootNode.insertBefore(new w.Node(t.element),this.rootNode.firstChild),t.element.className="mk-map-node-element",this._mapRoot.size=t.size=this._scene.size,this._annotationsController&&this._mapRoot.addChild(this._annotationsController.node),this.controlsLayer&&this._mapRoot.addChild(this.controlsLayer)},_updateMapNodeTintAndEmphasis:function(t){var e=this.tint=this._mapType===z.MapTypes.Standard?this._colorScheme:z.ColorSchemes.Dark,i=this._colorScheme;this._mapType===z.MapTypes.Hybrid&&(i=z.ColorSchemes.Light),t.setTintAndEmphasis(e,i,this._emphasis),this._mapNodeController&&this._mapNodeController.setTintAndEmphasis(e,i,this._emphasis),this.controlsLayer&&this.controlsLayer.update(),this._annotationsController&&(this._annotationsController.mapNodeTintWasSet(e),this._annotationsController.node.classList.toggle("mk-dark-mode",s.darkColorScheme(e))),this.rootNode.classList.toggle("mk-dark-mode",s.darkColorScheme(e))},overlaySelectionDidChange:function(t){t.selected&&this._annotationsController&&(this._annotationsController.selectedItem=null);var e=new r.Event(t.selected?"select":"deselect");e.overlay=t,this.selectionMayChange=!1,this.public.dispatchEvent(e),delete this.selectionMayChange},annotationSelectionDidChange:function(t){t.selected&&this._overlaysController&&(this._overlaysController.selectedItem=null),this.selectionMayChange=!1,this.dispatchEventWithAnnotation(t.selected?"select":"deselect",t),delete this.selectionMayChange},dispatchEventWithAnnotation:function(t,e,i){var n=new r.Event(t);if(n.annotation=e,i)for(var o in i)n[o]=i[o];this.public.dispatchEvent(n)},addWaitingAnnotations:function(){this.shouldWaitForTilesAndControls()||(this._annotationsController?this._annotationsController.addWaitingAnnotations(this._dispatchCompleteEvent.bind(this)):this._dispatchCompleteEvent())},_dispatchCompleteEvent:function(){this._mapNode.fullyRendered&&this.public.dispatchEvent(new r.Event("complete"))},_handleLocaleChange:function(t){this._mapNodeController.handleMapConfigurationChange(),this._annotationsController&&(this._annotationsController.rtl=t.locale.rtl,this._userLocationController&&this._annotationsController.updateUserLocationAnnotation(this._userLocationController.userLocation,!0));var e=this.ensureRenderingFrame();0!==e.size.width&&0!==e.size.height&&this._setRenderingFrameValue(e)},_elementWasTapped:function(t){for(;null!==t;t=t.parentNode)if("a"===(e=t).localName||"button"===e.localName||"input"===e.localName&&"button"===e.type)return void t.click();var e},_devicePixelRatioDidChange:function(){this._scene.needsDisplay=!0,this.controlsLayer&&this.controlsLayer.devicePixelRatioDidChange(),this._annotationsController&&this._annotationsController.devicePixelRatioDidChange(),this._mapNode.devicePixelRatioDidChange()||this._mapNodeController.handleRecreate()},_mapRectAccountingForPadding:function(){var t=this.renderingMapRect;if(this._adjustedPadding.equals(u.Zero))return t.copy();var e=this.ensureVisibleFrame(),i=this.ensureRenderingFrame();return new A(t.minX()+this._adjustedPadding.left/i.size.width*t.size.width,t.minY()+this._adjustedPadding.top/i.size.height*t.size.height,t.size.width*(e.size.width/i.size.width),t.size.height*(e.size.height/i.size.height))},_setupListeners:function(){h.state===h.States.READY&&this._configurationDidBecomeAvailable(!0),h.addEventListener(h.Events.Changed,this),g.activeLocale&&this._handleLocaleChange({locale:g.activeLocale}),g.addEventListener(g.Events.LocaleChanged,this),this._boundDevicePixelRatioDidChange=this._devicePixelRatioDidChange.bind(this),this._dppxMediaQueryList=window.matchMedia("(-webkit-device-pixel-ratio: 1)"),this._dppxMediaQueryList.addListener(this._boundDevicePixelRatioDidChange),this._boundPrintMediaQueryChanged=this._printMediaQueryChanged.bind(this),this._printMediaQueryList=window.matchMedia("print"),this._printMediaQueryList.addListener(this._boundPrintMediaQueryChanged)},_removePrintListener:function(){this._printMediaQueryList.removeListener(this._boundPrintMediaQueryChanged),this._boundPrintMediaQueryChanged=null,this._printMediaQueryList=null},_printMediaQueryChanged:function(){var t=this._mapNode;this._printMediaQueryList.matches?(this.rootNode.element.style.background=this.rootNode.element.parentNode.dataset.mapPrintingBackground,t.fullyRendered?this._ensureMapCenterDuringPrint(!0):(t.opacity=0,this._annotationsController&&this._annotationsController.addWaitingAnnotations()),this._loadControlsLayer(!1),this._mapNodeController.handlePrintMatch(),C.flush()):(this._mapNodeController.handlePrintUnmatch(),t.opacity=1,this.rootNode.element.style.background="",this._ensureMapCenterDuringPrint(!1))},_ensureMapCenterDuringPrint:function(t){var e=[this._scene.element];this._mapNode.customCanvas&&e.push(this._mapNode.customCanvas),e.forEach((function(e){if(t){var i=this._scene.size;e.style.left="50%",e.style.marginLeft="-"+i.width/2+"px",e.style.top="50%",e.style.marginTop="-"+i.height/2+"px"}else e.style.left="",e.style.marginLeft="",e.style.top="",e.style.marginTop=""}),this)},_mapStabilizationTimeout:null,_startStabilizationTimeoutIfNeeded:function(){this._mapNodeController&&this._mapNode&&this._mapNode.fullyRendered&&!this.cameraIsMoving&&(this._stopStabilizationTimeout(),this._mapStabilizationTimeout=window.setTimeout(C.scheduleInBackground.bind(C,this._mapIsStabilized.bind(this)),500))},_stopStabilizationTimeout:function(){this._mapStabilizationTimeout&&(window.clearTimeout(this._mapStabilizationTimeout),this._mapStabilizationTimeout=null)},_mapIsStabilized:function(){this._updateMapFeatureRegionLayer(),this._updatePrintingBackground()},_updatePrintingBackground:function(){this._mapNode&&this._mapNode.cssBackgroundProperty&&this._mapNode.fullyRendered&&this.isRooted()&&(this.rootNode.element.parentNode.dataset.mapPrintingBackground=this._mapNode.cssBackgroundProperty)},_updateMapFeatureRegionLayer:function(){if(this._selectableMapFeatures&&this._mapNode&&this._mapNode.getMapFeatureRegions&&this._mapFeaturesLayerController&&this._mapNode.fullyRendered&&this.isRooted()){var t=-1!==this._selectableMapFeatures.indexOf(z.MapFeatureType.PointOfInterest),e=-1!==this._selectableMapFeatures.indexOf(z.MapFeatureType.Territory),i=this._mapNode.getMapFeatureRegions().filter((function(i){return t&&"Poi"===i.category||e&&"Territory"===i.category}));this._mapFeaturesLayerController.update(i,this._mapNode.camera),this._mapRoot.addChild(this._mapFeaturesLayerController.node,0)}},_logWithMap:function(t,e){if("Destroyed"!==this.state){var i={map:this,eventTarget:k.EventTarget};if(e)for(var n in e)i[n]=e[n];k.log(t,i)}}};var G=["LayerItemsController","ItemCollection","OverlaysController","MapFeaturesLayerController","AnnotationsController","UserLocationController","MapFeatureType"];function W(){for(var t=!0,e=0;e<G.length;e++){var i=G[e];!z[i]&&c.jsModules[i]?z[i]=c.jsModules[i]:t=!1}z.OverlaysController&&z.maps.forEach((function(t){t._impl.addOverlaysController()})),z.MapFeaturesLayerController&&z.maps.forEach((function(t){t._impl.addMapFeaturesLayerController()})),z.AnnotationsController&&z.maps.forEach((function(t){t._impl.addAnnotationsController()})),z.UserLocationController&&z.maps.forEach((function(t){t._impl.addUserLocationController()})),t&&c.removeEventListener("load",W)}c.addEventListener("load",W),W(),t.exports=z},1972:function(t,e,i){t.exports={Scene:i(1973),BaseNode:i(1974),GroupNode:i(2e3),ImageNode:i(2001),RenderItem:i(1999),NodeAnimator:i(2003),Size:i(1975),Point:i(1976),Matrix:i(1978)}},1973:function(t,e,i){var n=i(1974),o=i(1985),a=i(1948);function s(){n.call(this),this._renderer=new o(this)}s.prototype=a.inheritPrototype(n,s,{get element(){return this._renderer.element},destroy:function(){this.children=[],this._renderer._ctx=null,this._renderer._canvas.width=this._renderer._canvas.height=0},stringInfo:function(){return"Scene"}}),t.exports=s},1974:function(t,e,i){var n=i(1975),o=i(1976),a=i(1977),s=i(1978),r=i(1979),l=i(1980),h=(new s).toString();function c(){this._parent=null,this._children=[],this._renderer=null,this._opacity=1,this._size=new n,this._position=new o,this._transform=new s,this._frozen=!1,this._keyForFrozenLayer="",this._wantsLayerBacking=!1}function d(t){t._parent=null;for(var e=[t];e.length>0;){var i=e.pop();i.wasRemoved(),i._renderer&&"function"===typeof i._renderer.nodeWasRemoved&&i._renderer.nodeWasRemoved(),Array.prototype.push.apply(e,i.children)}}function u(t){for(var e=null,i=0,n=0;t&&!e;){var o=t.transform.transformPoint(t.position);i-=o.x,n-=o.y,e=(t=t.parent).element}return{element:e,offsetX:i,offsetY:n}}c.prototype={constructor:c,get scene(){for(var t=i(1973),e=this;e;e=e._parent)if(e instanceof t)return e},get renderer(){return this._renderer},get wantsLayerBacking(){return!!this.keyForFrozenLayer||this._frozen||this._wantsLayerBacking||this._needsLayerBacking()},set wantsLayerBacking(t){t!==this._wantsLayerBacking&&(this._wantsLayerBacking=t,this.needsDisplay=!0)},get frozen(){return!!this.keyForFrozenLayer||this._frozen},set frozen(t){t!==this._frozen&&(this._frozen=t,this.needsDisplay=!0)},get keyForFrozenLayer(){return this._keyForFrozenLayer},set keyForFrozenLayer(t){t!==this._keyForFrozenLayer&&(this._keyForFrozenLayer=t,this.needsDisplay=!0)},get opacity(){return this._opacity},set opacity(t){(t=Math.min(Math.max(0,t),1))!==this._opacity&&(this._opacity=t,this.needsDisplay=!0)},get position(){return this._position},set position(t){t.equals(this._position)||(this._position=t.copy(),this.needsDisplay=!0)},get transform(){return this._transform},set transform(t){this._transform=t,this.needsDisplay=!0},get size(){return this._size},set size(t){this._size=t||new n,this.needsDisplay=!0},get bounds(){return new a(this._position.x,this._position.y,this.size.width,this.size.height)},get layerBounds(){for(var t=new a(0,0,this.size.width,this.size.height),e=this._children,i=0,n=e.length;i<n;++i){var s=e[i],r=s.layerBounds;r.origin.x+=s._position.x,r.origin.y+=s._position.y;for(var l=s.transform,h=[l.transformPoint(new o(r.minX(),r.minY())),l.transformPoint(new o(r.maxX(),r.minY())),l.transformPoint(new o(r.maxX(),r.maxY())),l.transformPoint(new o(r.minX(),r.maxY()))],c=h[0].x,d=h[0].y,u=h[0].x,p=h[0].y,m=1;m<h.length;++m){var g=h[m];g.x<c&&(c=g.x),g.x>u&&(u=g.x),g.y<d&&(d=g.y),g.y>p&&(p=g.y)}t=t.unionWithRect(new a(c,d,u-c,p-d))}return t},set needsDisplay(t){t&&l.scheduleNode(this)},get parent(){return this._parent},get children(){return this._children},set children(t){for(var e=0,i=0,n=[].concat(this._children);e<t.length;)n[i]!==t[e]?n[i]&&-1===t.indexOf(n[i])?(this.removeChild(n[i]),i++):(t[e]._parent===this&&n.splice(n.indexOf(t[e]),1),this.addChild(t[e],e),e++):(e++,i++);for(;i<n.length;)this.removeChild(n[i]),i++},get childCount(){return this._children.length},get firstChild(){return this._children[0]||null},get lastChild(){return this._children[this._children.length-1]||null},get previousSibling(){if(!this._parent)return null;var t=this._parent._children,e=t.indexOf(this);return e>0?t[e-1]:null},get nextSibling(){if(!this._parent)return null;var t=this._parent._children,e=t.indexOf(this);return-1!==e&&e<t.length-1?t[e+1]:null},toString:function(){var t="";return this.element&&(t+="\ud83c\udff7 "),this.wantsLayerBacking&&(t+="\ud83c\udfc1 "),this.frozen&&(t+="\u2744\ufe0f ",this.keyForFrozenLayer&&(t+="<"+this.keyForFrozenLayer+">")),this.stringInfo&&"function"===typeof this.stringInfo?t+=this.stringInfo():t+="UnknownNode",0===this.position.x&&0===this.position.y||(t+=" ("+this.position.x+", "+this.position.y+")"),"number"===typeof this.repeatOffset&&(t+=(this.repeatOffset>0?"+":"")+this.repeatOffset+" "),0===this.size.width&&0===this.size.height||(t+=" "+this.size.width+"x"+this.size.height),1!==this.opacity&&(t+=" [opacity:"+this.opacity+"]"),this.transform.toString()!==h&&(t+=" ["+this.transform.toString()+"]"),this.animators&&this.animators.forEach((function(e){t+=" "+e.stringInfo()})),t},dump:function(t,e){return void 0===t&&(t=1/0),function t(e,i,n,o,a){var s="";if(s+=i,a&&(s+=function(t){return t<0?"":t+":"}(n)),s+=e.toString(),s+=function(t){return t.childCount<1?"":" \u2935\ufe0e "+t.childCount}(e),e.extraInfo&&"function"===typeof e.extraInfo&&e.extraInfo().forEach((function(t){s+="\n"+i+"| "+t})),0===o)return s;for(var r=e.children,l=0,h=r.length;l<h;++l){var c=e.childCount<1?-1:l;s+="\n",s+=t(r[l],i+"    ",c,o-1,a)}return s}(this,"",-1,t,!!e)},addChild:function(t,e){return t.remove(),(void 0===e||e<0||e>this._children.length)&&(e=this._children.length),this._children.splice(e,0,t),t._parent=this,this.needsDisplay=!0,t},insertBefore:function(t,e){return this.addChild(t,this._children.indexOf(e))},insertAfter:function(t,e){return this.addChild(t,this._children.indexOf(e)+1)},removeChild:function(t){if(t._parent===this){var e=this._children.indexOf(t);if(-1!==e)return this._children.splice(e,1),d(t),this.needsDisplay=!0,t}},replaceChild:function(t,e){if(e&&e._parent===this){var i=this._children.indexOf(e);return t.remove(),this._children.splice(i,1,t),d(e),t._parent=this,this.needsDisplay=!0,e}},remove:function(){if(this._parent instanceof c)return this._parent.removeChild(this)},wasRemoved:function(){},convertPointFromPage:function(t){if(this.element)return r.fromPageToElement(this.element,t);var e=u(this),i=r.fromPageToElement(e.element,t);return new o(i.x+e.offsetX,i.y+e.offsetY)},convertPointToPage:function(t){if(this.element)return r.fromElementToPage(this.element,t);var e=u(this),i=r.fromElementToPage(e.element,t);return new o(i.x-e.offsetX,i.y-e.offsetY)},_needsLayerBacking:function(){return this.opacity<1&&(this._children.length>1||1===this._children.length&&this._children[0]._children.length>0)}},t.exports=c},1975:function(t,e){function i(t,e){this.width=t||0,this.height=e||0}t.exports=i,i.Zero=new i,i.prototype={constructor:i,toString:function(){return"Size["+this.width+", "+this.height+"]"},copy:function(){return new i(this.width,this.height)},equals:function(t){return this.width===t.width&&this.height===t.height}}},1976:function(t,e){function i(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}t.exports=i,i.Zero=new i,i.fromEvent=function(t){var e="undefined"!==typeof TouchEvent&&t instanceof TouchEvent?t.targetTouches[0]:t;return new i(e.pageX,e.pageY)},i.fromEventInElement=function(t,e){var n="undefined"!==typeof TouchEvent&&t instanceof TouchEvent?t.targetTouches[0]:t,o=window.webkitConvertPointFromPageToNode(e,new WebKitPoint(n.pageX,n.pageY));return new i(o.x,o.y)},i.prototype={constructor:i,toString:function(){return"Point["+[this.x,this.y,this.z].join(", ")+"]"},copy:function(){return new i(this.x,this.y,this.z)},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},distanceToPoint:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)+Math.pow(this.z-t.z,2))}}},1977:function(t,e,i){t.exports=a;var n=i(1976),o=i(1975);function a(t,e,i,a){this.origin=new n(t||0,e||0),this.size=new o(i||0,a||0)}a.Zero=new a,a.rectFromClientRect=function(t){return new a(t.left,t.top,t.width,t.height)},a.unionOfRects=function(t){for(var e=t[0],i=1;i<t.length;++i)e=e.unionWithRect(t[i]);return e},a.prototype={constructor:a,toString:function(){return"Rect["+[this.origin.x,this.origin.y,this.size.width,this.size.height].join(", ")+"]"},copy:function(){return new a(this.origin.x,this.origin.y,this.size.width,this.size.height)},equals:function(t){return this.origin.equals(t.origin)&&this.size.equals(t.size)},inset:function(t,e,i,n){return new a(this.origin.x+t,this.origin.y+e,this.size.width-t-i,this.size.height-e-n)},pad:function(t){return new a(this.origin.x-t,this.origin.y-t,this.size.width+2*t,this.size.height+2*t)},minX:function(){return this.origin.x},minY:function(){return this.origin.y},midX:function(){return this.origin.x+this.size.width/2},midY:function(){return this.origin.y+this.size.height/2},maxX:function(){return this.origin.x+this.size.width},maxY:function(){return this.origin.y+this.size.height},intersectionWithRect:function(t){var e=new a,i=Math.max(this.minX(),t.minX()),n=Math.min(this.maxX(),t.maxX());if(i>n)return e;var o=Math.max(this.minY(),t.minY()),s=Math.min(this.maxY(),t.maxY());return o>s||(e.origin.x=i,e.origin.y=o,e.size.width=n-i,e.size.height=s-o),e},unionWithRect:function(t){var e=Math.min(this.minX(),t.minX()),i=Math.min(this.minY(),t.minY());return new a(e,i,Math.max(this.maxX(),t.maxX())-e,Math.max(this.maxY(),t.maxY())-i)},round:function(){return new a(Math.floor(this.origin.x),Math.floor(this.origin.y),Math.ceil(this.size.width),Math.ceil(this.size.height))}}},1978:function(t,e,i){var n=i(1976);function o(){if(this._=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],6===arguments.length)this._setValues(["a","b","c","d","e","f"],arguments);else if(16===arguments.length)this._setValues(["m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44"],arguments);else if(1==arguments.length){var t=arguments[0];if("string"===typeof t){if("none"===t)return;t=t.match(/\bmatrix(?:3d)?\(([^)]+)\)/)[1].split(",").map(parseFloat)}6===t.length?this._setValues(["a","b","c","d","e","f"],t):16===t.length&&this._setValues(["m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44"],t)}}function a(t){return t/180*Math.PI}function s(t,e,i,n){return t*n-e*i}function r(t,e,i,n,o,a,r,l,h){return t*s(o,a,l,h)-n*s(e,i,l,h)+r*s(e,i,o,a)}o.prototype={constructor:o,get a(){return this._[0][0]},get b(){return this._[0][1]},get c(){return this._[1][0]},get d(){return this._[1][1]},get e(){return this._[3][0]},get f(){return this._[3][1]},get m11(){return this._[0][0]},get m12(){return this._[0][1]},get m13(){return this._[0][2]},get m14(){return this._[0][3]},get m21(){return this._[1][0]},get m22(){return this._[1][1]},get m23(){return this._[1][2]},get m24(){return this._[1][3]},get m31(){return this._[2][0]},get m32(){return this._[2][1]},get m33(){return this._[2][2]},get m34(){return this._[2][3]},get m41(){return this._[3][0]},get m42(){return this._[3][1]},get m43(){return this._[3][2]},get m44(){return this._[3][3]},set a(t){this._[0][0]=t},set b(t){this._[0][1]=t},set c(t){this._[1][0]=t},set d(t){this._[1][1]=t},set e(t){this._[3][0]=t},set f(t){this._[3][1]=t},set m11(t){this._[0][0]=t},set m12(t){this._[0][1]=t},set m13(t){this._[0][2]=t},set m14(t){this._[0][3]=t},set m21(t){this._[1][0]=t},set m22(t){this._[1][1]=t},set m23(t){this._[1][2]=t},set m24(t){this._[1][3]=t},set m31(t){this._[2][0]=t},set m32(t){this._[2][1]=t},set m33(t){this._[2][2]=t},set m34(t){this._[2][3]=t},set m41(t){this._[3][0]=t},set m42(t){this._[3][1]=t},set m43(t){this._[3][2]=t},set m44(t){this._[3][3]=t},translate:function(t,e,i){return t=t||0,e=e||0,i=i||0,this._[3][0]+=t*this._[0][0]+e*this._[1][0]+i*this._[2][0],this._[3][1]+=t*this._[0][1]+e*this._[1][1]+i*this._[2][1],this._[3][2]+=t*this._[0][2]+e*this._[1][2]+i*this._[2][2],this._[3][3]+=t*this._[0][3]+e*this._[1][3]+i*this._[2][3],this},scale:function(t,e,i){return t=t||1,e=e||t,i=i||1,this._[0][0]*=t,this._[0][1]*=t,this._[0][2]*=t,this._[0][3]*=t,this._[1][0]*=e,this._[1][1]*=e,this._[1][2]*=e,this._[1][3]*=e,this._[2][0]*=i,this._[2][1]*=i,this._[2][2]*=i,this._[2][3]*=i,this},rotate:function(t){return this.rotateAxisAngle(0,0,1,t)},rotateAxisAngle:function(t,e,i,n){0===t&&0===e&&0===i&&(i=1);var s=Math.sqrt(t*t+e*e+i*i);1!=s&&(t/=s,e/=s,i/=s),n=a(n);var r=Math.sin(n),l=Math.cos(n),h=new o;if(1===t&&0===e&&0===i)h._[0][0]=1,h._[0][1]=0,h._[0][2]=0,h._[1][0]=0,h._[1][1]=l,h._[1][2]=r,h._[2][0]=0,h._[2][1]=-r,h._[2][2]=l,h._[0][3]=h._[1][3]=h._[2][3]=0,h._[3][0]=h._[3][1]=h._[3][2]=0,h._[3][3]=1;else if(0===t&&1===e&&0===i)h._[0][0]=l,h._[0][1]=0,h._[0][2]=-r,h._[1][0]=0,h._[1][1]=1,h._[1][2]=0,h._[2][0]=r,h._[2][1]=0,h._[2][2]=l,h._[0][3]=h._[1][3]=h._[2][3]=0,h._[3][0]=h._[3][1]=h._[3][2]=0,h._[3][3]=1;else if(0===t&&0===e&&1===i)h._[0][0]=l,h._[0][1]=r,h._[0][2]=0,h._[1][0]=-r,h._[1][1]=l,h._[1][2]=0,h._[2][0]=0,h._[2][1]=0,h._[2][2]=1,h._[0][3]=h._[1][3]=h._[2][3]=0,h._[3][0]=h._[3][1]=h._[3][2]=0,h._[3][3]=1;else{var c=1-l;h._[0][0]=l+t*t*c,h._[0][1]=e*t*c+i*r,h._[0][2]=i*t*c-e*r,h._[1][0]=t*e*c-i*r,h._[1][1]=l+e*e*c,h._[1][2]=i*e*c+t*r,h._[2][0]=t*i*c+e*r,h._[2][1]=e*i*c-t*r,h._[2][2]=l+i*i*c,h._[0][3]=h._[1][3]=h._[2][3]=0,h._[3][0]=h._[3][1]=h._[3][2]=0,h._[3][3]=1}return this.multiply(h)},multiply:function(t){var e=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return e[0][0]=t._[0][0]*this._[0][0]+t._[0][1]*this._[1][0]+t._[0][2]*this._[2][0]+t._[0][3]*this._[3][0],e[0][1]=t._[0][0]*this._[0][1]+t._[0][1]*this._[1][1]+t._[0][2]*this._[2][1]+t._[0][3]*this._[3][1],e[0][2]=t._[0][0]*this._[0][2]+t._[0][1]*this._[1][2]+t._[0][2]*this._[2][2]+t._[0][3]*this._[3][2],e[0][3]=t._[0][0]*this._[0][3]+t._[0][1]*this._[1][3]+t._[0][2]*this._[2][3]+t._[0][3]*this._[3][3],e[1][0]=t._[1][0]*this._[0][0]+t._[1][1]*this._[1][0]+t._[1][2]*this._[2][0]+t._[1][3]*this._[3][0],e[1][1]=t._[1][0]*this._[0][1]+t._[1][1]*this._[1][1]+t._[1][2]*this._[2][1]+t._[1][3]*this._[3][1],e[1][2]=t._[1][0]*this._[0][2]+t._[1][1]*this._[1][2]+t._[1][2]*this._[2][2]+t._[1][3]*this._[3][2],e[1][3]=t._[1][0]*this._[0][3]+t._[1][1]*this._[1][3]+t._[1][2]*this._[2][3]+t._[1][3]*this._[3][3],e[2][0]=t._[2][0]*this._[0][0]+t._[2][1]*this._[1][0]+t._[2][2]*this._[2][0]+t._[2][3]*this._[3][0],e[2][1]=t._[2][0]*this._[0][1]+t._[2][1]*this._[1][1]+t._[2][2]*this._[2][1]+t._[2][3]*this._[3][1],e[2][2]=t._[2][0]*this._[0][2]+t._[2][1]*this._[1][2]+t._[2][2]*this._[2][2]+t._[2][3]*this._[3][2],e[2][3]=t._[2][0]*this._[0][3]+t._[2][1]*this._[1][3]+t._[2][2]*this._[2][3]+t._[2][3]*this._[3][3],e[3][0]=t._[3][0]*this._[0][0]+t._[3][1]*this._[1][0]+t._[3][2]*this._[2][0]+t._[3][3]*this._[3][0],e[3][1]=t._[3][0]*this._[0][1]+t._[3][1]*this._[1][1]+t._[3][2]*this._[2][1]+t._[3][3]*this._[3][1],e[3][2]=t._[3][0]*this._[0][2]+t._[3][1]*this._[1][2]+t._[3][2]*this._[2][2]+t._[3][3]*this._[3][2],e[3][3]=t._[3][0]*this._[0][3]+t._[3][1]*this._[1][3]+t._[3][2]*this._[2][3]+t._[3][3]*this._[3][3],this._=e,this},skewX:function(t){return this._skew(t,0)},skewY:function(t){return this._skew(0,t)},isAffine:function(){return 0==this._[0][2]&&0==this._[0][3]&&0==this._[1][2]&&0==this._[1][3]&&0==this._[2][0]&&0==this._[2][1]&&1==this._[2][2]&&0==this._[2][3]&&0==this._[3][2]&&1==this._[3][3]},inverse:function(){if(this._isIdentityOrTranslation())return 0==this._[3][0]&&0==this._[3][1]&&0==this._[3][2]||(this._[3][0]*=-1,this._[3][1]*=-1,this._[3][2]*=-1),this;var t=new o;return function(t,e){!function(t,e){var i=t._[0][0],n=t._[0][1],o=t._[0][2],a=t._[0][3],s=t._[1][0],l=t._[1][1],h=t._[1][2],c=t._[1][3],d=t._[2][0],u=t._[2][1],p=t._[2][2],m=t._[2][3],g=t._[3][0],f=t._[3][1],_=t._[3][2],y=t._[3][3];e._[0][0]=r(l,u,f,h,p,_,c,m,y),e._[1][0]=-r(s,d,g,h,p,_,c,m,y),e._[2][0]=r(s,d,g,l,u,f,c,m,y),e._[3][0]=-r(s,d,g,l,u,f,h,p,_),e._[0][1]=-r(n,u,f,o,p,_,a,m,y),e._[1][1]=r(i,d,g,o,p,_,a,m,y),e._[2][1]=-r(i,d,g,n,u,f,a,m,y),e._[3][1]=r(i,d,g,n,u,f,o,p,_),e._[0][2]=r(n,l,f,o,h,_,a,c,y),e._[1][2]=-r(i,s,g,o,h,_,a,c,y),e._[2][2]=r(i,s,g,n,l,f,a,c,y),e._[3][2]=-r(i,s,g,n,l,f,o,h,_),e._[0][3]=-r(n,l,u,o,h,p,a,c,m),e._[1][3]=r(i,s,d,o,h,p,a,c,m),e._[2][3]=-r(i,s,d,n,l,u,a,c,m),e._[3][3]=r(i,s,d,n,l,u,o,h,p)}(t,e);var i=t._determinant();if(Math.abs(i)<1e-8)return!1;for(var n=0;n<4;n++)for(var o=0;o<4;o++)e._[n][o]=e._[n][o]/i;return!0}(this,t)?t:new o},transformPoint:function(t){return new n(this._[0][0]*t.x+this._[1][0]*t.y+this._[2][0]*t.z+this._[3][0],this._[0][1]*t.x+this._[1][1]*t.y+this._[2][1]*t.z+this._[3][1],this._[0][2]*t.x+this._[1][2]*t.y+this._[2][2]*t.z+this._[3][2])},toString:function(){return this.isAffine()?"matrix("+[this._[0][0],this._[0][1],this._[1][0],this._[1][1],this._[3][0],this._[3][1]].join(", ")+")":"matrix3d("+this._.map((function(t){return t.join(", ")})).join(", ")+")"},_setValues:function(t,e){t.forEach((function(t,i){this[t]=e[i]}),this)},_isIdentityOrTranslation:function(){return 1==this._[0][0]&&0==this._[0][1]&&0==this._[0][2]&&0==this._[0][3]&&0==this._[1][0]&&1==this._[1][1]&&0==this._[1][2]&&0==this._[1][3]&&0==this._[2][0]&&0==this._[2][1]&&1==this._[2][2]&&0==this._[2][3]&&1==this._[3][3]},_skew:function(t,e){var i=new o;return i._[0][1]=Math.tan(a(e)),i._[1][0]=Math.tan(a(t)),this.multiply(i)},_determinant:function(){var t=this._[0][0],e=this._[0][1],i=this._[0][2],n=this._[0][3],o=this._[1][0],a=this._[1][1],s=this._[1][2],l=this._[1][3],h=this._[2][0],c=this._[2][1],d=this._[2][2],u=this._[2][3],p=this._[3][0],m=this._[3][1],g=this._[3][2],f=this._[3][3];return t*r(a,c,m,s,d,g,l,u,f)-e*r(o,h,p,s,d,g,l,u,f)+i*r(o,h,p,a,c,m,l,u,f)-n*r(o,h,p,a,c,m,s,d,g)}},t.exports=o},1979:function(t,e,i){var n=i(1978),o=i(1976);function a(t){for(var e,i=t.getBoundingClientRect(),a=t.offsetWidth,s=t.offsetHeight,r=[new o(0,0),new o(a,0),new o(a,s),new o(0,s)],l=new n,h=t.ownerDocument.defaultView;t.nodeType===Node.ELEMENT_NODE;)e=h.getComputedStyle(t),l=new n(e.transform).multiply(l),t=t.parentNode;var c=1/0,d=1/0;r.forEach((function(t){var e=l.transformPoint(t);c=Math.min(c,e.x),d=Math.min(d,e.y)}));var u=window.pageXOffset+i.left-c,p=window.pageYOffset+i.top-d;return(new n).translate(u,p).multiply(l)}t.exports={fromPageToElement:function(t,e){return a(t).inverse().transformPoint(e)},fromElementToPage:function(t,e){return a(t).transformPoint(e)}}},1980:function(t,e,i){var n=i(1981),o=[];function a(){var t=o;o=[];for(var e=[],i=0,n=t.length;i<n;++i){var a=t[i].scene;a&&s(e,a)&&a.renderer.update()}}function s(t,e){return-1===t.indexOf(e)&&(t.push(e),!0)}t.exports={scheduleNode:function(t){s(o,t)&&1===o.length&&n.scheduleDraw(a)}}},1981:function(t,e,i){var n=i(1982),o=i(1984),a=-1,s=[],r=[],l=[],h=0;function c(){-1===a&&(s.length>0||l.length>0)&&(a=window.requestAnimationFrame(d))}function d(){3===h&&-1!==a&&window.cancelAnimationFrame(a),function(){for(h=1;s.length>0;){var t=s;s=[];for(var e=0,i=t.length;e<i;++e){var n=t[e];"function"===typeof n?n():n&&"object"===typeof n&&"function"===typeof n.performScheduledUpdate&&n.performScheduledUpdate()}}s=r,r=[]}(),function(){h=2;var t=l;l=[];for(var e=0,i=t.length;e<i;++e){var n=t[e];"function"===typeof n?n():n&&"object"===typeof n&&"function"===typeof n.performScheduledDraw&&n.performScheduledDraw()}}(),h=0,a=-1,c()}function u(t,e){return-1===t.indexOf(e)&&(t.push(e),!0)}t.exports={scheduleASAP:function(t){u(s,t)&&c()},scheduleOnNextFrame:function(t){u(1===h?r:s,t)&&c()},scheduleDraw:function(t){u(l,t)&&c()},flush:function(){h>0||(h=3,d())},Priority:o,scheduleInBackground:function(t,e){n.schedule(t,e||o.Low)}}},1982:function(t,e,i){var n=i(1983),o=i(1984),a=[{timeout:600},{timeout:1e3},{timeout:3e3},{}],s=[function(t){c(t,o.Highest)},function(t){c(t,o.High)},function(t){c(t,o.Medium)},function(t){c(t,o.Low)}],r=[-1,-1,-1,-1],l=[];for(var h in o)l[o[h]]=[];function c(t,e){for(;(t.timeRemaining()>0||t.didTimeout)&&l[e].length;){var i=l[e].shift();"function"===typeof i?i():i&&"object"===typeof i&&"function"===typeof i.performScheduledTask&&i.performScheduledTask()}l[e].length?r[e]=n.request(s[e],a[e]):(n.cancel(r[e]),r[e]=-1)}t.exports={schedule:function(t,e){l[e].push(t),-1===r[e]&&(r[e]=n.request(s[e],a[e]))}}},1983:function(t,e){function i(){this._startTime=Date.now()}i.prototype={_budget:10,didTimeout:!1,timeRemaining:function(){return Math.max(0,this._budget-(Date.now()-this._startTime))}},t.exports.request=function(t,e){return"undefined"!==typeof window&&window.requestIdleCallback?window.requestIdleCallback(t,e):function(t){return setTimeout((function(){var e=new i;t(e)}))}(t)},t.exports.cancel=function(t,e){return"undefined"!==typeof window&&window.cancelIdleCallback?window.cancelIdleCallback(t,e):clearTimeout(t)}},1984:function(t,e){t.exports={Highest:0,High:1,Medium:2,Low:3}},1985:function(t,e,i){var n=i(1977),o=i(1948),a=i(1986),s=i(1999);function r(t){s.call(this,t),this._canvas=this.createCanvas(),this._ctx=this._canvas.getContext("2d")}r.prototype=o.inheritPrototype(s,r,{get element(){return this._canvas},update:function(){if(this._ctx){var t=this._node,e=t.size,i=a.devicePixelRatio,o=!this._previousScale||this._previousScale!==i;o&&s.releaseSharedLayers(),!o&&this._previousSize&&this._previousSize.equals(e)?this._ctx.clearRect(0,0,e.width*i,e.height*i):(this._canvas.style.width=e.width+"px",this._canvas.style.height=e.height+"px",this._canvas.width=e.width*i,this._canvas.height=e.height*i,this._previousSize=e.copy(),this._previousScale=i),this._ctx.scale(i,i),function t(e,i,n,o,a,s){if(i&&0!==e.opacity){var r=e.renderer;a&&r.releaseLayer(!0);var l=r.shouldDraw,h=e.wantsLayerBacking?r.layer:null;if(h||e.frozen||r.releaseLayer(),!e.wantsLayerBacking||h){var c=function(r){if(i.save(),i.translate(r,u),i.transform(p.a,p.b,p.c,p.d,p.e,p.f),i.globalAlpha=s,l||!e.frozen){var c=h?h.getContext("2d"):i;e.renderer.draw(c);for(var d=e.children,m=0,g=d.length;m<g;++m)t(d[m],c,n,o,a,h?1:s)}h&&0!==h.width&&0!==h.height&&i.drawImage(h,e.layerBounds.origin.x,e.layerBounds.origin.y,h.width/o,h.height/o),i.restore()},d=e.position.x,u=e.position.y,p=e.transform;s*=e.opacity,c(d),e.repeatOffset&&c(d+e.repeatOffset)}}}(this.node,this._ctx,new n(-t.position.x,-t.position.y,e.width,e.height),i,o,1),this._ctx.scale(1/i,1/i)}}}),t.exports=r},1986:function(t,e,i){var n=i(1987).Tints,o=i(1988).MaximumRestrictedRotation,a=window.document&&i(1989).SupportsTouches,s=window.document&&i(1989).SupportsPointerEvents,r=window.document&&"ShadowRoot"in window;if(r&&window.navigator&&window.navigator.appVersion){var l=parseInt((navigator.appVersion.match(/AppleWebKit\/(\d+)/)||[])[1],10);l>=602&&l<605&&(r=!1)}function h(t,e){var i=window.document.createElementNS(this,t),n=1;if("object"===typeof e&&null!=e&&!(e instanceof window.Node))for(var o in++n,e)i.setAttribute(o,e[o]);for(var a=n,s=arguments.length;a<s;++a){var r=arguments[a];r instanceof window.Node?i.appendChild(r):"string"===typeof r&&i.appendChild(document.createTextNode(r))}return i}t.exports={focusColor:"rgb(0, 122, 255)",get devicePixelRatio(){return Math.max(Math.round(window.devicePixelRatio),1)||1},roundToDevicePixel:function(t,e){var i=e||this.devicePixelRatio;return Math.round(t*i)/i},supportsTouches:a,supportsPointerEvents:s,supportsGestureEvents:!!window.GestureEvent,startEventType:s?"pointerdown":a?"touchstart":"mousedown",moveEventType:s?"pointermove":a?"touchmove":"mousemove",endEventType:s?"pointerup":a?"touchend":"mouseup",cancelEventType:s?"pointercancel":a?"touchcancel":void 0,supportsForceTouch:!a&&window.document&&"webkitForce"in MouseEvent.prototype,htmlElement:h.bind("http://www.w3.org/1999/xhtml"),svgElement:h.bind("http://www.w3.org/2000/svg"),supportsShadowDOM:r,insideIframe:window.top!==window,getShadowDOMTargetFromEvent:function(t,e){var i=this.containingDocumentOrShadowRoot(t);if(i===document)return e.target;var n=e.changedTouches?e.changedTouches[0]:e;return i.elementFromPoint(n.clientX,n.clientY)||document.body},containingDocumentOrShadowRoot:function(t){return this.supportsShadowDOM?t.getRootNode():document},addShadowRootChild:function(t,e){var n,o=i(1997).Node;return this.supportsShadowDOM?n=t.createAndAddShadowRootChild():(n=t.addChild(new o),e=function(t){for(var e,i="";e=t.match(/:host\(/);){i+=t.substr(0,e.index),t=t.substr(e.index+e[0].length);for(var n=1;e=t.match(/^([^()]*)([()])?/);){if(t=t.substr(e[0].length),"("===e[2])n+=1;else if(")"===e[2]&&0===(n-=1)){i+=e[1];break}if(i+=e[0],!e[2])break}}return i+t}(e)),n.addChild(new o(this.htmlElement("style",e))),n},parentNodeForSvgTarget:function(t){return t.tagName&&"div"!==t.tagName.toLowerCase()?this.parentNodeForSvgTarget(t.parentNode):t},imagePathForDevice:function(t,e,i){var n,o=Math.floor(this.devicePixelRatio);return e+((n=-1!==t.indexOf(o)?o:o>t[t.length-1]?t[t.length-1]:t[0])>1?"_"+n+"x":"")+(i||".png")},parseQueryString:function(t){var e,i={},n=/\+/g,o=/([^&=]+)=?([^&]*)/g,a=function(t){return decodeURIComponent(t.replace(n," "))};if("string"===typeof t)for(;null!==(e=o.exec(t));)i[a(e[1])]=a(e[2]);return i},createSVGIcon:function(t,e){var i="mk-icon";e.class&&(i+=" "+e.class,delete e.class);var n=this.svgElement("svg",e);return n.setAttribute("class",i),n.setAttribute("focusable",!1),n.appendChild(this.svgElement("g")).appendChild(t),n},convertColorToRGB:function(t){var e=document.createElement("div");return e.style.setProperty("color",t),e.style.color},isValidCSSColor:function(t){return""!==this.convertColorToRGB(t)},updateLabel:function(t,e){t.setAttribute("title",e),t.setAttribute("aria-label",e)},easeInOut:function(t){var e=Math.pow(t,2);return e/(e+Math.pow(1-t,2))},lerp:function(t,e,i){return(1-t)*e+t*i},darkColorScheme:function(t){return t===n.Dark},restrictRotation:function(t){return t<180?Math.min(t,o):Math.max(t,360-o)},getIntegralZoom:function(t){return Math.floor(t+1e-6)},getCorsAttribute:function(t){return t?"use-credentials":"anonymous"}}},1987:function(t,e){t.exports={Tints:{Dark:"dark",Light:"light"},FallbackType:{SPILE:"TEST_FAILURE",FETCH:"TEST_FETCH_FAILURE",CACHE:"TEST_CACHE_FALLBACK",WEBGL:"TEST_WEBGL_FALLBACK",FEATURE:"BOOTSTRAP_FEATURE_FAILURE",SUFFICIENT:"BOOTSTRAP_FEATURE_SUFFICIENT",RENDER:"SYRUP_RENDER_FAILURE",INIT:"SYRUP_INIT_FAILURE",CONFIG_CHANGE:"CONFIGURATION_CHANGE_FALLBACK",CONFIG_MISSING:"CONFIGURATION_MISSING_FALLBACK"},WheelEventTimeout:100,WheelZoomFactor:.0075}},1988:function(t,e,i){var n=i(1975),o={blue:[0,122,255],green:[52,199,89],indigo:[88,86,214],orange:[255,149,0],pink:[255,45,85],purple:[175,82,222],red:[255,59,48],teal:[90,200,250],yellow:[255,204,0],gray:[142,142,147],gray2:[174,174,178],gray3:[199,199,204],gray4:[209,209,214],gray5:[229,229,234],gray6:[242,242,247]};t.exports={MapTypes:{Satellite:"satellite",Hybrid:"hybrid",MutedStandard:"mutedStandard",Standard:"standard"},Distances:{Adaptive:"adaptive",Metric:"metric",Imperial:"imperial"},Emphasis:{Muted:"muted",Standard:"standard"},FeatureVisibility:{Adaptive:"adaptive",Hidden:"hidden",Visible:"visible"},SystemColors:{default:o,light:o,dark:{blue:[10,132,255],green:[48,209,88],indigo:[94,92,230],orange:[255,159,10],pink:[255,55,95],purple:[191,90,242],red:[255,69,58],teal:[100,210,255],yellow:[255,214,10],gray:[142,142,147],gray2:[99,99,102],gray3:[72,72,74],gray4:[58,58,60],gray5:[44,44,46],gray6:[28,28,30]}},MarkerAnnotationFontFamily:'"SFProRegular", "-apple-system", "BlinkMacSystemFont", "Helvetica Neue", Helvetica, Arial, sans-serif',MapTiledLayerMinZoomLevel:2,MapTiledLayerMaxZoomLevel:20,ZoomTypes:{Button:"BUTTON",Scroll:"SCROLL",DoubleTap:"DOUBLE_TAP",Pinch:"PINCH"},MapSizes:{minimumSizeToShowControls:new n(306,220),minimumSizeToShowLogo:new n(200,100),minimumSizeToShowLogoWithReducedMargin:new n(100,100)},MaximumRestrictedRotation:30}},1989:function(t,e,i){var n=i(1990);t.exports={GestureRecognizer:n,SupportsTouches:n.SupportsTouches,SupportsPointerEvents:n.SupportsPointerEvents,States:n.States,LongPress:i(1991),Pan:i(1992),Pinch:i(1993),Rotation:i(1994),Swipe:i(1995),Tap:i(1996)}},1990:function(t,e,i){var n=i(1953),o=i(1976),a=i(1979),s=i(1948);function r(){n.EventTarget.call(this),this._targetTouches=[],this._lastKnownEventLocation=null,this._shouldHandleTrackingEvents=!1,this._domEvents=[],this.mode=r.Modes.Adaptive,this._enabled=!0,this._target=null,this.state=r.States.Possible,this.delegate=null}r.Modes={Adaptive:"adaptive",Pointer:"pointer",Touch:"touch",Mouse:"mouse"},r.SupportsPointerEvents="PointerEvent"in window,r.SupportsTouches=s.supportsTouches(),r.SupportsGestures=!!window.GestureEvent,r.SupportsGestures?r.SupportsPointerEvents?r.UseGesturesForRotation=r.UseGesturesForPinch=!r.SupportsTouches:(r.UseGesturesForRotation=!r.SupportsTouches,r.UseGesturesForPinch=!0):(r.UseGesturesForRotation=!1,r.UseGesturesForPinch=!1),r.States={Possible:"possible",Began:"began",Changed:"changed",Ended:"ended",Cancelled:"cancelled",Failed:"failed",Recognized:"ended"};var l={Start:"pointerdown",Move:"pointermove",End:"pointerup",Cancel:"pointercancel",GestureStart:"gesturestart",GestureChange:"gesturechange",GestureEnd:"gestureend",StateChange:"statechange"},h={Start:"touchstart",Move:"touchmove",End:"touchend",Cancel:"touchcancel",GestureStart:"gesturestart",GestureChange:"gesturechange",GestureEnd:"gestureend",StateChange:"statechange"},c={Start:"mousedown",Move:"mousemove",End:"mouseup",Cancel:void 0,GestureStart:"gesturestart",GestureChange:"gesturechange",GestureEnd:"gestureend",StateChange:"statechange"};r.prototype=Object.create(n.EventTarget.prototype,{mode:{get:function(){return this._mode},set:function(t){if(this._mode!==t){if(this._targetTouches.length)throw new Error("Cannot switch between modes in the middle of gesture.");switch(this._removeBaseListeners(),t){case r.Modes.Adaptive:r.SupportsPointerEvents?this.events=l:r.SupportsTouches?this.events=h:this.events=c;break;case r.Modes.Pointer:this.events=l;break;case r.Modes.Touch:this.events=h;break;case r.Modes.Mouse:this.events=c}this._mode=t,this._updateBaseListeners()}}},currentMode:{get:function(){if(this._mode===r.Modes.Adaptive)switch(this.events){case l:return r.Modes.Pointer;case h:return r.Modes.Touch;case c:return r.Modes.Mouse}return this._mode}},target:{get:function(){return this._target},set:function(t){this._target!==t&&(this._removeBaseListeners(),t&&(this._target=t,this._initRecognizer()))}},numberOfTouches:{get:function(){return this._targetTouches.length}},enabled:{get:function(){return this._enabled},set:function(t){this._enabled!==t&&(this._enabled=t,t||(0===this.numberOfTouches?(this._removeTrackingListeners(),this.reset()):this.enterCancelledState()),this._updateBaseListeners())}},domEvents:{get:function(){return this._domEvents}}}),r.prototype.constructor=r,r.prototype.modifierKeys={alt:!1,ctrl:!1,meta:!1,shift:!1},r.prototype.reset=function(){},r.prototype.preventDefault=function(t){"touchmove"!==t.type&&"pointer"!==t.type.substr(0,7)&&t.preventDefault()},r.prototype.locationInElement=function(t){var e=new o,i=this._targetTouches;if(this._lastKnownEventLocation)e.x=this._lastKnownEventLocation.pageX,e.y=this._lastKnownEventLocation.pageY;else{for(var n=0,s=i.length;n<s;++n){var r=i[n];e.x+=r.pageX,e.y+=r.pageY}e.x/=s,e.y/=s}return t?a.fromPageToElement(t,e):e},r.prototype.locationInClient=function(){var t=new o,e=this._targetTouches;if(this._lastKnownEventLocation)t.x=this._lastKnownEventLocation.clientX,t.y=this._lastKnownEventLocation.clientY;else{for(var i=0,n=e.length;i<n;++i){var a=e[i];t.x+=a.clientX,t.y+=a.clientY}t.x/=n,t.y/=n}return t},r.prototype.locationOfTouchInElement=function(t,e){var i=this._targetTouches[t];if(!i)return new o;var n=new o(i.pageX,i.pageY);return e?a.fromPageToElement(e,n):n},r.prototype.useGestures=!1,r.prototype.touchesBegan=function(t){t.currentTarget===this._target&&(this._shouldHandleTrackingEvents=!0,window.addEventListener(this.events.Move,this,!0),window.addEventListener(this.events.End,this,!0),this.events.Cancel&&window.addEventListener(this.events.Cancel,this,!0),this.enterPossibleState())},r.prototype.touchesMoved=function(t){},r.prototype.touchesEnded=function(t){},r.prototype.touchesCancelled=function(t){},r.prototype.gestureBegan=function(t){t.currentTarget===this._target&&(window.addEventListener(this.events.GestureChange,this,!0),window.addEventListener(this.events.GestureEnd,this,!0),this.enterPossibleState())},r.prototype.gestureChanged=function(t){},r.prototype.gestureEnded=function(t){},r.prototype.enterPossibleState=function(){this._setStateAndNotifyOfChange(r.States.Possible)},r.prototype.enterBeganState=function(){!this.delegate||"function"!==typeof this.delegate.gestureRecognizerShouldBegin||this.delegate.gestureRecognizerShouldBegin(this)?this._setStateAndNotifyOfChange(r.States.Began):this.enterFailedState()},r.prototype.enterEndedState=function(){this._setStateAndNotifyOfChange(r.States.Ended),this._removeTrackingListeners(),this.reset()},r.prototype.enterCancelledState=function(){this._setStateAndNotifyOfChange(r.States.Cancelled),this._removeTrackingListeners(),this.reset()},r.prototype.enterFailedState=function(){this._setStateAndNotifyOfChange(r.States.Failed),this._removeTrackingListeners(),this.reset()},r.prototype.enterChangedState=function(){this._setStateAndNotifyOfChange(r.States.Changed)},r.prototype.enterRecognizedState=function(){this._setStateAndNotifyOfChange(r.States.Recognized)},r.prototype.handleEvent=function(t){this._shouldCountAndHandleTouch(t)&&(this._updateTargetTouches(t),this._updateKeyboardModifiers(t),this._handleTouches(t))},r.prototype._handleTouches=function(t){if(this._shouldHandleTouch(t))switch(t.type){case this.events.Start:this.touchesBegan(t);break;case this.events.Move:this.touchesMoved(t);break;case this.events.End:this.touchesEnded(t);break;case this.events.Cancel:this.touchesCancelled(t);break;case this.events.GestureStart:this.gestureBegan(t);break;case this.events.GestureChange:this.gestureChanged(t);break;case this.events.GestureEnd:this.gestureEnded(t)}},r.prototype._shouldCountAndHandleTouch=function(t){if(this.events!==l||!(t instanceof PointerEvent))return!0;var e=this._targetTouches[0];return!e||t.pointerType===e.pointerType||e.pointerId===t.pointerId},r.prototype._shouldHandleTouch=function(t){return this.events!==l||t.type===this.events.Start||t.type===this.events.GestureStart||t.type===this.events.GestureChange||t.type===this.events.GestureEnd||this._shouldHandleTrackingEvents},r.prototype._initRecognizer=function(){this.reset(),this.state=r.States.Possible,this._updateBaseListeners()},r.prototype._removeBaseListeners=function(){this._target&&(this._target.removeEventListener(this.events.Start,this),this.useGestures&&this._target.removeEventListener(this.events.GestureStart,this),this.events===l&&(this._targetTouches=[],window.removeEventListener(this.events.End,this,!0),window.removeEventListener(this.events.Cancel,this,!0)))},r.prototype._updateBaseListeners=function(){this._target&&(this._enabled?(this._target.addEventListener(this.events.Start,this),this.useGestures&&this._target.addEventListener(this.events.GestureStart,this),this.events===l&&(window.addEventListener(this.events.End,this,!0),window.addEventListener(this.events.Cancel,this,!0))):this._removeBaseListeners())},r.prototype._removeTrackingListeners=function(){this._shouldHandleTrackingEvents=!1,window.removeEventListener(this.events.Move,this,!0),this.events!==l&&(window.removeEventListener(this.events.End,this,!0),window.removeEventListener(this.events.Cancel,this,!0)),window.removeEventListener(this.events.GestureChange,this,!0),window.removeEventListener(this.events.GestureEnd,this,!0)},r.prototype._setStateAndNotifyOfChange=function(t){this.state=t,this.dispatchEvent(new n.Event(this.events.StateChange))},r.prototype._setLastKnownSinglePointLocation=function(t){this._lastKnownEventLocation={clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}},r.prototype._updateTargetTouches=function(t){if(t.type!==this.events.GestureStart&&t.type!==this.events.GestureChange&&t.type!==this.events.GestureEnd)if(this.events!==c){var e,i,n;if(this.events===h){if(t.type===this.events.Start){for(this._targetTouches=[],i=0,n=(e=t.targetTouches).length;i<n;++i)this._targetTouches.push(e[i]);return void(this._lastKnownEventLocation=null)}if(t.type===this.events.Move){var o=this._targetTouches.map((function(t){return t.identifier}));for(this._targetTouches=[],i=0,n=(e=t.touches).length;i<n;++i){var a=e[i];-1!==o.indexOf(a.identifier)&&this._targetTouches.push(a)}return void(this._lastKnownEventLocation=null)}var s=t.touches,r=[];for(i=0,n=s.length;i<n;++i)r.push(s[i].identifier);return this._targetTouches=this._targetTouches.filter((function(t){return-1!==r.indexOf(t.identifier)})),void(0===this._targetTouches.length?this._setLastKnownSinglePointLocation(t):this._lastKnownEventLocation=null)}if(t.type===this.events.Start)return this._targetTouches.push(t),void(this._lastKnownEventLocation=null);if(t.type===this.events.Move)return this._targetTouches=this._targetTouches.map((function(e){return e.pointerId!==t.pointerId?e:t})),void(this._lastKnownEventLocation=null);this._targetTouches=this._targetTouches.filter((function(e){return e.pointerId!==t.pointerId})),0===this._targetTouches.length?this._setLastKnownSinglePointLocation(t):this._lastKnownEventLocation=null}else t.type===this.events.End?(this._targetTouches=[],this._setLastKnownSinglePointLocation(t)):(this._targetTouches=[t],this._lastKnownEventLocation=null);else this._setLastKnownSinglePointLocation(t)},r.prototype._updateKeyboardModifiers=function(t){this.modifierKeys.alt=t.altKey,this.modifierKeys.ctrl=t.ctrlKey,this.modifierKeys.meta=t.metaKey,this.modifierKeys.shift=t.shiftKey},r.prototype._distance=function(){var t=this._targetTouches[0],e=new o(t.pageX,t.pageY),i=this._targetTouches[1],n=new o(i.pageX,i.pageY);return e.distanceToPoint(n)},t.exports=r},1991:function(t,e,i){var n=i(1990);function o(){this.allowableMovement=10,this.minimumPressDuration=500,this.numberOfTouchesRequired=1,this.allowsRightMouseButton=!1,n.call(this)}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.touchesBegan=function(t){t.currentTarget===this.target&&(2!==t.button||this.allowsRightMouseButton)&&(n.prototype.touchesBegan.call(this,t),this.numberOfTouches===this.numberOfTouchesRequired?(this._startPoint=this.locationInElement(),this._timerId=window.setTimeout(this.enterRecognizedState.bind(this),this.minimumPressDuration)):this.enterFailedState())},o.prototype.touchesMoved=function(t){this.preventDefault(t),this._startPoint.distanceToPoint(this.locationInElement())>this.allowableMovement&&this.enterFailedState()},o.prototype.touchesCancelled=o.prototype.touchesEnded=function(t){this.state===n.States.Recognized?(this.preventDefault(t),this.numberOfTouches!==this.numberOfTouchesRequired&&this.enterFailedState()):this.enterFailedState()},o.prototype.reset=function(){window.clearTimeout(this._timerId),delete this._timerId},t.exports=o},1992:function(t,e,i){var n=i(1990),o=i(1976);function a(){return{start:new o,end:new o,dt:0}}function s(t){return t.dt<1?new o:new o((t.end.x-t.start.x)/t.dt*1e3,(t.end.y-t.start.y)/t.dt*1e3)}function r(){n.call(this)}r.prototype=Object.create(n.prototype,{velocity:{get:function(){if(Date.now()-this._lastTouchTime>100)return new o;var t=s(this._velocitySample);if(n.SupportsTouches&&this._previousVelocitySample.dt>0){var e=s(this._previousVelocitySample);t.x=.25*t.x+.75*e.x,t.y=.25*t.y+.75*e.y}return t}}}),r.prototype.constructor=r,r.prototype.minimumNumberOfTouches=1,r.prototype.maximumNumberOfTouches=1e5,r.prototype.translationThreshold=10,r.prototype.touchesBegan=function(t){t.currentTarget===this.target&&(t instanceof MouseEvent&&0!==t.button||(n.prototype.touchesBegan.call(this,t),this._numberOfTouchesIsAllowed()?(this._lastTouchTime=Date.now(),this._resetTrackedLocations(),1===this.numberOfTouches&&(this._travelledMinimumDistance=!1)):this.enterFailedState()))},r.prototype.touchesMoved=function(t){this.preventDefault(t);var e=Date.now(),i=this.locationInElement(),n=e-this._lastTouchTime;n>8&&(this._previousVelocitySample.start=this._velocitySample.start.copy(),this._previousVelocitySample.end=this._velocitySample.end.copy(),this._previousVelocitySample.dt=this._velocitySample.dt,this._velocitySample.start=this._lastTouchLocation.copy(),this._velocitySample.end=i,this._velocitySample.dt=n),this._travelledMinimumDistance?(this.translation.x+=i.x-this._lastTouchLocation.x,this.translation.y+=i.y-this._lastTouchLocation.y,this.enterChangedState()):this._canBeginWithTravelledDistance(new o(i.x-this._translationOrigin.x,i.y-this._translationOrigin.y))&&(this._travelledMinimumDistance=!0,this.enterBeganState()),this._lastTouchTime=e,this._lastTouchLocation=i},r.prototype.touchesEnded=function(t){this._numberOfTouchesIsAllowed()?this._resetTrackedLocations():this._travelledMinimumDistance?this.enterEndedState():this.enterFailedState()},r.prototype.reset=function(){this._velocitySample=a(),this._previousVelocitySample=a(),this._gestures=[],this.translation=new o,delete this._travelledMinimumDistance},r.prototype._travelledMinimumDistance=!1,r.prototype._previousVelocitySample=a(),r.prototype._velocitySample=a(),r.prototype._canBeginWithTravelledDistance=function(t){return Math.abs(t.x)>=this.translationThreshold||Math.abs(t.y)>=this.translationThreshold},r.prototype._numberOfTouchesIsAllowed=function(){return this.numberOfTouches>=this.minimumNumberOfTouches&&this.numberOfTouches<=this.maximumNumberOfTouches},r.prototype._resetTrackedLocations=function(){var t=this.locationInElement();this._lastTouchLocation=t,this._translationOrigin=t},t.exports=r},1993:function(t,e,i){var n=i(1990);function o(){n.call(this)}o.prototype=Object.create(n.prototype,{velocity:{get:function(){var t=this._gestures[this._gestures.length-1];if(!t)return this._velocity;var e=Date.now()-(t.timeStamp+100);if(e<=0)return this._velocity;var i=Math.max((500-e)/500,0);return this._velocity*i}}}),o.prototype.constructor=o,o.prototype.scaleThreshold=0,o.prototype.useGestures=n.UseGesturesForPinch,o.prototype.touchesBegan=function(t){if(t.currentTarget===this.target){if(this.useGestures){if(2!==this.numberOfTouches)return}else{if(this.numberOfTouches>2)return void this.enterFailedState();if(2!==this.numberOfTouches)return;this._startDistance=this._distance(),this._recordGesture(1),this._scaledMinimumAmount=!1,this._updateStateWithEvent(t)}n.prototype.touchesBegan.call(this,t)}},o.prototype.touchesMoved=function(t){this.useGestures||2===this.numberOfTouches&&this._updateStateWithEvent(t)},o.prototype.touchesEnded=function(t){this.useGestures||this.numberOfTouches>=2||!this._startDistance||(this._scaledMinimumAmount?this.enterEndedState():this.enterFailedState())},o.prototype.gestureBegan=function(t){n.prototype.gestureBegan.call(this,t),this._recordGesture(t.scale),this._scaledMinimumAmount=!1,this._updateStateWithEvent(t),this.preventDefault(t)},o.prototype.gestureChanged=function(t){this.preventDefault(t),this._updateStateWithEvent(t)},o.prototype.gestureEnded=function(t){this._scaledMinimumAmount?this.enterEndedState():this.enterFailedState()},o.prototype.reset=function(){this.scale=1,this._velocity=0,this._gestures=[],delete this._startDistance},o.prototype._scaledMinimumAmount=!1,o.prototype._recordGesture=function(t){var e=Date.now(),i=this._gestures.push({scale:t,timeStamp:e});if(!(i<=2)){for(var n=this._gestures[i-1].scale>=this._gestures[i-2].scale,o=i-3;o>=0;--o){var a=this._gestures[o];if(e-a.timeStamp>100||this._gestures[o+1].scale>=a.scale!==n)break}o>0&&(this._gestures=this._gestures.slice(o+1))}},o.prototype._updateStateWithEvent=function(t){var e=this.useGestures?t.scale:this._distance()/this._startDistance;if(this._scaledMinimumAmount){this._recordGesture(e);var i=this._gestures[0],n=e-i.scale,o=Date.now()-i.timeStamp;this._velocity=0===o?0:n/o*1e3,this.scale*=e/this._gestures[this._gestures.length-2].scale,this.enterChangedState()}else Math.abs(1-e)>=this.scaleThreshold&&(this._scaledMinimumAmount=!0,this.scale=1,this.enterBeganState())},t.exports=o},1994:function(t,e,i){var n=i(1990),o=i(1976);function a(){n.call(this),this.rotation=0}a.prototype=Object.create(n.prototype,{velocity:{get:function(){return this._velocity}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=function(t){for(;t>180;)t-=360;for(;t<-180;)t+=360;return t}(t)}}}),a.prototype.constructor=a,a.prototype.useGestures=n.UseGesturesForRotation,a.prototype.touchesBegan=function(t){this.useGestures||t.currentTarget===this.target&&2===this.numberOfTouches&&(n.prototype.touchesBegan.call(this,t),this.numberOfTouches>2?this.enterFailedState():(this._startAngle=this._angle(),this._startDistance=this._distance(),this.rotation=0,t.rotation=0,t.scale=1,this._lastEvent=t))},a.prototype.touchesMoved=function(t){this.useGestures||2===this.numberOfTouches&&(t.rotation=this._angle()-this._startAngle,t.scale=this._distance()/this._startDistance,this._handleEvent(t))},a.prototype.touchesEnded=function(t){this.useGestures||this.numberOfTouches>=2||null===this._startAngle||(this.state===n.States.Changed?this.enterEndedState():this.enterFailedState())},a.prototype.gestureBegan=function(t){this.useGestures&&(n.prototype.gestureBegan.call(this,t),this.preventDefault(t),this.rotation=0,t.rotation=0,t.scale=1,this._lastEvent=t)},a.prototype.gestureChanged=function(t){this.useGestures&&(this.preventDefault(t),this._handleEvent(t))},a.prototype.gestureEnded=function(t){this.useGestures&&this.enterEndedState()},a.prototype.reset=function(){this.rotation=0,this._velocity=0,this._lastEvent=null,this._startAngle=null},a.prototype._handleEvent=function(t){var e=this._lastEvent,i=t.rotation-e.rotation,o=t.scale-e.scale,a=t.timeStamp-e.timeStamp;if(this._lastEvent=t,this.state!==n.States.Possible)a>0&&(this._velocity=i/a*1e3),this.rotation+=i,this.enterChangedState();else{var s=Math.abs(t.rotation)<8,r=Math.abs(i/90)<Math.abs(o),l=Math.abs(i)>=135;if(s||r||l)return;this.enterBeganState()}},a.prototype._angle=function(){var t=this._targetTouches[0],e=new o(t.pageX,t.pageY),i=this._targetTouches[1],n=new o(i.pageX,i.pageY);return 180*Math.atan2(e.y-n.y,e.x-n.x)/Math.PI},t.exports=a},1995:function(t,e,i){var n=i(1990),o=i(1976);function a(){this.numberOfTouchesRequired=1,this.direction=a.Directions.Right,n.call(this)}a.Directions={Right:1,Left:2,Up:4,Down:8},a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.touchesBegan=function(t){t.currentTarget===this.target&&(this.numberOfTouchesRequired===this.numberOfTouches?(n.prototype.touchesBegan.call(this,t),this._translationOrigin=this.locationInElement()):this.enterFailedState())},a.prototype.touchesMoved=function(t){if(this.numberOfTouchesRequired===this.numberOfTouches){this.preventDefault(t);var e=this.locationInElement(),i=new o(e.x-this._translationOrigin.x,e.y-this._translationOrigin.y);this.state!==n.States.Recognized&&this.direction===a.Directions.Right&&i.x>100&&Math.abs(i.x)>Math.abs(i.y)&&this.enterRecognizedState(),this.state!==n.States.Recognized&&this.direction===a.Directions.Left&&i.x<-100&&Math.abs(i.x)>Math.abs(i.y)&&this.enterRecognizedState(),this.state!==n.States.Recognized&&this.direction===a.Directions.Up&&i.y<-100&&Math.abs(i.y)>Math.abs(i.x)&&this.enterRecognizedState(),this.state!==n.States.Recognized&&this.direction===a.Directions.Down&&i.y>100&&Math.abs(i.y)>Math.abs(i.x)&&this.enterRecognizedState()}else this.enterFailedState()},a.prototype.touchesEnded=function(t){this.enterFailedState()},t.exports=a},1996:function(t,e,i){var n=i(1990),o=i(1979),a=i(1976);function s(){this.numberOfTapsRequired=1,this.numberOfTouchesRequired=1,this.allowsRightMouseButton=!1,n.call(this)}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.touchesBegan=function(t){t.currentTarget===this.target&&(2!==t.button||this.allowsRightMouseButton)&&(n.prototype.touchesBegan.call(this,t),this.numberOfTouches===this.numberOfTouchesRequired?(this._domEvents.push(t),this._startPoint=n.prototype.locationInElement.call(this),this._startClientPoint=n.prototype.locationInClient.call(this),this._rewindTimer(750)):this.enterFailedState())},s.prototype.touchesMoved=function(t){var e;switch(this.preventDefault(t),this.currentMode){case n.Modes.Pointer:e="touch"===t.pointerType?40:2;break;case n.Modes.Touch:e=40;break;case n.Modes.Mouse:e=2}this._startPoint.distanceToPoint(n.prototype.locationInElement.call(this))>e&&this.enterFailedState()},s.prototype.touchesEnded=function(t){this._taps++,this._domEvents.push(t),this._taps===this.numberOfTapsRequired&&(this.preventDefault(t),this.enterRecognizedState(),this.reset()),this._rewindTimer(350)},s.prototype.reset=function(){this._taps=0,this._clearTimer(),this._domEvents=[]},s.prototype.locationInElement=function(t){var e=this._startPoint||new a;return t?o.fromPageToElement(t,e):e},s.prototype.locationInClient=function(){return this._startClientPoint||new a},s.prototype._clearTimer=function(){window.clearTimeout(this._timerId),delete this._timerId},s.prototype._rewindTimer=function(t){this._clearTimer(),this._timerId=window.setTimeout(this._timerFired.bind(this),t)},s.prototype._timerFired=function(){this.enterFailedState()},t.exports=s},1997:function(t,e,i){var n=i(1953),o=i(1975),a=i(1976),s=i(1998),r=i(1948),l=i(1981),h=i(1979),c=[],d=[],u=function(){var t=document.createElement("div");return t.style.msTransform="translate3d(2px, 2px, 2px)","none"!==window.getComputedStyle(t).msTransform}();function p(){this._parent=null,this._children=[]}function m(t){p.call(this),this.shadowRootMode=t}function g(t){var e;t?(e=t)instanceof window.Node&&e.nodeType===window.Node.ELEMENT_NODE?this.domNode=t:"string"===typeof t||t instanceof String?this.domNode=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}(t):"object"===typeof t&&(this.domNode=function t(e){var i=e.name;if("#text"===i)return document.createTextNode(e.value);var n=document.createElement(i),o=e.attributes;for(var a in o)n.setAttribute(a,o[a]);return e.children instanceof Array&&e.children.forEach((function(e){n.appendChild(t(e))})),n}(t)):this.domNode=document.createElement("div"),p.call(this),this._opacity=1,this._color="",this._size=new o,this._position=new a,this._transform=new s,this._backgroundImages=[],this._classList=new C(this),this._wantsHardwareCompositing=!1,this._dirtyAttributes={},this._dirtyProperties=[],this._pendingDOMManipulation=0}function f(){c.forEach(_),c=[],d.forEach(y),d=[],g.updates++,k.dispatchEvent(new n.Event("update"))}function _(t){if(1===t._pendingDOMManipulation){var e=t.domNode.parentNode;e&&e.removeChild(t.domNode)}t._dirtyProperties&&(t._dirtyProperties.forEach((function(e){!function(t,e){var i=t.domNode,n=i.style;switch(e){case"opacity":n.opacity=t._opacity;break;case"color":n.color=t._color;break;case"size":n.width=t._size.width+"px",n.height=t._size.height+"px";break;case"position":case"transform":var o=(new s).translate(v(t._position.x),v(t._position.y)).transform(t._transform);u&&t._wantsHardwareCompositing&&o.rotate3d(0,0,0,0),n.transform=n.webkitTransform=n.msTransform=o;break;case"backgroundImages":!function(t){var e=t.domNode.style;if(!t._backgroundImages.length)return e.removeProperty("background-image"),e.removeProperty("background-position"),void e.removeProperty("background-size");for(var i=[],n=[],o=[],a=t._backgroundImages,s=a.length-1;s>=0;--s){var r=a[s];i.push("url("+r.url+")"),n.push(r.position.x+"px "+r.position.y+"px"),o.push(r.size.width+"px "+r.size.height+"px")}e.backgroundImage=i.join(","),e.backgroundPosition=n.join(","),e.backgroundSize=o.join(",")}(t);break;case"classList":i.setAttribute("class",t._classList),t._classList.reset()}}(t,e)})),t._dirtyProperties=[]),t._dirtyAttributes&&(Object.getOwnPropertyNames(t._dirtyAttributes).forEach((function(e){t.domNode.setAttribute(e,t._dirtyAttributes[e])})),t._dirtyAttributes={}),2!==t._pendingDOMManipulation&&3!==t._pendingDOMManipulation||b(d,t.parent)}function y(t){for(var e=null,i=t.domNode,n=t.children.length-1;n>=0;--n){var o=t.children[n],a=o.domNode;switch(o._pendingDOMManipulation){case 2:i.insertBefore(a,e),o._pendingDOMManipulation=0;break;case 3:var s=i.attachShadow({mode:o.shadowRootMode});o.domNode=s,o._pendingDOMManipulation=0}e=a}}function v(t){var e=Math.max(Math.round(window.devicePixelRatio),1);return Math.round(t*e)/e}function b(t,e){return-1===t.indexOf(e)&&(t.push(e),!0)}function w(t,e){var i=t.indexOf(e);return-1!==i&&(t.splice(i,1),!0)}function C(t){this._node=t,this.reset()}p.prototype={constructor:g,domNode:null,nodeIsShadowRoot:!1,get parent(){return this._parent},get children(){return this._children},set children(t){for(var e=this._children;e.length;)this.removeChild(e[0]);t.forEach((function(t){this.addChild(t)}),this)},get childCount(){return this._children.length},get firstChild(){return this._children[0]||null},get lastChild(){return this._children[this._children.length-1]||null},get previousSibling(){if(!this._parent)return null;var t=this._parent._children,e=t.indexOf(this);return e>0?t[e-1]:null},get nextSibling(){if(!this._parent)return null;var t=this._parent._children,e=t.indexOf(this);return-1!==e&&e<t.length-1?t[e+1]:null},addChild:function(t,e){if(0===e&&this._children[0]&&this._children[0].nodeIsShadowRoot)throw new TypeError("RenderTree.RenderNode.addChild: Node cannot insert before shadow root node.");return t.willMoveToParent(this),t._doNotNotifyParentChange=!0,t.remove(),delete t._doNotNotifyParentChange,(void 0===e||e<0||e>this._children.length)&&(e=this._children.length),this._children.splice(e,0,t),t._parent=this,t.didMoveToParent(this),this.didAddChild(t),t._markNodeManipulation(2),t},insertBefore:function(t,e){return this.addChild(t,this._children.indexOf(e))},insertAfter:function(t,e){var i=this._children.indexOf(e);return this.addChild(t,-1!==i?i+1:0)},removeChild:function(t){if(t._parent===this){var e=this._children.indexOf(t);if(-1!==e){if(t.nodeIsShadowRoot)throw new TypeError("RenderTree.RenderNode: Not supported in ShadowRoot-backed RenderNode.");return this.willRemoveChild(t),t._doNotNotifyParentChange||t.willMoveToParent(null),this._children.splice(e,1),t._parent=null,t._doNotNotifyParentChange||t.didMoveToParent(null),t._markNodeManipulation(1),t}}},remove:function(){if(this._parent instanceof p)return this._parent.removeChild(this)},findNode:function(t,e){if("function"!==typeof t)throw new TypeError("RenderTree.RenderNode.findNode: callback must be a function");var i,n=this;return function o(a){a!==n&&t.call(e,a)?i=a:a.children.some((function(t){return o(t),i}))}(n),i},dump:function(t){return function t(e,i,n,o){var a="";a+=i,o&&(a+=function(t){return t<0?"":t+":"}(n)),a+=e.toString(),a+=function(t){return t.childCount<1?"":" \u2935\ufe0e "+t.childCount}(e);for(var s=e.children,r=0,l=s.length;r<l;++r){var h=e.childCount<1?-1:r;a+="\n",a+=t(s[r],i+"    ",h,o)}return a}(this,"",-1,t)},willRemoveChild:function(t){},didAddChild:function(t){},willMoveToParent:function(t){},didMoveToParent:function(t){},_markDirtyProperty:function(t,e){(void 0===e||e?b(this._dirtyProperties,t):w(this._dirtyProperties,t))&&this._updateNodeDirtiness()},_markNodeManipulation:function(t){this._pendingDOMManipulation=t,this._updateNodeDirtiness()},_updateNodeDirtiness:function(){0!==this._pendingDOMManipulation||this._dirtyProperties.length>0||Object.getOwnPropertyNames(this._dirtyAttributes).length>0?(b(c,this),l.scheduleDraw(f)):w(c,this)}},m.prototype=r.inheritPrototype(p,m,{nodeIsShadowRoot:!0,shadowRootMode:void 0,toString:function(){return this.stringInfo()+" ["+this.shadowRootMode+"]"},stringInfo:function(){return"#shadow-root"}}),g.prototype=r.inheritPrototype(p,g,{get element(){return this.domNode},set element(t){this.domNode=t},get classList(){return this._classList},get wantsHardwareCompositing(){return this._wantsHardwareCompositing},set wantsHardwareCompositing(t){t!==this._wantsHardwareCompositing&&(this._wantsHardwareCompositing=t,this._markDirtyProperty("transform"))},get opacity(){return this._opacity},set opacity(t){(t=Math.min(Math.max(0,t),1))!==this._opacity&&(this._opacity=t,this._markDirtyProperty("opacity"))},get color(){return this._color},set color(t){t!==this._color&&(this._color=t,this._markDirtyProperty("color"))},get position(){return this._position},set position(t){this._position=t,this._markDirtyProperty("position")},get transform(){return this._transform},set transform(t){this._transform=t,this._markDirtyProperty("transform")},get backgroundImages(){return this._backgroundImages},set backgroundImages(t){this._backgroundImages=t||[],this._markDirtyProperty("backgroundImages")},get size(){return this._size},set size(t){this._size=t||new o,this._markDirtyProperty("size")},setAttribute:function(t,e){this._dirtyAttributes[t]=e,this._updateNodeDirtiness()},createAndAddShadowRootChild:function(t){if(this._children[0]&&this._children[0].nodeIsShadowRoot)throw new Error("RenderTree.RenderNode.createAndAddShadowRootChild: Cannot add more than one shadow root.");var e=new m(t||"closed");return this._children.unshift(e),e._parent=this,this.didAddChild(e),e._markNodeManipulation(3),e},convertPointFromPage:function(t){return h.fromPageToElement(this.domNode,t)},convertPointToPage:function(t){return h.fromElementToPage(this.domNode,t)},toString:function(){var t="";return this._wantsHardwareCompositing&&(t+="\ud83c\udfc1 "),t+=this.stringInfo(),this.classList.toString()&&(t+=this.classList._classes().map((function(t){return"."+t})).join(", ")),0===this.position.x&&0===this.position.y||(t+=" ("+this.position.x+", "+this.position.y+")"),0===this.size.width&&0===this.size.height||(t+=" "+this.size.width+"x"+this.size.height),1!==this.opacity&&(t+=" [opacity:"+this.opacity+"]"),this.transform.toString()&&(t+=" ["+this.transform.toString()+"]"),t},stringInfo:function(){return"<"+this.domNode.tagName.toLowerCase()+">"}}),g.updates=0,C.prototype={constructor:C,add:function(t){this._add(t)},remove:function(t){this._remove(t)},contains:function(t){return-1!==this._classes().indexOf(t)},toggle:function(t,e){if(arguments.length>1)return e?this._add(t):this._remove(t),!!e;this._add(t)||this._remove(t)},toString:function(){return this._classes().join(" ")},_classes:function(){if(this._populateClasses){var t=this._node.domNode.className;"string"===typeof t.baseVal&&(t=t.baseVal),this.__classes=t.split(/[ ]+/).filter(Boolean),delete this._populateClasses}return this.__classes},reset:function(){this._additions=[],this._removals=[],this.__classes=[],this._populateClasses=!0},_add:function(t){if(!t)return!1;var e=b(this._classes(),t);return e&&(w(this._removals,t)||b(this._additions,t),this._updateNodeDirtiness()),e},_remove:function(t){if(!t)return!1;var e=w(this._classes(),t);return e&&(w(this._additions,t)||b(this._removals,t),this._updateNodeDirtiness()),e},_updateNodeDirtiness:function(){this._node._markDirtyProperty("classList",this._additions.length>0||this._removals.length>0)}};var k=new n.EventTarget;k.Node=g,k.Point=a,k.Transform=s,t.exports=k},1998:function(t,e){function i(){this._operations=[]}function n(t,e,i){this.x=h(t),this.y=h(e),this.z=h(i)}function o(t,e,i){this.x=h(t,1),this.y=h(e,this.x),this.z=h(i,1)}function a(t){this.angle=h(t)}function s(t,e){this.x=h(t),this.y=h(e)}function r(t,e,i,n){this.x=h(t),this.y=h(e),this.z=h(i),this.angle=h(n)}function l(){if(1===arguments.length)return arguments[0]+"px";for(var t=0,e=arguments.length,i=[];t<e;++t)i.push(l(arguments[t]));return i.join(", ")}function h(t,e){return null==t?e||0:t}function c(t,e){return t+"("+e+")"}i.prototype={constructor:i,translate:function(t,e,i){return this._operations.push(new n(t,e,i)),this},scale:function(t,e,i){return this._operations.push(new o(t,e,i)),this},rotate:function(t){return this._operations.push(new a(t)),this},rotate3d:function(t,e,i,n){return this._operations.push(new r(t,e,i,n)),this},skew:function(t,e){return this._operations.push(new s(t,e)),this},transform:function(t){return this._operations=this._operations.concat(t),this},toString:function(){return this._operations.map((function(t){return t.toString()})).join(" ")}},t.exports=i,n.prototype={constructor:n,toString:function(){return!this.x||this.y||this.z?!this.y||this.x||this.z?!this.z||this.x||this.y?this.z?c("translate3d",l(this.x,this.y,this.z)):c("translate",l(this.x,this.y)):c("translateZ",l(this.z)):c("translateY",l(this.y)):c("translateX",l(this.x))}},o.prototype={constructor:o,toString:function(){return 1!==this.x&&1===this.y&&1===this.z?c("scaleX",this.x):1!==this.y&&1===this.x&&1===this.z?c("scaleY",this.y):1!==this.z&&1===this.x&&1===this.y?c("scaleZ",this.z):1===this.z?this.x===this.y?c("scale",this.x):c("scale",[this.x,this.y].join(", ")):c("scale3d",[this.x,this.y,this.z].join(", "))}},a.prototype={constructor:a,toString:function(){return c("rotate",angle+"deg")}},s.prototype={constructor:s,toString:function(){return 0!==this.x&&0===this.y?c("skewX",this.x+"deg"):0!==this.y&&0===this.x?c("skewY",this.y+"deg"):c("skew",[this.x+"deg",this.y+"deg"].join(", "))}},r.prototype={constructor:a,toString:function(){return c("rotate3d",[this.x,this.y,this.z,this.angle].join(", ")+"deg")}}},1999:function(t,e,i){var n=i(1948),o=i(1986);function a(t){this._node=t,this._layer=null}var s={};a.prototype={constructor:a,get node(){return this._node},get shouldDraw(){var t=this._node.keyForFrozenLayer;return!(this._frozenLayer&&(!this._sharedLayer||this._sharedLayer.key===t))&&!(t&&s[t])},get layer(){var t=this._node,e=t.frozen,i=t.keyForFrozenLayer;if(e){if(this._frozenLayer){if(!i||!this._sharedLayer||this._sharedLayer.key===i)return this._frozenLayer;this.releaseLayer()}if(i){var n=s[i];if(n&&n.key===i)return this._sharedLayer=n,this._layer=this._frozenLayer=n.canvas,++n.count,n.canvas}}delete this._frozenLayer,this._layer||(this._layer=this.createCanvas(),i&&(this._sharedLayer=s[i]={canvas:this._layer,count:1,key:i}));var a=o.devicePixelRatio,r=t.layerBounds;this._layer.width=Math.ceil(r.size.width*a),this._layer.height=Math.ceil(r.size.height*a);var l=this._layer.getContext("2d");return l&&(l.scale(a,a),l.translate(-r.origin.x,-r.origin.y)),e&&(this._frozenLayer=this._layer),this._layer},releaseLayer:function(t){this._layer&&(this._sharedLayer?t||(--this._sharedLayer.count,0===this._sharedLayer.count&&(delete s[this._sharedLayer.key],this._layer.width=0)):this._layer.width=0,delete this._sharedLayer,delete this._frozenLayer,delete this._layer)},nodeWasRemoved:function(){var t;this._layer&&(t=this,0===r.length&&setTimeout((function(){r.forEach((function(t){t._node.scene||t.releaseLayer()})),r=[]}),0),r.push(t))},createCanvas:function(){return n.createCanvas()},draw:function(t){}};var r=[];a.releaseSharedLayers=function(){Object.keys(s).forEach((function(t){var e=s[t];e.canvas.width=0,delete e.key,delete e.canvas})),s={}},t.exports=a},2e3:function(t,e,i){var n=i(1974),o=i(1999),a=i(1948);function s(){n.call(this),this._renderer=new o(this)}s.prototype=a.inheritPrototype(n,s,{stringInfo:function(){return"GroupNode"}}),t.exports=s},2001:function(t,e,i){var n=i(1975),o=i(1948),a=i(1974),s=i(2002);function r(){a.call(this),this._image=null,this._renderer=new s(this)}r.prototype=o.inheritPrototype(a,r,{get image(){return this._image},set image(t){this._image!==t&&(this._image&&this._image.removeEventListener("load",this),this._image=t,this._imageDidLoad(),!t||t.src&&t.complete||t.addEventListener("load",this))},stringInfo:function(){var t=this._image?this._image.src:null;if(o.isNode()){var e=t.split("src/images/");2===e.length&&(t=e[1])}return"ImageNode"+(t?"<src:"+t+">":"")},handleEvent:function(t){t.target===this._image&&this._image.complete&&(this._image.removeEventListener("load",this),this._imageDidLoad(),this.needsDisplay=!0)},_imageDidLoad:function(){this.size.equals(n.Zero)&&(this.size=new n(this._image.width,this._image.height)),this.needsDisplay=!0}}),t.exports=r},2002:function(t,e,i){var n=i(1999),o=i(1948);function a(t){n.call(this,t)}a.prototype=o.inheritPrototype(n,a,{_lastDrawnImage:null,draw:function(t){this._node.image&&(this._node.image.complete&&this._node.image.naturalWidth?(this._lastDrawnImage=this._node.image,t.drawImage(this._node.image,0,0,this._node.size.width,this._node.size.height)):this._node.image===this._lastDrawnImage&&(this._node.needsDisplay=!0))}}),t.exports=a},2003:function(t,e,i){var n=i(1976),o=i(1978),a=i(1981),s=i(1948);function r(t){this.node=t.node,this.node.animators||(this.node.animators=[]),this.node.animators.push(this),this.duration=t.duration,["from","to","done"].forEach((function(e){e in t&&null!=t[e]&&(this[e]=t[e])}),this)}function l(t){r.call(this,t)}function h(t){t.pop&&(this.springSolver=new u(1,this.STIFFNESS,this.DAMPING,0)),r.call(this,t)}function c(t){r.call(this,t),t.center&&(this.center=t.center)}function d(t){this.popAnimationDone=t.done||s.noop,delete t.done,t.duration*=this.FLOAT_DURATION_SCALE,r.call(this,t),t.center&&(this.center=t.center),t.floatCenter&&(this.floatCenter=t.floatCenter),this.popSpringSolver=new u(1,this.SCALE_STIFFNESS,this.SCALE_DAMPING,0),t.to>t.from&&(this.swayAmplitude=(Math.random()<.5?-1:1)*(3+3*Math.random()),this.rotateSpringSolver=new u(1,this.ROTATE_STIFFNESS,this.ROTATE_DAMPING,0))}function u(t,e,i,n){this.w0=Math.sqrt(e/t),this.zeta=i/(2*Math.sqrt(e*t)),this.zeta<1?(this.wd=this.w0*Math.sqrt(1-this.zeta*this.zeta),this.A=1,this.B=(this.zeta*this.w0-n)/this.wd):(this.wd=0,this.A=1,this.B=-n+this.w0)}r.prototype={from:0,to:1,done:s.noop,begin:function(){return this.beginDate=Date.now(),a.scheduleASAP(this),this},end:function(){this.node.animators.splice(this.node.animators.indexOf(this),1),0===this.node.animators.length&&delete this.node.animators,delete this.beginDate,this.done(this)},performScheduledUpdate:function(){this.beginDate&&(this._p=Math.min((Date.now()-this.beginDate)/this.duration,1),this.update(this._p),this._p<1?a.scheduleOnNextFrame(this):this.end())},valueAt:function(t){return this.from+t*(this.to-this.from)},stringInfo:function(t,e){var i="\ud83c\udfc7"+t+"<"+this.duration+"ms; "+this.from+"\u2192"+this.to;return this._p>=0&&(i+="/"+Math.round(100*this._p)+"%"),Object.prototype.hasOwnProperty.call(this,"done")&&(i+="*"),i+(e||"")+">"}},l.prototype=s.inheritPrototype(r,l,{update:function(t){this.node.opacity=this.valueAt(t)},stringInfo:function(){return r.prototype.stringInfo.call(this,"opacity")}}),h.prototype=s.inheritPrototype(r,h,{from:new n(0,0),to:new n(0,0),STIFFNESS:100,DAMPING:10,update:function(t){this.springSolver&&(t=this.springSolver.solve(t)),this.node.transform=(new o).translate(this.from.x+t*(this.to.x-this.from.x),this.from.y+t*(this.to.y-this.from.y))},end:function(){this.node.transform=(new o).translate(this.to.x,this.to.y),r.prototype.end.call(this)},stringInfo:function(){return r.prototype.stringInfo.call(this,"translation")}}),c.prototype=s.inheritPrototype(r,c,{center:new n(0,0),scale:function(t){var e=this.center.x,i=this.center.y;this.node.transform=(new o).translate(e,i).scale(t).translate(-e,-i)},update:function(t){this.scale(this.valueAt(t))},stringInfo:function(){var t="";return 0===this.center.x&&0===this.center.y||(t+=" ("+this.center.x+", "+this.center.y+")"),r.prototype.stringInfo.call(this,"scale",t)}}),d.prototype=s.inheritPrototype(r,d,{center:new n(0,0),SCALE_STIFFNESS:100,SCALE_DAMPING:10,FLOAT_DURATION_SCALE:4.2,ROTATE_DAMPING:5,ROTATE_STIFFNESS:127.15275,scaleAndRotate:function(t,e){var i=this.center.x,n=this.center.y;this.floatCenter?this.node.transform=(new o).translate(this.floatCenter.x,this.floatCenter.y).rotate(e).translate(-this.floatCenter.x,-this.floatCenter.y).translate(i,n).scale(t).translate(-i,-n):this.node.transform=(new o).translate(i,n).scale(t).rotate(e).translate(-i,-n)},update:function(t){var e=t*this.FLOAT_DURATION_SCALE,i=this.valueAt(this.popSpringSolver.solve(e)),n=0;this.rotateSpringSolver&&(n=(this.rotateSpringSolver.solve(t)-1)*this.swayAmplitude),this.scaleAndRotate(i,n),e>1&&!this.popAnimationDoneCalled&&(this.popAnimationDoneCalled=!0,this.popAnimationDone(this))},end:function(){this.scaleAndRotate(this.to,0),r.prototype.end.call(this),this.popAnimationDoneCalled||this.popAnimationDone(this)},stringInfo:function(){var t="";0===this.center.x&&0===this.center.y||(t+=" ("+this.center.x+", "+this.center.y+")");var e="float";return this.popAnimationDoneCalled&&(e+=" (swing)"),r.prototype.stringInfo.call(this,e,t)}}),u.prototype.solve=function(t){return 1-(this.zeta<1?Math.exp(-t*this.zeta*this.w0)*(this.A*Math.cos(this.wd*t)+this.B*Math.sin(this.wd*t)):(this.A+this.B*t)*Math.exp(-t*this.w0))},t.exports={Basic:r,Opacity:l,Translation:h,Scale:c,Float:d}},2004:function(t,e,i){var n=i(1969),o=i(1948),a=n.Coordinate,s=n.CoordinateRegion,r=n.CoordinateSpan,l=n.MapRect;t.exports={enclosingRegionForCoordinates:function(t){var e=0,i=180,l=-180,h=0,c=90,d=-90;t.forEach((function(t){var a=o.clamp(t.latitude,-90,90);c=Math.min(c,a),d=Math.max(d,a);var s=n.wrapLongitude(t.longitude);s<0?(e=Math.min(e,s),l=Math.max(l,s)):(i=Math.min(i,s),h=Math.max(h,s))}));var u,p,m=d-c;if(e>l)p=i+(u=h-i)/2;else if(i>h)p=e+(u=l-e)/2;else{var g=h-e,f=360-(i-l);p=g<f?e+(u=g)/2:i+(u=f)/2}return new s(new a(c+m/2,p),new r(m,u))},padMapRect:function(t,e){o.checkType(e,"object","[MapKit] MapRect.pad expects a padding object with top, left, bottom, right but got `"+e+"` instead");var i=e.left||0,n=e.top||0;return new l(t.origin.x-i,t.origin.y-n,t.size.width+i+(e.right||0),t.size.height+n+(e.bottom||0))},mapRectContains:function(t,e){var i=e.origin.x,n=e.origin.y,o=t.maxX(),a=t.maxY();return i>=t.origin.x&&i<=o&&n>=t.origin.y&&n<=a&&e.maxX()<=o&&e.maxY()<=a},boundingRectForSortedRects:function(t){if(0===t.length)return new l;if(1===t.length){var e=t[0].minX();return e>=0&&e<1?t[0]:new l(o.mod(e,1),t[0].minY(),t[0].size.width,t[0].size.height)}for(var i=[[t[0].minX(),t[0].maxX()]],n=t[0].minY(),a=t[0].maxY(),s=1,r=t.length,h=0;s<r;++s){var c=i[h],d=t[s];n=Math.min(n,d.minY()),a=Math.max(a,d.maxY()),d.minX()<=c[1]?i[h]=[c[0],Math.max(c[1],d.maxX())]:(i.push([d.minX(),d.maxX()]),++h)}var u=i.length;if(1===u)return new l(i[0][0],n,Math.min(i[0][1]-i[0][0],1),a-n);for(var p=1+i[0][0]-i[u-1][1],m=i[0][0],g=1;g<u;++g){var f=i[g][0]-i[g-1][1];f>p&&(p=f,m=i[g][0])}return new l(o.mod(m,1),n,1-p,a-n)}}},2005:function(t,e,i){var n=i(1948),o=i(1970);function a(){if(o(this,a)){var t=arguments.length;if(1===t&&"object"===typeof arguments[0]){this.top=0,this.right=0,this.bottom=0,this.left=0;var e=arguments[0];Object.keys(e).forEach((function(t){"top"===t||"right"===t||"bottom"===t||"left"===t?this[t]=e[t]:console.warn("[MapKit] Unknown property `"+t+"` for Padding constructor.")}),this)}else this.top=t>0?arguments[0]:0,this.right=t>1?arguments[1]:0,this.bottom=t>2?arguments[2]:0,this.left=t>3?arguments[3]:0;n.checkType(this.top,"number","[MapKit] Expected a number for `top` in Padding constructor but got `"+this.top+"` instead."),n.checkType(this.left,"number","[MapKit] Expected a number for `left` in Padding constructor but got `"+this.left+"` instead."),n.checkType(this.bottom,"number","[MapKit] Expected a number for `bottom` in Padding constructor but got `"+this.bottom+"` instead."),n.checkType(this.right,"number","[MapKit] Expected a number for `right` in Padding constructor but got `"+this.right+"` instead.")}}a.Zero=new a,a.prototype={constructor:a,toString:function(){return"Padding("+[this.top,this.right,this.bottom,this.left].join(", ")+")"},copy:function(){return new a(this.top,this.right,this.bottom,this.left)},equals:function(t){return this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left}},t.exports=a},2006:function(t,e,i){var n=i(1986),o=i(1948),a=i(1981);function s(t,e){this._delegate=e,this._snapsToIntegralZoomLevels=t}s.prototype={constructor:s,_speed:.03,_startTime:0,_shouldStop:!1,_animating:!1,start:function(t,e){var i=Date.now();return this._gasPedalValue=0,this._startTime=i,this._shouldStop&&this._cleanUp(),this._shouldStop=!1,this.zoomsIn=!!e,n.supportsForceTouch&&window.addEventListener("webkitmouseforcechanged",this),!this._animating&&(this._animating=!0,this._zoomLevel=t,this._timeAtLastFrame=i,a.scheduleOnNextFrame(this),!0)},stop:function(){this._shouldStop=!0,n.supportsForceTouch&&(window.removeEventListener("webkitmouseforcechanged",this),delete this._speed)},set snapsToIntegralZoomLevels(t){this._snapsToIntegralZoomLevels=!!t},performScheduledUpdate:function(){var t=!0,e=Date.now(),i=e-this._timeAtLastFrame,n=this._speed*(this.zoomsIn?1:-1);this._zoomLevel+=60*i*o.log2(1+n)/1e3,this._timeAtLastFrame=e,this._shouldStop&&e-this._startTime>=250&&(this._zoomLevelAtWhichToStop?(t=this.zoomsIn&&this._zoomLevel<this._zoomLevelAtWhichToStop||!this.zoomsIn&&this._zoomLevel>this._zoomLevelAtWhichToStop)||(this._zoomLevel=this._zoomLevelAtWhichToStop):this._snapsToIntegralZoomLevels?this._zoomLevelAtWhichToStop=this.zoomsIn?Math.ceil(this._zoomLevel):Math.floor(this._zoomLevel):t=!1),this._delegate&&this._delegate.linearZoomControllerDidZoom(this._zoomLevel),t?a.scheduleOnNextFrame(this):this._cleanUp()},handleEvent:function(t){this._handleForceChangedEvent(t)},_handleForceChangedEvent:function(t){var e=o.clamp(t.webkitForce,MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN,MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN)-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN;Math.abs(e-this._gasPedalValue)>.01&&(this._gasPedalValue=e),this._speed=.01+this._gasPedalValue*(.06-.01)},_cleanUp:function(){this._animating=!1,this._shouldStop=!1,delete this._zoomLevelAtWhichToStop,this._delegate&&this._delegate.linearZoomControllerDidStop()}},t.exports=s},2007:function(t,e,i){var n=i(1989),o=i(2008),a=i(1986);function s(t,e){this._target=t,this._delegate=e,this._touchCount=0,this.initialEventTargetForCurrentInteraction=null,this._doubleTapWithOneFingerRecognizer=this._addGestureRecognizer(n.Tap),this._doubleTapWithOneFingerRecognizer.numberOfTouchesRequired=1,this._doubleTapWithOneFingerRecognizer.numberOfTapsRequired=2,this._singleTapWithOneFingerRecognizer=this._addGestureRecognizer(n.Tap),this._longPressAndPanRecognizer=this._addGestureRecognizer(o),this._longPressAndPanRecognizer.delegate=this,t.addEventListener(a.startEventType,this),t.addEventListener("dragstart",this),this.updateGestureEnableState()}s.prototype={constructor:s,handleEvent:function(t){switch(t.type){case"pointerdown":this._installEndListeners(),this._touchCount++,this.initialEventTargetForCurrentInteraction=this._delegate.getEventTargetFromSubShadowDOM(t),this._suppressDefaultBehavior(t);break;case"pointerup":case"pointercancel":this._touchCount--,0===this._touchCount&&(this._removeEndListeners(),document.removeEventListener("selectstart",this,!0),this.initialEventTargetForCurrentInteraction=null);break;case"dragstart":this._delegate.elementShouldPreventDragstart(t.target)&&t.preventDefault();break;case"mousedown":this._installEndListeners(),this.initialEventTargetForCurrentInteraction=this._delegate.getEventTargetFromSubShadowDOM(t),this._suppressDefaultBehavior(t);break;case"mouseup":this._removeEndListeners(),document.removeEventListener("selectstart",this,!0),this.initialEventTargetForCurrentInteraction=null;break;case"touchstart":t.touches.length===t.changedTouches.length&&(this._installEndListeners(),this.initialEventTargetForCurrentInteraction=this._delegate.getEventTargetFromSubShadowDOM(t),this._delegate.elementWantsDefaultBrowserBehavior(this.initialEventTargetForCurrentInteraction,t,t.touches.length)||t.preventDefault());break;case"touchend":case"touchcancel":0===t.touches.length&&(this._removeEndListeners(),this.initialEventTargetForCurrentInteraction=null);break;case"statechange":this._handleStatechange(t);break;case"selectstart":t.preventDefault()}},_handleStatechange:function(t){switch(t.target){case this._doubleTapWithOneFingerRecognizer:this._handleDoubleTapWithOneFingerChange(t);break;case this._singleTapWithOneFingerRecognizer:this._handleSingleTapWithOneFingerChange(t);break;case this._longPressAndPanRecognizer:this._handleLongPressAndPanChange(t)}},gestureRecognizerShouldBegin:function(t){return this._delegate.userDidLongPress(t)},updateGestureEnableState:function(){var t=(this._delegate.isScrollEnabled?1:0)|(this._delegate.isRotationEnabled?2:0)|(this._delegate.isZoomEnabled?4:0),e=[void 0,"mk-disable-pan-gestures","mk-disable-pinch-gestures","mk-disable-all-gestures","mk-disable-zoom-gestures","mk-disable-all-gestures","mk-disable-pinch-gestures","mk-disable-all-gestures"];this._delegate.rootNode.classList.remove("mk-disable-all-gestures"),this._delegate.rootNode.classList.remove("mk-disable-pan-gestures"),this._delegate.rootNode.classList.remove("mk-disable-pinch-gestures"),this._delegate.rootNode.classList.remove("mk-disable-zoom-gestures"),e[t]&&this._delegate.rootNode.classList.add(e[t])},mapWasDestroyed:function(){this._removeEndListeners(),this._target.removeEventListener(a.startEventType,this),this._target.removeEventListener("dragstart",this),this._doubleTapWithOneFingerRecognizer.removeEventListener("statechange",this),this._doubleTapWithOneFingerRecognizer.enabled=!1,this._doubleTapWithOneFingerRecognizer=null,this._singleTapWithOneFingerRecognizer.removeEventListener("statechange",this),this._singleTapWithOneFingerRecognizer.enabled=!1,this._singleTapWithOneFingerRecognizer=null,this._longPressAndPanRecognizer.removeEventListener("statechange",this),this._longPressAndPanRecognizer.enabled=!1,this._longPressAndPanRecognizer.delegate=null,this._longPressAndPanRecognizer=null,window.clearTimeout(this._delayedSingleTapRecognizerTimeoutID),delete this.initialEventTargetForCurrentInteraction,delete this._target,delete this._delegate},_addGestureRecognizer:function(t){var e=new t;return e.target=this._target,e.addEventListener("statechange",this),e},_handleDoubleTapWithOneFingerChange:function(t){var e=t.target;e.state===n.States.Recognized&&(this._delayedSingleTapRecognizerTimeoutID&&(this._delegate.userCanceledTap(),window.clearTimeout(this._delayedSingleTapRecognizerTimeoutID),delete this._delayedSingleTapRecognizerTimeoutID),this._singleTapWithOneFingerRecognizer.enabled=!1,this._delegate.userDidDoubleTap(e))},_handleSingleTapWithOneFingerChange:function(t){var e=t.target;if(this._singleTapWithOneFingerRecognizer.enabled&&e.state===n.States.Recognized){this._delegate.userWillTap(e);var i=this._delegate.shouldDelaySingleTap()?350:0;this._delayedSingleTapRecognizerTimeoutID=window.setTimeout(function(){delete this._delayedSingleTapRecognizerTimeoutID,this._delegate.userDidTap()}.bind(this),i)}},_handleLongPressAndPanChange:function(t){var e=t.target;switch(e.state){case n.States.Possible:this._delegate.userMayStartPanningAfterLongPress();break;case n.States.Began:this._singleTapWithOneFingerRecognizer.enabled=!1,this._doubleTapWithOneFingerRecognizer.enabled=!1,this._doubleTapWithOneFingerRecognizer.enabled=!0;break;case n.States.Changed:this._delegate.userDidPanAfterLongPress(e.translation);break;case n.States.Ended:case n.States.Failed:this._singleTapWithOneFingerRecognizer.enabled=!0,this._delegate.userDidStopPanningAfterLongPress(e.state!==n.States.Failed)}},_stopDraggingAnnotation:function(){this._longPressAndPanRecognizer.interruptGesture()},_suppressDefaultBehavior:function(t){this._delegate.elementWantsDefaultBrowserBehavior(this.initialEventTargetForCurrentInteraction,t,this._touchCount)||("pointerType"in t&&"mouse"!==t.pointerType||!a.insideIframe?t.preventDefault():(document.addEventListener("selectstart",this,!0),document.getSelection().removeAllRanges()))},_installEndListeners:function(){window.addEventListener(a.endEventType,this),a.cancelEventType&&window.addEventListener(a.cancelEventType,this)},_removeEndListeners:function(){window.removeEventListener(a.endEventType,this),a.cancelEventType&&window.removeEventListener(a.cancelEventType,this)}},t.exports=s},2008:function(t,e,i){var n=i(1948),o=i(1976),a=i(1989);function s(){a.LongPress.call(this),this.minimumPressDuration=500}s.prototype=n.inheritPrototype(a.LongPress,s,{constructor:s,touchesBegan:function(t){(n.isIEAndNotEdge()||n.isEdge())&&document.getSelection().removeAllRanges(),a.LongPress.prototype.touchesBegan.call(this,t),this._domEvents.push(t),this.translation=new o,this._translationOrigin=this._lastTouchLocation=this.locationInElement()},enterRecognizedState:function(){a.LongPress.prototype.enterBeganState.call(this)},touchesMoved:function(t){this.preventDefault(t);var e=this.locationInElement();this.state===a.States.Possible?a.LongPress.prototype.touchesMoved.call(this,t):this.state!==a.States.Began&&this.state!==a.States.Changed||(this.translation.x+=e.x-this._lastTouchLocation.x,this.translation.y+=e.y-this._lastTouchLocation.y,this.enterChangedState()),this._lastTouchLocation=e},touchesCanceled:function(t){this.interruptGesture()},touchesEnded:function(t){this.state===a.States.Changed?(this.preventDefault(t),this.enterEndedState()):this.enterFailedState()},interruptGesture:function(){this.state===a.States.Changed?this.enterEndedState():this.state===a.States.Began&&this.enterFailedState()},reset:function(){a.LongPress.prototype.reset.call(this),delete this._translationOrigin,delete this._lastTouchLocation,this._domEvents=[]}}),t.exports=s},2009:function(t,e,i){var n=i(2010),o=i(1948),a=i(1943),s=i(2018),r=new n.L10n({supportedLocales:i(2019),primaryLocales:i(2020),localesMap:i(1951),regionToScriptMap:i(1950),rtlLocales:i(2021),enUSDictionary:i(2022),get localeUrl(){return o.isNode()?"file://"+i(2023).resolve(1941,"..","..","locales/{{locale}}/strings.json"):s.createUrl("locales/{{locale}}/strings.json")},get withCredentials(){return a.distUrlWithCredentials}});r._useMetric=!1,r.addEventListener(n.L10n.Events.LocaleChanged,(function(){var t=n.LangTag.parse(r.requestedLocaleId);r._useMetric=n.UseMetric.forLanguageTag(t)})),r.useMetric=function(){return this._useMetric},a.setL10n(r),t.exports=r},2010:function(t,e,i){"use strict";t.exports={LangTag:i(1947),Locale:i(2011),LanguageSupport:i(1946),L10n:i(2014),UseMetric:i(2017),localizeDigits:i(2016)}},2011:function(t,e,i){"use strict";var n=i(1948),o=i(2012).XHRLoader;function a(t,e,i,n){this.localeId=t,this._dict=e||{},this.ready=!!e,this.delegate=i,this.rtl=i.rtlLocales.indexOf(t)>-1,this.dow=n}a.prototype={constructor:a,get:function(t,e){var i=this._dict[t];return i?(e=e||{},n.fillTemplate(i,e,!0)):"["+t+"]"},load:function(t){var e=this.delegate.localeUrl,i=this,n=e.replace(/{{(.*?)}}/,this.localeId);new o(n,{loaderDidSucceed:function(e,n){var o;if(n.status<200||n.status>=300)return o="HTTP error "+n.status+" loading strings for locale: "+i.localeId,void t(new Error(o));try{i._dict=JSON.parse(n.responseText)}catch(a){return o="Failed to parse response for locale: "+i.localeId,void t(new Error(o))}i.ready=!0,t(null,i)},loaderDidFail:function(e,n){var o="Network error loading strings for locale: "+i.localeId;t(new Error(o))}},{withCredentials:this.delegate.withCredentials}).schedule()}},t.exports=a},2012:function(t,e,i){t.exports={Priority:i(1957),State:i(1958),Loader:i(1955),ImageLoader:i(2013),XHRLoader:i(1954)}},2013:function(t,e,i){var n=i(1948),o=i(1955);function a(t,e){o.call(this,t,e),this._image=null}a.prototype=n.inheritPrototype(o,a,{get image(){return this._image},get url(){return this._image.src},reuse:function(t,e){this.init(t,e)},crossOrigin:null,loaderWillStart:function(){o.prototype.loaderWillStart.call(this),this._image||(this._image=document.createElement("img")),this._image.crossOrigin=this.crossOrigin,this._image.src=this._delegate.urlForImageLoader,this._image.addEventListener("load",this),this._image.addEventListener("error",this)},handleEvent:function(t){switch(t.type){case"error":this.loaderDidFail(t.target);break;case"load":this.loaderDidSucceed()}},_reset:function(){this._image&&(this._image.removeEventListener("load",this),this._image.removeEventListener("error",this)),o.prototype._reset.call(this)}}),t.exports=a},2014:function(t,e,i){"use strict";var n=i(1953),o=i(2011),a=i(1947),s=i(2015),r=i(2016);function l(t,e,i){return new o(e,i,t.delegate,t.dowForBestMatch(e))}function h(t,e){t.locales[e.localeId]||(t.locales[e.localeId]=e),t.activeLocale=e;var i=new n.Event(c.Events.LocaleChanged);i.locale=e,t.dispatchEvent(i)}function c(t){var e;this.delegate=t,this.locales=t.localesCache||Object.create(null),this.supportMap=t.supportCache||Object.create(null),this.scriptMap=t.scriptCache||Object.create(null),h(this,this.locales["en-US"]||l(this,"en-US",this.delegate.enUSDictionary)),(e=this).supportMap._built||(e.supportMap._built=!0,e.delegate.supportedLocales.forEach((function(t){var i=a.parse(t);!function(t,e){var i=e.language,n=e.region;t.supportMap[i]||(t.supportMap[i]=[]),-1!==t.delegate.primaryLocales.indexOf(e.tag)?t.supportMap[i].splice(0,0,n):t.supportMap[i].push(n)}(e,i)}))),function(t){t.scriptMap._built||(t.scriptMap._built=!0,Object.keys(t.delegate.regionToScriptMap).forEach((function(e){t.scriptMap[e]=Object.create(null),Object.keys(t.delegate.regionToScriptMap[e]).forEach((function(i){var n=t.delegate.regionToScriptMap[e][i].toLowerCase();t.scriptMap[e][n]=i}))})))}(this)}c.Events={LocaleChanged:"locale-changed"},c.Days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c.prototype={constructor:c,Events:c.Events,get:function(t,e){return this.activeLocale.get(t,e)},get localeId(){return this.activeLocale.localeId},set localeId(t){this._requestedLocaleId!==t&&function(t,e){t._requestedLocaleId=e;var i=e;if(function(t,e){return-1!==t.delegate.supportedLocales.indexOf(e)}(t,e)||(i=t.bestMatch(e,"en-US")),!t.activeLocale||t.activeLocale.localeId!==i){var n=t.locales[i];n||(n=l(t,i)).ready?h(t,n):n.load((function(i,n){if(t._requestedLocaleId===e)return i?(t._requestedLocaleId="en-US",void h(t,t.locales["en-US"])):void h(t,n)}))}}(this,t)},get loaded(){return this._requestedLocaleId&&this.bestMatch(this._requestedLocaleId,"en-US")===this.localeId},get requestedLocaleId(){return this._requestedLocaleId},set requestedLocaleId(t){console.warn("l10n: requestedLocaleId can't be set, use localeId.")},get localeIds(){return Object.keys(this.locales)},get supportedLocaleIds(){return this.delegate.supportedLocales},bestMatch:function(t,e){var i=a.parse(t),n=null;if(i&&this.delegate.localesMap){var o=this.delegate.localesMap;o[i.tag]?i=a.parse(o[i.tag]):o[i.language]&&(i=a.parse(o[i.language]))}return e=e||null,i&&(n=function(t,e){var i,n=e.language,o=e.region,s=e.script,r=t.supportMap[n];if(!r)return null;if(o&&(i=r.filter((function(t){return t.toUpperCase()===e.region.toUpperCase()}))[0]),!i&&s){var l=t.scriptMap[n];l&&(i=l[s.toLowerCase()])}return i||(i=r[0]),new a(n,i)}(this,i)),n?n.tag:e},dowForBestMatch:function(t,e){return s[this.bestMatch(t,e)]},digits:function(t){return r(t,this.localeId)}},n.EventTarget(c.prototype),t.exports=c},2015:function(t){t.exports=JSON.parse('{"ar-SA":6,"ca-ES":1,"cs-CZ":1,"da-DK":1,"de-DE":1,"el-GR":1,"en-AU":1,"en-GB":1,"en-US":0,"en-ZA":0,"es-ES":1,"es-MX":1,"fi-FI":1,"fr-CA":0,"fr-FR":1,"he-IL":0,"hi-IN":0,"hr-HR":1,"hu-HU":1,"id-ID":1,"it-IT":1,"ja-JP":0,"ko-KR":0,"ms-MY":1,"nb-NO":1,"nl-NL":1,"pl-PL":1,"pt-BR":0,"pt-PT":1,"ro-RO":1,"ru-RU":1,"sk-SK":1,"sv-SE":1,"th-TH":0,"tr-TR":1,"uk-UA":1,"vi-VN":1,"zh-CN":1,"zh-HK":0,"zh-TW":0}')},2016:function(t,e){var i=["0","1","2","3","4","5","6","7","8","9"],n={"ar-SA":["\u0660","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"],"hi-IN":["\u0966","\u0967","\u0968","\u0969","\u096a","\u096b","\u096c","\u096d","\u096e","\u096f"]},o={"ca-ES":",","ca-CZ":",","da-DK":",","da-DE":",","el-GR":",","en-ZA":",","es-ES":",","fi-FI":",","fr-CA":",","fr-FR":",","hr-HR":",","hu-HU":",","it-IT":",","nb-NO":",","nl-NL":",","pl-PL":",","pt-BR":",","pt-PT":",","ro-RO":",","ru-RU":",","sk-SK":",","sv-SE":",","tr-TR":",","uk-UA":","};t.exports=function(t,e){for(var a=n[e]||i,s=o[e]||".",r="",l=t.toString(),h=0,c=l.length;h<c;++h){var d=l.charAt(h);r+="."===d?s:a[parseInt(d,10)]||d}return r}},2017:function(t,e,i){"use strict";var n=["AS","BS","BZ","DM","FK","GB","GD","GU","KN","KY","LC","LR","MM","MP","SH","TC","US","VC","VG","VI","WS"];t.exports={forRegion:function(t){return!!t&&n.indexOf(t)<0},forLanguageTag:function(t){var e=t.region;return e?n.indexOf(e)<0:"en"!==t.language&&"my"!==t.language}}},2018:function(t,e,i){"use strict";var n=i(1942),o=i(1943),a=/^.*(?=\/mapkit([.a-z-]*)\.js)/;function s(t){var e=a.exec(t.src);return e?e[0]:null}var r={_basePath:void 0,_versionSuffix:"",_scriptBasePath:void 0,createUrl:function(t,e){if(void 0===this._basePath){if(o.state===o.States.UNINITIALIZED&&!e)return;o._distUrl?(this._basePath=o._distUrl,this._versionSuffix="?mkjsVersion="+n.cdnVersion):n.useLocalResources?(void 0===this._scriptBasePath&&this.findScriptAndSetBasePath(),this._basePath=this._scriptBasePath,this._versionSuffix="?mkjsVersion="+n.cdnVersion):o.proxyPrefixes?this._basePath=o.proxyPrefixes[0]+[n.cdnBase,"mk",n.cdnVersion].join("/"):this._basePath=["https:"+n.cdnBase,"mk",n.cdnVersion].join("/")}return t=t&&t.replace(/^\//,"")||"",[this._basePath,t].join("/")+this._versionSuffix},createSyrupUrl:function(){if(o.state!==o.States.UNINITIALIZED){var t="/ti/csr/1.x.x";return[o._syrupUrl?o._syrupUrl:o.proxyPrefixes?o.proxyPrefixes[0]+n.cdnBase+t:"https:"+n.cdnBase+t,"mk-csr.js?mapkitVersion="+n.version].join("/")}},createImageUrl:function(t){return this.createUrl("images/"+t)},findScriptAndSetBasePath:function(){if(document.currentScript){var t=s(document.currentScript);if(t)return r._scriptBasePath=t,document.currentScript}for(var e=document.scripts,i=0,n=e.length;i<n;++i){var o=s(e[i]);if(null!==o)return this._scriptBasePath=o,e[i]}return null}};n.useLocalResources&&"undefined"!==typeof window&&"undefined"!==typeof window.document&&r.findScriptAndSetBasePath(),o.addEventListener(o.Events.Initialized,(function(){r._basePath=void 0,r._versionSuffix=""})),t.exports=r},2019:function(t){t.exports=JSON.parse('["ar-SA","ca-ES","cs-CZ","da-DK","de-DE","el-GR","en-GB","en-US","es-ES","es-MX","fi-FI","fr-CA","fr-FR","he-IL","hi-IN","hr-HR","hu-HU","id-ID","it-IT","ja-JP","ko-KR","ms-MY","nl-NL","nb-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-HK","zh-TW"]')},2020:function(t){t.exports=JSON.parse('["en-US","fr-FR","pt-BR","zh-CN"]')},2021:function(t){t.exports=JSON.parse('["ar-SA","he-IL"]')},2022:function(t){t.exports=JSON.parse('{"Annotation.Clustering.AccessibilityLabel":"{{n}} locations, {{title}}, {{subtitle}}","Annotation.Clustering.More":"+{{n}} more","Annotation.Clustering.More.Plural":"+{{n}} more","Annotation.Clustering.NoTitle.AccessibilityLabel":"{{n}} locations, {{subtitle}}","Annotation.Generic.AccessibilityLabel":"{{title}}, {{subtitle}}","Annotation.Marker.AccessibilityLabel":"Marker","Annotation.Pin.AccessibilityLabel":"Pin","Annotation.Pin.Green.AccessibilityLabel":"Green Pin","Annotation.Pin.Purple.AccessibilityLabel":"Purple Pin","Annotation.Pin.Red.AccessibilityLabel":"Red Pin","Compass.Degrees.Plural":"{{n}} degrees","Compass.Degrees.Single":"{{n}} degree","Compass.EastIndicator":"E","Compass.NorthIndicator":"N","Compass.SouthIndicator":"S","Compass.Tooltip":"Rotate the map","Compass.WestIndicator":"W","Legal.Apple.URL":"https://www.apple.com/legal/internet-services/maps/legal-en.html","Legal.Label":"Legal","Location.Error.Message":"Your location can only be shown when location services are enabled and you are connected to the Internet.","Location.Error.Support.Label":"Learn more","Location.Subtitle":"Unknown Address","Location.Title":"Current Location","Logo.Apple.Tooltip":"Apple Maps","Logo.AutoNavi.Tooltip":"AutoNavi Maps","MapType.Tooltip":"Change the map type","Mode.Hybrid":"Hybrid","Mode.Satellite":"Satellite","Mode.Standard":"Standard","Scale.Feet.Short":"ft","Scale.Kilometer.Short":"km","Scale.Meter.Short":"m","Scale.Mile.Short":"mi","Track.User.Location.Tooltip":"Show your current location","Zoom.In.Tooltip":"Zoom In","Zoom.Out.Tooltip":"Zoom Out"}')},2023:function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}e.resolve=function(){for(var e="",o=!1,a=arguments.length-1;a>=-1&&!o;a--){var s=a>=0?arguments[a]:t.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,o="/"===s.charAt(0))}return(o?"/":"")+(e=i(n(e.split("/"),(function(t){return!!t})),!o).join("/"))||"."},e.normalize=function(t){var a=e.isAbsolute(t),s="/"===o(t,-1);return(t=i(n(t.split("/"),(function(t){return!!t})),!a).join("/"))||a||(t="."),t&&s&&(t+="/"),(a?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var o=n(t.split("/")),a=n(i.split("/")),s=Math.min(o.length,a.length),r=s,l=0;l<s;l++)if(o[l]!==a[l]){r=l;break}var h=[];for(l=r;l<o.length;l++)h.push("..");return(h=h.concat(a.slice(r))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),i=47===e,n=-1,o=!0,a=t.length-1;a>=1;--a)if(47===(e=t.charCodeAt(a))){if(!o){n=a;break}}else o=!1;return-1===n?i?"/":".":i&&1===n?"/":t.slice(0,n)},e.basename=function(t,e){var i=function(t){"string"!==typeof t&&(t+="");var e,i=0,n=-1,o=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!o){i=e+1;break}}else-1===n&&(o=!1,n=e+1);return-1===n?"":t.slice(i,n)}(t);return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,i=0,n=-1,o=!0,a=0,s=t.length-1;s>=0;--s){var r=t.charCodeAt(s);if(47!==r)-1===n&&(o=!1,n=s+1),46===r?-1===e?e=s:1!==a&&(a=1):-1!==e&&(a=-1);else if(!o){i=s+1;break}}return-1===e||-1===n||0===a||1===a&&e===n-1&&e===i+1?"":t.slice(e,n)};var o="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i(1767))},2024:function(t,e,i){var n=i(1943),o=i(1948),a=i(1981),s=i(1986),r=i(2025).SceneGraphMapNode,l=i(2025).SyrupMapNode,h=i(2018),c=i(2057),d=i(2012).XHRLoader,u=i(2012).Priority,p=i(1988).FeatureVisibility,m=i(1967),g=i(2060),f=i(1987).FallbackType,_=i(2003),y={sg_grid:{"global-configuration":"sg_ready",upgrade:"syrup_insert"},sg_insert:{"global-configuration":"sg_ready",upgrade:"syrup_insert",recreate:"sg_insert"},syrup_insert:{"global-configuration":"syrup_need_spile",fallback:"sg_insert",recreate:"syrup_insert"},syrup_need_spile:{"spile-load":"syrup_init",fallback:"sg_insert",recreate:"syrup_insert"},syrup_init:{"global-configuration":"syrup_network_stalled",fallback:"sg_insert",recreate:"syrup_insert","syrup-complete":"syrup_ready"},syrup_network_stalled:{"global-configuration":"syrup_network_stalled",fallback:"sg_insert",recreate:"syrup_insert","syrup-complete":"syrup_ready"},sg_ready:{"global-configuration":"sg_ready",upgrade:"syrup_insert",recreate:"sg_insert","map-configuration":"sg_ready"},syrup_ready:{"global-configuration":"syrup_ready",fallback:"sg_insert",recreate:"syrup_insert","map-configuration":"syrup_ready","print-match":"syrup_printing"},syrup_printing:{"print-unmatch":"syrup_ready"}};function v(t,e){this._state=null,this._map=t,this._previousNode=null,this.node=null,this._initialOptions=e,this._cachedWebGLCheck=null,this.startUpMode="LandCover","_landCoverStartUp"in e?this.startUpMode=e._landCoverStartUp?"LandCover":null:"_startUpMode"in e&&(this.startUpMode=e._startUpMode),this.hasSpile=null,this._previousCanRunCSR=!1,this._updateState("sg_grid")}function b(t){return btoa(t)}function w(t){if(o.supportsLocalStorage)try{return window.localStorage.getItem(t)}catch(e){return}}function C(t){try{return JSON.parse(t)}catch(e){return}}v.prototype={constructor:v,get defaultSpileURL(){return this._defaultSpileURL||(this._defaultSpileURL=h.createSyrupUrl()),this._defaultSpileURL},set defaultSpileURL(t){this._defaultSpileURL=t},get usingSSR(){return"sg_insert"===this._state||"sg_ready"===this._state},get usingAdvancedAPIs(){return!0},get manageableMap(){var t=this._map.ensureRenderingFrame(),e=.2*this._gpuInfo.MAX_RENDERBUFFER_SIZE;return t.size.width<=e&&t.size.height<=e},get csrCapable(){return"HYBRID"===n.forcedRenderingMode||"CLIENT"===n.forcedRenderingMode||this._webglCheckResult.shouldTryCSR&&!this.knownBadRendering},get shouldDynamicallyLoadSyrup(){return this._webglCheckResult.shouldTryCSR},get knownGoodRendering(){return!!this._cachedSpileResult&&!!this._cachedSpileResult.pass},get knownBadRendering(){return!!this._cachedSpileResult&&!this._cachedSpileResult.pass},get _webglCheckResult(){if(null===this._cachedWebGLCheck){var t=this._map.ensureRenderingFrame().size;this._cachedWebGLCheck=c(t.width,t.height)}return this._cachedWebGLCheck},get _gpuInfo(){return this._webglCheckResult&&this._webglCheckResult.webGL?this._webglCheckResult.webGL.gpuInfo:{MAX_RENDERBUFFER_SIZE:0,VERSION:"unknown"}},get gpuKey(){return b(this._gpuInfo.VERSION)},get _cachedSpileResult(){var t=w("mapkit.SpileTestResults");if(t){var e=C(t);if(e)return e[this.gpuKey]}},get renderingMode(){var t="CLIENT";return this.usingSSR?t="SERVER":this._switchedToLoCSR&&(t="HYBRID"),t},configurationDidBecomeAvailable:function(t){var e=this._previousCanRunCSR,i=n.canRunCSR;this._previousCanRunCSR=i,!e||i||this.usingSSR?!e&&i?this.handleUpgrade():t||this.handleGlobalConfigurationChange():this.handleFallback(f.CONFIG_CHANGE)},forceSyrup:function(){this.hasSpile=null,this._transition("upgrade")},updateSize:function(t){this.node.size=t,this._previousNode&&(this._previousNode.size=t)},destroy:function(){this.node.removeEventListener("reconfigured",this),this.node.destroy(),this.node.delegate=null,this.node=null,this._previousNode&&(this._previousNode.destroy(),this._previousNode=null)},handleEvent:function(t){"reconfigured"===t.type&&(this._switchedToLoCSR=this.node.snapsToIntegralZoomLevels,this._map.didReconfigureMapNode(this.node))},handleGlobalConfigurationChange:function(){this._transition("global-configuration")},handleSpileLoad:function(){this._transition("spile-load")},handleFallback:function(t){var e=t===f.SPILE&&t||n.didFallback&&n.fallbackType||t;e&&this._logFallback(e),this._transition("fallback")},handleUpgrade:function(){this._transition("upgrade")},handleRecreate:function(){this._transition("recreate")},handleMapConfigurationChange:function(){this._transition("map-configuration"),this._previousNode&&this._previousNode instanceof r&&this._previousNode.configuration&&(this._previousNode.configuration=n.types[this._map.mapType])},handleSyrupComplete:function(){this._transition("syrup-complete")},handlePrintMatch:function(){this._transition("print-match")},handlePrintUnmatch:function(){this._transition("print-unmatch")},handleMapRendered:function(){this.node instanceof l&&(this.node.forcedSnapsToIntegralZoomLevels=!1,this._removePreviousMapNode(!0),n.forcedRenderingMode||this._cachedSpileResult||a.scheduleInBackground(this.spileRun.bind(this),a.Priority.Low))},setPointOfInterestFilter:function(t){this._previousNode&&(this._previousNode.pointOfInterestFilter=t)},setTintAndEmphasis:function(t,e,i){this._previousNode&&this._previousNode.setTintAndEmphasis(t,e,i)},mapCameraDidChange:function(){this._previousNode&&this._previousNode.setCameraAnimated(this.node.camera.copy())},_transition:function(t){var e=y[this._state][t];e&&this._updateState(e)},_updateState:function(t){this._state=t;var e=this["_enter_"+t];"function"===typeof e&&e.call(this)},_loadSpileIfNeeded:function(t){var e=null,i=function(){e&&(e.removeEventListener("error",i),e.removeEventListener("load",i),e=null),this.hasSpile=!!window.Spile&&!!window.Spile.Syrup,t.call(this,this.hasSpile)}.bind(this);null!=this.hasSpile?t.call(this,this.hasSpile):"function"===typeof window.Spile?i():((e=document.head.appendChild(document.createElement("script"))).addEventListener("error",i),e.addEventListener("load",i),e.src=this.defaultSpileURL,e.crossOrigin=s.getCorsAttribute(n.syrupUrlWithCredentials))},_insertSceneGraphNode:function(){this.usingSSR&&(this.node.isRotationEnabled=!1);var t=new r;this._insertNewMapNode(t),this._map.didFinishMapNodeInitialization(t)},_enter_sg_grid:function(){this._insertSceneGraphNode(),n.ready&&!n.canRunCSR&&this._updateState("sg_ready")},_enter_sg_insert:function(){this._insertSceneGraphNode(),n.ready&&this._updateState("sg_ready")},_enter_syrup_insert:function(){var t=new l;t.pendingConfigurationUpdates={},this._insertNewMapNode(t),n.state===n.States.READY&&this._updateState("syrup_need_spile")},_insertNewMapNode:function(t){var e=this._initialOptions||{};this._initialOptions||this.node._impl._cameraWillChange(this.node,!1),this.node?(this._removePreviousMapNode(),this._previousNode=this.node,this._previousNode.deactivate(),this.node.migrateStateTo(t),this.node.removeEventListener("reconfigured",this)):(t.allowWheelToZoom="_allowWheelToZoom"in e&&!!e._allowWheelToZoom,t.pannable=!("isScrollEnabled"in e)||!!e.isScrollEnabled,t.zoomable=!("isZoomEnabled"in e)||!!e.isZoomEnabled,"pointOfInterestFilter"in e?("showsPointsOfInterest"in e&&console.warn("[MapKit] `showsPointsOfInterest` is ignored because `pointOfInterestFilter` is set."),null!==e.pointOfInterestFilter&&o.checkInstance(e.pointOfInterestFilter,m,"[MapKit] Unknown value for `pointOfInterestFilter`. It must be an instance of mapkit.PointOfInterestFilter."),t.pointOfInterestFilter=e.pointOfInterestFilter):"showsPointsOfInterest"in e&&(e.showsPointsOfInterest?t.pointOfInterestFilter=null:t.pointOfInterestFilter=m.filterExcludingAllCategories),t.showsDefaultTiles=!("_showsDefaultTiles"in e)||!!e._showsDefaultTiles),this.node=t,this.node.addEventListener("reconfigured",this),this._map.didInsertNewMapNode(t),this._initialOptions?delete this._initialOptions:this.node._impl._cameraDidChange(this.node,!1)},_removePreviousMapNode:function(t){this._previousNode&&(t?new _.Opacity({node:this._previousNode,duration:150,from:1,to:0,done:this._removePreviousMapNode.bind(this,!1)}).begin():(this._previousNode.destroy(!0),this._previousNode.remove(),this._previousNode=null))},_enter_syrup_need_spile:function(){if(this.shouldDynamicallyLoadSyrup){if(this.knownBadRendering&&!n.forcedRenderingMode)return this.handleFallback(f.CACHE),void this._loadSpileIfNeeded(function(t){this.node&&t&&(this.isSpileResultValid(this._cachedSpileResult)||(this.invalidateSpileCache(),a.scheduleInBackground(this.spileRun.bind(this),a.Priority.Low)))}.bind(this));if(this.startUpMode&&this._previousNode&&this._previousNode instanceof r&&!this._previousNode.configuration)if(0!==this.node.rotation);else{var t="PointOfInterests"===this.startUpMode;this._previousNode.snapsToIntegralZoomLevels=t,this._previousNode.labels=t,t&&(this.node.forcedSnapsToIntegralZoomLevels=!0,this.node.setZoomLevelAnimated(s.getIntegralZoom(this.node.zoomLevel))),this._previousNode.language=n.language,this._previousNode.configuration=n.types[this._map.mapType],this._previousNode.delegate={mapDidFinishRendering:function(t){this._map.previousMapDidFinishRendering(t)}.bind(this)},this._previousNode.setCameraBoundaryAnimated(null),this._previousNode.setCameraZoomRangeAnimated(null)}this._loadSpileIfNeeded((function(t){t?this.handleSpileLoad():this.handleFallback(f.FETCH)}))}else this.handleFallback(f.WEBGL)},_enter_syrup_init:function(){if(!n.madabaDomains||!n.madabaDomains.length)return this._csrWarning(1),void this.handleFallback(f.CONFIG_MISSING);this._cachedSpileResult&&!this.isSpileResultValid(this._cachedSpileResult)&&this.invalidateSpileCache();var t=Spile.getRendererWithoutAnyWarranty();if(this._switchedToLoCSR=!this.knownGoodRendering||!this.manageableMap,n.forcedRenderingMode&&(this._switchedToLoCSR="HYBRID"===n.forcedRenderingMode),this.manageableMap||this.usingAdvancedAPIs||n.forcedRenderingMode){var e=this.node;this._reConfigureMapNode(),e.init(n,t,Spile.Syrup.Camera,this._switchedToLoCSR,function(t){t?(this._csrWarning(5),this.handleFallback(f.INIT)):(this._reConfigureMapNode(),e.needsDisplay=!0,this._map.didFinishMapNodeInitialization(e),this.handleSyrupComplete())}.bind(this))}else this.handleFallback(f.SUFFICIENT)},_csrWarning:function(t){console.warn("[MapKit] CSR is unavailable:",t)},_enter_syrup_network_stalled:function(){this.node.updateNetworkConfiguration(n)},_enter_sg_ready:function(){this._removePreviousMapNode(),this.node.snapsToIntegralZoomLevels=!0,this.node.isRotationEnabled=!1,this._reConfigureMapNode(),this._map.mapNodeReady(!1)},_enter_syrup_ready:function(){!this.node.fullyRendered&&this._previousNode&&this._previousNode instanceof r&&this._previousNode.configuration?this._previousNode.configuration=n.types[this._map.mapType]:this._removePreviousMapNode(),this._reConfigureMapNode(),this.node.updateNetworkConfiguration(n),this.node.makePendingConfigurationUpdates(),this._map.mapNodeReady(!0)},_reConfigureMapNode:function(){this.node.language=n.language,this.node.configuration=n.types[this._map.mapType],this.node._impl.debug||(this.node._impl.debug=!!n.showsTileInfo),this._map.didReconfigureMapNode(this.node)},_enter_syrup_printing:function(){this.node.forceRerender(),this.node.needsDisplay=!0},_logFallback:function(t){if(!o.doNotTrack()){var e="https://gsp10-ssl.ls.apple.com/hvr/mw/v1/spile";n.proxyPrefixes&&(e=n.proxyPrefixes[n.proxyPrefixes.length-1]+e);var i=this._usingCSRAPI();new d(e,{getDataToSend:function(e){e.setRequestHeader("Content-Type","text/plain"),e.responseType="text";var n=g.uaParserInfo.browserInfo,o=g.uaParserInfo.deviceInfo;return JSON.stringify({ssrFallback:{reason:t,usingCSRAPI:i,devicePlatform:o.platform,deviceOs:o.os,browserName:n.name,browserVersion:n.version}})}},{method:"POST",priority:u.Low,withCredentials:n.withCredentials}).schedule()}},_usingCSRAPI:function(){return!(this._map._showsCompass!==p.Visible&&(this._map._showsCompass!==p.Adaptive||this._map._usingDefaultShowsCompassValue)&&0===this._map.rotation&&!this._map._annotationsController.containsMarkerAnnotation())},spileRun:function(){this.node&&Spile&&Spile.testRendering&&Spile.testRendering(this.cacheSpileResult.bind(this))},cacheSpileResult:function(t){if(this.node&&t.status!==Spile.Status.MAYBE&&t["gpu-identifier"]){var e=b(t["gpu-identifier"].VERSION),i=t.status===Spile.Status.YES,n=w("mapkit.SpileTestResults"),a=n&&C(n)||{};a[e]={pass:i,version:Spile.version},function(t,e){if(o.supportsLocalStorage)try{window.localStorage.setItem("mapkit.SpileTestResults",e)}catch(i){return}}(0,JSON.stringify(a)),i||this.usingSSR||this.handleFallback(f.SPILE)}},isSpileResultValid:function(t){if(Spile&&Spile.version)return t.version===Spile.version},invalidateSpileCache:function(){!function(t){if(o.supportsLocalStorage)try{window.localStorage.removeItem("mapkit.SpileTestResults")}catch(e){return}}()}},t.exports=v},2025:function(t,e,i){t.exports={BackgroundGridThemes:i(2026).Themes,SceneGraphMapNode:i(2028),SyrupMapNode:i(2051),TileOverlay:i(2044)}},2026:function(t,e,i){var n=i(1972),o=i(1948),a={light:{fillColor:[248,245,236],lineColor:[149,148,144]},dark:{fillColor:[44,45,47],lineColor:[56,64,66]}};function s(){n.BaseNode.call(this),this._renderer=new(i(2027))(this),this._theme=a.light}s.prototype=o.inheritPrototype(n.BaseNode,s,{initialRendering:!1,get size(){return this.parent.size},get zoom(){return this.parent.zoomLevel},get origin(){return this.parent.visibleMapRect.origin},get theme(){return this._theme},updateThemeFromTint:function(t){var e=a[t];e!==this._theme&&(this._theme=e,this.needsDisplay=!0)},stringInfo:function(){return"BackgroundGridNode"+(this.initialRendering?"!":"")+(this._theme===a.light?"":"<dark>")}}),t.exports=s},2027:function(t,e,i){var n=i(1972),o=i(1969),a=i(1948),s=Math.log(10)/Math.log(2);function r(t){n.RenderItem.call(this,t)}function l(t,e,i,n,o,s){i=a.mod(i,e),n=a.mod(n,e),o=Math.ceil(o),s=Math.ceil(s);for(var r=Math.ceil(o/e),l=Math.ceil(s/e),h=0;h<r;++h)t.fillRect(i+h*e,0,1,s);for(h=0;h<l;++h)t.fillRect(0,n+h*e,o,1)}function h(t){return"rgb("+t.join(",")+")"}function c(t,e,i){return Math.round(e*i+t*(1-i))}r.prototype=a.inheritPrototype(n.RenderItem,r,{draw:function(t,e){var i=this.node,r=i.zoom,d=100*Math.pow(2,r%s),u=d/10,p=Math.min(u,100),m=u<10?0:(p-10)/90,g=i.origin,f=o.pointsPerAxis(r),_=new n.Point(-g.x*f,-g.y*f),y=a.mod(_.x,d)-d,v=a.mod(_.y,d)-d,b=this.node.theme;if(t.fillStyle=h(b.fillColor),t.fillRect(0,0,i.size.width,i.size.height),!i.initialRendering){var w=1-Math.pow(1-m,2);w>0&&(t.fillStyle=h(function(t,e,i){return 0===i?t:1===i?e:[c(t[0],e[0],i),c(t[1],e[1],i),c(t[2],e[2],i)]}(b.fillColor,b.lineColor,w)),l(t,u,y,v,i.size.width,i.size.height)),t.fillStyle=h(b.lineColor),l(t,d,y,v,i.size.width,i.size.height)}}}),t.exports=r},2028:function(t,e,i){var n=i(2029),o=i(2030),a=i(1948),s=i(1967);function r(){n.call(this),Object.defineProperty(this,"_impl",{value:new o(this)})}r.prototype=a.inheritPrototype(n,r,{get cssBackgroundProperty(){return this._impl.cssBackgroundProperty},get labels(){return this._impl.labels},set labels(t){this._impl.labels=t},get pointOfInterestFilter(){return null===this._impl._pointOfInterestFilter?null:null===this._impl._pointOfInterestFilter._includes&&0===this._impl._pointOfInterestFilter._excludes.length?this._impl._pointOfInterestFilter:s.filterExcludingAllCategories},set pointOfInterestFilter(t){this._impl.pointOfInterestFilter=t},get rotation(){return 0},set rotation(t){this._impl.rotation=t},rotateCameraAroundMapPoint:function(t,e){this._impl.rotation+=e}}),t.exports=r},2029:function(t,e,i){var n=i(1972),o=i(1948),a=i(1952);function s(){n.GroupNode.call(this)}s.prototype=o.inheritPrototype(n.GroupNode,s,{delegate:null,deactivate:function(){this._impl.deactivate()},destroy:function(t){this._impl.destroy(t)},get element(){return this._impl.element},get camera(){return this._impl.camera},get minZoomLevel(){return this._impl.currentMinZoomLevel},get maxZoomLevel(){return this._impl.currentMaxZoomLevel},get staysCenteredDuringZoom(){return this._impl.staysCenteredDuringZoom},set staysCenteredDuringZoom(t){this._impl.staysCenteredDuringZoom=t},get configuration(){return this._impl.configuration},set configuration(t){this._impl.configuration=t},get tint(){return this._impl.tint},get emphasis(){return this._impl.emphasis},get language(){return this._impl.language},set language(t){this._impl.language=t},get allowWheelToZoom(){return this._impl.allowWheelToZoom},set allowWheelToZoom(t){this._impl.allowWheelToZoom=t},get pointOfInterestFilter(){return this._impl.pointOfInterestFilter},set pointOfInterestFilter(t){this._impl.pointOfInterestFilter=t},get backgroundGridTheme(){return this._impl.backgroundGridTheme},set backgroundGridTheme(t){this._impl.backgroundGridTheme=t},get size(){return this._impl.size},set size(t){this._impl.size=t},get rotation(){return this._impl.rotation},set rotation(t){this._impl.rotation=t},getRotation:function(){return this._impl.rotation},get isRotationEnabled(){return this._impl.isRotationEnabled},set isRotationEnabled(t){this._impl.isRotationEnabled=t},get isRotationLocked(){return this._impl.isRotationLocked},get cameraIsPanning(){return this._impl.cameraIsPanning},get pannable(){return this._impl.pannable},set pannable(t){this._impl.pannable=t},get cameraIsZooming(){return this._impl.cameraIsZooming},get zoomable(){return this._impl.zoomable},set zoomable(t){this._impl.zoomable=t},get cameraIsRotating(){return this._impl.cameraIsRotating},get cameraIsAnimating(){return!!this._impl.cameraAnimation},get zoomLevel(){return this._impl.zoomLevel},set zoomLevel(t){this._impl.setZoomLevelAnimated(t)},setZoomLevelAnimated:function(t,e){this._impl.setZoomLevelAnimated(t,e)},setCameraDistanceAnimated:function(t,e){this._impl.setCameraDistanceAnimated(t,e)},getCurrentCameraDistance:function(){return this._impl.getCurrentCameraDistance()},get cameraZoomRange(){return this._impl.cameraZoomRange},setCameraZoomRangeAnimated:function(t,e){this._impl.setCameraZoomRangeAnimated(t,e)},zoomLevelForCameraDistanceAtY:function(t,e){return this._impl.zoomLevelForCameraDistanceAtY(t,e)},get visibleMapRect(){return this._impl.visibleMapRect},set visibleMapRect(t){this._impl.setVisibleMapRectAnimated(t)},setVisibleMapRectAnimated:function(t,e){this._impl.setVisibleMapRectAnimated(t,e)},setCenterAnimated:function(t,e){this._impl.setCenterAnimated(t,e)},setCameraBoundaryAnimated:function(t,e){this._impl.setCameraBoundaryAnimated(t,e)},isMapPointWithinBounds:function(t){return this._impl.isMapPointWithinBounds(t)},get showsDefaultTiles(){return this._impl.showsDefaultTiles},set showsDefaultTiles(t){this._impl.showsDefaultTiles=t},get tileOverlays(){return this._impl.tileOverlays},set tileOverlays(t){this._impl.tileOverlays=t},addTileOverlay:function(t){return this._impl.addTileOverlay(t)},addTileOverlays:function(t){return this._impl.addTileOverlays(t)},removeTileOverlay:function(t){return this._impl.removeTileOverlay(t)},removeTileOverlays:function(t){return this._impl.removeTileOverlays(t)},adjustMapItemPoint:function(t){return this._impl.adjustMapItemPoint(t)},cameraWillStartZooming:function(t,e,i){return this._impl.cameraWillStartZooming(t,e,i)},cameraDidStopZooming:function(){this._impl.cameraDidStopZooming()},get fullyRendered(){return this._impl.fullyRendered},devicePixelRatioDidChange:function(){return this._impl.devicePixelRatioDidChange()},stringInfo:function(){return this._impl.stringInfo()},get snapsToIntegralZoomLevels(){return this._impl.snapsToIntegralZoomLevels},set snapsToIntegralZoomLevels(t){this._impl.snapsToIntegralZoomLevels=t},migrateStateTo:function(t){return this._impl.migrateStateTo(t)},needsReplacing:function(t){return this._impl.needsReplacing(t)},createLabelRegion:function(){return this._impl.createLabelRegion()},updatedLabelRegion:function(){this._impl.updatedLabelRegion()},unregisterLabelRegion:function(t){this._impl.unregisterLabelRegion(t)},setCameraAnimated:function(t,e,i){this._impl.setCameraAnimated(t,e,i)},setTintAndEmphasis:function(t,e,i){this._impl.setTintAndEmphasis(t,e,i)},compassRotationWillStart:function(){return this._impl.compassRotationWillStart()},compassRotationDidEnd:function(){this._impl.compassRotationDidEnd()}}),a.EventTarget(s.prototype),t.exports=s},2030:function(t,e,i){var n=i(2031),o=i(2026),a=i(2046),s=i(1948);function r(t){n.call(this,t),this._backgroundGrid=this.node.addChild(new o),this._tileGridsGroup=this.node.addChild(new a(this)),this._labels=!0,this.rotation=0,this._backgroundGrid.initialRendering=!0,this._tileGridsGroup.opacity=0,setTimeout(function(){this._backgroundGrid.initialRendering=!1,this._tileGridsGroup.opacity=1}.bind(this),0)}r.prototype=s.inheritPrototype(n,r,{stringInfo:function(){return"MapNode<camera:"+this.camera.toString()+">"},get tileSettings(){return{configuration:this._configuration,tint:this._tileTint,emphasis:this._emphasis,language:this._language,showsPOI:this._showsPOI(),showsLabels:this._labels,showsDefaultTiles:this._showsDefaultTiles,showsTileInfo:this._debug,tileOverlays:this._tileOverlays}},get fullyRendered(){return this._tileGridsGroup.fullyRendered},get cssBackgroundProperty(){return this._tileGridsGroup.cssBackgroundProperty},get labels(){return this._labels},set labels(t){this._labels=!!t,this.refresh()},destroy:function(t){n.prototype.destroy.call(this,t),this._tileGridsGroup.destroy()},updateTintAndEmphasis:function(t,e){this._backgroundGrid.updateThemeFromTint(t),this.refresh()},refresh:function(){this._tileGridsGroup.scheduleRefresh()},cameraZoomWasSet:function(t){t?this._tileGridsGroup.cameraWillStartZooming(t):this._tileGridsGroup.invalidate()},tileGridDidFinishRendering:function(){this._tileOverlays.forEach((function(t){t._impl.reloadComplete()}),this),n.prototype.tileGridDidFinishRendering.call(this)},handleEvent:function(){this._tileGridsGroup.scheduleRefresh()},beforeCameraZoomChange:function(t){t?this._tileGridsGroup.cameraWillStartZooming():this._tileGridsGroup.cameraDidStopZooming()},devicePixelRatioDidChange:function(){return this._tileGridsGroup.scheduleRefresh(),!0},minZoomLevelForViewportSize:function(t,e){var i=Math.max(t.width,t.height),n=Math.ceil(i/e);return s.log2(n)},minAndMaxZoomLevelsWereUpdated:function(){this.tileOverlays.forEach((function(t){"number"!==typeof t.minimumZ||isNaN(t.minimumZ)||(this.minZoomLevel=Math.min(this.minZoomLevel,t.minimumZ)),"number"!==typeof t.maximumZ||isNaN(t.maximumZ)||(this.maxZoomLevel=Math.max(this.maxZoomLevel,t.maximumZ))}),this)},_tileOverlaysDidChange:function(){this._updateMinAndMaxZoomLevels(this.camera.viewportSize),this._tileGridsGroup.scheduleRefresh()},_showsPOI:function(){return(null==this._pointOfInterestFilter||null==this._pointOfInterestFilter._includes&&0===this._pointOfInterestFilter._excludes.length)&&this.labels},needsReplacing:function(t){return t}}),t.exports=r},2031:function(t,e,i){var n=i(1972),o=i(1969),a=i(1948),s=i(1986),r=i(2032),l=i(2033),h=i(2034),c=i(2035),d=i(2038),u=i(2039),p=i(2044),m=i(2045),g=1-Math.pow(2,-52),f=Math.PI/3,_=Math.tan(f/2);function y(t){this.node=t,this._configuration=null,this._debug=!1,this._language=null,this.allowWheelToZoom=!1,this._pointOfInterestFilter=null,this._showsDefaultTiles=!0,this._tileOverlays=[],this.camera=new r,this._element=document.createElement("div"),this.currentMinZoomLevel=this.minZoomLevel,this.currentMaxZoomLevel=this.maxZoomLevel}y.prototype={constructor:y,get element(){return this._element},deactivate:function(){this.node.delegate=null},destroy:function(t){!t&&this.cameraAnimation&&this.cameraAnimation.cancel(),this._tileOverlays.forEach((function(t){t.removeEventListener(m.RELOAD_EVENT,this)}),this),this._initialInteractionController&&(this._initialInteractionController.destroy(),this._initialInteractionController=null),this._panController&&(this._panController.destroy(),this._panController=null),this._zoomController&&(this._zoomController.destroy(),this._zoomController=null),this._rotationController&&(this._rotationController.destroy(),this._rotationController=null),delete this.node.delegate},minZoomLevel:3,maxZoomLevel:1/0,staysCenteredDuringZoom:!1,cameraAnimation:null,isRotationEnabled:!1,isRotationLocked:!0,snapsToIntegralZoomLevels:!1,get configuration(){return this._configuration},set configuration(t){this._configuration!==t&&this.updateConfiguration(t)},get tint(){return this._tint},get emphasis(){return this._emphasis},setTintAndEmphasis:function(t,e,i){t===this._tint&&e===this._tileTint&&i===this._emphasis||(this._tint=t,this._tileTint=e,this._emphasis=i,this.updateTintAndEmphasis(t,i))},get language(){return this._language},set language(t){this._language!==t&&(this._language=t,this.refresh())},get pointOfInterestFilter(){return this._pointOfInterestFilter},set pointOfInterestFilter(t){this._pointOfInterestFilter!==t&&(this._pointOfInterestFilter=t,this.updatePointOfInterestFilter())},get size(){return this.camera.viewportSize.copy()},set size(t){this.adjustForSize(t.copy()),t.width>0&&t.height>0&&this._updateZoom(!1)},adjustForSize:function(t){if(this._visibleMapRect&&this._visibleMapRect.size.width>0&&this._visibleMapRect.size.height>0&&t.width>0&&t.height>0){var e=this._visibleMapRect;delete this._visibleMapRect,this.setCameraAnimated(this.camera.withNewMapRect(e,this.snapsToIntegralZoomLevels,t))}else{var i=null;Object.prototype.hasOwnProperty.call(this,"_pendingCameraDistance")&&(i=this._pendingCameraDistance);var n=this.camera;this.setCameraAnimated(new r(n.center,n.zoom,t,n.rotation)),null!==i&&this.setCameraDistanceAnimated(i,!1)}},get cameraIsPanning(){return!!this._panning},get pannable(){return!!this._panController},set pannable(t){!t&&this._panController?(this._panController.destroy(),delete this._panController):t&&!this._panController&&(this._initialInteractionController||(this._initialInteractionController=new h(this)),this._panController=new d(this))},get cameraIsZooming(){return!!this._zooming||!!this._suspendedZoom},get zoomable(){return!!this._zoomController},set zoomable(t){!t&&this._zoomController?(this._zoomController.destroy(),delete this._zoomController):t&&!this._zoomController&&(this._initialInteractionController||(this._initialInteractionController=new h(this)),this._zoomController=new c(this))},get cameraIsRotating(){return!!this._rotating},get visibleMapRect(){return this._visibleMapRect||this.camera.toMapRect()},set visibleMapRect(t){this.setVisibleMapRectAnimated(t)},setVisibleMapRectAnimated:function(t,e){if(this.camera.viewportSize.equals(n.Size.Zero))this._visibleMapRect=t.copy();else{var i=this.camera.withNewMapRect(t,this.snapsToIntegralZoomLevels);i.rotation=0,this.setCameraAnimated(i,!!e)}},setCenterAnimated:function(t,e){var i=t.toMapPoint();if(this._visibleMapRect)this._visibleMapRect=new o.MapRect(i.x-this._visibleMapRect.size.width/2,i.y-this._visibleMapRect.size.height/2,this._visibleMapRect.size.width,this._visibleMapRect.size.height);else{var n=this.camera.copy();n.center=i,this.setCameraAnimated(n,e)}},setCameraBoundaryAnimated:function(t,e){t?(this._cameraBeforeBoundaryChange=this.camera,this._cameraBoundaryRect=new o.MapRect(t.origin.x,t.origin.y,a.clamp(t.size.width,0,1),Math.max(t.size.height,0)),this.setCameraAnimated(this.camera.copy(),e),delete this._cameraBeforeBoundaryChange):delete this._cameraBoundaryRect},constrainCamera:function(t){this._cameraBoundaryRect&&(t.center=this._constrainCenterWithinBounds(t.center)),this._updateMinAndMaxZoomLevelsAtY(t.center.y),t.zoom=a.clamp(t.zoom,this.currentMinZoomLevel,this.currentMaxZoomLevel)},constrainCameraRotation:function(t){var e=this.isRotationLocked;if(this.isRotationLocked=t.zoom<7,0!==t.rotation&&this.isRotationLocked)return t.rotation=0,!e&&0!==this.camera.rotation},get transformCenter(){var t=this.node.delegate;return t&&"function"===typeof t.mapTransformCenter?t.mapTransformCenter(this.node):this.camera.center},get zoomLevel(){return this.camera.zoom},set zoomLevel(t){this.setZoomLevelAnimated(t)},setZoomLevelAnimated:function(t,e){if(delete this._cameraDistance,this._suspendedZoom)return this._suspendedZoom.animated=this._suspendedZoom.animated||this._suspendedZoom.level!==t,void(this._suspendedZoom.level=t);if(!this.cameraAnimation||e){var i=this.zoomLevel,n=a.clamp(t,this.currentMinZoomLevel,this.currentMaxZoomLevel);if(i!==n){var o=this.transformCenter,s=this.camera;o.equals(s.center)?this.setCameraAnimated(new r(s.center,n,s.viewportSize,s.rotation),e):this.scaleCameraAroundMapPoint(Math.pow(2,n-i),this.transformCenter,e)}}else this.cameraAnimation.additiveZoom=t},setCameraDistanceAnimated:function(t,e){if(0!==this.camera.viewportSize.width){var i=this.zoomLevelForCameraDistanceAtY(t,this.camera.center.y);this.snapsToIntegralZoomLevels&&(i=s.getIntegralZoom(i)),this.setZoomLevelAnimated(i,e),this._cameraDistance=t}else this._pendingCameraDistance=t},getCurrentCameraDistance:function(){return this.visibleMapRect.size.width/2/o.mapUnitsPerMeterAtLatitude(this.camera.center.toCoordinate().latitude)/_},get cameraZoomRange(){return this._cameraZoomRange?this._cameraZoomRange.copy():new o.CameraZoomRange},setCameraZoomRangeAnimated:function(t,e){t?this._cameraZoomRange=t.copy():delete this._cameraZoomRange,this._updateZoom(e)},zoomLevelForCameraDistanceAtY:function(t,e){return this._zoomLevelForCameraDistanceAtLatitude(t,o.convertYToLatitude(e))},adjustMapItemPoint:function(t){if(this.cameraIsZooming||this._pendingCameraDrawingReadiness)return t;if(!this._pointAdjustmentReference){var e=this.camera.zoom,i=this.visibleMapRect.origin,a=new u(this.camera),r=a.zoom,l=a.mapRect.origin,h=Math.pow(2,e-r),c=o.pointsPerAxis(r)*h;this._pointAdjustmentReference=new n.Point((l.x-i.x)*c,(l.y-i.y)*c)}return t.x=s.roundToDevicePixel(this._pointAdjustmentReference.x)+s.roundToDevicePixel(t.x-this._pointAdjustmentReference.x),t.y=s.roundToDevicePixel(this._pointAdjustmentReference.y)+s.roundToDevicePixel(t.y-this._pointAdjustmentReference.y),t},scaleCameraAroundMapPoint:function(t,e,i){var n=o.pointsPerAxis(this.currentMinZoomLevel),a=this.camera.viewportSize.width/(this.visibleMapRect.size.width*n),s=this.camera.viewportSize.height/(this.visibleMapRect.size.height*n),r=Math.min(1/t,a,s),l=e.x+(e.x<1?1:-1),h=this.visibleMapRect;l>=h.origin.x&&l<=h.maxX()&&(e=new o.MapPoint(l,e.y));var c=this.camera.withNewMapRect(h.scale(r,e),!1);this.setCameraAnimated(c,i)},setCameraAnimated:function(t,e,i,n){if(0===t.viewportSize.width||0===t.viewportSize.height)return this._pendingCameraDrawingReadiness=!0,void(this.camera=t);delete this._pendingCameraDistance;var o=this.camera;t.viewportSize.equals(o.viewportSize)||(this._updateMinAndMaxZoomLevels(t.viewportSize),!e&&this.cameraAnimation&&this.cameraAnimation.updateViewportSize(t.viewportSize)),n||this.constrainCamera(t);var s,r=this.constrainCameraRotation(t),h=t.toMapRect().size,c=h.width/2,d=h.height/2;t.center.x=a.mod(t.center.x-c,1)+c,t.center.y=a.clamp(t.center.y,d,g-d),(this._pendingCameraDrawingReadiness||!t.equals(o))&&(delete this._pendingCameraDrawingReadiness,this._cameraWillChange(!!e),!e&&!r||this.cameraAnimation?(delete this._pointAdjustmentReference,this.camera=t,this.cameraZoomWasSet(),this._cameraDidChange()):(e?s=this._cameraBeforeBoundaryChange||o:(s=t.copy()).rotation=o.rotation,this._cameraChangesMayHaveStarted(),this.cameraAnimation=new l(this,s,t,i),this._cameraBeforeBoundaryChange&&(this.cameraAnimation.unconstrained=!0),this.cameraAnimation.rotating&&(this._rotating=!0),this.cameraAnimation.zooming&&this.cameraZoomWasSet(t)))},cameraWillStartZooming:function(t,e,i){var n=this.node.delegate,o=function(){return!!n&&"function"===typeof n.mapCanStartZooming&&!n.mapCanStartZooming(this.node)}.bind(this);return this.cameraAnimation?!(this._zoomController.active||this.cameraAnimation.zooming||o())&&(this._suspendedZoom={animated:!!e,offCenter:!!i,level:this.zoomLevel,completed:!1},!0):o()?(this._zoomController.interrupt(),!1):(this._cameraWillStartZooming(n,t,e,i),!0)},_cameraWillStartZooming:function(t,e,i,n){t&&"function"===typeof t.mapWillStartZooming&&t.mapWillStartZooming(this.node,e,i,n),this._cameraChangesMayHaveStarted(),this._zooming=!0,this.beforeCameraZoomChange(!0),this._cameraWillChange(!!i)},cameraDidStopZooming:function(){if(this.snapsToIntegralZoomLevels&&(this.camera.zoom=Math.round(this.camera.zoom)),this._suspendedZoom)this._suspendedZoom.complete=!0;else{delete this._zooming,this.beforeCameraZoomChange(!1),this._cameraDidChange(),this._cameraChangesMayHaveEnded();var t=this.node.delegate;t&&"function"===typeof t.mapDidStopZooming&&t.mapDidStopZooming(this.node)}},cameraWillStartRotating:function(){var t=this.node.delegate;t&&"function"===typeof t.mapCanStartRotating&&!t.mapCanStartRotating(this.node)||(this._cameraChangesMayHaveStarted(),this._rotating=!0,this._cameraWillChange())},cameraDidStopRotating:function(){if(this._rotating){delete this._rotating,this._cameraDidChange(),this._cameraChangesMayHaveEnded();var t=this.node.delegate;t&&"function"===typeof t.mapDidStopRotating&&t.mapDidStopRotating(this.node)}},migrateStateTo:function(t){t.configuration=this.node.configuration,t.tint=this.node.tint,t.language=this.node.language,t.pannable=this.node.pannable,t.allowWheelToZoom=this.node.allowWheelToZoom,t.pointOfInterestFilter=this.node._impl.pointOfInterestFilter,t.showsDefaultTiles=this.node.showsDefaultTiles,t.tileOverlays=this.node.tileOverlays,t.size=this.node.size,t.staysCenteredDuringZoom=this.node.staysCenteredDuringZoom;var e=this.node.visibleMapRect;e.size.width>0&&e.size.height>0&&(t.visibleMapRect=e),t.zoomable=this.node.zoomable,t.isRotationEnabled=this.isRotationEnabled,t.rotation=this.rotation,this._cameraZoomRange&&t.setCameraZoomRangeAnimated(this._cameraZoomRange,!1),this._cameraDistance>=0&&t.setCameraDistanceAnimated(this._cameraDistance,!1),this._cameraBoundaryRect&&t.setCameraBoundaryAnimated(this._cameraBoundaryRect,!1),t._impl.debug=this.debug,t._impl.isRotationLocked=this.isRotationLocked,this.cameraAnimation&&(this.cameraAnimation.map=t._impl,t._impl.cameraAnimation=this.cameraAnimation,this.cameraChangesHaveStarted&&(t._impl.cameraChangesHaveStarted=!0))},createLabelRegion:a.noop,updatedLabelRegion:a.noop,unregisterLabelRegion:a.noop,get debug(){return this._debug},set debug(t){this._debug!==!!t&&(this._debug=!!t,this.refresh())},updateConfiguration:function(t){this._configuration=t,this._updateMinAndMaxZoomLevels(this.camera.viewportSize),this.setCameraAnimated(this.camera),this.refresh()},updatePointOfInterestFilter:function(){this.refresh()},refresh:function(){},beforeCameraZoomChange:function(){},cameraZoomWasSet:function(){},get showsDefaultTiles(){return this._showsDefaultTiles},set showsDefaultTiles(t){this._showsDefaultTiles!==t&&(this._showsDefaultTiles=t,this._tileOverlaysDidChange())},get tileOverlays(){return this._tileOverlays},set tileOverlays(t){if(0!==this._tileOverlays.length||0!==t.length){var e="[MapKit] Map.tileOverlays should be an array, got `"+t+"` instead.";a.checkArray(t,e),t.forEach((function(t){a.checkInstance(t,p,"[MapKit] Map.tileOverlays can only contain TileOverlays, but got `"+t+"` instead.")})),this._tileOverlays.forEach((function(t){t.removeEventListener(m.RELOAD_EVENT,this)}),this),this._tileOverlays=t,this._tileOverlays.forEach((function(t){t.addEventListener(m.RELOAD_EVENT,this)}),this),this._tileOverlaysDidChange()}},addTileOverlay:function(t){return a.checkInstance(t,p,"[MapKit] Map.addTileOverlay expected a TileOverlay, but got `"+t+"` instead."),this.addTileOverlays([t]),t},addTileOverlays:function(t){var e="[MapKit] Map.addTileOverlays expected an array, but got `"+t+"` instead.";return a.checkArray(t,e),t.forEach((function(t){if(a.checkInstance(t,p,"[MapKit] Map.addTileOverlays expected only TileOverlays, but got `"+t+"` instead."),"number"===typeof t.minimumZ&&t.minimumZ<this.currentMinZoomLevel){var e=Math.ceil(100*this.currentMinZoomLevel)/100;console.warn("[MapKit] This TileOverlay has its minimumZ set to "+t.minimumZ+", but this map can only zoom to a minimum value of "+e+". As a result, some zoom levels supported by the TileOverlay cannot be viewed on this map.")}}),this),this.tileOverlays=this.tileOverlays.concat(t),t},removeTileOverlay:function(t){return a.checkInstance(t,p,"[MapKit] Map.removeTileOverlay expected a TileOverlay, but got `"+t+"` instead."),this.tileOverlays=this.tileOverlays.filter((function(e){return e!==t})),t},removeTileOverlays:function(t){var e="[MapKit] Map.removeTileOverlays expected an array, but got `"+t+"` instead.";return a.checkArray(t,e),t.forEach((function(t){a.checkInstance(t,p,"[MapKit] Map.removeTileOverlays expected only TileOverlays, but got `"+t+"` instead."),this.removeTileOverlay(t)}),this),t},handleEvent:function(){},cameraWillStartPanning:function(){var t=this.node.delegate,e=function(){return!!t&&"function"===typeof t.mapCanStartPanning&&!t.mapCanStartPanning(this.node)}.bind(this);this.cameraAnimation||e()?this._panController.interrupt():(t&&"function"===typeof t.mapWillStartPanning&&t.mapWillStartPanning(this.node),this.refresh(),this._cameraChangesMayHaveStarted(),this._panning=!0,this._cameraWillChange())},cameraWillStopPanning:function(){var t=this.node.delegate;t&&"function"===typeof t.mapWillStopPanning&&t.mapWillStopPanning(this.node)},cameraDidStopPanning:function(){delete this._panning,this._cameraDidChange(),this._cameraChangesMayHaveEnded();var t=this.node.delegate;t&&"function"===typeof t.mapDidStopPanning&&t.mapDidStopPanning(this.node)},cameraAnimationDidProgress:function(t,e){this.setCameraAnimated(t,!1,null,e)},cameraAnimationDidEnd:function(){var t=this.cameraAnimation;this.cameraAnimation=null;var e=!1;if(t.zooming&&!t.zoomIsAdditive&&(this.cameraDidStopZooming(),e=!0),t.rotating&&(this.cameraDidStopRotating(),e=!0),e||this._cameraDidChange(),this._cameraChangesMayHaveEnded(),this._suspendedZoom){var i=this._suspendedZoom;delete this._suspendedZoom,this._cameraWillStartZooming(this.node.delegate,"",i.animated),i.complete&&(this.setZoomLevelAnimated(i.level,i.animated),i.animated||this.cameraDidStopZooming())}this._nextCameraZoomRange&&(this.setCameraZoomRangeAnimated(this._nextCameraZoomRange,!1),delete this._nextCameraZoomRange)},interactionDidStart:function(){this._panController&&this._panController.stopDecelerating(),this._zoomController&&this._zoomController.stopDecelerating(),this._rotationController&&this._rotationController.stopDecelerating()},beganRecognizingRotation:function(){this._zoomController&&(this._zoomController._singleTapWithTwoFingersRecognizer.enabled=!1),this.isRotationLocked&&(this.restrictedCamera=this.camera.copy(),this.restrictIncomingRotation=!0)},finishedRecognizingRotation:function(){this._zoomController&&(this._zoomController._singleTapWithTwoFingersRecognizer.enabled=!0),this.resetRestrictedCamera()},compassRotationWillStart:function(){if(this.isRotationLocked)return this.restrictedCamera=this.camera.copy(),this.restrictIncomingRotation=!1,!0},compassRotationDidEnd:function(){this.resetRestrictedCamera()},resetRestrictedCamera:function(){this.restrictedCamera&&(this.restrictedCamera.rotation=0,this.setCameraAnimated(this.restrictedCamera,!0),delete this.restrictedCamera,delete this.restrictIncomingRotation)},tileGridDidFinishRendering:function(){var t=this.node.delegate;t&&"function"===typeof t.mapDidFinishRendering&&t.mapDidFinishRendering(this.node)},updateMinAndMaxZoomLevelsWhenConfigurationChanges:function(){this.minZoomLevel=0,this.maxZoomLevel=this.constructor.prototype.maxZoomLevel,this._configuration.tileSources.forEach((function(t){this.minZoomLevel=Math.max(this.minZoomLevel,t.minZoomLevel),this.maxZoomLevel=Math.min(this.maxZoomLevel,t.maxZoomLevel)}),this),this.minAndMaxZoomLevelsWereUpdated(),this.currentMinZoomLevel=this.minZoomLevel,this.currentMaxZoomLevel=this.maxZoomLevel},minAndMaxZoomLevelsWereUpdated:function(){},_updateMinAndMaxZoomLevels:function(t){if(t.width<=0||t.height<=0)return!1;this._configuration&&this.updateMinAndMaxZoomLevelsWhenConfigurationChanges(),this.minZoomLevel=Math.max(this.minZoomLevel,this.minZoomLevelForViewportSize(t,o.tileSize)),this.snapsToIntegralZoomLevels&&(this.minZoomLevel=Math.ceil(this.minZoomLevel)),this.currentMinZoomLevel=Math.max(this.currentMinZoomLevel,this.minZoomLevel),this.adjustForSize(this.size)},_cameraChangesMayHaveStarted:function(t){if(!this.cameraChangesHaveStarted&&!this._panning&&!this._zooming&&!this._rotating&&!this.cameraAnimation){this.cameraChangesHaveStarted=!0;var e=this.node.delegate;e&&"function"===typeof e.mapCameraChangesWillStart&&e.mapCameraChangesWillStart(this.node,t)}},_cameraWillChange:function(t){this._cameraChangesMayHaveStarted(t),this._cameraWillChangeAnimated=!!t;var e=this.node.delegate;e&&"function"===typeof e.mapCameraWillChange&&e.mapCameraWillChange(this.node,!!t)},_cameraDidChange:function(){var t=this.node.delegate;t&&"function"===typeof t.mapCameraDidChange&&t.mapCameraDidChange(this.node,!!this._cameraWillChangeAnimated),delete this._cameraWillChangeAnimated,this._cameraChangesMayHaveEnded()},_cameraChangesMayHaveEnded:function(t){if(this.cameraChangesHaveStarted&&!this._panning&&!this._zooming&&!this._rotating&&!this.cameraAnimation){delete this.cameraChangesHaveStarted;var e=this.node.delegate;return e&&"function"===typeof e.mapCameraChangesDidEnd&&e.mapCameraChangesDidEnd(this.node),!0}},isMapPointWithinBounds:function(t){if(!this._cameraBoundaryRect)return!0;var e=this._constrainCenterWithinBounds(t);return t.x===e.x&&t.y===e.y},_constrainCenterWithinBounds:function(t){if(0===this.camera.viewportSize.width||0===this.camera.viewportSize.height)return t;var e=this.camera.center,i=this.transformCenter,n=e.x-i.x,s=e.y-i.y,r=a.mod(this._cameraBoundaryRect.origin.x+n,1),l=r+this._cameraBoundaryRect.size.width,h=a.mod(t.x,1);if(h<r&&(h+=1),h>l){var c=h-r;c>.5&&(c=1-c);var d=h-l;d>.5&&(d=1-d),h=c<d?r:l}var u=a.clamp(t.y,this._cameraBoundaryRect.minY()+s,this._cameraBoundaryRect.maxY()+s);return h!==t.x||u!==t.y?new o.MapPoint(h,u):t},_updateMinAndMaxZoomLevelsAtY:function(t){var e=this.minZoomLevel,i=this.maxZoomLevel;if(this._cameraZoomRange){var n=o.convertYToLatitude(t);e=a.clamp(this._zoomLevelForCameraDistanceAtLatitude(this._cameraZoomRange.maxCameraDistance,n),e,i),i=a.clamp(this._zoomLevelForCameraDistanceAtLatitude(this._cameraZoomRange.minCameraDistance,n),e,i),this.snapsToIntegralZoomLevels&&(e=Math.ceil(e),i=Math.floor(i))}this.currentMinZoomLevel=e,this.currentMaxZoomLevel=i},_updateZoom:function(t){this._updateMinAndMaxZoomLevelsAtY(this.camera.center.y);var e=a.clamp(this.camera.zoom,this.currentMinZoomLevel,this.currentMaxZoomLevel);if(e!==this.camera.zoom)t&&(this._nextCameraZoomRange=this._cameraZoomRange,delete this._cameraZoomRange),this.setZoomLevelAnimated(e,t);else{var i=this.node.delegate;i&&"function"===typeof i.mapMinAndMaxZoomLevelsDidChange&&i.mapMinAndMaxZoomLevelsDidChange(this.node)}},_zoomLevelForCameraDistanceAtLatitude:function(t,e){var i=_*t*2*o.mapUnitsPerMeterAtLatitude(e);return a.log2(this.camera.viewportSize.width/i/o.tileSize)}},t.exports=y},2032:function(t,e,i){var n=i(1969),o=i(1975),a=i(1948),s=i(1976),r=i(1978);function l(t,e,i,a){this.center=t||new n.MapPoint(.5,.5),this.zoom=e||3,this.viewportSize=i||new o,this.rotation=a||0}l.prototype={constructor:l,get zoom(){return this._zoom},set zoom(t){this._zoom!==t&&(this._zoom=t||3,this._pointsPerAxis=n.pointsPerAxis(this._zoom))},get worldSize(){return this._pointsPerAxis},get rotation(){return this._rotation},set rotation(t){var e=a.mod(t,360);this._rotation=e},minX:function(){var t=this.viewportSize.width/this._pointsPerAxis;return this.center.x-t/2},minY:function(){var t=this.viewportSize.height/this._pointsPerAxis;return this.center.y-t/2},maxX:function(){var t=this.viewportSize.width/this._pointsPerAxis;return this.center.x+t/2},maxY:function(){var t=this.viewportSize.height/this._pointsPerAxis;return this.center.y+t/2},equals:function(t){return this.zoom===t.zoom&&this.center.equals(t.center)&&this.viewportSize.equals(t.viewportSize)&&this.rotation===t.rotation},copy:function(){return new l(this.center,this.zoom,this.viewportSize,this.rotation)},toString:function(){return"Camera("+["center: ["+this.center.x+", "+this.center.y+"]","zoom: "+this.zoom,"viewportSize: "+this.viewportSize.toString(),"rotation: "+this.rotation].join(", ")+")"},toMapRect:function(){var t=this.viewportSize.width/this._pointsPerAxis,e=this.viewportSize.height/this._pointsPerAxis,i=Object.create(n.MapPoint.prototype);i.x=this.center.x-t/2,i.y=this.center.y-e/2;var o=Object.create(n.MapSize.prototype);o.width=t,o.height=e;var a=Object.create(n.MapRect.prototype);return a.origin=i,a.size=o,a},toRenderingMapRect:function(){var t=[new s(this.minX(),this.minY()),new s(this.maxX(),this.minY()),new s(this.maxX(),this.maxY()),new s(this.minX(),this.maxY())];if(0!==this.rotation){var e=(new r).rotate(this.rotation);t=t.map((function(t){return e.transformPoint(t)}))}for(var i=t[0].x,o=t[0].y,a=t[0].x,l=t[0].y,h=1;h<t.length;++h){var c=t[h];c.x<i&&(i=c.x),c.x>a&&(a=c.x),c.y<o&&(o=c.y),c.y>l&&(l=c.y)}var d=a-i,u=l-o;return new n.MapRect(this.center.x-d/2,this.center.y-u/2,d,u)},translate:function(t){0!==this.rotation&&(t=(new r).rotate(-this.rotation).transformPoint(t));var e=Math.round(t.x)/this._pointsPerAxis,i=Math.round(t.y)/this._pointsPerAxis,o=Object.create(n.MapPoint.prototype);o.x=a.mod(this.center.x-e,1),o.y=a.mod(this.center.y-i,1);var s=Object.create(l.prototype);return s.center=o,s._zoom=this._zoom,s._pointsPerAxis=this._pointsPerAxis,s.viewportSize=this.viewportSize,s._rotation=this._rotation,s},transformMapPoint:function(t){var e=this.viewportSize.width,i=this.viewportSize.height,n=this.toScreenSpace(t);return(new r).translate(e/2,i/2).rotate(this.rotation).translate(e/-2,i/-2).transformPoint(n)},transformGestureCenter:function(t){if(0===this.rotation)return t;var e=this.viewportSize.width,i=this.viewportSize.height;return(new r).translate(e/2,i/2).rotate(-this.rotation).translate(-e/2,-i/2).transformPoint(t)},toScreenSpace:function(t){var e=this._pointsPerAxis;return(new r).translate(-this.minX()*e,-this.minY()*e).scale(e).transformPoint(t)},rotateAroundCenter:function(t,e){var i=(new r).translate(t.x,t.y).rotate(-e).translate(-t.x,-t.y).transformPoint(new s(this.center.x,this.center.y));this.center=new n.MapPoint(i.x,i.y),this.rotation+=e},withNewMapRect:function(t,e,i){i=i||this.viewportSize;var o=n.zoomLevelForMapRectInViewport(t,i,n.tileSize);return new l(new n.MapPoint(t.midX(),t.midY()),e?Math.floor(o):o,i,this.rotation)}},t.exports=l},2033:function(t,e,i){var n=i(2032),o=i(1969),a=i(1981);function s(t,e,i,n){this.map=t,this._startCamera=e,this._endCamera=i,this._duration=250,this._rotationCenter=n,t.snapsToIntegralZoomLevels&&(i.zoom=Math.round(i.zoom)),this._updateAnimationRects(),this._startTime=Date.now(),this._schedule()}s.prototype={constructor:s,cancel:function(){this._canceled=!0},get zooming(){return this._startCamera.zoom!==this._endCamera.zoom},set additiveZoom(t){this._zoomIsAdditive=!0,this._endCamera.zoom=t,this._updateAnimationRects()},get zoomIsAdditive(){return this._zoomIsAdditive},get rotating(){return this._startCamera.rotation!==this._endCamera.rotation},adjustRotation:function(t,e){this._startCamera.rotateAroundCenter(t,e),this._endCamera.rotateAroundCenter(t,e),this._updateAnimationRects()},unconstrained:!1,updateViewportSize:function(t){this._startCamera=new n(this._startCamera.center,this._startCamera.zoom,t,this._startCamera.rotation),this._endCamera=new n(this._endCamera.center,this._endCamera.zoom,t,this._endCamera.rotation),this._updateAnimationRects()},performScheduledUpdate:function(){this._canceled||this._animationDidProgress(Math.min((Date.now()-this._startTime)/this._duration,1))},_zoomIsAdditive:!1,_updateAnimationRects:function(){if(this._rotationDelta=this._endCamera.rotation-this._startCamera.rotation,Math.abs(this._rotationDelta)>180&&(this._rotationDelta=this._endCamera.rotation+360-this._startCamera.rotation),!this._rotationCenter){this._startRect=this._startCamera.toMapRect(),this._animatedEndRect=this._endCamera.toMapRect();var t=this._startCamera.center.x-this._endCamera.center.x;Math.abs(t)>.5&&(t<0?this._startRect.origin.x+=1:this._animatedEndRect.origin.x+=1)}},_schedule:function(){a.scheduleOnNextFrame(this)},_animationDidProgress:function(t){if(1===t)return this.map.snapsToIntegralZoomLevels&&(this._endCamera.zoom=Math.round(this._endCamera.zoom)),this.map.cameraAnimationDidProgress(this._endCamera),void this.map.cameraAnimationDidEnd();this._rotationCenter?this._animateAroundCenter(t):this._animateRects(t),this._schedule()},_animateAroundCenter:function(t){var e=this._startCamera.copy();e.rotateAroundCenter(this._rotationCenter,t*this._rotationDelta),this.map.cameraAnimationDidProgress(e)},_animateRects:function(t){var e=this._startRect,i=this._animatedEndRect,n=e.origin.x,a=e.origin.y,s=e.size.width,r=e.size.height,l=i.origin.x-e.origin.x,h=i.origin.y-e.origin.y,c=i.size.width-e.size.width,d=i.size.height-e.size.height,u=this._endCamera.rotation-this._startCamera.rotation;Math.abs(u)>180&&(u=this._endCamera.rotation+360-this._startCamera.rotation);var p=new o.MapRect(n+l*t,a+h*t,s+c*t,r+d*t),m=this._startCamera.withNewMapRect(p);this.map.cameraAnimationDidProgress(m,this.unconstrained),this.map.rotation=this._startCamera.rotation+this._rotationDelta*t}},t.exports=s},2034:function(t,e,i){var n=i(1989);function o(t,e){this._map=t,n.SupportsPointerEvents?(this._startEventType="pointerdown",this._touchCount=0):n.SupportsTouches?this._startEventType="touchstart":this._startEventType="mousedown",this._map.element.addEventListener(this._startEventType,this),n.SupportsPointerEvents&&(window.addEventListener("pointerup",this),window.addEventListener("pointercancel",this))}o.prototype={constructor:o,handleEvent:function(t){"pointerup"!==t.type&&"pointercancel"!==t.type?("pointerdown"===t.type&&this._touchCount++,("mousedown"===t.type||"touchstart"===t.type&&t.touches.length===t.changedTouches.length||"pointerdown"===t.type&&1===this._touchCount)&&this._map.interactionDidStart()):this._touchCount--},destroy:function(){this._map.element.removeEventListener(this._startEventType,this),window.removeEventListener("pointerup",this),window.removeEventListener("pointercancel",this)}},t.exports=o},2035:function(t,e,i){var n=i(1969),o=i(1989),a=i(1948),s=i(1981),r=i(1976),l=i(2036),h=i(2032),c=i(1988),d=i(1987),u=i(2037),p=Math.pow(1e-4,2.5);function m(t){l.call(this,t),this._pinchRecognizer=this.addRecognizer(new o.Pinch),this._pinchRecognizer.scaleThreshold=.1,this._doubleTapWithOneFingerRecognizer=this.addRecognizer(new o.Tap),this._doubleTapWithOneFingerRecognizer.numberOfTouchesRequired=1,this._doubleTapWithOneFingerRecognizer.numberOfTapsRequired=2,this._singleTapWithTwoFingersRecognizer=this.addRecognizer(new o.Tap),this._singleTapWithTwoFingersRecognizer.numberOfTouchesRequired=2,this._singleTapWithTwoFingersRecognizer.numberOfTapsRequired=1,this.map.node.element.addEventListener("wheel",this)}function g(t){return t.state===o.States.Began||t.state===o.States.Changed}m.prototype=a.inheritPrototype(l,m,{decelerating:!1,stopDecelerating:function(){this.decelerating&&this._decelerationEnded()},destroy:function(){l.prototype.destroy.call(this),this._integralZoomController&&(this._integralZoomController.destroy(),delete this._integralZoomController),clearTimeout(this._wheelEndTimeoutId),delete this._pinchRecognizer,delete this._doubleTapWithOneFingerRecognizer,delete this._singleTapWithTwoFingersRecognizer,this.map.node.element.removeEventListener("wheel",this),this.stopDecelerating()},get active(){return g(this._pinchRecognizer)||g(this._doubleTapWithOneFingerRecognizer)||g(this._singleTapWithTwoFingersRecognizer)},handleEvent:function(t){if("wheel"!==t.type){var e=t.target;switch(e){case this._pinchRecognizer:this._handlePinchChange(e);break;case this._doubleTapWithOneFingerRecognizer:this._handleDoubleTapWithOneFingerChange(e);break;case this._singleTapWithTwoFingersRecognizer:this._handleSingleTapWithTwoFingersChange(e)}}else this._handleWheelEvent(t)},performScheduledUpdate:function(){if(this.decelerating){var t=this.map,e=Date.now()-this._startTime;if(e>=this._decelerationDuration)return t.scaleCameraAroundMapPoint(this._adjustedScaleAtDecelerationEnd/this._scale,this._lastScaleCenter),void this._decelerationEnded();var i=this._scaleAtTime(e),n=(i-this._initialScale)/(this._scaleAtDecelerationEnd-this._initialScale);i+=this._scaleAdjustment*n,t.scaleCameraAroundMapPoint(i/this._scale,this._lastScaleCenter);var o=t.camera.zoom;o===t.currentMinZoomLevel||o===this.currentMaxZoomLevel?this.stopDecelerating():(this._scale=i,this._schedule())}},_centerWithRecognizer:function(t){return this._mapPointFromCentroid(t.locationInElement())},_mapPointFromCentroid:function(t){var e=this.map,i=e.node.convertPointFromPage(t);i=e.camera.transformGestureCenter(i);var o=e.visibleMapRect,a=e.camera.viewportSize;return new n.MapPoint(o.minX()+i.x/a.width*o.size.width,o.minY()+i.y/a.height*o.size.height)},_handlePinchChange:function(t){var e=this.map,i=e.camera,n=i.zoom;if(t.state===o.States.Began)this._singleTapWithTwoFingersRecognizer.enabled=!1,e.cameraWillStartZooming(c.ZoomTypes.Pinch);else if(t.state===o.States.Ended||t.state===o.States.Changed){var s=t.scale;this._lastScaleCenter=this.centerForGesture(t),(s>1&&n!==e.currentMaxZoomLevel||s<1&&n!==e.currentMinZoomLevel)&&(e.scaleCameraAroundMapPoint(s,this._lastScaleCenter),t.scale=1)}if((t.state===o.States.Ended||t.state===o.States.Failed)&&(this._singleTapWithTwoFingersRecognizer.enabled=!0,this._startDeceleratingWithVelocity(t.velocity),!this.decelerating)){var r=e.snapsToIntegralZoomLevels?Math.round(n):n,l=a.clamp(r,e.currentMinZoomLevel,e.currentMaxZoomLevel);n===l?e.cameraDidStopZooming():this._lastScaleCenter?e.scaleCameraAroundMapPoint(Math.pow(2,l-n),this._lastScaleCenter,!0):e.setCameraAnimated(new h(i.center,l,i.viewportSize,i.rotation),!0)}},_handleDoubleTapWithOneFingerChange:function(t){t.state===o.States.Recognized&&this._zoomWithTapRecognizer(t,t.modifierKeys.alt)},_handleSingleTapWithTwoFingersChange:function(t){t.state===o.States.Recognized&&this._zoomWithTapRecognizer(t,!0)},_handleWheelEvent:function(t){if(t.ctrlKey||t.shiftKey||this.map.allowWheelToZoom){t.preventDefault();var e=t.shiftKey&&!!t.deltaX&&!t.deltaY,i=e?t.deltaX:t.deltaY;switch(t.deltaMode){case t.DOM_DELTA_LINE:i*=100/3*window.devicePixelRatio;break;case t.DOM_DELTA_PAGE:i*=100*window.devicePixelRatio}(t.ctrlKey||this.map.allowWheelToZoom&&!t.shiftKey||e)&&(i*=-1),t.ctrlKey&&t.deltaMode===t.DOM_DELTA_PIXEL&&(i*=10);var n=1+(i>0?Math.sqrt(i):-Math.sqrt(-i))*d.WheelZoomFactor,o=this.map;if(!(n>1&&o.camera.zoom===o.currentMaxZoomLevel||n<1&&o.camera.zoom===o.currentMinZoomLevel)){var a=new r(t.pageX,t.pageY);this._lastScaleCenter=o.staysCenteredDuringZoom?o.transformCenter:this._mapPointFromCentroid(a),o.snapsToIntegralZoomLevels?this._wheelZoomToScaleAndIntegralZoomLevel(n):this._wheelZoomToScale(n)}}},_wheelZoomToScale:function(t){var e=this.map;this._wheelZooming||(e.cameraWillStartZooming(c.ZoomTypes.Scroll),this._wheelZooming=!0),e.scaleCameraAroundMapPoint(t,this._lastScaleCenter),this._wheelEndTimeoutId&&(clearTimeout(this._wheelEndTimeoutId),this._wheelEndTimeoutId=null),this._wheelEndTimeoutId=setTimeout(function(){this._wheelEndTimeoutId=null,this._wheelZooming=!1,e.cameraDidStopZooming()}.bind(this),d.WheelEventTimeout)},_wheelZoomToScaleAndIntegralZoomLevel:function(t){this._integralZoomController||(this._integralZoomController=new u(this.map)),this._integralZoomController.zoomToScale(t,this._lastScaleCenter)},_zoomWithTapRecognizer:function(t,e){var i=this.map,n=i.camera.zoom,o=e?-1:1,s=(e?Math.floor(n+.5):Math.ceil(n-.5))+o,r=n-a.clamp(s,i.currentMinZoomLevel,i.currentMaxZoomLevel);Math.abs(r)<.5||!i.cameraWillStartZooming(c.ZoomTypes.DoubleTap,!0,!0)||i.setCameraAnimated(i.camera.withNewMapRect(i.visibleMapRect.scale(Math.pow(2,r),this.centerForGesture(t))),!0)},_startDeceleratingWithVelocity:function(t){Math.abs(t)<1||(this.decelerating=!0,this._startTime=Date.now(),this._initialScale=this._scale=1,this._initialVelocity=t/1e3,this._decelerationFactor=.98875,this._decelerationDuration=Math.log(p/Math.pow(this._initialVelocity,2))/(2*Math.log(this._decelerationFactor)),this._scaleAtDecelerationEnd=this._scaleAtTime(this._decelerationDuration),this._adjustedScaleAtDecelerationEnd=this._adjustScaleAtDecelerationEnd(this._scaleAtDecelerationEnd/this._scale),this._scaleAdjustment=this._adjustedScaleAtDecelerationEnd-this._scaleAtDecelerationEnd,this._schedule())},_adjustScaleAtDecelerationEnd:function(t){var e=this.map,i=e.camera.zoom,n=i+a.log2(t);if(e.snapsToIntegralZoomLevels){var o=Math.round(n);n>i&&o<=i?o=Math.ceil(n):n<i&&o>=i&&(o=Math.floor(n)),n=o}var s=a.clamp(n,e.currentMinZoomLevel,e.currentMaxZoomLevel);return Math.pow(2,s-i)},_schedule:function(){s.scheduleOnNextFrame(this)},_scaleAtTime:function(t){return Math.max(this._initialScale+this._decelerationFactor*this._initialVelocity*(Math.pow(this._decelerationFactor,t)-1)/(this._decelerationFactor-1),0)},_decelerationEnded:function(){this.decelerating=!1;var t=this.map;if(t.snapsToIntegralZoomLevels){var e=t.camera,i=t.snapsToIntegralZoomLevels?Math.round(e.zoom):e.zoom;t.setCameraAnimated(new h(e.center,i,e.viewportSize,e.rotation))}t.cameraDidStopZooming()}}),t.exports=m},2036:function(t,e,i){var n=i(1986);function o(t){this._map=t,this._recognizers=[]}o.prototype={constructor:o,get map(){return this._map},canTrustGestureCenter:function(t){return 1===t.numberOfTouchesRequired||!(n.supportsGestureEvents&&!n.supportsTouches&&n.insideIframe)},addRecognizer:function(t){return this._recognizers.push(t),t.target=this.map.node.element,t.addEventListener("statechange",this),t},interrupt:function(){this._recognizers.forEach((function(t){t.enabled=!1,t.enabled=!0}))},centerForGesture:function(t){var e=this.map;return e.staysCenteredDuringZoom||!this.canTrustGestureCenter(t)?e.transformCenter:this._centerWithRecognizer(t)},destroy:function(){for(;this._recognizers.length;){var t=this._recognizers.pop();t.enabled=!1,t.target=null,t.removeEventListener("statechange",this)}}},t.exports=o},2037:function(t,e,i){var n=i(1988),o=i(1981),a=i(1948),s=i(1987),r=a.log2(1.03)/(1e3/60),l=a.log2(.97)/(1e3/60),h=a.log2(1.06)/(1e3/60),c=a.log2(.94)/(1e3/60),d=a.log2(1+s.WheelZoomFactor),u=a.log2(1-s.WheelZoomFactor);function p(t){this.map=t,this._previousZoomLevelDelta=[]}p.prototype={constructor:p,_animating:!1,zoomToScale:function(t,e){var i=Date.now();this._lastUpdateTime=i;var s=a.log2(t);this.zoomsIn=s>0,this._lastScaleCenter=e,this._previousZoomLevelDelta.push({delta:s,timestamp:i}),this._animating?this._accumulatedDesiredZoomLevelDelta+=s:(this._cleanupPreviousZoomLevelDelta(),u<=s&&s<=d&&this._previousZoomLevelDelta.length<=1||(this._animating=!0,this._accumulatedZoomLevelDelta=0,this._accumulatedDesiredZoomLevelDelta=s,this._timeAtLastFrame=i,this._animationEndingTimeoutId?(clearTimeout(this._animationEndingTimeoutId),this._animationEndingTimeoutId=void 0):this.map.cameraWillStartZooming(n.ZoomTypes.Scroll),o.scheduleOnNextFrame(this)))},destroy:function(){this.map=null,this._animationEndingTimeoutId&&clearTimeout(this._animationEndingTimeoutId)},performScheduledUpdate:function(){if(this.map){var t=Date.now(),e=this.zoomsIn?Math.ceil(this._accumulatedDesiredZoomLevelDelta):Math.floor(this._accumulatedDesiredZoomLevelDelta),i=t-this._timeAtLastFrame,n=this._getEstimatedSpeedPerMS()*i;if(this._accumulatedZoomLevelDelta+=n,this._timeAtLastFrame=t,!(this.zoomsIn&&this._accumulatedZoomLevelDelta<e||!this.zoomsIn&&this._accumulatedZoomLevelDelta>e)){var a=this.map.zoomLevel,r=Math.round(this.map.zoomLevel);return this.map.scaleCameraAroundMapPoint(Math.pow(2,r-a),this._lastScaleCenter),this._animating=!1,this._previousEstimatedSpeedPerMS=void 0,void(this._animationEndingTimeoutId=setTimeout(function(){this._animationEndingTimeoutId=void 0,this.map.cameraDidStopZooming()}.bind(this),s.WheelEventTimeout))}this.map.scaleCameraAroundMapPoint(Math.pow(2,n),this._lastScaleCenter),o.scheduleOnNextFrame(this)}},_cleanupPreviousZoomLevelDelta:function(){for(var t=Date.now()-100,e=this.zoomsIn?1:-1,i=0;i<this._previousZoomLevelDelta.length;i++)(this._previousZoomLevelDelta[i].timestamp<t||this._previousZoomLevelDelta[i].delta*e<0)&&this._previousZoomLevelDelta.splice(i,1)},_getEstimatedSpeedPerMS:function(){if(this._cleanupPreviousZoomLevelDelta(),this._previousZoomLevelDelta.length<=1)return this._previousEstimatedSpeedPerMS?this._previousEstimatedSpeedPerMS:this.zoomsIn?h:c;var t=this._previousZoomLevelDelta.reduce((function(t,e){return t+e.delta}),0)/100;return l<t&&t<r&&(t=this.zoomsIn?r:l),this._previousEstimatedSpeedPerMS=t,t}},t.exports=p},2038:function(t,e,i){var n=i(1989),o=i(1976),a=i(1981),s=i(2036),r=i(1948);function l(t){s.call(this,t),this.addRecognizer(new n.Pan).maximumNumberOfTouches=2}l.prototype=r.inheritPrototype(s,l,{decelerating:!1,stopDecelerating:function(){this.decelerating&&this._decelerationEnded()},destroy:function(){s.prototype.destroy.call(this),this.stopDecelerating()},handleEvent:function(t){var e=t.target,i=this.map;i.staysCenteredDuringZoom&&i.cameraIsZooming||(e.state===n.States.Began?i.cameraWillStartPanning():e.state!==n.States.Ended&&e.state!==n.States.Changed||(this._panMapCameraBy(e.translation),e.translation=new o),e.state===n.States.Ended&&(this._startDeceleratingWithVelocity(e.velocity),this.decelerating||i.cameraDidStopPanning()))},performScheduledUpdate:function(){if(this.decelerating){var t=Date.now(),e=t-this._timeAtPreviousFrame,i=Math.exp(Math.log(.995)*e),n=(1-i)/(1-.995)*.995;this._panMapCameraBy(new o(this._velocity.x/1e3*n,this._velocity.y/1e3*n)),this._velocity.x*=i,this._velocity.y*=i,Math.abs(this._velocity.x)<=10&&Math.abs(this._velocity.y)<=10?this._decelerationEnded():(this._timeAtPreviousFrame=t,this._schedule())}},_panMapCameraBy:function(t){var e=this.map;e.setCameraAnimated(e.camera.translate(t))},_startDeceleratingWithVelocity:function(t){this._velocity=t,this.map.cameraWillStopPanning(),Math.pow(t.x,2)+Math.pow(t.y,2)<62500||(this.decelerating=!0,this._timeAtPreviousFrame=Date.now(),this._schedule())},_schedule:function(){a.scheduleOnNextFrame(this)},_decelerationEnded:function(){this.decelerating=!1,this.map.cameraDidStopPanning()}}),t.exports=l},2039:function(t,e,i){var n=i(1969),o=i(1948),a=i(1986),s=i(2040),r=i(2043),l=i(1976);function h(t,e){var i=a.getIntegralZoom(t.zoom),s=Math.pow(2,i),h=Math.pow(2,t.zoom)*n.tileSize,c=t.viewportSize.width/h/2,d=t.viewportSize.height/h/2,u=new n.MapPoint(t.center.x-c,t.center.y-d),p=new n.MapPoint(t.center.x+c,t.center.y+d),m=s-1,g=Math.floor(u.x*s),f=Math.floor(p.x*s),_=o.clamp(Math.floor(u.y*s),0,m),y=o.clamp(Math.floor(p.y*s),0,m);this.range=new r(new l(g,_,i),new l(f,y,i)),this.settings=e,this.resolution=a.devicePixelRatio,this.zoom=i,this.mapRect=new n.MapRect(g/s,_/s,(f-g)/s,(y-_)/s),this.mapRect.size.width<0&&this.mapRect.size.width++}h.prototype={constructor:h,equals:function(t){return this.sameSettings(t)&&this.resolution===t.resolution&&this.range.equals(t.range)},sameSettings:function(t){var e=this.settings,i=t.settings;return e.configuration===i.configuration&&e.tint===i.tint&&e.emphasis===i.emphasis&&e.showsPOI===i.showsPOI&&e.showsLabels===i.showsLabels&&e.language===i.language&&e.showsDefaultTiles===i.showsDefaultTiles&&e.showsTileInfo===i.showsTileInfo&&this.sameTileOverlays(t)},sameTileOverlays:function(t){return this.settings.tileOverlays.length===t.settings.tileOverlays.length&&this.settings.tileOverlays.every((function(e,i){return e===t.settings.tileOverlays[i]&!e._impl.stale}),this)},sharesTileSourcesWithTileData:function(t){if(this.settings.tint!==t.settings.tint||this.settings.emphasis!==t.settings.emphasis)return!1;var e=this.settings.configuration.tileSources,i=t.settings.configuration.tileSources;return!("AutoNavi"!==this.settings.configuration.provider||"AutoNavi"!==t.settings.configuration.provider||1!==e.length||1!==i.length||"satellite"!==e[0].name&&"hybrid"!==e[0].name||"satellite"!==i[0].name&&"hybrid"!==i[0].name)||i.some((function(t){return-1!==e.indexOf(t)}))},load:function(){this._tiles||(this._tiles=s.tilesForTileData(this))},cancel:function(){if(!this._canceled&&(this._canceled=!0,this._tiles))for(var t=0,e=this._tiles,i=e.length;t<i;++t)e[t].unschedule()},releaseTiles:function(){if(this._tiles)for(var t=0,e=this._tiles,i=e.length;t<i;++t)s.releaseTile(e[t],this)},get tiles(){return this.load(),this._tiles}},t.exports=h},2040:function(t,e,i){var n=i(2012),o=i(1976),a=i(1948),s=i(2041),r={};function l(t,e,i,n){return n.settings.configuration.provider+n.settings.configuration.name+t+"-"+e+"-"+i+n.settings.tint+n.settings.emphasis+n.settings.language+n.settings.showsPOI+n.settings.showsLabels+n.settings.showsDefaultTiles+n.settings.showsTileInfo+n.resolution+n.settings.tileOverlays.map((function(n){return n._impl.keyForTile(t,e,i)})).join("-")}function h(t){var e=t.target;e.removeEventListener(s.Events.LoadSuccess,h),e.removeEventListener(s.Events.LoadFail,c)}function c(t){var e=t.target;delete r[e.key],e.removeEventListener(s.Events.LoadSuccess,h),e.removeEventListener(s.Events.LoadFail,c)}t.exports={tilesForTileData:function(t){for(var e=t.range,i=e.min.z,d=Math.pow(2,i),u=e.min,p=e.denormalize().max,m=new o((u.x+p.x)/2,(u.y+p.y)/2),g=[],f=Math.min(p.x,u.x+d-1),_=u.x;_<=f;++_)for(var y=u.y;y<=p.y;++y)g.push(new o(_,y));return g.sort((function(t,e){var i=t.distanceToPoint(m)-e.distanceToPoint(m);return 0===i?t.x-e.x===0?t.y-e.y:t.x-e.x:i})),g.map((function(e){return function(t,e,i,n,o){var a=l(t,e,i,n),d=r[a];return d?d.schedule():((d=new s(a,t,e,i,n.settings,n.resolution,o)).addEventListener(s.Events.LoadSuccess,h),d.addEventListener(s.Events.LoadFail,c),r[a]=d,d._refCount=0,d._loadTileImages()),d._refCount++,d}(a.mod(e.x,d),e.y,i,t,n.Priority.High)}))},releaseTile:function(t,e){if(t._refCount--,0===t._refCount){t.unschedule();var i=l(t.x,t.y,t.z,e);delete r[i]}}}},2041:function(t,e,i){var n=i(2012),o=i(1948),a=i(1952),s=i(2042);function r(t,e,i,n,o,a,s){this.key=t,this.x=e,this.y=i,this.z=n,this.settings=o,this.resolution=a,this.priority=s,this.tileImages=[]}r.Events={LoadSuccess:"tile-load-success",LoadFail:"tile-load-fail"},r.prototype=o.inheritPrototype(a.EventTarget,r,{loading:!1,loaded:!1,get tileSources(){return(this.settings.showsDefaultTiles?this.settings.configuration.tileSources:[]).concat(this.settings.tileOverlays.map((function(t){return t._impl})).filter((function(t){return!!t.urlForImageLoader(this.x,this.y,this.z,this.resolution)}),this)).filter((function(t){return(this.z>=t.minZoomLevel||"number"!==typeof t.minZoomLevel)&&(this.z<=t.maxZoomLevel||"number"!==typeof t.maxZoomLevel)}),this)},schedule:function(){this.loaded||(this.tileImages.forEach((function(t){t.schedule()})),this.loading=!0)},unschedule:function(){this.tileImages.forEach((function(t){t.unschedule()})),this.loading=!1},_loadTileImages:function(){if(!this.loading){if(this.loaded){if(!this._containsCanceledTileImages())return;this.tileImages=[],this.loaded=!1}this.loading=!0;var t=this.tileSources;0!==t.length?(this._pendingTileImageLoads=t.length,t.forEach(this._loadTileImage,this)):this._allTileImagesDoneLoading()}},_loadTileImage:function(t){var e=this.settings,i=new s(this.x,this.y,this.z,t,e.tint,e.emphasis,e.language,e.showsPOI,e.showsLabels,this.resolution,this.priority);i.schedule(),this.tileImages.push(i),i.whenDoneLoading(this._tileImageDoneLoading.bind(this,t))},_requestTileImageLoadStatus:function(t,e){var i=o.xhr(e,t.image.src);i.open("GET",t.image.src,!0),i.send()},_tileImageDoneLoading:function(t,e){if(e._loader.state===n.State.Failed)if("function"===typeof t.dispatchErrorForURL)t.dispatchErrorForURL(e._loader.url);else{var i=new a.Event(r.Events.LoadFail);i.tileImage=e,this.dispatchEvent(i)}this._pendingTileImageLoads--,0===this._pendingTileImageLoads&&this._allTileImagesDoneLoading()},_allTileImagesDoneLoading:function(){delete this._pendingTileImageLoads,this.loading=!1,this.loaded=!0,this._containsCanceledTileImages()||this.dispatchEvent(new a.Event(r.Events.LoadSuccess))},_containsCanceledTileImages:function(){return this.tileImages.some((function(t){return t.loaderState===n.State.Canceled}))}}),t.exports=r},2042:function(t,e,i){var n=i(1986),o=i(2012),a=i(1948),s={},r=[];function l(t,e,i,n,o,a,s,r,l,c,d){this.x=t,this.y=e,this.z=i,this.tileSource=n,this.tint=o,this.emphasis=a,this.language=s,this.poi=r?1:0,this.labels=l?1:0,this.resolution=c,this._priority=d,this._loader=h(d,this),this._setLoaderCrossOriginMode()}function h(t,e){var i;return r.length>0?(i=r.shift()).reuse(t,e):i=new o.ImageLoader(t,e),i}l.prototype={constructor:l,get preferredOpacity(){return"number"===typeof this.tileSource.opacity?this.tileSource.opacity:1},get loaderState(){return this._loader?this._loader.state:o.State.Unscheduled},schedule:function(){this._loader||(this._loader=h(this._priority,this),this._setLoaderCrossOriginMode()),this._loader.state>o.State.Unscheduled||this._loader.schedule()},unschedule:function(){this._loader&&this._loader.unschedule()&&(r.push(this._loader),this._loader=null)},whenDoneLoading:function(t){this._doneLoadingCallback=t},get urlForImageLoader(){var t=this.tileSource;if("function"===typeof t.urlForImageLoader)return t.urlForImageLoader(this.x,this.y,this.z,this.resolution);var e=t.domains,i=t.proxyPrefixes,n=t.protocol,o=t.supportedResolutions[0],r=t.supportedResolutions[t.supportedResolutions.length-1],l=a.clamp(this.resolution,o,r),h=1;if("satellite"===t.name){var c=t.supportedSizes.length-1,d=t.supportedSizes[0],u=t.supportedSizes[c];h=a.clamp(this.resolution,d,u)}var p=a.fillTemplate(t.path,{x:this.x,y:this.y,z:this.z,resolution:l,tileSizeIndex:h,lang:this.language,poi:this.poi});"satellite"!==t.name&&(0===this.labels?p+="&labels=0&tint="+this.tint+"&emphasis="+this.emphasis:p+="&emphasis="+this.emphasis+"&tint="+this.tint);var m=s[p];if(m)return m;var g=Math.floor(76731.36742*(this.x+this.y))%e.length;return m=n+"//"+e[g]+p,i&&(m=i[g%i.length]+m),s[p]=m,m},loaderDidSucceed:function(t){this._loaderDidComplete()},loaderDidFail:function(t){this._loaderDidComplete()},_setLoaderCrossOriginMode:function(){this.tileSource.crossOrigin&&(this._loader.crossOrigin=n.getCorsAttribute(this.tileSource.withCredentials))},_loaderDidComplete:function(){this.image=this._loader.image,"function"===typeof this._doneLoadingCallback&&(this._doneLoadingCallback(this),delete this._doneLoadingCallback)}},t.exports=l},2043:function(t,e){function i(t,e){this.min=t,this.max=e}i.prototype={constructor:i,denormalize:function(){var t=this.min.copy(),e=this.max.copy();return e.x<t.x&&(e.x+=Math.pow(2,t.z)),new i(t,e)},toString:function(){return this.min.toString()+" -> "+this.max.toString()},equals:function(t){var e=this.denormalize(),i=t.denormalize();return i.min.x===e.min.x&&i.min.y===e.min.y&&i.max.x===e.max.x&&i.max.y===e.max.y&&i.min.z===e.min.z&&i.max.z===e.max.z}},t.exports=i},2044:function(t,e,i){var n=i(2045),o=i(1948),a=i(1961),s=i(1970);function r(t,e){s(this,r)&&Object.defineProperty(this,"_impl",{value:new n(this,t,e)})}r.prototype=o.inheritPrototype(a.EventTarget,r,{get urlTemplate(){return this._impl.urlTemplate},set urlTemplate(t){this._impl.urlTemplate=t},get minimumZ(){return this._impl.minimumZ},set minimumZ(t){this._impl.minimumZ=t},get maximumZ(){return this._impl.maximumZ},set maximumZ(t){this._impl.maximumZ=t},get opacity(){return this._impl.opacity},set opacity(t){this._impl.opacity=t},get data(){return this._impl.data},set data(t){this._impl.data=t},reload:function(){this._impl.reload()}}),t.exports=r},2045:function(t,e,i){var n=i(1948),o=i(1961),a=i(1959),s=["minimumZ","maximumZ","opacity","data"];function r(t,e,i){this._public=t,i=n.checkOptions(i),s.forEach((function(t){t in i&&(this[t]=i[t])}),this),Object.keys(i).forEach((function(t){s.indexOf(t)<0&&console.warn("[MapKit] Unknown option: "+t+". Use the data property to store custom data.")})),this.urlTemplate=e,"undefined"===typeof this.opacity&&(this.opacity=1),this.stale=!1}r.RELOAD_EVENT="tile-overlay-reload",r.OPACITY_EVENT="tile-overlay-opacity-changed",r.ERROR_EVENT="tile-error",r.prototype={constructor:r,_minimumZ:null,_maximumZ:null,get urlTemplate(){return this._urlTemplate},set urlTemplate(t){var e=typeof t;if("function"!==e&&"string"!==e)throw new TypeError("[MapKit] TileOverlay.urlTemplate expected a function or a string, but got `"+t+"` instead.");this._urlTemplate=t},keyForTile:function(t,e,i){return this._minimumZ+"-"+this._maximumZ+"-"+this.urlForImageLoader(t,e,i,1)},get minimumZ(){return this._minimumZ},get minZoomLevel(){return this._minimumZ},set minimumZ(t){var e="[MapKit] TileOverlay.minimumZ expected a number, but got `"+t+"` instead.";n.checkType(t,"number",e),this._minimumZ=Math.floor(t)},get maximumZ(){return this._maximumZ},get maxZoomLevel(){return this._maximumZ},set maximumZ(t){var e="[MapKit] TileOverlay.maximumZ expected a number, but got `"+t+"` instead.";n.checkType(t,"number",e),this._maximumZ=Math.ceil(t)},get opacity(){return this._opacity},set opacity(t){var e="[MapKit] TileOverlay.opacity expected a number, but got `"+t+"` instead.";n.checkType(t,"number",e),this._opacity=n.clamp(t,0,1);var i=new o.Event(r.OPACITY_EVENT);i.tileOverlay=this,i.opacity=this._opacity,this._public.dispatchEvent(i)},get data(){return Object.prototype.hasOwnProperty.call(this,"_data")||(this._data={}),this._data},set data(t){var e="[MapKit] TileOverlay.data expected an Object, but got `"+t+"` instead.";n.checkType(t,"object",e),this._data=t},reload:function(){this.stale=!0;var t=new o.Event(r.RELOAD_EVENT);t.tileOverlay=this,this._public.dispatchEvent(t)},reloadComplete:function(){this.stale=!1},urlForImageLoader:function(t,e,i,o){if(this._urlTemplate){if("function"===typeof this._urlTemplate)return a(this._urlTemplate,null,[t,e,i,o,this._data]);var s=this._urlTemplate.replace(/\{/g,"{{").replace(/\}/g,"}}"),r={};return this._data&&Object.keys(this._data).forEach((function(t){r[t]=this._data[t]}),this),r.x=t,r.y=e,r.z=i,r.scale=o,n.fillTemplate(s,r)}},withCredentials:!1,crossOrigin:!1,dispatchErrorForURL:function(t){var e=new o.Event(r.ERROR_EVENT);e.tileOverlay=this._public,e.tileUrl=t,this._public.dispatchEvent(e)}},t.exports=r},2046:function(t,e,i){var n=i(1969),o=i(1981),a=i(1972),s=i(2047),r=i(2039),l=i(1948),h=i(1986);function c(t){a.GroupNode.call(this),this._map=t}c.prototype=l.inheritPrototype(a.GroupNode,c,{fullyRendered:!1,scheduleRefresh:function(){this.children.forEach((function(t){t.stale=!0})),this.invalidate()},destroy:function(){this._releaseChildren(!0)},invalidate:function(){this.fullyRendered=!1,o.scheduleASAP(this)},stringInfo:function(){return"TileGridsGroupNode"},get cssBackgroundProperty(){return this.fullyRendered?this.lastChild.cssBackgroundProperty:""},handleEvent:function(t){this.scheduleRefresh()},performScheduledUpdate:function(){if(this._canDraw()){var t=this._map,e=t.camera,i=this.lastChild,o=!!i&&i.debug!==this._map.debug,s=!!i&&i.tileData.settings.showsDefaultTiles!==this._map.showsDefaultTiles;if(!this._tileDataAtZoomCompletion){var l;if(Math.round(e.zoom)!==e.zoom&&t.tileSettings.showsLabels){if(!i)return;l=i.tileData}else l=new r(e,t.tileSettings);if(i){if((i.stale||!i.locked)&&(!l.equals(i.tileData)||o||s)){var c=i.tileData;c.tiles.forEach((function(t){l.tiles.indexOf(t)<0&&t.unschedule()}));var d=l.settings.configuration===c.settings.configuration,u=l.sameSettings(c)&&l.resolution===c.resolution&&!o;if(d?!u:l.sharesTileSourcesWithTileData(c))i.locked=!0,this._addNewTileGridAnimated(l,!0);else if(!i.locked){var p=d&&this._children.length>1;delete i.stale,i.setTileDataAnimated(l,p);var m=this._children[this._children.length-2];m&&!l.sharesTileSourcesWithTileData(m.tileData)&&(this._releaseChildren(!1),this._children=[i])}}}else this._addNewTileGridAnimated(l,!1)}for(var g=e.zoom,f=t.visibleMapRect,_=f.origin,y=f.size,v=0,b=this.children,w=b.length;v<w;++v){var C=b[v],k=C.tileData,S=k.zoom,T=k.mapRect.origin,L=Math.pow(2,g-S),M=Math.pow(2,S)*(n.tileSize*L),E=T.x-_.x;if(E>y.width)E--;else{var x=k.mapRect.size.width;x>0&&E+x<0&&E++}C.scale=L,C.position=new a.Point(h.roundToDevicePixel(E*M),h.roundToDevicePixel((T.y-_.y)*M)),v<w-1&&k.cancel()}this.fullyRendered=w>0&&this.children[w-1].fullyRendered}},cameraWillStartZooming:function(t){if(this._canDraw()){var e=this._map;t&&(this._tileDataAtZoomCompletion=new r(t,e.tileSettings),this._tileDataAtZoomCompletion.load()),this.children.forEach((function(t){t.locked=!0}))}},cameraDidStopZooming:function(){if(this._canDraw())if(this._tileDataAtZoomCompletion)this._addNewTileGridAnimated(this._tileDataAtZoomCompletion,!0,!0),delete this._tileDataAtZoomCompletion;else{var t=this._map,e=this.lastChild;if(e&&t.camera.zoom===e.tileData.zoom)e.locked=!1;else{var i=new r(t.camera,t.tileSettings);this._addNewTileGridAnimated(i,!0,!0)}}},tileGridDidFinishRendering:function(t){var e=this.children,i=e.length,n=e[i-1];if(n.fullyRendered&&!n.locked){for(var o=0;o<i-1;++o)e[o].tileData.releaseTiles();i>1&&(this.children=[n]),this.fullyRendered=!0,this._map.tileGridDidFinishRendering()}},_canDraw:function(){var t=this._map;return t&&!!t.configuration&&!!t.language},_addNewTileGridAnimated:function(t,e,i){var n=new s(this._map.debug),a=this.lastChild;a&&!t.sharesTileSourcesWithTileData(a.tileData)?(this._releaseChildren(!0),this.children=[n]):this.addChild(n),n.setTileDataAnimated(t,e),i&&o.scheduleASAP(this)},_releaseChildren:function(t){for(var e=this.childCount-(t?1:2);e>=0;--e){var i=this.children[e].tileData;i.cancel(),i.releaseTiles()}}}),t.exports=c},2047:function(t,e,i){var n=i(1969),o=i(1972),a=i(1948),s=i(1981),r=i(2048),l=i(2041),h=i(2050),c=i(2012).State,d=new o.Matrix,u=new o.Size(n.tileSize,n.tileSize);function p(t){o.GroupNode.call(this),this._scale=1,this._nodesByTileKey={},this._fadingNodes=[],this._debug=!!t}function m(t){var e=new h(t.tileSource);return e.size=u,t.loaderState===c.Succeeded&&(e.image=t.image,e.opacity=t.preferredOpacity),e}p.prototype=a.inheritPrototype(o.GroupNode,p,{stale:!1,fullyRendered:!1,_pendingTileCount:0,_tileData:null,get locked(){return this.wantsLayerBacking},set locked(t){t!==this.wantsLayerBacking&&(t&&this._fadingNodes.length>0?this.wantsLayerBacking=!0:!t&&this._wantsLayerBacking?this.wantsLayerBacking=!1:this.frozen=t)},get tileData(){return this._tileData},setTileDataAnimated:function(t,e){this._fadingNodes=[],delete this._failedTileAndImage;var i=t.tiles,s=t.range.min,r=Math.pow(2,s.z);this._tileData&&this._tileData.tiles.forEach((function(t){if(t.removeEventListener(l.Events.LoadSuccess,this),t.removeEventListener(l.Events.LoadFail,this),-1===i.indexOf(t)){var e=t.key,n=this._nodesByTileKey[e];n&&(n.remove(),delete this._nodesByTileKey[e])}}),this),this._tileData=t,this.fullyRendered=!1,this._pendingTileCount=i.length;var h=this.childCount,c=t.range.min.x,d=t.range.max.x-c===r,u=r*n.tileSize;i.forEach((function(t){var i=new o.Point(a.mod(t.x-s.x,r)*n.tileSize,(t.y-s.y)*n.tileSize),p=this._ensureNodeForTile(t);p.position=i,p.opacity=0,d&&t.x===c&&(p.repeatOffset=u),this.addChild(p),t.loaded?((h>0||!e)&&(p.opacity=1),this._tileDidLoad(t)):(e||(p.opacity=1),t.addEventListener(l.Events.LoadSuccess,this),t.addEventListener(l.Events.LoadFail,this))}),this)},get pendingTileCount(){return this._pendingTileCount},set scale(t){t!==this._scale&&(this._scale=t,this.transform=1===t?d:(new o.Matrix).scale(t))},get debug(){return this._debug},stringInfo:function(){return"TileGridNode"+(this.tileData?"<range:("+this.tileData.range.toString()+")>":"")},get cssBackgroundProperty(){if(!this.fullyRendered)return"";var t=this.position;return Array.prototype.concat.apply([],this._tileData.tiles.map((function(e){var i=this._nodesByTileKey[e.key];return e.tileImages.reduce((function(e,o,a){return"url("+o.image.src+") "+(t.x+i.position.x)+"px "+(t.y+i.position.y)+"px / "+n.tileSize+"px no-repeat"+(0===a?"":", ")+e}),"")}),this)).join(", ")},handleEvent:function(t){var e=t.target;switch(t.type){case l.Events.LoadSuccess:e.removeEventListener(l.Events.LoadSuccess,this),this._tileDidLoad(e);break;case l.Events.LoadFail:this._tileLoadFail(e,t.tileImage)}},performScheduledUpdate:function(){this._updateFadingNodes(),0===this._pendingTileCount&&0===this._fadingNodes.length&&this._allTilesDidDraw()},_tileDidLoad:function(t){this._pendingTileCount--,0===this._pendingTileCount&&this._failedTileAndImage&&(this._failedTileAndImage.tile._requestTileImageLoadStatus(this._failedTileAndImage.tileImage,this._handleTileImageLoadStatus.bind(this)),delete this._failedTileAndImage);var e=this._nodesByTileKey[t.key];if(0===e.childCount){var i=t.tileImages;if(e.children=i.map(m),this.debug){var n=new r(t);n.size=u,e.addChild(n)}}e.opacity<1?(this._fadingNodes.push(e),s.scheduleASAP(this)):0===this._pendingTileCount&&this._allTilesDidDraw()},_tileLoadFail:function(t,e){this._failedTileAndImage={tile:t,tileImage:e}},_handleTileImageLoadStatus:function(t){if(403===t.target.status){var e=this.parent._map.node.delegate;e&&e.tileAccessForbidden()}},_updateFadingNodes:function(){var t=Date.now();this._fadingNodes=this._fadingNodes.filter((function(e){return e._startTime?e.opacity=Math.min(1,(t-e._startTime)/150):0===e.opacity&&(e._startTime=t),1!==e.opacity||(delete e._startTime,!1)})),this._fadingNodes.length>0?s.scheduleOnNextFrame(this):this._wantsLayerBacking&&(this.wantsLayerBacking=!1,this.frozen=!0)},_allTilesDidDraw:function(){this.fullyRendered=!0,this.parent&&this.parent.tileGridDidFinishRendering(this)},_ensureNodeForTile:function(t){var e=t.key,i=this._nodesByTileKey[e];return i?delete i.repeatOffset:i=this._nodesByTileKey[e]=new o.GroupNode,i}}),t.exports=p},2048:function(t,e,i){var n=i(1972),o=i(1948),a=i(2049);function s(t){n.BaseNode.call(this),this._tile=t,this._renderer=new a(this)}s.prototype=o.inheritPrototype(n.BaseNode,s,{get tile(){return this._tile},stringInfo:function(){return"DebugNode<x:"+this.tile.x+",y:"+this.tile.y+",z:"+this.tile.z+">"}}),t.exports=s},2049:function(t,e,i){var n=i(1972),o=i(1948);function a(t){n.RenderItem.call(this,t)}a.prototype=o.inheritPrototype(n.RenderItem,a,{draw:function(t){var e=this._node.size.width,i="standard"===this._node.tile.settings.configuration.name;t.fillStyle=i?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.75)",t.fillRect(0,0,e,1),t.fillRect(0,1,1,e-1);var n=["x","y","z"].map((function(t){return t+" = "+this._node.tile[t]}),this);t.font="12px -apple-system-font",t.beginPath(),t.moveTo(1,1);var o=1,a=1;n.forEach((function(e,i){var n=t.measureText(e).width;o=1+n+16,t.lineTo(o,a),a+=20,0===i&&(a+=8),t.lineTo(o,a)})),t.lineTo(1,a),t.closePath(),t.fill(),t.fillStyle=i?"white":"black",t.textBaseline="hanging",n.forEach((function(i,n){t.fillText(i,9,9+20*n,e)}))}}),t.exports=a},2050:function(t,e,i){var n=i(1972),o=i(2045),a=i(1948);function s(t){n.ImageNode.call(this),this._tileSource=t._public,this._tileSource&&"function"===typeof this._tileSource.addEventListener&&this._tileSource.addEventListener(o.OPACITY_EVENT,this)}s.prototype=a.inheritPrototype(n.ImageNode,s,{handleEvent:function(){this._tileSource&&(this.opacity=this._tileSource.opacity)},wasRemoved:function(){setTimeout(function(){this.parent&&this.parent.scene||this._tileSource&&"function"===typeof this._tileSource.removeEventListener&&this._tileSource.removeEventListener(o.OPACITY_EVENT,this)}.bind(this),0)}}),t.exports=s},2051:function(t,e,i){var n=i(2029),o=i(2052),a=i(2053),s=i(1948),r=i(1981),l=i(1952);function h(){n.call(this),this._renderer=new o(this),Object.defineProperty(this,"_impl",{value:new a(this)})}h.prototype=s.inheritPrototype(n,h,{get isRotationEnabled(){return this._impl.isRotationEnabled},set isRotationEnabled(t){this._impl.isRotationEnabled=t},get customCanvas(){return this._impl.customCanvas},set needsDisplay(t){t&&r.scheduleDraw(this._renderer)},get forcedSnapsToIntegralZoomLevels(){return this._impl.forcedSnapsToIntegralZoomLevels},set forcedSnapsToIntegralZoomLevels(t){this._impl.forcedSnapsToIntegralZoomLevels=t},init:function(t,e,i,n,o){this._impl.init(t,e,i,n,o)},updateNetworkConfiguration:function(t){this._impl.updateNetworkConfiguration(t)},forceRerender:function(){this._impl.forceRerender()},rotateCameraAroundMapPoint:function(t,e){this._impl.rotateCameraAroundMapPoint(t,e)},makePendingConfigurationUpdates:function(){this._impl.makePendingConfigurationUpdates()},didReconfigure:function(){this.dispatchEvent(new l.Event("reconfigured"))},getMapFeatureRegions:function(){return this._impl.getMapFeatureRegions()}}),t.exports=h},2052:function(t,e,i){var n=i(1987).FallbackType,o=i(1986);function a(t){this.node=t,this._state=0,this._unregisteredLabelRegions=[]}a.prototype={constructor:a,init:function(t,e,i,n,o,a){this._state=1,this.Camera=i,this.Camera.hasRotationLock=!0,this._initialDisplayOptions=o,this.initRenderer(e,t,n).then(this.syrupInitHandler.bind(this,a)).catch(this.syrupInitErrorHandler.bind(this,a))},initRenderer:function(t,e,i){var o=this._syrupRenderer=new t({startInLoCSR:i});return o.on("invalid-access-key",(function(){e.accessKeyHasExpired()}),"mapkit-re-bootstrap-notification"),o.on("fallback",(function(){e.syrupRequestedFallback(n.RENDER)}),"mapkit-csr-fallback-notification"),o.on("zoom-support-did-change",function(){this.node.didReconfigure()}.bind(this),"mapkit-zoom-support-notification"),o.init(e)},syrupInitErrorHandler:function(t){if(4===this._state)return this._state=0,void this.destroy();this._state=0,t(!0)},syrupInitHandler:function(t){if(4===this._state)return this._state=3,void this.destroy();this._state=2;var e=this._syrupRenderer;e.setDeterministicCollisions(!0),e.setLanguage(this.node.language),e.setDeterministicCollisions(!1),e.setPixelRatio(o.devicePixelRatio),this._canvas=e.element(),this.updateConfiguration(this.node.configuration,this._initialDisplayOptions),this._initialDisplayOptions=null,this.performScheduledDraw(),this._unregisteredLabelRegions.forEach((function(t){e.registerLabelRegion(t)})),delete this._unregisteredLabelRegions,t()},deactivate:function(){1!==this._state?4!==this._state&&(this._state=3):this._state=4},destroy:function(){1!==this._state?4!==this._state&&5!==this._state&&(this._state=5,this._syrupRenderer&&(this._syrupRenderer.off("invalid-access-key",null,"mapkit-re-bootstrap-notification"),this._syrupRenderer.off("fallback",null,"mapkit-csr-fallback-notification"),this._syrupRenderer.off("zoom-support-did-change",null,"mapkit-zoom-support-notification"),"function"===typeof this._syrupRenderer.destroy&&this._syrupRenderer.destroy(),this._syrupRenderer=null)):this._state=4},get snapsToIntegralZoomLevels(){return!!this._syrupRenderer&&!this._syrupRenderer.supportsNonIntegralZoomLevels()},getMapFeatureRegions:function(){return this._syrupRenderer&&this._syrupRenderer.getMapFeatureRegions?this._syrupRenderer.getMapFeatureRegions():[]},performScheduledDraw:function(){if(2===this._state){var t=[this.node.size.width,this.node.size.height],e=new this.Camera(t[0]/t[1]),i=this.node.zoomLevel,n=[this.node.camera.center.x,1-this.node.camera.center.y,0];e.setTarget(n),e.setZoomLevel(i),e.setRotation(this.node.camera.rotation*s*-1),this._syrupRenderer.update(e,t),5!==this._state&&(this._syrupRenderer.mapFullyRendered()?this.node._impl.tileGridDidFinishRendering():this.node.needsDisplay=!0)}},forceRerender:function(){2===this._state&&this._syrupRenderer.forceRerender()},devicePixelRatioDidChange:function(){this._syrupRenderer&&this._syrupRenderer.setPixelRatio(o.devicePixelRatio)},frozen:!1,get element(){return this.canvas},get canvas(){return this._canvas},get fullyRendered(){return this._syrupRenderer&&this._syrupRenderer.mapFullyRendered()},set language(t){this._syrupRenderer&&this._syrupRenderer.setLanguage(t)},updateNetworkConfiguration:function(t){this._syrupRenderer&&this._syrupRenderer.updateNetworkConfiguration(t)},updateConfiguration:function(t,e){this._syrupRenderer&&(e.mode=t.name,this._syrupRenderer.setDisplayOptions(e))},updatePointOfInterestFilter:function(t,e){this.updateConfiguration(t,{poiFilter:e})},createLabelRegion:function(){if(this._syrupRenderer){var t=this._syrupRenderer.createLabelRegion();return this._unregisteredLabelRegions?this._unregisteredLabelRegions.push(t):this._syrupRenderer.registerLabelRegion(t),t}},unregisterLabelRegion:function(t){this._unregisteredLabelRegions?this._unregisteredLabelRegions.splice(this._unregisteredLabelRegions.indexOf(t),1):this._syrupRenderer&&this._syrupRenderer.unregisterLabelRegion(t)}};var s=Math.PI/180;t.exports=a},2053:function(t,e,i){var n=i(2031),o=i(2054),a=i(1948),s=i(1986),r=i(2056),l=i(2034),h=i(1987).FallbackType;function c(t){n.call(this,t),this._renderer=t._renderer,this._requiresFallback=!1,this._fallback=function(){this._requiresFallback=!0}.bind(this)}c.prototype=a.inheritPrototype(n,c,{init:function(t,e,i,n,o){if(this._requiresFallback)t.syrupRequestedFallback(h.FEATURE);else{this._fallback=t.syrupRequestedFallback.bind(t,h.FEATURE);var a={poiFilter:this._convertPointOfInterestFilter(this.pointOfInterestFilter),tint:this.tint,emphasis:this.emphasis};this._renderer.init(this.networkConfigurationFor(t),e,i,n,a,function(t){this._updateMinAndMaxZoomLevels(this.camera.viewportSize),o(t,this._renderer)}.bind(this))}},get isRotationEnabled(){return this._isRotationEnabled},set isRotationEnabled(t){!t&&this._rotationController?(this._rotationController.destroy(),delete this._rotationController):t&&!this._rotationController&&(this._initialInteractionController||(this._initialInteractionController=new l(this)),this._rotationController=new r(this),this.camera._initialRotation=0),this._isRotationEnabled=t},get rotation(){return this.camera.rotation},set rotation(t){if(this._cameraWillChange(),this.camera.rotation=t,this._updateDisplay(),this._cameraDidChange(),!this.cameraAnimation||!this.cameraAnimation.rotating){var e=this.node.delegate;e&&"function"===typeof e.mapRotationDidChange&&e.mapRotationDidChange(this.node)}},updateNetworkConfiguration:function(t){this._renderer.updateNetworkConfiguration(this.networkConfigurationFor(t))},forceRerender:function(){this._renderer.forceRerender()},adjustForSize:function(t){n.prototype.adjustForSize.call(this,t),this.forceRerender()},adjustMapItemPoint:function(t){return this.cameraIsZooming||this.cameraIsPanning||this.cameraIsRotating||(t.x=s.roundToDevicePixel(t.x),t.y=s.roundToDevicePixel(t.y)),t},networkConfigurationFor:function(t){if(!t)return{};var e=null;return t.proxyPrefixes&&!t.customMadabaUrl&&(e=t.proxyPrefixes.slice(0)),{madabaDomains:t.madabaDomains.slice(0),rasterTiles:t.rasterTilesForSyrup,proxyPrefixes:e,withCredentials:t.withCredentials,tileGroup:t.tileGroup,accessKey:t.accessKey,accessKeyHasExpired:t.accessKeyHasExpired.bind(t),syrupRequestedFallback:t.syrupRequestedFallback.bind(t)}},rotateCameraAroundMapPoint:function(t,e){if(this.isRotationLocked){if(!this.restrictedCamera)return;if(this.restrictIncomingRotation){var i=a.mod(this.camera.rotation+e,360),n=s.restrictRotation(i);n!==i&&(e=n-this.camera.rotation)}}if(0!==e){this._cameraWillChange(),this.camera.rotateAroundCenter(t,e),this.constrainCamera(this.camera),this._updateDisplay(),this._cameraDidChange();var o=this.node.delegate;o&&"function"===typeof o.mapRotationDidChange&&o.mapRotationDidChange(this.node)}},deactivate:function(){n.prototype.deactivate.call(this),this._renderer.deactivate()},getMapFeatureRegions:function(){return this._renderer.getMapFeatureRegions()},destroy:function(t){n.prototype.destroy.call(this,t),this.customCanvas&&this.customCanvas.parentNode&&this.customCanvas.parentNode.removeChild(this.customCanvas),this._renderer&&(this._renderer.destroy(),this._renderer=null)},stringInfo:function(){return"SyrupNode<camera:"+this.camera.toString()+">"},get backgroundGridTheme(){return this._backgroundGridTheme},set backgroundGridTheme(t){this._backgroundGridTheme=t},get fullyRendered(){return this._renderer.fullyRendered},get customCanvas(){return this._renderer&&this._renderer.canvas},get camera(){return this._camera},set camera(t){this._camera=t,this.node.needsDisplay=!0},get language(){return this._language},set language(t){this._language!==t&&(this._language=t,this._renderer&&(this._renderer.language=t,this.node.needsDisplay=!0))},updateConfiguration:function(t){var e=this._configuration&&(t.name!==this._configuration.name||t.provider!==this._configuration.provider);n.prototype.updateConfiguration.call(this,t),e&&this._renderer&&(this._renderer.updateConfiguration(t,{poiFilter:this._convertPointOfInterestFilter(this._pointOfInterestFilter)}),this.node.needsDisplay=!0)},updateTintAndEmphasis:function(t,e){this._renderer.node.pendingConfigurationUpdates?(this._renderer.node.pendingConfigurationUpdates.tint=t,this._renderer.node.pendingConfigurationUpdates.emphasis=e):this._renderer&&this._configuration&&(this._renderer.updateConfiguration(this._configuration,{poiFilter:this._convertPointOfInterestFilter(this._pointOfInterestFilter),tint:t,emphasis:e}),this.node.needsDisplay=!0)},updatePointOfInterestFilter:function(){if(this._renderer.node.pendingConfigurationUpdates)this._renderer.node.pendingConfigurationUpdates.poiFilterUpdate=!0;else if(this._renderer&&this._configuration){var t=this._convertPointOfInterestFilter(this._pointOfInterestFilter);this._renderer.updatePointOfInterestFilter(this._configuration,t),this.node.needsDisplay=!0}},makePendingConfigurationUpdates:function(){var t=this._renderer.node.pendingConfigurationUpdates;t&&(delete this._renderer.node.pendingConfigurationUpdates,t.tint&&t.emphasis&&this.updateTintAndEmphasis(t.tint,t.emphasis),t.poiFilter&&this.updatePointOfInterestFilter())},devicePixelRatioDidChange:function(){return!this._renderer},forcedSnapsToIntegralZoomLevels:!1,get snapsToIntegralZoomLevels(){return this.forcedSnapsToIntegralZoomLevels||this._renderer&&this._renderer.snapsToIntegralZoomLevels},set snapsToIntegralZoomLevels(t){},get debug(){return this._debug},set debug(t){this._debug!==!!t&&(this._debug=!!t,this._debug?this._showDebugPanel():this._hideDebugPanel())},minZoomLevelForViewportSize:function(t,e){return this._renderer&&this._renderer.Camera?this._renderer.Camera.getMinZoomLevel([t.width,t.height],e):this.minZoomLevel},needsReplacing:function(t){return!t},createLabelRegion:function(){return this._renderer.createLabelRegion()},updatedLabelRegion:function(){this.forceRerender(),this.node.needsDisplay=!0},unregisterLabelRegion:function(t){this._renderer.unregisterLabelRegion(t),this.node.needsDisplay=!0},_tileOverlaysDidChange:function(){this._fallback()},_showDebugPanel:function(){this._debugPanel=new o(function(){this.debug=!1}.bind(this),this.camera),this._debugPanel.attachTo(this._element),this._cameraDidChange=function(){n.prototype._cameraDidChange.call(this),this._debugPanel&&this._debugPanel.update(this.camera)}},_hideDebugPanel:function(){this._debugPanel.detach(),delete this._debugPanel,delete this._cameraDidChange},_updateDisplay:function(){this.forceRerender(),this.node.needsDisplay=!0},_convertPointOfInterestFilter:function(t){return null===t?null:{includes:t._includes,excludes:t._excludes}}}),t.exports=c},2054:function(t,e,i){var n=i(1986),o=i(2055),a=i(1948),s={fontFamily:"-apple-system-font, sans-serif",margin:"2em auto",width:"20em",borderRadius:"0.5em",color:"#f8f9f0",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"1em",textAlign:"center",position:"relative"},r={listStyleType:"none",margin:0,paddingLeft:0},l={width:"1em",height:"1em",position:"absolute",top:"0.5em",left:"0.5em"};function h(t,e){this._element=c(document.createElement("div"),s);var i=c(this._element.appendChild(document.createElement("ul")),r);this._items=[function(t){var e=t.center.toCoordinate();return"Center: "+e.latitude.toFixed(6)+", "+e.longitude.toFixed(6)},function(t){return"Zoom: "+t.zoom.toFixed(6)+", rotation: "+t.rotation.toFixed(6)},function(t){var e=Math.floor(t.zoom),i=Math.pow(2,e);return"Center tile: x="+Math.floor(a.mod(t.center.x,1)*i)+", y="+Math.floor(t.center.y*i)+", z="+e},function(t){return"Viewport: "+t.viewportSize.width+"\xd7"+t.viewportSize.height}].map((function(t){var e=i.appendChild(document.createElement("li"));return function(i){e.textContent=t(i)}}));var h=n.svgElement("svg",{viewBox:"-16 -16 32 32"},n.svgElement("circle",{r:16,fill:"#ccc"}),n.svgElement("g",{"stroke-width":4,stroke:"#222"},n.svgElement("line",{x1:-8,y1:-8,x2:8,y2:8}),n.svgElement("line",{x1:8,y1:-8,x2:-8,y2:8})));this._element.appendChild(c(h,l)),h.addEventListener("click",t),this.update(e),this.update=o(this.update,50,this)}function c(t,e){for(var i in e)t.style[i]=e[i];return t}h.prototype={constructor:h,attachTo:function(t){t.appendChild(this._element)},detach:function(){this._element.remove()},update:function(t){this._items.forEach((function(e){e(t)}))}},t.exports=h},2055:function(t,e){t.exports=function(t,e,i){var n;return function(){var o=arguments;function a(){n=null,t.apply(i,o)}n&&window.clearTimeout(n),n=window.setTimeout(a,e||0)}}},2056:function(t,e,i){var n=i(1969),o=i(1989),a=i(1981),s=i(1948),r=i(2036),l=180/Math.PI,h=3*l,c=1e-4*l*1e3;function d(t){r.call(this,t),this._recognizer=this.addRecognizer(new o.Rotation)}d.prototype=s.inheritPrototype(r,d,{decelerating:!1,stopDecelerating:function(){this.decelerating&&this._decelerationEnded()},destroy:function(){r.prototype.destroy.call(this),this.stopDecelerating(),delete this._recognizer},handleEvent:function(t){var e=t.target;e===this._recognizer&&(e.state===o.States.Began&&(this.map.beganRecognizingRotation(),this.map.cameraWillStartRotating()),e.state===o.States.Ended&&(delete this._restricted,this.map.finishedRecognizingRotation(),this._startDeceleratingWithVelocity(e.velocity)),this._handleRotationChange(t.target))},_handleRotationChange:function(t){this._lastRotationCenter=this.centerForGesture(t),this.map.cameraIsRotating&&t.state===o.States.Changed&&(this.map.rotateCameraAroundMapPoint(this._lastRotationCenter,t.rotation),t.rotation=0)},_centerWithRecognizer:function(t){var e=this.map,i=t.locationInElement(),o=this.map.node.convertPointFromPage(i);o=e.camera.transformGestureCenter(o);var a=e.visibleMapRect,s=e.camera.viewportSize;return new n.MapPoint(a.minX()+o.x/s.width*a.size.width,a.minY()+o.y/s.height*a.size.height)},performScheduledUpdate:function(){if(this.decelerating){var t=Date.now(),e=t-this._timeAtPreviousFrame,i=this._velocity/1e3,n=Math.pow(.995,e),o=.995*i*(n-1)/(.995-1);i*=n,this.map.cameraAnimation?this.map.cameraAnimation.adjustRotation(this._lastRotationCenter,o):this.map.rotateCameraAroundMapPoint(this._lastRotationCenter,o),this._velocity*=n,Math.abs(this._velocity)<=c?this._decelerationEnded():(this._timeAtPreviousFrame=t,this._schedule())}},_startDeceleratingWithVelocity:function(t){if(Math.abs(t)>1440||isNaN(t))this.map.cameraDidStopRotating();else{if(Math.abs(t)<h)return this.decelerating=!1,void this.map.cameraDidStopRotating();this._velocity=t,this.decelerating=!0,this._timeAtPreviousFrame=Date.now(),this._schedule()}},_schedule:function(){a.scheduleOnNextFrame(this)},_decelerationEnded:function(){this.decelerating=!1,this.map.cameraDidStopRotating()}}),t.exports=d},2057:function(t,e,i){var n=i(2058),o=i(2059);t.exports=function(t,e){t=t||0,e=e||0;var i={};return i.shouldTryCSR=[n,o].every((function(n){var o=n.fn(t,e);return i[n.name]=o,"object"===typeof o?o.capable:o})),i}},2058:function(t,e){t.exports={name:"functions",fn:function(){return!!(Array.prototype.fill&&Uint8Array.from&&window.btoa)}}},2059:function(t,e){function i(t,e,i){return t.getParameter(t.MAX_TEXTURE_SIZE)>=4096&&t.getParameter(t.MAX_RENDERBUFFER_SIZE)>=2*e&&t.getParameter(t.MAX_RENDERBUFFER_SIZE)>=2*i&&t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>=8&&t.getParameter(t.MAX_VARYING_VECTORS)>=8&&t.getParameter(t.STENCIL_BITS)>=8}t.exports={name:"webGL",fn:function(t,e){var n=document.createElement("canvas");n.width=n.height=0;var o,a=n.getContext("webgl",{antialias:!1,stencil:!0,failIfMajorPerformanceCaveat:!0});return!!a&&{capable:i(a,t,e),gpuInfo:(o=a,{VERSION:o.getParameter(o.VERSION),MAX_RENDERBUFFER_SIZE:o.getParameter(o.MAX_RENDERBUFFER_SIZE)})}}}},2060:function(t,e,i){var n=i(1943),o=i(1948),a=i(2061),s=i(2012).XHRLoader,r=i(2012).Priority,l=i(2071),h=i(1981),c=i(2055),d={UserActionEvents:["SCREEN_SIZE","DEVICE_IDENTIFIER","BROWSER_INFO","APPLICATION_IDENTIFIER","BROWSER_WINDOW_SIZE","URL","MAP_VIEW","USER_SESSION","TILES"],NetworkEvents:["DEVICE_IDENTIFIER","BROWSER_INFO","APPLICATION_IDENTIFIER","USER_SESSION"]},u={Zoom:{name:"ZOOM",states:d.UserActionEvents,type:"USER_ACTION"},MapsLoad:{name:"MAPS_LOAD",states:d.UserActionEvents,type:"USER_ACTION"},AnnotationClick:{name:"ANNOTATION_CLICK",states:d.UserActionEvents,type:"USER_ACTION"},MapTypeChange:{name:"MAP_TYPE_CHANGE",states:d.UserActionEvents,type:"USER_ACTION"},MapNodeReady:{name:"MAP_NODE_READY",states:d.UserActionEvents,type:"USER_ACTION"},Search:{name:"SEARCH",states:d.NetworkEvents,type:"NETWORK"},SearchAC:{name:"SEARCH_AC",states:d.NetworkEvents,type:"NETWORK"},ForwardGeocoder:{name:"FORWARD_GEOCODER",states:d.NetworkEvents,type:"NETWORK"},ReverseGeocoder:{name:"REVERSE_GEOCODER",states:d.NetworkEvents,type:"NETWORK"},Directions:{name:"DIRECTIONS",states:d.NetworkEvents,type:"NETWORK"},PointsOfInterestSearch:{name:"POINTS_OF_INTEREST_SEARCH",states:d.NetworkEvents,type:"NETWORK"}};function p(){this._doNotTrack=o.doNotTrack(),o.isNode()||(this._isInternalClient=/\.apple\.com$/.test(window.origin)||/\.icloud\.com$/.test(window.origin)||/\.filemaker\.com$/.test(window.origin)||/\.apple-mapkit\.com$/.test(window.origin)||/\.tryrating\.com$/.test(window.origin),this._isAppHostingSite=/\.appspot.com$/.test(window.origin)||/\.herokuapp.com$/.test(window.origin),n.addEventListener(n.Events.Changed,this),n.ready&&this._configurationBecameAvailable(),this.uaParserInfo=l.parseUserAgent(navigator.userAgent),this._debouncedQueueAsBackgroundTask=c(this._queueAsBackgroundTask,1e4,this),window.addEventListener("pagehide",this))}p.prototype={_queuedMessages:[],_loader:null,_analyticsUrl:null,_errorUrl:null,_sessionId:null,_sessionTimerStart:null,_sessionTimeToExpire:null,_sequenceNumber:null,_doNotTrack:null,Events:u,EventTarget:"UI_TARGET_UNKNOWN",log:function(t,e){this._doNotTrack||o.isNode()||((!this._sessionId||(new Date).getTime()>this._sessionTimeToExpire)&&this._initSession(),(e=e||{}).uaParserInfo=this.uaParserInfo,this._queuedMessages.push(this._createMessage(t,e)),this._sequenceNumber++,n.analytics&&this._debouncedQueueAsBackgroundTask())},getDataToSend:function(t){return 0===this._queuedMessages.length?(this._loader.unschedule(),!1):(t.setRequestHeader("Content-Type","text/plain"),t.responseType="text",this._createJSON())},loaderDidSucceed:function(t){delete this._loader},loaderDidFail:function(t){this._queuedMessages=this._queuedMessages.concat(JSON.parse(t.xhrData).analytics_event),delete this._loader},handleEvent:function(t){switch(t.type){case n.Events.Changed:this._configurationBecameAvailable();break;case"pagehide":this._sendPendingData()}},reduceHost:function(t){var e=t.match(/([^.]+\.[^.]+)$/);return e&&e.length>0?e[0]:t},_createMessage:function(t,e){var i;switch(t.type){case"USER_ACTION":i=this._createUserActionMessage(t,e);break;case"NETWORK":i=this._createNetworkMessage(t,e);break;default:i={}}if(e.states){var n=d.UserActionEvents.concat(Object.keys(e.states));i.analytics_state=this._createStateMessages(n,e)}else i.analytics_state=this._createStateMessages(t.states,e);return i},_createUserActionMessage:function(t,e){var i={event_type:"USER_ACTION",user_action_event:{user_action_event_key:t.name}};return(e.eventValue||0===e.eventValue)&&(i.user_action_event.user_action_event_value=e.eventValue),e.eventTarget&&(i.user_action_event.user_action_event_target=e.eventTarget),e.eventModule&&(i.user_action_event.user_action_event_module=e.eventModule),i},_createNetworkMessage:function(t,e){var i={event_type:"NETWORK",network_event:{network_service:t.name}},n=parseInt(e.responseCode);return e.responseCode&&!isNaN(n)&&(i.network_event.http_response_code=n),i},_initSession:function(){this._sessionId={high:o.generateSessionIdValue(),low:o.generateSessionIdValue()},this._sessionTimerStart=(new Date).getTime(),this._sessionTimeToExpire=this._sessionTimerStart+9e5,this._sequenceNumber=0},_createStateMessages:function(t,e){return t.map((function(t){var i={state_type:t};return a[t]?i[t.toLowerCase()]=a[t](this,e):i[t.toLowerCase()]=e.states[t](e),i}),this)},_createJSON:function(){var t=JSON.stringify({analytics_message_type:"SHORT_SESSION_USAGE",analytics_event:this._queuedMessages});return this._queuedMessages=[],t},_configurationBecameAvailable:function(){n.analytics&&(this._analyticsUrl=n.analytics.analyticsUrl,this._withCredentials=n.withCredentials),n.teamId&&(this._teamId=n.teamId)},_scheduleLoader:function(){this._loader||(this._loader=new s(this._analyticsUrl,this,{method:"POST",priority:r.Low,retry:!0,withCredentials:this._withCredentials}),this._loader.schedule())},_queueAsBackgroundTask:function(){h.scheduleInBackground(this._scheduleLoader.bind(this),h.Priority.Low)},_sendPendingData:function(){if(0!==this._queuedMessages.length)if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(this._analyticsUrl,this._createJSON());else{var t=new XMLHttpRequest;t.open("POST",this._analyticsUrl,!1),t.send(this._createJSON())}}},t.exports=new p},2061:function(t,e,i){t.exports={SCREEN_SIZE:i(2062),DEVICE_IDENTIFIER:i(2063),BROWSER_INFO:i(2064),APPLICATION_IDENTIFIER:i(2065),BROWSER_WINDOW_SIZE:i(2066),URL:i(2067),MAP_VIEW:i(2068),USER_SESSION:i(2069),TILES:i(2070)}},2062:function(t,e){t.exports=function(t){var e={device_pixel_ratio:window.devicePixelRatio};return t._isInternalClient?(e.width=screen.width,e.height=screen.height,e):e}},2063:function(t,e){t.exports=function(t,e){return{device_platform:e.uaParserInfo.deviceInfo.platform,device_os_version:e.uaParserInfo.deviceInfo.os}}},2064:function(t,e){t.exports=function(t,e){var i={browser_language:navigator.language,prefers_color_scheme:window.matchMedia("(prefers-color-scheme: dark)").matches?"DARK":"LIGHT"};return location.host.match(/duckduckgo.com$/)||location.host.match(/apple-mapkit.com$/)||(i.browser_name=e.uaParserInfo.browserInfo.name,i.browser_version=e.uaParserInfo.browserInfo.version),i.browser_origin=location.protocol+"//"+location.host,t._isInternalClient?i.browser_referer=document.referrer:t._isAppHostingSite||(i.browser_origin=t.reduceHost(location.host)),i}},2065:function(t,e,i){var n=i(1942);t.exports=function(t){var e={host:location.host,mkjs_version:n.version};return t._isInternalClient&&window.placecard&&window.placecard.version&&(e.placecard_version=window.placecard.version),t._teamId&&(e.team_id=t._teamId),t._isInternalClient||t._isAppHostingSite||(e.host=t.reduceHost(location.host)),e}},2066:function(t,e){t.exports=function(t){if(t._isInternalClient)return{width:window.innerWidth,height:window.innerHeight}}},2067:function(t,e){t.exports=function(t){var e={};return t._isInternalClient&&(e.query_string=location.search,e.path=location.pathname),e}},2068:function(t,e,i){t.exports=function(t,e){var i=e.map.region.toBoundingRegion(),n=e.map.ensureRenderingFrame().size;return{display_map_region:{eastLng:i.eastLongitude,northLat:i.northLatitude,southLat:i.southLatitude,westLng:i.westLongitude},zoom_level:e.map.zoomLevel,map_type:"MAP_TYPE_"+e.map.mapType.toUpperCase(),size:{width:n.width,height:n.height},color_scheme:e.map.colorScheme.toUpperCase()}}},2069:function(t,e){t.exports=function(t){var e=((new Date).getTime()-t._sessionTimerStart)/1e3;return{session_id:t._sessionId,sequence_number:t._sequenceNumber,relative_timestamp:e}}},2070:function(t,e){t.exports=function(t,e){return{rendering:e.map._mapNodeController&&e.map._mapNodeController.renderingMode}}},2071:function(t,e){function i(t){var e,i;t=t.toLowerCase();try{return!t.includes("safari")||t.includes("chrome")||t.includes("crios")||t.includes("gsa")||t.includes("fxios")?!t.includes("chrome")&&!t.includes("crios")||t.includes("chromium")||t.includes("edge")||t.includes("samsungbrowser")?!t.includes("firefox")&&!t.includes("fxios")||t.includes("seamonkey")?t.includes("msie")||t.includes("trident")&&t.includes("rv")?(e="Internet Explorer",i=t.includes("msie")?/msie\s(\d*\.?\d*)/gi.exec(t)[1]:/rv:(\d*\.?\d*)/gi.exec(t)[1]):t.includes("edge")?(e="Edge",i=/edge\/(\d*\.?\d*)/gi.exec(t)[1]):t.includes("gsa")?(e="Google Search App",i=/gsa\/(.*?)\s[^._\d]/i.exec(t)[1]):(e="other",i="other"):(e="Firefox",i=t.includes("firefox")?/firefox\/(\d*\.?\d*)/gi.exec(t)[1]:/fxios\/(\d*\.?\d*)/gi.exec(t)[1]):(e="Chrome",i=t.includes("chrome")?/chrome\/(.*?)\s/gi.exec(t)[1]:/crios\/(.*?)\s/gi.exec(t)[1]):(e="Safari",i=/version\/(\d+\.?\d*)/gi.exec(t)[1]),{name:e,version:i}}catch(n){return{name:"other",version:"other"}}}function n(t){var e,i;t=t.toLowerCase();try{return t.includes("ipad")?(e="iPad",i="iOS "+/os\s+(.*?)[^_.\d]/i.exec(t)[1]):t.includes("iphone")&&!t.includes("ipad")?(e="iPhone",i="iOS "+/os\s+(.*?)[^_.\d]+/i.exec(t)[1]):t.includes("macintosh")?(e="Macintosh",i="Mac OS X "+/mac os x (.*?)[^_.\d]/.exec(t)[1]):t.includes("windows")?(e="Windows",i="Windows NT "+/windows nt (.*?)[^._\d]/.exec(t)[1]):t.includes("android")?(e="Android",i="Android "+/android (.*?)[^._\d]/.exec(t)[1]):t.includes("linux")&&!t.includes("android")?(e="Linux",i="Linux"):t.includes("cros")?(e="Chrome OS",i="Chrome OS"):(e="other",i="other"),{platform:e,os:i}}catch(n){return{platform:"other",os:"other"}}}t.exports={parseUserAgent:function(t){return{browserInfo:i(t),deviceInfo:n(t)}}}},2072:function(t,e,i){t.exports=function(t){t(i(2073))}},2073:function(t,e,i){var n=i(1943),o=i(1948),a=i(1986),s=i(2074),r=i(2075),l=i(2077),h=i(2081),c=i(2092),d=i(2093),u=i(2095),p=i(1976),m=i(1997),g=i(1997).Node,f=i(1960),_=i(2009),y=i(1977),v=i(1988),b=v.FeatureVisibility,w=["ca-ES","en-GB","en-US","es-ES","es-MX","hi-IN","id-ID","ja-JP","ko-KR","ms-MY","nb-NO","pt-BR","pt-PT","ro-RO","zh-CN","zh-HK","zh-TW"],C=new p(7,11);function k(t){g.call(this,a.htmlElement("div",{class:"mk-controls-container"})),this._map=t,this._topRightControlsNode=new g(a.htmlElement("div",{class:"mk-top-right-controls-container"})),this._bottomRightControlsNode=new g(a.htmlElement("div",{class:"mk-bottom-right-controls-container"})),this._bottomLeftControlsNode=new g(a.htmlElement("div",{class:"mk-bottom-left-controls-container"})),this._setPendingControls(),this._shadowRootNode=a.addShadowRootChild(this,i(2096)+i(2097)+i(2098)),this._shadowRootNode.addChild(this._topRightControlsNode),this._shadowRootNode.addChild(this._bottomRightControlsNode),this._shadowRootNode.addChild(this._bottomLeftControlsNode),this._logo=new s,this._legalControl=new r,n.addEventListener(n.Events.Changed,this),_.activeLocale&&(this._rtl=_.activeLocale.rtl,this.classList.toggle("mk-rtl",this._rtl)),_.addEventListener(_.Events.LocaleChanged,this)}function S(){return n.isAutoNavi||n.showMapsLogo}k.ZoomControl=c,k.prototype=o.inheritPrototype(g,k,{_rtl:!1,get controlsPending(){return this._controlsPending},set canShowTooltips(t){this._userLocationControl&&(this._userLocationControl.canShowTooltips=t),this._zoomControl&&(this._zoomControl.canShowTooltips=t),this._mapTypeControl&&(this._mapTypeControl.canShowTooltips=t),this._rotationControl&&(this._rotationControl.canShowTooltips=t)},mapPaddingDidChange:function(t){var e=this.element.style;e.top=t.top+"px",e.left=t.left+"px",e.bottom=t.bottom+"px",e.right=t.right+"px",this.sizeDidChange()},sizeDidChange:function(){var t=this._shouldHideControls();this._toggleControl(this._map.showsZoomControl&&!t,this._zoomControl,this.updateZoomControl),this._toggleControl(this._map.showsMapTypeControl&&!t,this._mapTypeControl,this.updateMapTypeControl),this._toggleControl(this._map.showsUserLocationControl&&!t,this._userLocationControl,this.updateUserLocationControl),this.updateLogo(),this.updateLegalControl(),this.updateRotationControl(),this.updateScale(),this.zoomLevelDidChange(),this._setReduceMargin()},zoomLevelDidChange:function(){if(this._zoomControl){var t=this._map.minZoomLevel,e=this._map.maxZoomLevel;this._map.snapsToIntegralZoomLevels&&(t=Math.ceil(t),e=Math.floor(e)),this._zoomControl.zoomOutEnabled=this._map.zoomLevel>t,this._zoomControl.zoomInEnabled=this._map.zoomLevel<e}},update:function(){this._map&&(this.classList.toggle("mk-color-scheme-dark",a.darkColorScheme(this._map.colorScheme)),this.classList.toggle("mk-dark-mode",a.darkColorScheme(this._map.tint)),this._shouldHideControls()?(this._removeZoomControl(),this._removeMapTypeControl(),this._removeUserLocationControl(),this._removeRotationControl(),this._removeScale()):(this.updateZoomControl(),this.updateMapTypeControl(),this.updateUserLocationControl(),this.updateRotationControl(),this.updateScale()),this.updateLogo(),this.updateLegalControl(),this._setReduceMargin())},scaleDidChange:function(){this._scale&&(this._scale.update(),this._scale.hideIfNeeded())},updateScale:function(){this._map.showsScale===b.Hidden||this._shouldHideControls()?this._removeScale():(this._addScale(),this._scale.node.mapWidth=this._map._mapNode.size.width,this._scale.updateTheme(this._map.mapNodeTint),this._positionScale(),this._scale.update())},updateZoomControl:function(){this._map.showsZoomControl&&!this._shouldHideControls()?(this._addZoomControl(),this._zoomControl.enabled=this._map.isZoomEnabled,this.zoomLevelDidChange(),this._zoomControl.updateTintColor(this._map.tintColorForControls)):this._removeZoomControl()},updateMapTypeControl:function(){this._map.showsMapTypeControl&&!this._shouldHideControls()?(this._addMapTypeControl(),this._mapTypeControl.mapType=this._map.mapType,this._mapTypeControl.enabled=!0,this._mapTypeControl.updateTintColor(this._map.tintColorForControls)):this._removeMapTypeControl()},updateUserLocationControl:function(){if(this._map.showsUserLocationControl&&!this._shouldHideControls()){switch(this._addUserLocationControl(),this._userLocationControl.enabled=!0,this._userLocationControl.state){case d.States.Default:k.userLocation.isAvailable?this._map.tracksUserLocation&&k.userLocation.location?this._userLocationControl.toTrackingState():(this._map.tracksUserLocation||this._map.showsUserLocation&&!this._map.userLocationAnnotation)&&this._userLocationControl.toWaitingState():this._userLocationControl.toDisabledState();break;case d.States.Waiting:k.userLocation.location&&this.userLocationDidChange(k.userLocation),this._map.showsUserLocation||this._userLocationControl.toDefaultState();break;case d.States.Tracking:this._map.tracksUserLocation||this._userLocationControl.toDefaultState()}this._userLocationControl.updateTintColor(this._map.tintColorForControls)}else this._removeUserLocationControl()},updateRotationControl:function(){this._shouldHideControls()||this._map.isCompassHidden?this._removeRotationControl():(this._addRotationControl(),this._rotationControl.rotation=this._map.rotation,this._rotationControl.updateImage(a.devicePixelRatio,a.darkColorScheme(this._map.mapNodeTint)),this._rotationControl.updateTintColor(this._map.tintColorForControls))},updateLegalControl:function(){this._addAndUpdateLegalControl()},updateLogo:function(){!this._shouldHideLogo()&&S()?this._addAndUpdateLogo():this._logo.remove(),this._legalControl.updateWithMapTypeAndTint(this._map.mapType,this._map.mapNodeTint)},devicePixelRatioDidChange:function(){this._rotationControl&&this._rotationControl.updateImage(a.devicePixelRatio,a.darkColorScheme(this._map.mapNodeTint)),this._scale&&this._scale.update(),this._logo.updateWithMapNodeTint(this._map.mapNodeTint)},handleEvent:function(t){if(this._map)switch(t.type){case l.EVENTS.MAP_TYPE_CHANGE:this._mapTypeControl&&(this._map.mapType=this._mapTypeControl.mapType);break;case d.EVENTS.PRESSED:this._userLocationControl.state===d.States.Waiting?this._map.tracksUserLocation=!0:this._userLocationControl.state!==d.States.Tracking&&(this._map.tracksUserLocation=!1);break;case _.Events.LocaleChanged:this._handleLocaleChanged(t);break;case"update":this._unsetPendingControls(),this._map.addWaitingAnnotations();break;case n.Events.Changed:this.updateLogo(),this.updateLegalControl()}},mapWasDestroyed:function(){this._unsetPendingControls(),_.removeEventListener(_.Events.LocaleChanged,this),n.removeEventListener(n.Events.Changed,this),this._destroyZoomControl(),this._destroyMapTypeControl(),this._destroyUserLocationControl(),this._destroyRotationControl(!0),this._legalControl.remove(),delete this._legalControl,this._logo.mapWasDestroyed(),this._logo.remove(),delete this._logo,this._removeScale(),this.remove(),delete this._map},userLocationDidChange:function(t){this._userLocationControl&&(this._map.tracksUserLocation?this._userLocationControl.toTrackingState():this._userLocationControl.toDefaultState())},userLocationDidError:function(t){this._userLocationControl&&this._userLocationControl.toDisabledState(),this._map.userLocationAnnotation||3===t.errorCode||(this._map.showsUserLocation=!1)},_handleLocaleChanged:function(t){this.classList.toggle("mk-rtl",t.locale.rtl),this._rtl!==t.locale.rtl?(this._rtl=t.locale.rtl,this._rtlChanged=!0,this.update(),this._rtlChanged=!1):this.updateLogo()},_addScale:function(){this._scale||(this._setPendingControls(),this._scale=new h(this._map),this._shadowRootNode.addChild(this._scale,0))},_positionScale:function(){var t=this._map.ensureVisibleFrame().size,e=!this._rtl;this._scale.node.leftAligned=e,this._scale.position=new p(e?C.x:t.width-this._scale.size.width-C.x,C.y),this._scale.shouldDisplayScale||this._scale.node.setOpacityAnimated(0,!1)},_removeScale:function(){this._scale&&(this._setPendingControls(),this._scale.node.l10n=null,this._scale.node.remove(),this._scale.scene.destroy(),this._scale.remove(),delete this._scale)},_addZoomControl:function(){!this._map.showsZoomControl||this._zoomControl||this._shouldHideControls()||(this._setPendingControls(),this._zoomControl=new c,this._zoomControl.enabled=this._map.isZoomEnabled,this._zoomControl.addEventListener(c.EVENTS.ZOOM_START,this._map),this._zoomControl.addEventListener(c.EVENTS.ZOOM_END,this._map),this._bottomRightControlsNode.insertBefore(this._zoomControl,this._legalControl),this._rotationControl&&this._rotationControl.classList.add("mk-with-zoom-control"))},_removeZoomControl:function(){!this._shouldHideControls()&&this._map.showsZoomControl||!this._zoomControl||(this._setPendingControls(),this._zoomControl.enabled=!1,this._destroyZoomControl())},_destroyZoomControl:function(){this._zoomControl&&(this._zoomControl.removeEventListener(c.EVENTS.ZOOM_START,this._map),this._zoomControl.removeEventListener(c.EVENTS.ZOOM_END,this._map),this._zoomControl.remove(),this._rotationControl&&this._rotationControl.classList.remove("mk-with-zoom-control"),delete this._zoomControl)},_addMapTypeControl:function(){!this._map.showsMapTypeControl||this._mapTypeControl||this._shouldHideControls()||(this._setPendingControls(),this._mapTypeControl=new l(i(2099).MapTypes,this._map.mapType,this),this._mapTypeControl.addEventListener(l.EVENTS.MAP_TYPE_CHANGE,this),this._topRightControlsNode.addChild(this._mapTypeControl))},_removeMapTypeControl:function(){this._mapTypeControl&&(this._setPendingControls(),this._mapTypeControl.enabled=!1,this._destroyMapTypeControl())},_destroyMapTypeControl:function(){this._mapTypeControl&&(this._mapTypeControl.removeEventListener(l.EVENTS.MAP_TYPE_CHANGE,this),this._mapTypeControl.remove(),delete this._mapTypeControl)},_toggleControl:function(t,e,i){(e&&!t||!e&&t)&&i.call(this)},_shouldHideControls:function(){if(!n.ready)return!0;var t=this._map.ensureVisibleFrame().size;return t.width<v.MapSizes.minimumSizeToShowControls.width||t.height<v.MapSizes.minimumSizeToShowControls.height},_shouldHideLogo:function(){if(!n.ready)return!0;var t=-1===w.indexOf(_.localeId)?v.MapSizes.minimumSizeToShowLogo:v.MapSizes.minimumSizeToShowLogoWithReducedMargin,e=this._map.ensureVisibleFrame().size;return e.width<t.width||e.height<t.height},_addRotationControl:function(){this._shouldHideControls()||this._rotationControl||(this._setPendingControls(),this._rotationControl=new u(this._map),this._rotationControl.enabled=!0,this._bottomRightControlsNode.insertBefore(this._rotationControl,this._zoomControl||this._legalControl),this._zoomControl&&this._rotationControl.classList.add("mk-with-zoom-control"))},_removeRotationControl:function(){this._rotationControl&&(this._setPendingControls(),this._destroyRotationControl())},_destroyRotationControl:function(t){if(this._rotationControl){if(t)this._rotationControl.mapWasDestroyed(),this._rotationControl.remove();else{var e=this._rotationControl;e.opacity=0;var i=setTimeout(n,300);e.element.addEventListener("transitionend",n)}delete this._rotationControl}function n(){clearTimeout(i),e.element.removeEventListener("transitionend",n),e.mapWasDestroyed(),e.remove()}},_addUserLocationControl:function(){!this._map.showsUserLocationControl||this._userLocationControl||this._shouldHideControls()||(this._setPendingControls(),this._userLocationControl=new d(this._map,this._rtl,this),this._userLocationControl.addEventListener(d.EVENTS.PRESSED,this),this._topRightControlsNode.insertBefore(this._userLocationControl,this._mapTypeControl))},controlDidGetFocus:function(t){this._toggleParentClass(t,"mk-pill-focus",!0)},controlDidLoseFocus:function(t){this._toggleParentClass(t,"mk-pill-focus",!1)},controlWasPressed:function(t){this._toggleParentClass(t,"mk-pill-pressed",!0)},controlWasReleased:function(t){this._toggleParentClass(t,"mk-pill-pressed",!1)},_toggleParentClass:function(t,e,i){var n=t.parent;n===this._topRightControlsNode&&n.classList.toggle(e,i)},_removeUserLocationControl:function(){!this._shouldHideControls()&&this._map.showsUserLocationControl||!this._userLocationControl||(this._setPendingControls(),this._destroyUserLocationControl())},_destroyUserLocationControl:function(){this._userLocationControl&&(this._userLocationControl.removeEventListener(d.EVENTS.STATE_CHANGE,this._map),this._userLocationControl.mapWasDestroyed(),this._userLocationControl.remove(),delete this._userLocationControl)},_addAndUpdateLegalControl:function(){this._setPendingControls(),(!n.showMapsLogo&&n.mirrorLegalLink?this._bottomLeftControlsNode:this._bottomRightControlsNode).addChild(this._legalControl),this._legalControl.updateWithMapTypeAndTint(this._map.mapType,this._map.mapNodeTint)},_addAndUpdateLogo:function(){this._logo.parent||(this._setPendingControls(),this._bottomLeftControlsNode.insertBefore(this._logo,this._legalControl)),this._logo.updateWithMapNodeTint(this._map.mapNodeTint)},_setPendingControls:function(){this._controlsPending=!0,m.addEventListener("update",this)},_unsetPendingControls:function(){this._controlsPending=!1,m.removeEventListener("update",this)},_setReduceMargin:function(){var t=this._map.ensureVisibleFrame().size.width,e=v.MapSizes,i=e.minimumSizeToShowLogo.width,n=e.minimumSizeToShowControls.width;this.classList.toggle("mk-reduce-margin",t<i&&S()),this.classList.toggle("mk-reduced-vertical-margin",t<n)},controlBounds:function(){var t=[];return[this._topRightControlsNode,this._bottomLeftControlsNode,this._bottomRightControlsNode].forEach((function(e){0!==e.children.length&&(e===this._bottomRightControlsNode?Array.prototype.push.apply(t,e.children):t.push(e))}),this),t.map((function(t){try{var e=t.element.getBoundingClientRect(),i=window.getComputedStyle(this._map.element);if("none"===(i.transform||i.msTransform||i.webkitTransform)){var n=this._map.element.getBoundingClientRect();return new y(e.left-n.left,e.top-n.top,e.width,e.height)}return y.rectFromClientRect(e)}catch(o){return new y}}),this)}}),f.jsModules.userLocation?k.userLocation=f.jsModules.userLocation:f.addEventListener("load",(function t(e){e.jsModules.userLocation&&(k.userLocation=e.jsModules.userLocation,f.removeEventListener("load",t))})),t.exports=k},2074:function(t,e,i){var n=i(1986),o=i(1948),a=i(1943),s=i(2018),r=i(1997).Node,l=i(2009);function h(){this._logoElement=n.htmlElement("img"),this._logoElementNode=new r(this._logoElement),this._logoElementNode.classList.add(c.LOGO),r.call(this,n.htmlElement("div",{class:c.CONTROL},this._logoElement)),l.addEventListener(l.Events.LocaleChanged,this),a.addEventListener(a.Events.Changed,this),this.rtl=l.activeLocale.rtl}i(1987).Tints,t.exports=h;var c={CONTROL:"mk-logo-control",LOGO:"mk-logo",LOGO_AUTONAVI:"mk-logo-autonavi"};function d(t,e,i){t.classList.toggle(c.LOGO_AUTONAVI,a.isAutoNavi),t.element.crossOrigin=n.getCorsAttribute(a.distUrlWithCredentials),t.setAttribute("src",function(t,e){var i=["logos/logo-wordmark"],o=".svg",r=[1];return a.isAutoNavi?(i=["logos/logo","autonavi"],o=".png",r=[1,2,3]):1===n.devicePixelRatio&&(o=".png"),t&&i.push("satellite"),a.isAutoNavi&&e&&i.push("rtl"),a.isAutoNavi||i.push(l.localeId),s.createImageUrl(n.imagePathForDevice(r,i.join("-"),o))}(e,i))}h.prototype=o.inheritPrototype(r,h,{tint:void 0,updateWithMapNodeTint:function(t){this.tint=t;var e=n.darkColorScheme(t),i=this._logoElementNode;a.state===a.States.UNINITIALIZED?a.addEventListener(a.Events.Initialized,(function t(){a.removeEventListener(a.Events.Initialized,t),d(i,e,this.rtl)})):d(i,e,this.rtl),i.setAttribute("alt",l.get("Logo."+a.tileProvider+".Tooltip"))},handleEvent:function(t){switch(t.type){case l.Events.LocaleChanged:this.rtl=t.locale.rtl,this._handleLocaleChange(t);break;case a.Events.Changed:if(!this.tint)return;this.updateWithMapNodeTint(this.tint)}},mapWasDestroyed:function(){l.removeEventListener(l.Events.LocaleChanged,this),a.removeEventListener(a.Events.Changed,this)},_handleLocaleChange:function(t){this.tint&&this.updateWithMapNodeTint(this.tint)}})},2075:function(t,e,i){var n=i(1986),o=i(1948),a=i(1943),s=i(2076),r=i(2009),l=i(1997).Node;t.exports=h;function h(){var t=n.htmlElement("a",{target:"_blank",tabindex:0});s.call(this,t),this.classList.add("mk-legal-controls"),this._elLegal=n.htmlElement("span"),this._elLegal.textContent=r.get("Legal.Label"),this._elLegalNode=new l(this._elLegal),this._elLegalNode.classList.add("mk-legal"),t.appendChild(this._elLegal),this.enabled=!0}h.prototype=o.inheritPrototype(s,h,{_attributionUrl:"",updateWithMapTypeAndTint:function(t,e){if(this.mapType=t,this.tint=e,this.classList.toggle("mk-legal-controls-autonavi",a.isAutoNavi),this._elLegalNode.classList.toggle("mk-legal-satellite",n.darkColorScheme(e)),this._elLegal.textContent=r.get("Legal.Label"),a.isAutoNavi)if(a.ready){var i=a.types[this.mapType].tileSources[0];i.attribution&&i.attribution.url&&(this._attributionUrl=this.element.href=i.attribution.url)}else this._attributionUrl=this.element.href="";else this._attributionUrl=this.element.href=r.get("Legal.Apple.URL")},localeChanged:function(t){this.mapType&&this.updateWithMapTypeAndTint(this.mapType,this.tint)},clicked:function(t){this._pressed(t)},spaceBarKeyUp:function(t){this._pressed(t)},_pressed:function(t){this._attributionUrl&&window.open(this._attributionUrl)}})},2076:function(t,e,i){var n=i(1986),o=i(1952),a=i(1948),s=i(1997).Node,r=i(2009);function l(t){s.call(this,t),this.classList.add(h.CONTROL)}var h={CONTROL:"mk-control",DISABLED:"mk-disabled",FOCUS:"mk-focus"};function c(t){this._control=t}function d(t){this._control=t}function u(t){this._control=t}l.prototype=a.inheritPrototype(s,l,{constructor:l,_enabled:!1,hasFocus:!1,pageHasFocus:!1,get enabled(){return this._enabled},set enabled(t){var e=!!t;this._enabled!==e&&(e?this.enable():this.disable(),this._enabled=e,this.reset())},set canShowTooltips(t){t?this._updateLabels():this._clearLabels()},willMoveToParent:function(t){t?this.parent||(this._createListeners(),r.addEventListener(r.Events.LocaleChanged,this._eventListener),this.enabled&&(this._addFocusAndBlurListeners(),this._addKeyboardListeners(),this.addEventListeners())):(r.removeEventListener(r.Events.LocaleChanged,this._eventListener),this.removeEventListeners(),this._removeFocusAndBlurListeners(),this._removeKeyboardListeners(),this._destroyListeners())},enable:function(){this.classList.remove(h.DISABLED),this._createListeners(),this.element.addEventListener(n.startEventType,this._eventListener),this.element.addEventListener("click",this._eventListener),this.parent&&(this._addFocusAndBlurListeners(),this._addKeyboardListeners(),this.addEventListeners())},disable:function(){this.classList.add(h.DISABLED),this.element.removeEventListener(n.startEventType,this._eventListener),this.element.removeEventListener("click",this._eventListener),this.removeEventListeners(),this._removeFocusAndBlurListeners(),this._removeKeyboardListeners()},blurFocusedElement:function(t){var e=n.getShadowDOMTargetFromEvent(this.element,t);if(!this.element.contains(e)){var i=n.containingDocumentOrShadowRoot(this.element);i.activeElement&&this.element.contains(i.activeElement)&&i.activeElement.blur()}},reset:function(){},saveEndEventProps:function(t){if(t&&t.type===n.endEventType){var e=t.changedTouches?t.changedTouches[0]:t;this._endEventProps=[e.clientX,e.clientY,e.screenX,e.screenY]}},checkClickEventProps:function(t){if(!this._endEventProps)return!1;for(var e=[t.clientX,t.clientY,t.screenX,t.screenY],i=!0,n=0;n<e.length;n++)if(Math.abs(this._endEventProps[n]-e[n])>1){i=!1;break}return delete this._endEventProps,i},clicked:function(){},touchesBegan:function(t){},touchesMoved:function(t){},touchesEnded:function(t){},touchesCanceled:function(t){},spaceBarKeyDown:function(t){},spaceBarKeyUp:function(t){},escapeKeyDown:function(t){},escapeKeyUp:function(t){},downArrowKeyUp:function(t){},downArrowKeyDown:function(t){},upArrowKeyUp:function(t){},upArrowKeyDown:function(t){},rightArrowKeyUp:function(t){},leftArrowKeyUp:function(t){},rightArrowKeyDown:function(t){},leftArrowKeyDown:function(t){},focused:function(t){},blurred:function(t){},pageDidFocus:function(t){},pageDidBlur:function(t){},updateTintColor:function(t){},removeEventListeners:function(){},addEventListeners:function(){},localeChanged:function(){},_clearLabels:function(){n.updateLabel(this.element,"")},_createListeners:function(){this._eventListener||(this._eventListener=new c(this)),this._windowEventListener||(this._windowEventListener=new u(this)),this._cancelFocusEventListener||(this._cancelFocusEventListener=new d(this))},_destroyListeners:function(){this._eventListener&&(this.element.removeEventListener(n.startEventType,this._eventListener),this.element.removeEventListener("click",this._eventListener),this._eventListener.destroy(),delete this._eventListener),this._windowEventListener&&(this._windowEventListener.destroy(),delete this._windowEventListener),this._cancelFocusEventListener&&(this._cancelFocusEventListener.destroy(),delete this._cancelFocusEventListener)},_addFocusAndBlurListeners:function(){this.element.addEventListener("focus",this._eventListener,!0),this.element.addEventListener("blur",this._eventListener,!0),window.addEventListener("focus",this._windowEventListener),window.addEventListener("blur",this._windowEventListener),this.hasFocus=n.containingDocumentOrShadowRoot(this.element).activeElement===this.element},_removeFocusAndBlurListeners:function(){this.element.removeEventListener("focus",this._eventListener,!0),this.element.removeEventListener("blur",this._eventListener,!0),window.removeEventListener(n.startEventType,this._cancelFocusEventListener,!0),window.removeEventListener("focus",this._windowEventListener),window.removeEventListener("blur",this._windowEventListener)},_addKeyboardListeners:function(){this.element.addEventListener("keydown",this._eventListener),this.element.addEventListener("keyup",this._eventListener)},_removeKeyboardListeners:function(){this.element.removeEventListener("keydown",this._eventListener),this.element.removeEventListener("keyup",this._eventListener)}}),o.EventTarget(l.prototype),c.prototype={destroy:function(){window.removeEventListener(n.startEventType,this._control._cancelFocusEventListener,!0),this._removeEventListeners(),delete this._control},handleEvent:function(t){switch(t.type){case"click":this._click(t);break;case n.startEventType:this._touchesBegan(t);break;case n.moveEventType:this._control.touchesMoved(t);break;case n.endEventType:this._removeEventListeners(),this._control.touchesEnded(t);break;case n.cancelEventType:this._removeEventListeners(),this._control.touchesCanceled(t);break;case"keydown":this._keyDown(t);break;case"keyup":this._keyUp(t);break;case"focus":this._focus(t);break;case"blur":this._blur(t);break;case r.Events.LocaleChanged:this._control.localeChanged(t)}},_click:function(t){this._swallowEvent(t),this._control.clicked(t)},_touchesBegan:function(t){this._swallowEvent(t),("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(0!==t.button||t.ctrlKey)||(window.addEventListener(n.moveEventType,this,!0),window.addEventListener(n.endEventType,this,!0),n.cancelEventType&&window.addEventListener(n.cancelEventType,this,!0),this._control.touchesBegan(t))},_keyDown:function(t){switch(t.keyCode){case a.KeyCodes.Escape:this._control.escapeKeyDown(t);break;case a.KeyCodes.SpaceBar:t.preventDefault(),this._control.spaceBarKeyDown(t);break;case a.KeyCodes.DownArrow:t.preventDefault(),this._control.downArrowKeyDown(t);break;case a.KeyCodes.UpArrow:t.preventDefault(),this._control.upArrowKeyDown(t);break;case a.KeyCodes.RightArrow:t.preventDefault(),this._control.rightArrowKeyDown(t);break;case a.KeyCodes.LeftArrow:t.preventDefault(),this._control.leftArrowKeyDown(t)}},_keyUp:function(t){switch(t.keyCode){case a.KeyCodes.Escape:this._control.escapeKeyUp(t);break;case a.KeyCodes.DownArrow:t.preventDefault(),this._control.downArrowKeyUp(t);break;case a.KeyCodes.UpArrow:t.preventDefault(),this._control.upArrowKeyUp(t);break;case a.KeyCodes.RightArrow:t.preventDefault(),this._control.rightArrowKeyUp(t);break;case a.KeyCodes.LeftArrow:t.preventDefault(),this._control.leftArrowKeyUp(t);break;case a.KeyCodes.SpaceBar:t.preventDefault(),this._control.spaceBarKeyUp(t)}},_focus:function(t){this._control.hasFocus||n.containingDocumentOrShadowRoot(this._control.element).activeElement===t.target&&(this._control.hasFocus=!0,this._control.classList.add(h.FOCUS),window.addEventListener(n.startEventType,this._control._cancelFocusEventListener,!0),this._control.focused(t))},_blur:function(t){this._control.hasFocus&&(this._control.hasFocus=!1,window.removeEventListener(n.startEventType,this._control._cancelFocusEventListener,!0),this._control.classList.remove(h.FOCUS),this._control.blurred(t))},_removeEventListeners:function(){window.removeEventListener(n.moveEventType,this,!0),window.removeEventListener(n.endEventType,this,!0),n.cancelEventType&&window.removeEventListener(n.cancelEventType,this,!0)},_swallowEvent:function(t){t.preventDefault(),t.stopPropagation()}},d.prototype={destroy:function(){delete this._control},handleEvent:function(t){this._control.blurFocusedElement(t)}},u.prototype={destroy:function(){delete this._control},handleEvent:function(t){switch(t.type){case"focus":this._control.pageHasFocus||(this._control.pageHasFocus=!0,this._control.pageDidFocus(t));break;case"blur":this._control.pageHasFocus=!1,this._control.pageDidBlur(t)}}},t.exports=l},2077:function(t,e,i){var n=i(1986),o=i(1952),a=i(1948),s=i(2076),r=i(2009),l=i(2078);t.exports=c;function h(t){this._control=t}function c(t,e,i){s.call(this,n.htmlElement("div",{role:"button",tabindex:"0"})),this.classList.add(d.CONTROL),this._delegate=new h(this),this._focusDelegate=i;var o=function(){var t=n.svgElement("path");return[n.createSVGIcon(t,{width:45,height:24}),t]}();this.element.appendChild(o[0]),this._iconElement=o[1],this._mapType=e,this._mapTypes=t,this._updateIcon(),this._updateLabels(),this.enabled=!0,this._isOpen=!1}h.prototype={constructor:h,get mapTypes(){return this._control.mapTypes},get mapType(){return this._control.mapType},set mapType(t){this._control.mapType=t}};var d={CONTROL:"mk-map-type-control",PRESSED:"mk-pressed"};c.EVENTS={MAP_TYPE_CHANGE:"map-type-change"},c.prototype=a.inheritPrototype(s,c,{get mapType(){return this._mapType},set mapType(t){t!==this._mapType&&(this._mapType=t,this._updateIcon(),this.popover.updateSelected(),this.dispatchEvent(new o.Event(c.EVENTS.MAP_TYPE_CHANGE)))},get mapTypes(){return this._mapTypes},localeChanged:function(t){this._updateLabels(),this.popover.updateLabels()},touchesBegan:function(t){this._pressed()},touchesEnded:function(t){this.reset()},clicked:function(t){this._toggle(!1)},touchesCanceled:function(t){this.reset()},spaceBarKeyDown:function(t){this._pressed()},spaceBarKeyUp:function(t){this.reset(),this._open(!0)},updateTintColor:function(t){this.tintColor=t,this._iconElement.style.fill=t},reset:function(){this.classList.remove(d.PRESSED),this._focusDelegate.controlWasReleased(this)},handleEvent:function(t){switch(t.type){case n.startEventType:this.popover.toggleFocusStyle(!1);var e=n.getShadowDOMTargetFromEvent(this.element,t);this.popover.element.contains(e)||this.element.contains(e)||this._close();break;case"keydown":if(this.popover.toggleFocusStyle(!0),a.isEscapeKey(t)){this._close();var i=n.containingDocumentOrShadowRoot(this.element).activeElement;i&&this.popover.element.contains(i)&&this.element.focus()}break;case"blur":this.popover.element.contains(t.relatedTarget)||this._close()}},didMoveToParent:function(t){t?(this.popover=new l(this._delegate),this.parent.insertAfter(this.popover,this)):(window.removeEventListener(n.startEventType,this,!0),window.removeEventListener("keydown",this,!0),this.popover.element.removeEventListener("blur",this,!0),this.popover.remove(),this.popover=null)},focused:function(t){this._focusDelegate.controlDidGetFocus(this)},blurred:function(t){this._focusDelegate.controlDidLoseFocus(this)},_updateLabels:function(){n.updateLabel(this,r.get("MapType.Tooltip"))},_toggle:function(t){this._isOpen?this._close():this._open(t)},_pressed:function(){this.classList.add(d.PRESSED),this._focusDelegate.controlWasPressed(this)},_open:function(t){this._isOpen||(this._isOpen=!0,this.popover.open(),this.popover.toggleFocusStyle(t),window.addEventListener(n.startEventType,this,!0),window.addEventListener("keydown",this,!0),this.popover.element.addEventListener("blur",this,!0))},_close:function(){this._isOpen&&(this._isOpen=!1,this.popover.close(),window.removeEventListener(n.startEventType,this,!0),window.removeEventListener("keydown",this,!0),this.popover.element.removeEventListener("blur",this,!0))},_handleLocaleChange:function(){this.children.forEach((function(t){var e=t.element.getAttribute("data-l10n-key");t.element.textContent=r.get(e)}))},_updateIcon:function(){this._iconElement.setAttribute("d",u[this._mapType])}});var u={standard:"M24.597 18.663V8.233L21.53 6.369a1.83 1.83 0 00-.413-.178v10.569l3.136 1.764c.06.03.116.058.171.083a.815.815 0 00.172.057zm-7.548-.178c.17 0 .356-.057.559-.171l2.615-1.416V6.285c-.06.026-.125.055-.197.089-.072.034-.14.07-.203.108l-2.958 1.695c-.199.11-.346.246-.44.41a1.118 1.118 0 00-.144.574v8.544c0 .25.07.442.207.577.137.136.324.203.561.203zm8.436.153a.641.641 0 00.204-.09l3.269-1.853c.203-.114.352-.251.447-.412.095-.161.143-.354.143-.578V7.18c0-.254-.07-.447-.21-.58-.14-.134-.332-.2-.577-.2-.17 0-.358.057-.565.17l-2.71 1.505v10.563z",hybrid:"M22.918 13.579c.13 0 .262-.023.393-.067.131-.044.275-.111.432-.2l4.951-2.875c.267-.157.456-.303.568-.438a.741.741 0 00.168-.49.724.724 0 00-.168-.475c-.112-.136-.301-.282-.568-.438L23.743 5.72a2.539 2.539 0 00-.432-.2 1.22 1.22 0 00-.79 0c-.129.045-.274.111-.435.2l-4.951 2.876c-.267.156-.456.302-.568.438a.724.724 0 00-.168.476c0 .19.056.353.168.489.112.135.301.28.568.438l4.951 2.875c.161.089.306.156.435.2.13.044.261.067.397.067zm0 3.135a.81.81 0 00.343-.076c.11-.05.237-.116.38-.197l5.409-3.192a.775.775 0 00.292-.28.656.656 0 00.095-.33.601.601 0 00-.12-.374.81.81 0 00-.267-.235l-5.847 3.377c-.055.034-.105.06-.152.08a.352.352 0 01-.133.028.366.366 0 01-.14-.029 1.063 1.063 0 01-.152-.08L16.78 12.03a.81.81 0 00-.267.235.601.601 0 00-.12.374c0 .11.032.22.098.33.065.11.164.203.295.28l5.402 3.192c.144.08.27.146.38.197.11.051.227.076.35.076zm0 2.94a.81.81 0 00.343-.077c.11-.05.237-.118.38-.203l5.409-3.186a.825.825 0 00.288-.277.644.644 0 00.099-.34.582.582 0 00-.12-.361.887.887 0 00-.267-.241l-5.847 3.383a2.55 2.55 0 01-.152.076.322.322 0 01-.133.032.335.335 0 01-.14-.032 2.55 2.55 0 01-.152-.076L16.78 14.97a.887.887 0 00-.267.241.582.582 0 00-.12.362c0 .118.032.231.098.34.065.107.164.2.295.275l5.402 3.187c.144.085.27.152.38.203.11.05.227.076.35.076z",satellite:"M22.915 18.923c.888 0 1.725-.169 2.51-.507a6.62 6.62 0 002.079-1.41 6.62 6.62 0 001.41-2.079 6.271 6.271 0 00.507-2.51c0-.889-.17-1.726-.508-2.51a6.583 6.583 0 00-1.41-2.076 6.682 6.682 0 00-2.081-1.41 6.26 6.26 0 00-2.514-.51c-.888 0-1.725.17-2.51.51a6.654 6.654 0 00-3.482 3.485 6.271 6.271 0 00-.508 2.511c0 .889.17 1.725.508 2.51a6.62 6.62 0 001.41 2.08c.6.6 1.293 1.07 2.078 1.409a6.271 6.271 0 002.51.507zm0-.92c-.762 0-1.48-.147-2.155-.441a5.732 5.732 0 01-1.781-1.21 5.687 5.687 0 01-1.206-1.78 5.37 5.37 0 01-.438-2.155c0-.762.146-1.479.438-2.152.209-.48.473-.92.794-1.32l.188-.222-.068.254a4.38 4.38 0 00-.127 1.04c0 .695.23 1.23.689 1.607.459.376 1.114.564 1.964.564.115 0 .196.04.245.121.048.08.041.171-.022.273a2.875 2.875 0 00-.311.584c-.055.157-.083.32-.083.489 0 .283.069.525.206.723.138.2.304.361.499.486a3.2 3.2 0 00.57.295l-.247.997c-.076.296-.039.53.111.704.15.174.348.26.594.26.245 0 .478-.114.698-.342l1.543-1.67c.258-.275.443-.524.555-.749.112-.224.168-.448.168-.672a1.11 1.11 0 00-.11-.426 3.165 3.165 0 00-.664-.958 1.378 1.378 0 00-.594-.337 3.345 3.345 0 00-.784-.076h-.342l-.35-.685.965-.362c.271.178.487.313.648.406.16.093.317.14.47.14.194 0 .347-.06.457-.178a.582.582 0 00.155-.435.742.742 0 00-.225-.485l-.99-1.048c-.064-.063-.096-.124-.096-.18 0-.058.028-.118.083-.182a4.83 4.83 0 00.431-.552c.144-.211.216-.442.216-.692a.813.813 0 00-.084-.357l-.045-.078.183.073c.675.292 1.27.695 1.784 1.21a5.709 5.709 0 011.21 1.78c.291.673.437 1.39.437 2.152a5.37 5.37 0 01-.438 2.155 5.687 5.687 0 01-1.206 1.78 5.732 5.732 0 01-1.78 1.21 5.336 5.336 0 01-2.155.44z"}},2078:function(t,e,i){var n=i(2079),o=i(1986),a=i(1948),s=i(2080),r=i(1997).Node,l=i(2009),h=["Standard","Hybrid","Satellite"];function c(t){n.call(this),this.classList.add(d.POP_OVER),this.delegate=t,this.buttonControls={},this.labels={},h.forEach(function(e){var i=new r,n=t.mapTypes[e]===t.mapType,a=new s(e,t);i.addChild(a);var h=new r(o.htmlElement("div",{"aria-hidden":"true",class:d.MAP_TYPE_LABEL}));h.element.textContent=l.get("Mode."+e),i.addChild(h),this.addChild(i),this.buttonControls[e]=a,this.labels[e]=h,n&&(this.selectedButtonControl=a)}.bind(this))}var d={POP_OVER:"mk-map-type-popover",MAP_TYPE_LABEL:"mk-map-type-label"};c.prototype=a.inheritPrototype(n,c,{open:function(){n.prototype.open.call(this),h.forEach(function(t){this.buttonControls[t].enabled=!0}.bind(this))},close:function(){n.prototype.close.call(this),h.forEach(function(t){this.buttonControls[t].enabled=!1}.bind(this))},focus:function(){this.selectedButtonControl.element.focus()},updateSelected:function(){h.forEach(function(t){var e=this.delegate.mapTypes[t]===this.delegate.mapType;this.buttonControls[t].setSelected(e),e&&(this.selectedButtonControl=this.buttonControls[t])}.bind(this))},updateLabels:function(){h.forEach(function(t){this.labels[t].element.textContent=l.get("Mode."+t)}.bind(this))}}),t.exports=c},2079:function(t,e,i){var n=i(1986),o=i(1948),a=i(1997).Node;function s(){a.call(this,n.htmlElement("div",{class:r.CONTROL,role:"dialog",tabindex:"-1"})),this.element.appendChild(n.createSVGIcon(n.svgElement("g",n.svgElement("rect",{y:12,x:0,height:2,width:30}),n.svgElement("path",{d:"M0 13v-.5c4.038 0 8.305-3.53 12.835-10.477.454-.71 1.005-1.137 1.564-1.326h.001a2.07 2.07 0 011.814.225c.273.175.505.407.68.68C21.525 8.829 25.881 12.5 30 12.5v.5"})),{class:r.ARROW,width:30,height:14}))}var r={CONTROL:"mk-popover",ARROW:"mk-popover-arrow",SHOWN:"mk-shown",WITH_FOCUS_STYLE:"mk-focus-style"};s.prototype=o.inheritPrototype(a,s,{open:function(){this.classList.add(r.SHOWN)},toggleFocusStyle:function(t){this.classList.toggle(r.WITH_FOCUS_STYLE,t)},handleEvent:function(t){this.classList.contains(r.SHOWN)&&this.focus()},focus:function(){this.element.focus()},close:function(){this.classList.remove(r.SHOWN)},didMoveToParent:function(t){t?this.element.addEventListener("transitionend",this):this.element.removeEventListener("transitionend",this)}}),t.exports=s},2080:function(t,e,i){var n=i(1986),o=i(1948),a=i(2076),s=i(2009),r=i(2018),l=i(1943);function h(t,e){this.delegate=e,this.mapType=t,this.enabled=!1;var i=e.mapTypes[t]===e.mapType,o=s.get("Mode."+t);a.call(this,n.htmlElement("div",{class:c.CONTROL+(i?" "+c.SELECTED:""),role:"radio","aria-checked":i,"aria-label":o,tabindex:0,title:o})),function(t,e){var i=[];return e[t]===e.Standard?(i.push(n.htmlElement("img",{class:c.LIGHT_ICON,role:"presentation",crossOrigin:n.getCorsAttribute(l.distUrlWithCredentials),src:d(t,!1)})),i.push(n.htmlElement("img",{class:c.DARK_ICON,role:"presentation",crossOrigin:n.getCorsAttribute(l.distUrlWithCredentials),src:d(t,!0)}))):i.push(n.htmlElement("img",{role:"presentation",crossOrigin:n.getCorsAttribute(l.distUrlWithCredentials),src:d(t,!1)})),i}(t,e.mapTypes).forEach(function(t){this.element.appendChild(t)}.bind(this))}var c={CONTROL:"mk-map-type-button-control",PRESSED:"mk-pressed",SELECTED:"mk-selected",LIGHT_ICON:"mk-light-icon",DARK_ICON:"mk-dark-icon"};function d(t,e){var i=["icons/map-type"];return i.push(t.toLowerCase()),e&&i.push("dark"),r.createImageUrl(n.imagePathForDevice([1,2],i.join("-"),".png"))}h.prototype=o.inheritPrototype(a,h,{setSelected:function(t){this.classList.toggle(c.SELECTED,t),this.setAttribute("aria-checked",t)},reset:function(){this.classList.remove(c.PRESSED)},localeChanged:function(t){var e=s.get("Mode."+this.mapType);this.setAttribute("title",e),this.setAttribute("aria-label",e)},touchesBegan:function(t){this._pressed()},touchesEnded:function(t){this.reset()},clicked:function(){this._select()},touchesCanceled:function(t){this.reset()},spaceBarKeyDown:function(t){this._pressed()},spaceBarKeyUp:function(t){this.reset(),this._select()},blurFocusedElement:function(){},_pressed:function(){this.classList.add(c.PRESSED)},_select:function(){this.delegate.mapType=this.delegate.mapTypes[this.mapType]}}),t.exports=h},2081:function(t,e,i){var n=i(2076),o=i(1969),a=i(1948),s=i(1986),r=i(2009),l=i(1976),h=i(2082),c=i(1972),d=i(1975),u=i(1988).FeatureVisibility,p=new d(170,20);function m(t){this._map=t,this.scene=new c.Scene,this.scene.size=p,this.node=this.scene.addChild(new h),this.node.size=p,this.node.position=new l(0,0),this.node.opacity=0,this.node.l10n=r,this.node.useMetric=t.useMetric,n.call(this,this.scene.element),this.classList.add("mk-scale"),this.element.setAttribute("aria-hidden","true"),this.size=p}m.prototype=a.inheritPrototype(n,m,{get shouldDisplayScale(){return this._map._showsScale===u.Visible||this._map._showsScale===u.Adaptive&&this._map.cameraIsZooming},updateTheme:function(t){this.node.theme=h.Themes[t]},update:function(){var t=this._map;if(this.node&&this.shouldDisplayScale){var e=t.renderingMapRect.origin.toCoordinate().latitude,i=t.renderingMapRect.size.width/o.mapUnitsPerMeterAtLatitude(e);i/t._visibleFrame.size.width*s.devicePixelRatio>=7500?this.hideIfNeeded(!0):(this.node.distance=i,this.node.useMetric=this._map.useMetric,this.node.setOpacityAnimated(1,!1))}},hideIfNeeded:function(t){!this.node||this.shouldDisplayScale&&!t||this.node.setOpacityAnimated(0,!0)},localeChanged:function(){this.node.useMetric=this._map.useMetric}}),t.exports=m},2082:function(t,e,i){t.exports=i(2083)},2083:function(t,e,i){"use strict";var n=i(2084),o=i(2085),a=i(2086),s=i(2088),r=i(1977),l=i(1981),h=i(1972),c=i(2091),d=i(1948);function u(){h.GroupNode.call(this),this._needsLayout=!1,this._layoutCanvas=document.createElement("canvas"),this._layoutContext=this._layoutCanvas.getContext("2d"),this._distance=0,this._mapWidth=0,this._theme=u.Themes.light,this._leftAligned=!1,this._l10n=null,this._segmentWidth=0,this._oldNumberOfSegments=0,this._legend={labels:[],unit:""},this._legendNode=this.addChild(new a),this._outlineNodes=[0,1].map((function(){return this.addChild(new s)}),this),this._activeOutlineNode=this._outlineNodes[0],this._outlineNodes[1].opacity=0,this._segmentNodes=[0,1,2].map((function(t){return this.addChild(new c)}),this),this._updateColors(),n(this,o.GlobalFadeDuration)}u.Themes={light:"Light",dark:"Dark"},u.prototype=d.inheritPrototype(h.GroupNode,u,{get layerBounds(){return new r(0,0,this.size.width,Math.max(this.size.height,48))},get distance(){return this._distance},set distance(t){Math.abs(t-this._distance)/this._distance<.01||(this._distance=t,this._computeSegments())},get mapWidth(){return this._mapWidth},set mapWidth(t){t!==this._mapWidth&&(this._mapWidth=t,this._computeSegments())},get theme(){return this._theme},set theme(t){this._theme=t,this._updateColors()},get l10n(){return this._l10n},set l10n(t){this._l10n&&this._l10n.removeEventListener(this._l10n.Events.LocaleChanged,this),this._l10n=t,t&&t.addEventListener(t.Events.LocaleChanged,this)},get useMetric(){return this._useMetric},set useMetric(t){this._useMetric!==t&&(this._useMetric=t,this._computeSegments())},get leftAligned(){return this._leftAligned},set leftAligned(t){this._leftAligned=t,this.needsLayout=!0},stringInfo:function(){return"ScaleNode<distance:"+Math.round(100*this.distance)/100+"m>"},get needsLayout(){return this._needsLayout},set needsLayout(t){this._needsLayout!==t&&(this._needsLayout=t,t&&l.scheduleASAP(this))},performScheduledUpdate:function(){this.needsLayout&&(this.layoutSubNodes(),this.needsLayout=!1)},layoutSubNodes:function(){for(var t=this._computeSegmentsRects(),e=0;e<o.MaximumNumberOfDisplayedSegments;e++){var i=t[this.leftAligned?e:t.length-1-e],n=this._segmentNodes[e];i?(n.position=i.origin,n.size=i.size,n.setOpacityAnimated(1,!0)):n.setOpacityAnimated(0,!0)}var a=r.unionOfRects(t).round();if(t.length!==this._oldNumberOfSegments){this._activeOutlineNode.setOpacityAnimated(0,!0);var s=0===this._outlineNodes.indexOf(this._activeOutlineNode)?1:0;this._activeOutlineNode=this._outlineNodes[s],this._activeOutlineNode.setOpacityAnimated(1,!0)}this._activeOutlineNode.position=a.origin,this._activeOutlineNode.size=a.size;var l=t[0];this._legendNode.segmentStart=l.origin.x,this._legendNode.segmentWidth=l.size.width,this._legendNode.size.width=this.size.width,this._legendNode.size.height=this.size.height,this._oldNumberOfSegments=t.length},handleEvent:function(t){this._computeSegments()},_updateColors:function(t){var e=this.theme===u.Themes.dark;this._legendNode.fillColor=e?o.LegendColorSatellite:o.LegendColorRegular,this._legendNode.strokeColor=e?o.LegendOuterStrokeColorSatellite:o.LegendOuterStrokeColorRegular;var i=e?[o.LightSegmentColorSatellite,o.DarkSegmentColorSatellite]:[o.DarkSegmentColorRegular,o.LightSegmentColorRegular];this._segmentNodes.forEach((function(t,n){t.fillColor=i[n%2],t.strokeColor=e?null:o.SegmentInnerStrokeColor}),this);var n=e?o.OutlineColorSatellite:o.OutlineColorRegular;this._outlineNodes.forEach((function(t){t.strokeColor=n}))},_computeSegments:function(){if(0!==this.size.width&&0!==this.mapWidth&&this._l10n){var t,e=this.size.width,i=this.mapWidth,n=this.distance*e/i,a=!this._useMetric,s=!1,r=1;a&&(n*=o.MetersToMiles)<o.FeetThreshold&&(s=!0,n*=o.MilesToFeet);for(var l=o.FirstMagicExponent,h=!1;!h&&l<o.LastMagicExponent;l++)h=o.MagicNumbers.some(d);this._segmentWidth=r?e/r:0;var c=t;a&&(s&&(t/=o.MilesToFeet),t*=o.MilesToMeters),this._computeLegend(t,c,s)}function d(e){return t=e*Math.pow(10,l),(r=n/t)>=o.MinimumNumberOfSegments&&r<o.MaximumNumberOfSegments}},_computeLegend:function(t,e,i){var n=0;this._useMetric?t>o.MetersThreshold?(this._legend.unit=this._l10n.get("Scale.Kilometer.Short"),n=t/1e3):(this._legend.unit=this._l10n.get("Scale.Meter.Short"),n=t):(this._legend.unit=i?this._l10n.get("Scale.Feet.Short"):this._l10n.get("Scale.Mile.Short"),n=e);for(var a=[],s=0;s<o.MaximumNumberOfSegments;s++){var r=s*n;a.push(r.toString())}this._legend.labels=a,this._legendNode.legend=this._legend,this.needsLayout=!0},_computeSegmentsRects:function(){for(var t=this._layoutContext,e=0,i=o.LegendHorizontalMargin+this._legendNode.measureTextOverflow(t,!0),n=this.size.height-o.LegendMarginBottom+o.LegendSpacing,a=this._segmentWidth,s=[],l=0;l<o.MaximumNumberOfDisplayedSegments;l++){var h=new r(i,n,a,o.SegmentThickness).round();if(s.push(h),i=h.origin.x+h.size.width,this._legendNode.numberOfSegments=s.length,i+a+(e=this._legendNode.measureTextOverflow(t))+o.LegendHorizontalMargin>this.size.width)break}0===this._oldNumberOfSegments&&(this._oldNumberOfSegments=s.length);var c=0;return this.leftAligned||(c=Math.round(this.size.width-i-e-o.LegendHorizontalMargin),s.forEach((function(t){t.origin.x+=c}))),s}}),t.exports=u},2084:function(t,e,i){"use strict";var n=i(1981),o=i(1986),a=i(1948);function s(t,e){if(!e)return this._targetOpacity=t,void(this.opacity=t);t!==this._targetOpacity&&(t!==this.opacity?(this._targetOpacity=t,this._startTime=Date.now(),this._startOpacity=this._opacity,n.scheduleOnNextFrame(this)):this._targetOpacity=t)}function r(){if("function"===typeof this.constructor.prototype.performScheduledUpdate&&this.constructor.prototype.performScheduledUpdate.call(this),null!==this._targetOpacity){if(this._targetOpacity===this.opacity)return this._startTime=null,this._startOpacity=null,void(this._targetOpacity=null);var t=Date.now()-this._startTime,e=this._targetOpacity-this._startOpacity,i=Math.abs(e*this._totalDurationMs),s=Math.min(t/i,1),r=o.easeInOut(s)*e+this._startOpacity;this.opacity=a.clamp(r,0,1),n.scheduleOnNextFrame(this)}}t.exports=function(t,e){return t._targetOpacity=null,t._startOpacity=null,t._startTime=null,t._totalDurationMs=e||300,t.setOpacityAnimated=s,t.performScheduledUpdate=r,t}},2085:function(t,e,i){"use strict";t.exports={GlobalFadeDuration:700,InnerTransitionDuration:200,MinimumNumberOfSegments:2,MaximumNumberOfSegments:5,MagicNumbers:[1.25,2.5,5],FirstMagicExponent:-3,LastMagicExponent:7,MaximumNumberOfDisplayedSegments:3,SegmentThickness:3,LegendHorizontalMargin:6,LegendMarginBottom:8,LegendSpacing:1,OutlineWidth:1,LightSegmentColorRegular:"rgba(255, 255, 255, 0.7)",DarkSegmentColorRegular:"rgba(0, 0, 0, 0.73)",OutlineColorRegular:"rgba(255, 255, 255, 0.5)",LightSegmentColorSatellite:"rgba(255, 255, 255, 0.8)",DarkSegmentColorSatellite:"rgba(178, 178, 178, 0.8)",OutlineColorSatellite:"rgba(0, 0, 0, 1)",SegmentInnerStrokeColor:"rgba(0, 0, 0, 0.2)",SegmentInnerStrokeWidth:.5,LegendFont:"9px '-apple-system-font', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif'",LegendColorRegular:"rgba(72, 69, 65, 1)",LegendOuterStrokeColorRegular:"rgba(255, 255, 255, 0.5)",LegendColorSatellite:"rgba(255, 255, 255, 1)",LegendOuterStrokeColorSatellite:"rgba(0, 0, 0, 1)",LegendOuterStrokeWidth:1,MetersThreshold:500,FeetThreshold:.25,MilesToMeters:1609.344,MetersToMiles:1/1609.344,MilesToFeet:5280}},2086:function(t,e,i){"use strict";var n=i(2087),o=i(1972),a=i(1948);function s(){o.BaseNode.call(this),this._legend=null,this._segmentWidth=0,this._segmentStart=0,this._numberOfSegments=0,this._fillColor=null,this._strokeColor=null,this._renderer=new n(this)}s.prototype=a.inheritPrototype(o.BaseNode,s,{get legend(){return this._legend},set legend(t){this._legend=t,this.needsDisplay=!0},get segmentStart(){return this._segmentStart},set segmentStart(t){this._segmentStart=t,this.needsDisplay=!0},get segmentWidth(){return this._segmentWidth},set segmentWidth(t){this._segmentWidth=t,this.needsDisplay=!0},get numberOfSegments(){return this._numberOfSegments},set numberOfSegments(t){this._numberOfSegments=t,this.needsDisplay=!0},get fillColor(){return this._fillColor},set fillColor(t){this._fillColor=t,this.needsDisplay=!0},get strokeColor(){return this._strokeColor},set strokeColor(t){this._strokeColor=t,this.needsDisplay=!0},stringInfo:function(){var t="~"+this.fillColor+"/"+this.strokeColor+"~ ";return this._legend?"LegendNode<labels:["+this._legend.labels.slice(0,this.numberOfSegments+1).join(", ")+"], unit:"+this._legend.unit+")> "+t:"LegendNode "+t},measureTextOverflow:function(t,e){return this._renderer.measureTextOverflow(t,e)}}),t.exports=s},2087:function(t,e,i){"use strict";var n=i(2085),o=i(1972),a=i(1948);function s(t){o.RenderItem.call(this,t)}s.prototype=a.inheritPrototype(o.RenderItem,s,{measureTextOverflow:function(t,e){var i,o=this._node;return o.legend?(t.font=n.LegendFont,i=e?o.legend.labels[0]:o.legend.labels[o.numberOfSegments],t.measureText(i).width/2+(e?0:t.measureText(" "+o.legend.unit).width)):0},draw:function(t){var e=this._node;if(e.legend){t.font=n.LegendFont,t.textAlign="center",t.textBaseline="bottom",t.lineWidth=n.LegendOuterStrokeWidth,t.fillStyle=e.fillColor,t.strokeStyle=e.strokeColor;for(var i=e.size.height-n.LegendMarginBottom-n.LegendSpacing,o=e.segmentStart,a=0;a<=e.numberOfSegments;a++){var s=e.legend.labels[a];t.strokeText(s,o,i),t.fillText(s,o,i),a===e.numberOfSegments?o+=t.measureText(s).width/2:o+=e.segmentWidth}var r=" "+e.legend.unit;t.textAlign="left",t.strokeText(r,o,i),t.fillText(r,o,i)}}}),t.exports=s},2088:function(t,e,i){"use strict";var n=i(2084),o=i(2085),a=i(2089),s=i(1948);function r(){a.call(this),n(this,o.InnerTransitionDuration),this.lineWidth=o.OutlineWidth}r.prototype=s.inheritPrototype(a,r,{stringInfo:function(){return"OutlineNode ~"+this.strokeColor+"~ "}}),t.exports=r},2089:function(t,e,i){"use strict";var n=i(2090),o=i(1972),a=i(1948);function s(){o.BaseNode.call(this),this._fillColor=null,this._strokeColor=null,this._lineWidth=null,this._innerStroke=!1,this._renderer=new n(this)}s.prototype=a.inheritPrototype(o.BaseNode,s,{get fillColor(){return this._fillColor},set fillColor(t){this._fillColor=t,this.needsDisplay=!0},get strokeColor(){return this._strokeColor},set strokeColor(t){this._strokeColor=t,this.needsDisplay=!0},get innerStroke(){return this._innerStroke},set innerStroke(t){this._innerStroke=t,this.needsDisplay=!0},get lineWidth(){return this._lineWidth},set lineWidth(t){this._lineWidth=t,this.needsDisplay=!0}}),t.exports=s},2090:function(t,e,i){"use strict";var n=i(1972),o=i(1948),a=i(1986);function s(t){n.RenderItem.call(this,t)}s.prototype=o.inheritPrototype(n.RenderItem,s,{draw:function(t){var e=this._node,i=e.fillColor,n=e.strokeColor,o=e.lineWidth;i&&(t.fillStyle=i,t.fillRect(0,0,e.size.width,e.size.height)),n&&o&&(o>=1||a.devicePixelRatio>1)&&(t.lineWidth=o,t.strokeStyle=n,e.innerStroke?t.strokeRect(o/2,o/2,e.size.width-o,e.size.height-o):t.strokeRect(-o/2,-o/2,e.size.width+o,e.size.height+o))}}),t.exports=s},2091:function(t,e,i){"use strict";var n=i(2084),o=i(2085),a=i(2089),s=i(1948);function r(){a.call(this),n(this,o.InnerTransitionDuration),this.lineWidth=o.SegmentInnerStrokeWidth,this.innerStroke=!0}r.prototype=s.inheritPrototype(a,r,{stringInfo:function(){return"SegmentNode ~"+this.fillColor+"~ "}}),t.exports=r},2092:function(t,e,i){var n=i(1986),o=i(1952),a=i(1948),s=i(2076),r=i(1997),l=i(2009);function h(){var t=n.htmlElement("div");s.call(this,t),this.classList.add(c.CONTROL),this._zoomInButton=n.htmlElement("div",{role:"button",tabindex:"0"}),this._zoomInButtonNode=new r.Node(this._zoomInButton),this._zoomInButtonNode.classList.add(c.BUTTON_ZOOM_IN),this._zoomInButton.appendChild(function(){var t=n.svgElement("path",{d:"M11.813 17.404c.4 0 .724-.33.724-.705v-3.974h3.872a.726.726 0 00.717-.723.73.73 0 00-.717-.724h-3.872V7.305a.72.72 0 00-.724-.705.724.724 0 00-.724.705v3.973H7.217a.739.739 0 00-.717.724c0 .4.343.723.717.723h3.872V16.7c0 .375.33.705.724.705z"});return n.createSVGIcon(t,{width:24,height:24})}()),t.appendChild(this._zoomInButton),t.appendChild(n.htmlElement("div",{class:c.BUTTON_DIVIDER})),this._zoomOutButton=n.htmlElement("div",{role:"button",tabindex:"0"}),this._zoomOutButtonNode=new r.Node(this._zoomOutButton),this._zoomOutButtonNode.classList.add(c.BUTTON_ZOOM_OUT),this._zoomOutButton.appendChild(function(){var t=n.svgElement("path",{d:"M16.325 12.75c.364 0 .675-.336.675-.75 0-.408-.31-.75-.675-.75h-8.65c-.352 0-.675.342-.675.75 0 .414.323.75.675.75h8.65z"});return n.createSVGIcon(t,{width:24,height:24})}()),t.appendChild(this._zoomOutButton),this._updateLabels()}t.exports=h;var c={CONTROL:"mk-zoom-controls",BUTTON_DIVIDER:"mk-divider",BUTTON_ZOOM_IN:"mk-zoom-in",BUTTON_ZOOM_OUT:"mk-zoom-out",PRESSED:"mk-pressed",PILL_PRESSED:"mk-pill-pressed",DISABLED:"mk-disabled"};function d(t,e){e?(t.classList.remove(c.DISABLED),t.element.removeAttribute("aria-disabled"),t.setAttribute("tabindex",0)):(t.classList.add(c.DISABLED),t.setAttribute("aria-disabled","true"),t.setAttribute("tabindex",-1))}h.EVENTS={ZOOM_START:"zoom-start",ZOOM_END:"zoom-end"},h.prototype=a.inheritPrototype(s,h,{_zoomInEnabled:!0,_zoomOutEnabled:!0,get zoomInEnabled(){return this._zoomInEnabled},set zoomInEnabled(t){this._enabled&&t===this._zoomInEnabled||(this._zoomInEnabled=this._enabled&&t,d(this._zoomInButtonNode,this._zoomInEnabled))},get zoomOutEnabled(){return this._zoomOutEnabled},set zoomOutEnabled(t){this._enabled&&t===this._zoomOutEnabled||(this._zoomOutEnabled=this._enabled&&t,d(this._zoomOutButtonNode,this._zoomOutEnabled))},localeChanged:function(t){this._updateLabels()},touchesBegan:function(t){this._pressed(t)},touchesEnded:function(t){this.saveEndEventProps(t),this.reset(t)},clicked:function(t){this.checkClickEventProps(t)||(this._pressed(t),this.reset(t))},touchesCanceled:function(t){this.reset(t)},focused:function(t){this.updateTintColor(this.tintColor),t.target.style.fill=n.focusColor},blurred:function(t){this.updateTintColor(this.tintColor)},spaceBarKeyDown:function(t){this._pressed(t)},spaceBarKeyUp:function(t){this.reset(t)},updateTintColor:function(t){this.tintColor=t,this._zoomInButton.firstChild.style.fill=t,this._zoomOutButton.firstChild.style.fill=t},reset:function(t){var e;if(this._zoomInButtonNode.classList.contains(c.PRESSED)?e=this._zoomInButtonNode:this._zoomOutButtonNode.classList.contains(c.PRESSED)&&(e=this._zoomOutButtonNode),e){e.classList.remove(c.PRESSED),this.classList.remove(c.PILL_PRESSED);var i=new o.Event(h.EVENTS.ZOOM_END);this.dispatchEvent(i)}window.removeEventListener(n.endEventType,this),n.supportsPointerEvents?window.removeEventListener("pointercancel",this):n.supportsTouches&&window.removeEventListener("touchcancel",this)},_clearLabels:function(t){n.updateLabel(this._zoomInButtonNode,""),n.updateLabel(this._zoomOutButtonNode,"")},_updateLabels:function(t){n.updateLabel(this._zoomInButtonNode,l.get("Zoom.In.Tooltip")),n.updateLabel(this._zoomOutButtonNode,l.get("Zoom.Out.Tooltip"))},_pressed:function(t){var e=this._findButtonNodeFromButtonDOMElement(n.parentNodeForSvgTarget(t.target));if(e&&!e.classList.contains(c.DISABLED)){if(this.hasFocus){var i=n.containingDocumentOrShadowRoot(this.element).activeElement;i!==e.element&&i.blur()}e.classList.add(c.PRESSED),this.classList.add(c.PILL_PRESSED);var a=new o.Event(h.EVENTS.ZOOM_START);a.zoomIn=e===this._zoomInButtonNode,this.dispatchEvent(a)}},_findButtonNodeFromButtonDOMElement:function(t){return t===this._zoomOutButton?this._zoomOutButtonNode:t===this._zoomInButton?this._zoomInButtonNode:null}})},2093:function(t,e,i){var n=i(1986),o=i(1952),a=i(1948),s=i(2076),r=i(2009),l=i(1997),h=i(2094);function c(t,e,i){s.call(this,n.htmlElement("div",{class:d.CONTROL,role:"button",tabindex:"0"})),this._wrapper=n.htmlElement("div",{class:d.WRAPPER}),this.element.appendChild(this._wrapper),this._arrowIconNode=new l.Node(n.createSVGIcon(n.svgElement("path"),{class:d.ARROW_ICON,viewBox:"0 0 45 24"})),this._waitingIconNode=new l.Node(function(){for(var t=[],e=0;e<8;++e)t.push(n.svgElement("rect",{x:-1.25,y:5,width:2.5,height:6,rx:1.25,transform:"rotate("+45*e+")"}));var i=["g",{transform:"scale("+2/3+", "+-2/3+")"}].concat(t);return n.createSVGIcon(n.svgElement.apply(null,i),{class:[d.WAITING_ICON,d.SCALED_OUT].join(" "),viewBox:"-22.5 -12 45 24"})}()),this._wrapper.appendChild(this._arrowIconNode.element),this._wrapper.appendChild(this._waitingIconNode.element),this._errorPopover=new h,this._updateLabels(),this._updateArrowIcon(),this._waitingIconBlades=this._waitingIconNode.element.querySelectorAll("rect"),this._map=t,this._rtl=e,this._focusDelegate=i}t.exports=c;var d={CONTROL:"mk-user-location-control",WRAPPER:"mk-user-location-control-wrapper",PRESSED:"mk-pressed",TRACKING:"mk-tracking",WAITING:"mk-waiting",DISABLED:"mk-disabled",WAITING_ICON:"mk-icon-waiting",ARROW_ICON:"mk-icon-arrow",SCALED_OUT:"mk-scaled-out"};c.States={Default:"default",Waiting:"waiting",Tracking:"tracking",Disabled:"disabled"},c.EVENTS={PRESSED:"pressed"},c.prototype=a.inheritPrototype(s,c,{_state:c.States.Default,_tintColor:"",get state(){return this._state},set state(t){this._state!==t&&(this._state=t,this.classList.toggle(d.TRACKING,this.isTrackingState()),this.classList.toggle(d.WAITING,this.isWaitingState()),this.classList.toggle(d.DISABLED,this.isDisabledState()),this.updateTintColor(this._tintColor),this.isWaitingState()?this._animateArrowIconOut():this._animateWaitingIconOut())},isDefaultState:function(){return this.state===c.States.Default},toDefaultState:function(){this.state=c.States.Default,this._updateArrowIcon(),this._closeErrorPopover()},isTrackingState:function(){return this.state===c.States.Tracking},toTrackingState:function(){this.state=c.States.Tracking,this._updateArrowIcon(),this._closeErrorPopover()},isWaitingState:function(){return this.state===c.States.Waiting},toWaitingState:function(){this.state=c.States.Waiting},isDisabledState:function(){return this.state===c.States.Disabled},toDisabledState:function(){this._map.tracksUserLocation&&this._map.userLocationAnnotation||(this.state=c.States.Disabled,this._updateArrowIcon(),this._openErrorPopover())},handleEvent:function(t){switch(t.type){case n.startEventType:var e=n.getShadowDOMTargetFromEvent(this.element,t);this._errorPopover.errorMessageElement.contains(e)||(this._closeErrorPopover(),window.removeEventListener(n.startEventType,this,!0));break;case"keydown":27===t.keyCode&&this._closeErrorPopover();break;case"blur":this._errorPopover.element.contains(t.relatedTarget)||this._closeErrorPopover()}},touchesBegan:function(t){this._pressed(t)},touchesEnded:function(){this.reset()},clicked:function(){this.dispatchEvent(new o.Event(c.EVENTS.PRESSED))},touchesCanceled:function(t){this.reset()},spaceBarKeyDown:function(t){this._pressed(t)},spaceBarKeyUp:function(t){this.reset(t),this.dispatchEvent(new o.Event(c.EVENTS.PRESSED))},updateTintColor:function(t){this._tintColor=t,this._arrowIconNode.element.querySelector("g").style.fill=this.isTrackingState()?"":t,this._waitingIconNode.element.querySelector("g").style.fill=t,this.element.style.backgroundColor=this.isTrackingState()?t:""},reset:function(){this.classList.contains(d.PRESSED)&&(this.classList.remove(d.PRESSED),this._focusDelegate.controlWasReleased(this),this.isDefaultState()||this.isDisabledState()?this.toWaitingState():this.toDefaultState()),delete this._mousedown,window.removeEventListener(n.endEventType,this),n.supportsPointerEvents?window.removeEventListener("pointercancel",this):n.supportsTouches&&window.removeEventListener("touchcancel",this)},localeChanged:function(t){this._updateLabels(),this._rtl=t.locale.rtl,this._errorPopover.update()},mapWasDestroyed:function(){delete this._map},focused:function(t){this._focusDelegate.controlDidGetFocus(this)},blurred:function(t){this._focusDelegate.controlDidLoseFocus(this)},didMoveToParent:function(t){t?this.parent.insertAfter(this._errorPopover,this):(this._closeErrorPopover(),this._errorPopover.remove())},_updateLabels:function(){n.updateLabel(this.element,r.get("Track.User.Location.Tooltip"))},_pressed:function(t){this.classList.add(d.PRESSED),this._focusDelegate.controlWasPressed(this)},_animateArrowIconOut:function(){this._arrowIconNode.classList.add(d.SCALED_OUT),this._waitingIconNode.classList.remove(d.SCALED_OUT)},_animateWaitingIconOut:function(){this._waitingIconNode.classList.add(d.SCALED_OUT),this._arrowIconNode.classList.remove(d.SCALED_OUT)},_openErrorPopover:function(){this._errorPopover.open(),window.addEventListener(n.startEventType,this,!0),window.addEventListener("keydown",this,!0),this._errorPopover.element.addEventListener("blur",this,!0)},_closeErrorPopover:function(){this._errorPopover.close(),window.removeEventListener(n.startEventType,this,!0),window.removeEventListener("keydown",this,!0),this._errorPopover.element.removeEventListener("blur",this,!0)},_updateArrowIcon:function(){this._arrowIconNode.element.querySelector("path").setAttribute("d",u[this.state])}});var u={default:"M24.675 17.91L29.48 7.512c.514-1.11-.349-1.847-1.409-1.358l-10.448 4.818c-.971.444-.768 1.802.342 1.809l4.723.019c.095 0 .127.038.127.133l.013 4.691c0 1.092 1.365 1.34 1.847.286zm-.711-1.448l.025-4.272c0-.387-.184-.577-.584-.577l-4.272.025c-.05 0-.07-.057-.012-.089l8.95-4.094c.076-.032.12.013.082.089l-4.1 8.925c-.025.063-.089.05-.089-.007z",disabled:"M27.112 12.641l2.368-5.129c.514-1.11-.349-1.847-1.409-1.358l-5.097 2.348.882.883 4.215-1.93c.076-.032.12.013.082.089l-1.93 4.208.89.89zm2.4 4.196a.51.51 0 000-.717l-9.934-9.934a.517.517 0 00-.724 0 .522.522 0 000 .717l9.947 9.934c.197.197.52.197.71 0zm-4.837 1.073l1.301-2.812-.882-.883-1.041 2.254c-.025.063-.089.05-.089-.007l.02-3.351-1.493-1.492-3.358.02c-.05 0-.07-.058-.012-.09l2.266-1.034-.876-.876-2.888 1.333c-.971.444-.768 1.802.342 1.809l4.723.019c.095 0 .127.038.127.133l.013 4.691c0 1.092 1.365 1.34 1.847.286z",tracking:"M24.675 17.91L29.48 7.512c.514-1.11-.349-1.847-1.409-1.358l-10.448 4.818c-.971.444-.768 1.802.342 1.809l4.723.019c.095 0 .127.038.127.133l.013 4.691c0 1.092 1.365 1.34 1.847.286z"}},2094:function(t,e,i){var n=i(2079),o=i(1948),a=i(1986),s=i(1997).Node,r=i(2009);function l(){n.call(this),this.classList.add(h.POP_OVER),this._errorMessageElement=this._createErrorMessageElement(),this._errorMessageNode=new s(this._errorMessageElement),this.update(),this.addChild(this._errorMessageNode)}var h={POP_OVER:"mk-user-location-error-popover",ERROR:"mk-error-message",ERROR_TEXT:"mk-error-text",ERROR_SUPPORT:"mk-error-support"};l.prototype=o.inheritPrototype(n,l,{get errorMessageElement(){return this._errorMessageElement},update:function(){this._errorMessageElement.getElementsByClassName(h.ERROR_TEXT)[0].textContent=r.get("Location.Error.Message")+" ",this._supportLink.textContent=r.get("Location.Error.Support.Label"),a.supportsTouches?this._supportLink.href="https://support.apple.com/HT203033":this._supportLink.href="https://support.apple.com/guide/mac-help/allow-apps-to-detect-the-location-of-your-mac-mh35873/mac"},_createErrorMessageElement:function(){var t=a.htmlElement("div",{class:h.ERROR});return this._supportLink=a.htmlElement("a",{class:h.ERROR_SUPPORT,target:"__blank"}),t.appendChild(a.htmlElement("span",{class:h.ERROR_TEXT})),t.appendChild(this._supportLink),t}}),t.exports=l},2095:function(t,e,i){var n=i(1986),o=i(1948),a=i(2076),s=i(2009),r=i(2018),l=i(1989),h=i(1997),c=i(1981),d=i(1943);function u(t){this.element=n.htmlElement("div"),a.call(this,this.element),this.classList.add("mk-rotation-control");var e=n.htmlElement("input",{class:"mk-rotation-slider",type:"range",min:0,max:360,value:0,"aria-label":s.get("Compass.Degrees.Plural",{n:0})});e.addEventListener("change",this),this._slider=e,this.element.appendChild(e),this._compassNode=new h.Node(n.htmlElement("div",{class:"mk-rotation-wrapper"},n.htmlElement("img",{role:"presentation"}))),this.element.appendChild(this._compassNode.element);var i=n.htmlElement("div");this._heading=i,this._headingNode=new h.Node(i),this._headingNode.classList.add("mk-heading"),this.element.appendChild(i),d.state===d.States.UNINITIALIZED?d.addEventListener(d.Events.Initialized,(function t(){d.removeEventListener(d.Events.Initialized,t),g(this._compassNode.element.firstChild)})):g(this._compassNode.element.firstChild),this._map=t,this._rotation=0,this._activeKeyRightAt=null,this._activeKeyLeftAt=null,this._updateLabels()}function p(t,e,i,n){var o=e-n,a=t-i;return t>i?e<n?90+m(Math.atan(o/a)):180-m(Math.atan(a/o)):e<n?360-m(Math.atan(a/o)):0!==a?270+m(Math.atan(o/a)):180}function m(t){return 180*t/Math.PI}function g(t){var e=r.createImageUrl("icons/compass-sheet.svg");t.crossOrigin=n.getCorsAttribute(d.distUrlWithCredentials),t.src=e}u.prototype=o.inheritPrototype(a,u,{enable:function(){a.prototype.enable.call(this),this._setupGestureRecognizers(),this._slider.removeAttribute("aria-disabled"),this._slider.setAttribute("tabindex",0)},disable:function(){a.prototype.disable.call(this),this._slider.setAttribute("aria-disabled","true"),this._slider.setAttribute("tabindex",-1)},set rotation(t){t===this._rotation||360===this._rotation&&0===t||(this._rotation=t,this._updateHeading(),this._updateSlider(),this._rotateTo(t))},localeChanged:function(t){this._updateLabels()},mapWasDestroyed:function(){delete this._map},updateTintColor:function(t){this.tintColor!==t&&(this.tintColor=t,this._heading.style.color=t)},updateImage:function(t,e){this._dprValue===t&&this._darkColorScheme===e||(this._dprValue=t,this._darkColorScheme=e,d.state!==d.States.UNINITIALIZED&&g(this._compassNode.element))},touchesEnded:function(t){this.saveEndEventProps(t)},clicked:function(t){this.checkClickEventProps(t)||this.reset(t)},reset:function(t){this._map&&this._center&&this._map.compassDraggingDidEnd(),this.classList.remove("mk-pressed"),!t||t.target!==this._tapRecognizer&&"click"!==t.type&&t.keyCode!==o.KeyCodes.UpArrow&&t.keyCode!==o.KeyCodes.SpaceBar||this._map.setRotationAnimated(0,!0),delete this._angleOffset,delete this._restricted},spaceBarKeyDown:function(t){this.reset(t)},upArrowKeyUp:function(t){this.reset(t)},rightArrowKeyDown:function(t){this._beginKeyboardRotate(t)},rightArrowKeyUp:function(t){this._endKeyboardRotate(t)},leftArrowKeyDown:function(t){this._beginKeyboardRotate(t)},leftArrowKeyUp:function(t){this._endKeyboardRotate(t)},performScheduledUpdate:function(){if(!this._activeKeyRightAt&&!this._activeKeyLeftAt)return!1;this._keyboardRotate(),c.scheduleOnNextFrame(this)},handleEvent:function(t){switch(t.target){case this._tapRecognizer:t.target.state===l.States.Recognized&&this.reset(t);break;case this._panRecognizer:t.target.state===l.States.Possible?this._beginDrag(t):t.target.state===l.States.Changed?this._drag(t):t.target.state!==l.States.Recognized&&t.target.state!==l.States.Failed||this.reset(t);break;case this._slider:this._handleSliderChange(t)}},fadeIn:function(){this.element.style.opacity=1},fadeOut:function(){this.element.style.opacity=0},_updateHeading:function(){var t=360-this._rotation,e=Math.round(t/360*4)%4;this._heading.textContent=s.get("Compass."+["NorthIndicator","EastIndicator","SouthIndicator","WestIndicator"][e])},_updateLabels:function(){this._updateHeading(),n.updateLabel(this.element,s.get("Compass.Tooltip"))},_rotateTo:function(t){return Math.abs(t)<5&&(t=0),this._compassNode.transform="rotate("+t+"deg)",t},_setupGestureRecognizers:function(){var t=new l.Tap;t.numberOfTapsRequired=1,t.addEventListener("statechange",this),t.target=this.element,this._tapRecognizer=t;var e=new l.Pan;e.addEventListener("statechange",this),e.target=this.element,this._panRecognizer=e},removeEventListeners:function(){this._tapRecognizer.removeEventListener("statechange",this),this._tapRecognizer.enabled=!1,this._tapRecognizer.target=null,this._panRecognizer.removeEventListener("statechange",this),this._panRecognizer.enabled=!1,this._panRecognizer.target=null,this._slider.removeEventListener("change",this)},_beginDrag:function(t){if(this._map.compassDraggingWillStart()){this.classList.add("mk-pressed");var e=this.element.getBoundingClientRect();this._center={x:e.right-e.width/2,y:e.bottom-e.height/2};var i=p(t.target.locationInClient().x,t.target.locationInClient().y,this._center.x,this._center.y);this._angleOffset=i-this._map.rotation,this._restricted=this._map.compassRotationWillStart()}},_drag:function(t){if(this._center&&!isNaN(this._angleOffset)){var e=p(t.target.locationInClient().x,t.target.locationInClient().y,this._center.x,this._center.y)-this._angleOffset;if(this._restricted){var i=o.mod(e,360),a=n.restrictRotation(i);e=i<180?a+.025*(i-a):a-.025*(a-i)}e=this._rotateTo(e),this._map.setRotationAnimated(e,!1,!0)}},_beginKeyboardRotate:function(t){var e=this._activeKeyRightAt&&t.keyCode===o.KeyCodes.RightArrow,i=this._activeKeyLeftAt&&t.keyCode===o.KeyCodes.LeftArrow;if(!e&&!i){var n=Date.now();t.keyCode===o.KeyCodes.RightArrow?this._activeKeyRightAt=n:this._activeKeyLeftAt=n,this._timeAtLastFrame=n,c.scheduleASAP(this),this._restricted=this._map.compassRotationWillStart()}},_keyboardRotate:function(){var t=Math.max(this._activeKeyRightAt||0,this._activeKeyLeftAt||0);if(t&&this._timeAtLastFrame){var e=Date.now(),i=this._rotation,a=e-this._timeAtLastFrame;i+=(4*(t===this._activeKeyLeftAt)?-1:1)*(60*a)/1e3,this._map.rotation=this._restricted?n.restrictRotation(o.mod(i,360)):i,this._timeAtLastFrame=Date.now()}},_endKeyboardRotate:function(t){t.keyCode===o.KeyCodes.RightArrow?this._activeKeyRightAt=null:this._activeKeyLeftAt=null,this._activeKeyRightAt||this._activeKeyLeftAt||(this._timeAtLastFrame=null),this._map.compassRotationDidEnd()},_handleSliderChange:function(t){var e=parseInt(t.target.value);if(e!==this._rotation){var i=e;0===e?i=360:360===e&&(i=0),this.rotation=i,this._map.setRotationAnimated(i,!1,!0)}},_updateSlider:function(){var t=Math.round(this._rotation);this._slider.value=t;var e=s.get(1===t?"Compass.Degrees.Single":"Compass.Degrees.Plural",{n:t});this._slider.setAttribute("aria-label",e)}}),t.exports=u},2096:function(t,e){t.exports='@media (inverted-colors){:host(.mk-controls-container) img{filter:initial}}:host(.mk-controls-container) *{box-sizing:content-box}:host(.mk-controls-container) ::selection{background:0 0}.mk-error-message{font-family:"-apple-system-font","Helvetica Neue",Helvetica,Arial,sans-serif;font-size:13px;width:200px;padding:10px;pointer-events:auto}.mk-error-support{white-space:nowrap}:host(.mk-controls-container) :focus{outline:0}.mk-logo-control .mk-logo{vertical-align:bottom;width:auto}:host(.mk-controls-container) div.mk-logo-control img.mk-logo{width:82px;height:24px;margin:0}:host(.mk-controls-container) div.mk-logo-control img.mk-logo.mk-logo-autonavi.mk-logo-autonavi{width:68px;height:45px}.mk-legal-controls{height:16px;padding:0 9px;margin:2px;border-radius:5px;pointer-events:auto;z-index:1;text-align:center;vertical-align:middle;line-height:12px;cursor:pointer}.mk-legal-controls .mk-legal{display:inline-block;font:9px "-apple-system-font","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:500;text-decoration:underline;pointer-events:none;white-space:nowrap}.mk-zoom-controls{width:48px;height:24px;border-radius:9px;pointer-events:auto}.mk-zoom-controls .mk-zoom-in .mk-icon,.mk-zoom-controls .mk-zoom-out .mk-icon{pointer-events:none;opacity:.55}.mk-zoom-controls .mk-zoom-in.mk-pressed .mk-icon,.mk-zoom-controls .mk-zoom-in:focus .mk-icon,.mk-zoom-controls .mk-zoom-out.mk-pressed .mk-icon,.mk-zoom-controls .mk-zoom-out:focus .mk-icon{opacity:.85}@media not all and (hover:none){.mk-zoom-controls .mk-zoom-in:hover .mk-icon,.mk-zoom-controls .mk-zoom-out:hover .mk-icon{opacity:.85}}.mk-zoom-controls .mk-zoom-in.mk-disabled .mk-icon,.mk-zoom-controls .mk-zoom-out.mk-disabled .mk-icon{opacity:.2}.mk-zoom-controls .mk-zoom-in,.mk-zoom-controls .mk-zoom-out{position:absolute;z-index:2;width:24px;height:24px;cursor:pointer}.mk-zoom-controls .mk-divider{position:absolute;left:23px;width:2px;height:24px;box-sizing:border-box;z-index:100}.mk-top-right-controls-container{border-radius:9px;height:24px}:host(.mk-controls-container) .mk-map-type-control,:host(.mk-controls-container) .mk-user-location-control{cursor:pointer;height:24px;width:45px;pointer-events:auto;display:inline-block;position:relative}:host(.mk-controls-container) .mk-user-location-control .mk-icon{position:absolute;left:0;height:24px;width:45px;transition:transform .2s ease-in-out}:host(.mk-controls-container) .mk-pill-focus .mk-map-type-control,:host(.mk-controls-container) .mk-pill-focus .mk-user-location-control{width:44px}:host(.mk-controls-container) .mk-user-location-control .mk-scaled-out{transform:scale(0)}:host(.mk-controls-container) .mk-user-location-control .mk-icon.mk-icon-waiting rect{animation:.8s infinite mk-spinner}:host(.mk-controls-container) .mk-user-location-control .mk-icon.mk-icon-waiting rect:nth-child(2){animation-delay:-.1s}:host(.mk-controls-container) .mk-user-location-control .mk-icon.mk-icon-waiting rect:nth-child(3){animation-delay:-.2s}:host(.mk-controls-container) .mk-user-location-control .mk-icon.mk-icon-waiting rect:nth-child(4){animation-delay:-.3s}:host(.mk-controls-container) .mk-user-location-control .mk-icon.mk-icon-waiting rect:nth-child(5){animation-delay:-.4s}:host(.mk-controls-container) .mk-user-location-control .mk-icon.mk-icon-waiting rect:nth-child(6){animation-delay:-.5s}:host(.mk-controls-container) .mk-user-location-control .mk-icon.mk-icon-waiting rect:nth-child(7){animation-delay:-.6s}:host(.mk-controls-container) .mk-user-location-control .mk-icon.mk-icon-waiting rect:nth-child(8){animation-delay:-.7s}@keyframes mk-spinner{0%{opacity:1}88%{opacity:.15}}:host(.mk-controls-container) .mk-map-type-control .mk-icon,:host(.mk-controls-container) .mk-user-location-control .mk-icon{pointer-events:none;opacity:.55}:host(.mk-controls-container) .mk-map-type-control.mk-pressed .mk-icon,:host(.mk-controls-container) .mk-map-type-control:focus .mk-icon,:host(.mk-controls-container) .mk-map-type-control:hover .mk-icon,:host(.mk-controls-container) .mk-user-location-control.mk-pressed .mk-icon,:host(.mk-controls-container) .mk-user-location-control:focus .mk-icon,:host(.mk-controls-container) .mk-user-location-control:hover .mk-icon{opacity:.85}@media (hover:none){:host(.mk-controls-container) .mk-map-type-control:hover:not(.mk-pressed):not(:focus) .mk-icon,:host(.mk-controls-container) .mk-user-location-control:hover:not(.mk-pressed):not(:focus) .mk-icon{opacity:.55}}:host(.mk-controls-container) .mk-popover{visibility:hidden;transform:scale(.5);opacity:0;border-radius:10px;transition:.2s opacity cubic-bezier(.25,.1,.25,1),.2s visibility step-end,.2s transform step-end;will-change:transform,opacity,visibility;border-width:1px;border-style:solid;cursor:default}:host(.mk-controls-container) .mk-popover.mk-shown{visibility:visible;pointer-events:auto;transform:none;opacity:1;transition:.2s transform cubic-bezier(.25,.1,.25,1.3),.2s opacity cubic-bezier(.25,.1,.25,1.3)}:host(.mk-controls-container) .mk-popover-arrow path{stroke-width:1px}:host(.mk-controls-container) .mk-map-type-popover{width:241px;padding:20px 20px 0 20px}:host(.mk-controls-container) .mk-map-type-popover>div{width:67px;display:inline-block}:host(.mk-controls-container) .mk-map-type-label{margin-top:10px;margin-bottom:17px;text-align:center;font:13px/16px "-apple-system-font",HelveticaNeue-Medium,Helvetica,Arial,sans-serif}.mk-map-type-button-control{position:relative;cursor:pointer;width:65px;height:52px;border-radius:8px;overflow:hidden;margin:1px}.mk-map-type-button-control img{width:65px;height:52px}.mk-map-type-button-control::after{content:"";position:absolute;width:65px;height:52px;top:0;left:0}:host(.mk-controls-container) .mk-map-type-button-control img.mk-dark-icon,:host(.mk-controls-container.mk-color-scheme-dark) .mk-map-type-button-control img.mk-light-icon{display:none}:host(.mk-controls-container.mk-color-scheme-dark) .mk-map-type-button-control img.mk-dark-icon{display:inline}.mk-style-helper{opacity:0;pointer-events:none}.mk-rotation-control{width:48px;height:48px;cursor:-webkit-grab;cursor:grab;pointer-events:auto;border-radius:24px;overflow:hidden;line-height:0;transition:opacity .1s cubic-bezier(.19,1,.22,1)}.mk-rotation-control.mk-pressed{cursor:-webkit-grabbing;cursor:grabbing}@supports ((backdrop-filter:blur(30px)) or (-webkit-backdrop-filter:blur(30px))){.mk-focus .mk-zoom-in,.mk-focus .mk-zoom-out,.mk-legal-controls.mk-focus,.mk-pill-focus .mk-map-type-control,.mk-pill-focus .mk-user-location-control,.mk-pill-pressed .mk-map-type-control,.mk-pill-pressed .mk-user-location-control,.mk-pill-pressed .mk-zoom-in,.mk-pill-pressed .mk-zoom-out,.mk-rotation-control,.mk-top-right-controls-container:not(.mk-pill-pressed):not(.mk-pill-focus):not(:empty),.mk-zoom-controls:not(.mk-pill-pressed):not(.mk-focus){-webkit-backdrop-filter:blur(30px);backdrop-filter:blur(30px)}}.mk-rotation-control>.mk-rotation-wrapper{width:48px;height:48px;position:absolute;will-change:transform;overflow:hidden}.mk-rotation-control>.mk-rotation-wrapper>img{width:96px;height:96px;position:absolute}.mk-rotation-control.mk-focus>.mk-rotation-wrapper>img,.mk-rotation-control.mk-pressed>.mk-rotation-wrapper>img,.mk-rotation-control>.mk-rotation-wrapper:hover>img{left:-48px}:host(.mk-dark-mode) .mk-rotation-control>.mk-rotation-wrapper>img{top:-48px}.mk-rotation-control .mk-heading{font:15.5px "-apple-system-font",HelveticaNeue-Medium,Helvetica,Arial,sans-serif;font-weight:500;line-height:19px;position:absolute;top:14.5px;left:0;width:100%;overflow:hidden;text-overflow:clip;text-align:center;opacity:.55}.mk-rotation-control.mk-focus .mk-heading,.mk-rotation-control.mk-pressed .mk-heading,.mk-rotation-control:hover .mk-heading{opacity:.85}@media (hover:none){.mk-rotation-control:not(.mk-focus):not(.mk-pressed)>.mk-rotation-wrapper:hover{background-position-x:0}.mk-rotation-control:not(.mk-focus):not(.mk-pressed):hover .mk-heading{opacity:.55}}.mk-rotation-control .mk-rotation-slider{position:absolute;left:0;width:100%;height:15px;top:-30px}:host(.mk-controls-container.mk-dragging-annotation) .mk-legal-controls,:host(.mk-controls-container.mk-dragging-annotation) .mk-map-type-control,:host(.mk-controls-container.mk-dragging-annotation) .mk-rotation-control,:host(.mk-controls-container.mk-dragging-annotation) .mk-rotation-control input,:host(.mk-controls-container.mk-dragging-annotation) .mk-user-location-control,:host(.mk-controls-container.mk-dragging-annotation) .mk-zoom-in,:host(.mk-controls-container.mk-dragging-annotation) .mk-zoom-out{cursor:none}'},2097:function(t,e){t.exports=".mk-rotation-control,.mk-top-right-controls-container:not(.mk-pill-pressed):not(.mk-pill-focus):not(:empty),.mk-zoom-controls{box-shadow:0 0 0 .5px rgba(0,0,0,.05)}.mk-focus .mk-zoom-in,.mk-focus .mk-zoom-out,.mk-pill-focus .mk-map-type-control,.mk-pill-focus .mk-user-location-control,.mk-pill-pressed .mk-map-type-control,.mk-pill-pressed .mk-user-location-control,.mk-pill-pressed .mk-zoom-in,.mk-pill-pressed .mk-zoom-out,.mk-rotation-control,.mk-top-right-controls-container:not(.mk-pill-pressed):not(.mk-pill-focus):not(:empty),.mk-zoom-controls:not(.mk-pill-pressed):not(.mk-focus){background-color:#fff}.mk-map-type-control.mk-pressed,.mk-rotation-control.mk-pressed,.mk-user-location-control.mk-pressed,.mk-zoom-controls .mk-zoom-in.mk-pressed:not(.mk-disabled),.mk-zoom-controls .mk-zoom-out.mk-pressed:not(.mk-disabled){background-color:#e5e5e5}.mk-legal-controls.mk-focus,.mk-map-type-control:focus,.mk-rotation-control.mk-focus,.mk-user-location-control:focus,.mk-zoom-controls.mk-focus .mk-zoom-in:focus,.mk-zoom-controls.mk-focus .mk-zoom-out:focus{background-color:#cce5ff}.mk-map-type-control.mk-focus.mk-pressed,.mk-rotation-control.mk-focus.mk-pressed,.mk-user-location-control.mk-focus.mk-pressed,.mk-zoom-controls.mk-focus .mk-zoom-in.mk-pressed:focus,.mk-zoom-controls.mk-focus .mk-zoom-out.mk-pressed:focus{background-color:#7fbdff}.mk-legal-controls.mk-focus,.mk-map-type-control:focus,.mk-pill-focus .mk-map-type-control,.mk-pill-focus .mk-user-location-control,.mk-rotation-control.mk-focus,.mk-user-location-control:focus,.mk-zoom-controls.mk-focus{box-shadow:0 0 0 2px #007cff}.mk-zoom-controls.mk-focus .mk-divider{border-left:2px solid #007cff}.mk-map-type-control .mk-icon,.mk-user-location-control .mk-icon,.mk-zoom-controls .mk-icon{fill:#000}:host(.mk-controls-container) .mk-popover{background-color:#efefef;color:#000;border-color:transparent;box-shadow:0 5px 10px 0 rgba(0,0,0,.3)}:host(.mk-controls-container) .mk-popover-arrow{fill:#efefef}.mk-error-message{color:#333}.mk-error-message a{color:#007aff}.mk-error-message a:visited{color:#af52de}.mk-legal-controls .mk-legal{color:rgba(0,0,0,.7);text-shadow:0 0 1px rgba(255,255,255,.85)}.mk-rotation-control .mk-heading{color:#000}.mk-popover .mk-map-type-button-control{box-shadow:0 0 0 .5px rgb(0,0,0,.14)}.mk-popover .mk-map-type-button-control.mk-selected{box-shadow:0 0 0 2px #007cff}.mk-popover.mk-focus-style .mk-map-type-button-control:focus{box-shadow:0 0 0 4px rgba(0,124,255,.4)}.mk-popover.mk-focus-style .mk-map-type-button-control.mk-selected:focus{box-shadow:0 0 0 2px #007cff,0 0 0 4px rgba(0,124,255,.4)}.mk-map-type-button-control.mk-pressed::after{background-color:rgba(0,0,0,.25)}@supports ((backdrop-filter:blur(30px)) or (-webkit-backdrop-filter:blur(30px))){.mk-focus .mk-zoom-in,.mk-focus .mk-zoom-out,.mk-pill-focus .mk-map-type-control,.mk-pill-focus .mk-user-location-control,.mk-pill-pressed .mk-map-type-control,.mk-pill-pressed .mk-user-location-control,.mk-pill-pressed .mk-zoom-in,.mk-pill-pressed .mk-zoom-out,.mk-rotation-control,.mk-top-right-controls-container:not(.mk-pill-pressed):not(.mk-pill-focus):not(:empty),.mk-zoom-controls:not(.mk-pill-pressed):not(.mk-focus){background-color:rgba(255,255,255,.75)}.mk-map-type-control.mk-pressed,.mk-rotation-control.mk-pressed,.mk-user-location-control.mk-pressed,.mk-zoom-controls .mk-zoom-in.mk-pressed:not(.mk-disabled),.mk-zoom-controls .mk-zoom-out.mk-pressed:not(.mk-disabled){background-color:rgba(229,229,229,.6)}.mk-legal-controls.mk-focus,.mk-map-type-control.mk-focus,.mk-rotation-control.mk-focus,.mk-user-location-control.mk-focus,.mk-zoom-controls.mk-focus .mk-zoom-in:focus,.mk-zoom-controls.mk-focus .mk-zoom-out:focus{background-color:rgba(204,229,255,.6)}.mk-map-type-control.mk-focus.mk-pressed,.mk-rotation-control.mk-focus.mk-pressed,.mk-user-location-control.mk-focus.mk-pressed,.mk-zoom-controls.mk-focus .mk-zoom-in.mk-pressed:focus,.mk-zoom-controls.mk-focus .mk-zoom-out.mk-pressed:focus{background-color:rgb(127,189,255,.6)}}:host(.mk-dark-mode) .mk-rotation-control,:host(.mk-dark-mode) .mk-top-right-controls-container:not(.mk-pill-pressed):not(.mk-pill-focus):not(:empty),:host(.mk-dark-mode) .mk-zoom-controls{box-shadow:0 0 0 .5px rgba(255,255,255,.05)}:host(.mk-dark-mode) .mk-focus .mk-zoom-in,:host(.mk-dark-mode) .mk-focus .mk-zoom-out,:host(.mk-dark-mode) .mk-pill-focus .mk-map-type-control,:host(.mk-dark-mode) .mk-pill-focus .mk-user-location-control,:host(.mk-dark-mode) .mk-pill-pressed .mk-map-type-control,:host(.mk-dark-mode) .mk-pill-pressed .mk-user-location-control,:host(.mk-dark-mode) .mk-pill-pressed .mk-zoom-in,:host(.mk-dark-mode) .mk-pill-pressed .mk-zoom-out,:host(.mk-dark-mode) .mk-rotation-control,:host(.mk-dark-mode) .mk-top-right-controls-container:not(.mk-pill-pressed):not(.mk-pill-focus):not(:empty),:host(.mk-dark-mode) .mk-zoom-controls:not(.mk-pill-pressed):not(.mk-focus){background-color:#121212}:host(.mk-dark-mode) .mk-map-type-control.mk-pressed,:host(.mk-dark-mode) .mk-user-location-control.mk-pressed,:host(.mk-dark-mode) .mk-zoom-controls .mk-zoom-in.mk-pressed:not(.mk-disabled),:host(.mk-dark-mode) .mk-zoom-controls .mk-zoom-out.mk-pressed:not(.mk-disabled){background-color:#2a2a2a}:host(.mk-dark-mode) .mk-legal-controls.mk-focus,:host(.mk-dark-mode) .mk-map-type-control.mk-focus,:host(.mk-dark-mode) .mk-rotation-control.mk-focus,:host(.mk-dark-mode) .mk-user-location-control.mk-focus,:host(.mk-dark-mode) .mk-zoom-controls.mk-focus .mk-zoom-in:focus,:host(.mk-dark-mode) .mk-zoom-controls.mk-focus .mk-zoom-out:focus{background-color:#0c3159}:host(.mk-dark-mode) .mk-map-type-control.mk-focus.mk-pressed,:host(.mk-dark-mode) .mk-rotation-control.mk-focus.mk-pressed,:host(.mk-dark-mode) .mk-user-location-control.mk-focus.mk-pressed,:host(.mk-dark-mode) .mk-zoom-controls.mk-focus .mk-zoom-in.mk-pressed:focus,:host(.mk-dark-mode) .mk-zoom-controls.mk-focus .mk-zoom-out.mk-pressed:focus{background-color:#0366cf}:host(.mk-dark-mode) .mk-legal-controls.mk-focus,:host(.mk-dark-mode) .mk-map-type-control:focus,:host(.mk-dark-mode) .mk-pill-focus .mk-map-type-control,:host(.mk-dark-mode) .mk-pill-focus .mk-user-location-control,:host(.mk-dark-mode) .mk-rotation-control.mk-focus,:host(.mk-dark-mode) .mk-user-location-control:focus,:host(.mk-dark-mode) .mk-zoom-controls.mk-focus{box-shadow:0 0 0 2px #007cff}:host(.mk-dark-mode) .mk-map-type-control .mk-icon,:host(.mk-dark-mode) .mk-user-location-control .mk-icon,:host(.mk-dark-mode) .mk-zoom-controls .mk-icon{fill:#fff}:host(.mk-controls-container.mk-dark-mode) .mk-popover{background-color:#363636;color:#fff;border-color:#5a5c64}:host(.mk-controls-container.mk-dark-mode) .mk-popover-arrow{fill:#363636}:host(.mk-controls-container.mk-dark-mode) .mk-popover-arrow path{stroke:#5a5c64}:host(.mk-dark-mode) .mk-error-message{color:rgba(255,255,255,.85)}:host(.mk-dark-mode) .mk-error-message a{color:#0a84ff}:host(.mk-dark-mode) .mk-error-message a:visited{color:#bf5af2}:host(.mk-dark-mode) .mk-legal-controls .mk-legal{color:rgba(255,255,255,.9);text-shadow:0 0 1px rgba(0,0,0,.5),0 0 10px rgba(0,0,0,1)}:host(.mk-dark-mode) .mk-rotation-control .mk-heading{color:#fff}:host(.mk-dark-mode) .mk-popover .mk-map-type-button-control:not(:focus):not(.mk-selected),:host(.mk-dark-mode) .mk-popover:not(.mk-focus-style) .mk-map-type-button-control:focus:not(.mk-selected){box-shadow:0 0 0 .5px rgb(255,255,255,.3)}@supports ((backdrop-filter:blur(30px)) or (-webkit-backdrop-filter:blur(30px))){:host(.mk-dark-mode) .mk-focus .mk-zoom-in,:host(.mk-dark-mode) .mk-focus .mk-zoom-out,:host(.mk-dark-mode) .mk-pill-focus .mk-map-type-control,:host(.mk-dark-mode) .mk-pill-focus .mk-user-location-control,:host(.mk-dark-mode) .mk-pill-pressed .mk-map-type-control,:host(.mk-dark-mode) .mk-pill-pressed .mk-user-location-control,:host(.mk-dark-mode) .mk-pill-pressed .mk-zoom-in,:host(.mk-dark-mode) .mk-pill-pressed .mk-zoom-out,:host(.mk-dark-mode) .mk-rotation-control,:host(.mk-dark-mode) .mk-top-right-controls-container:not(.mk-pill-pressed):not(.mk-pill-focus):not(:empty),:host(.mk-dark-mode) .mk-zoom-controls:not(.mk-pill-pressed):not(.mk-focus){background-color:rgba(18,18,18,.6)}:host(.mk-dark-mode) .mk-map-type-control.mk-pressed,:host(.mk-dark-mode) .mk-rotation-control.mk-pressed,:host(.mk-dark-mode) .mk-type-control.mk-pressed,:host(.mk-dark-mode) .mk-user-location-control.mk-pressed,:host(.mk-dark-mode) .mk-zoom-controls .mk-zoom-in.mk-pressed:not(.mk-disabled),:host(.mk-dark-mode) .mk-zoom-controls .mk-zoom-out.mk-pressed:not(.mk-disabled){background-color:rgba(42,42,42,.6)}:host(.mk-dark-mode) .mk-legal-controls.mk-focus,:host(.mk-dark-mode) .mk-map-type-control.mk-focus,:host(.mk-dark-mode) .mk-rotation-control.mk-focus,:host(.mk-dark-mode) .mk-user-location-control.mk-focus,:host(.mk-dark-mode) .mk-zoom-controls.mk-focus .mk-zoom-in:focus,:host(.mk-dark-mode) .mk-zoom-controls.mk-focus .mk-zoom-out:focus{background-color:rgba(12,49,89,.6)}:host(.mk-dark-mode) .mk-map-type-control.mk-focus.mk-pressed,:host(.mk-dark-mode) .mk-rotation-control.mk-focus.mk-pressed,:host(.mk-dark-mode) .mk-user-location-control.mk-focus.mk-pressed,:host(.mk-dark-mode) .mk-zoom-controls.mk-focus .mk-zoom-in.mk-pressed:focus,:host(.mk-dark-mode) .mk-zoom-controls.mk-focus .mk-zoom-out.mk-pressed:focus{background-color:rgb(3,102,207,.6)}}"},2098:function(t,e){t.exports=".mk-scale{position:absolute;top:0;left:0;vertical-align:top}:host(.mk-controls-container) .mk-popover{position:absolute;top:38px;right:-1px}:host(.mk-controls-container) .mk-popover-arrow{position:absolute;top:-13px}.mk-top-right-controls-container{position:absolute;top:9px;right:9px;direction:ltr}:host(.mk-controls-container:not(.mk-rtl)) .mk-top-right-controls-container .mk-control:first-child{border-top-left-radius:9px;border-bottom-left-radius:9px}:host(.mk-controls-container:not(.mk-rtl)) .mk-top-right-controls-container .mk-control:nth-last-child(2){border-top-right-radius:9px;border-bottom-right-radius:9px}:host(.mk-controls-container) .mk-pill-focus .mk-user-location-control{margin-right:1px}:host(.mk-controls-container) .mk-pill-focus .mk-map-type-control{margin-left:1px}:host(.mk-controls-container) .mk-popover.mk-user-location-error-popover{transform-origin:calc(100% - 69px) -12.416px}:host(.mk-controls-container) .mk-popover.mk-map-type-popover,:host(.mk-controls-container) .mk-popover.mk-user-location-error-popover:last-child{transform-origin:calc(100% - 24px) -12.416px}:host(.mk-controls-container) .mk-popover.mk-user-location-error-popover>.mk-popover-arrow{right:52.5px}:host(.mk-controls-container) .mk-popover.mk-map-type-popover>.mk-popover-arrow,:host(.mk-controls-container) .mk-popover.mk-user-location-error-popover:last-child>.mk-popover-arrow{right:10px}:host(.mk-controls-container) .mk-map-type-popover>div:not(:last-child){margin-right:20px}:host(.mk-rtl) .mk-top-right-controls-container{left:9px;right:auto;direction:rtl}:host(.mk-controls-container.mk-rtl) .mk-top-right-controls-container .mk-control:first-child{border-top-right-radius:9px;border-bottom-right-radius:9px}:host(.mk-controls-container.mk-rtl) .mk-top-right-controls-container .mk-control:nth-last-child(2){border-top-left-radius:9px;border-bottom-left-radius:9px}:host(.mk-controls-container.mk-rtl) .mk-pill-focus .mk-user-location-control{margin-left:1px;margin-right:0}:host(.mk-controls-container.mk-rtl) .mk-pill-focus .mk-map-type-control{margin-right:1px;margin-left:0}:host(.mk-controls-container.mk-rtl) .mk-popover{right:auto;left:-1px}:host(.mk-controls-container.mk-rtl) .mk-popover.mk-user-location-error-popover{transform-origin:69px -12.416px}:host(.mk-controls-container.mk-rtl) .mk-popover.mk-map-type-popover,:host(.mk-controls-container.mk-rtl) .mk-popover.mk-user-location-error-popover:last-child{transform-origin:24px -12.416px}:host(.mk-controls-container.mk-rtl) .mk-popover.mk-user-location-error-popover>.mk-popover-arrow{right:auto;left:52.5px}:host(.mk-controls-container.mk-rtl) .mk-popover.mk-map-type-popover>.mk-popover-arrow,:host(.mk-controls-container.mk-rtl) .mk-popover.mk-user-location-error-popover:last-child>.mk-popover-arrow{right:auto;left:10px}:host(.mk-controls-container.mk-rtl) .mk-map-type-popover>div:not(:last-child){margin-left:20px;margin-right:0}.mk-bottom-left-controls-container,.mk-bottom-right-controls-container{position:absolute;bottom:9px}.mk-rotation-control,.mk-zoom-controls{position:absolute;bottom:0}.mk-legal-controls,.mk-logo-control{position:absolute;bottom:-4px}.mk-bottom-right-controls-container{right:9px}.mk-bottom-left-controls-container{left:9px}:host(.mk-reduce-margin) .mk-bottom-right-controls-container{right:0}:host(.mk-reduce-margin) .mk-bottom-left-controls-container{left:4px}.mk-logo-control{left:0}:host(.mk-controls-container) div.mk-logo-control img.mk-logo.mk-logo-autonavi.mk-logo-autonavi{margin:0 0 -6px -9px}.mk-legal-controls,.mk-rotation-control,.mk-zoom-controls{right:0;left:auto}.mk-bottom-left-controls-container .mk-legal-controls{right:auto}.mk-zoom-controls .mk-zoom-in{border-top-right-radius:inherit;border-bottom-right-radius:inherit;right:0}.mk-zoom-controls .mk-zoom-out{border-top-left-radius:inherit;border-bottom-left-radius:inherit;left:0}.mk-rotation-control~.mk-legal-controls,.mk-rotation-control~.mk-zoom-controls,.mk-zoom-controls~.mk-legal-controls{right:57px;left:auto}.mk-bottom-left-controls-container .mk-legal-controls:nth-child(2){left:60px}.mk-rotation-control~.mk-zoom-controls~.mk-legal-controls{right:114px;left:auto}:host(.mk-rtl) .mk-bottom-right-controls-container{left:9px;right:auto}:host(.mk-rtl) .mk-bottom-left-controls-container{left:auto;right:9px}:host(.mk-rtl.mk-reduce-margin) .mk-bottom-right-controls-container{left:0;right:auto}:host(.mk-rtl.mk-reduce-margin) .mk-bottom-left-controls-container{left:auto;right:4px}:host(.mk-rtl) .mk-logo-control{left:auto;right:0}:host(.mk-rtl.mk-controls-container) div.mk-logo-control img.mk-logo.mk-logo-autonavi.mk-logo-autonavi{margin:0 -9px -6px 0}:host(.mk-rtl) .mk-zoom-controls .mk-zoom-in{border-top-left-radius:inherit;border-bottom-left-radius:inherit;border-top-right-radius:initial;border-bottom-right-radius:initial;right:auto;left:0}:host(.mk-rtl) .mk-zoom-controls .mk-zoom-out{border-top-left-radius:initial;border-bottom-left-radius:initial;border-top-right-radius:inherit;border-bottom-right-radius:inherit;right:0;left:auto}:host(.mk-rtl) .mk-legal-controls,:host(.mk-rtl) .mk-rotation-control,:host(.mk-rtl) .mk-zoom-controls{left:0;right:auto}:host(.mk-rtl) .mk-bottom-left-controls-container .mk-legal-controls{left:auto}:host(.mk-rtl) .mk-rotation-control~.mk-legal-controls,:host(.mk-rtl) .mk-rotation-control~.mk-zoom-controls,:host(.mk-rtl) .mk-zoom-controls~.mk-legal-controls{left:57px;right:auto}:host(.mk-rtl) .mk-bottom-left-controls-container .mk-legal-controls:nth-child(2){right:60px}:host(.mk-rtl) .mk-rotation-control~.mk-zoom-controls~.mk-legal-controls{left:114px;right:auto}"},2099:function(t,e,i){var n=i(1971),o=i(1948),a=i(1961),s=i(1970);function r(t,e){s(this,r)&&(Object.defineProperty(this,"_impl",{value:Object.create(n.prototype)}),n.call(this._impl,this,t,e))}window.DOMPoint||(window.DOMPoint=i(2100)),r.MapTypes=n.MapTypes,r.ColorSchemes=n.ColorSchemes,r.Distances=n.Distances,r.prototype=o.inheritPrototype(a.EventTarget,r,{get padding(){return this._impl.padding},set padding(t){this._impl.padding=t},get isScrollEnabled(){return this._impl.isScrollEnabled},set isScrollEnabled(t){this._impl.isScrollEnabled=t},get isZoomEnabled(){return this._impl.isZoomEnabled},set isZoomEnabled(t){this._impl.isZoomEnabled=t},get showsZoomControl(){return this._impl.showsZoomControl},set showsZoomControl(t){this._impl.showsZoomControl=t},get showsScale(){return this._impl.showsScale},set showsScale(t){this._impl.showsScale=t},get mapType(){return this._impl.getMapTypeWithEmphasis()},set mapType(t){this._impl.setMapTypeWithEmphasis(t)},get colorScheme(){return this._impl.colorScheme},set colorScheme(t){this._impl.colorScheme=t},get distances(){return this._impl.distances},set distances(t){this._impl.distances=t},get _allowWheelToZoom(){return this._impl._allowWheelToZoom},set _allowWheelToZoom(t){this._impl._allowWheelToZoom=t},get _showsTileInfo(){return this._impl._showsTileInfo},set _showsTileInfo(t){this._impl._showsTileInfo=t},get _showsDefaultTiles(){return this._impl._showsDefaultTiles},set _showsDefaultTiles(t){this._impl._showsDefaultTiles=t},get _landCoverStartUp(){return this._impl._landCoverStartUp},set _landCoverStartUp(t){this._impl._landCoverStartUp=t},get _startUpMode(){return this._impl._startUpMode},set _startUpMode(t){this._impl._startUpMode=t},get tileOverlays(){return this._impl.tileOverlays},set tileOverlays(t){this._impl.tileOverlays=t},addTileOverlay:function(t){return this._impl.addTileOverlay(t)},addTileOverlays:function(t){return this._impl.addTileOverlays(t)},removeTileOverlay:function(t){return this._impl.removeTileOverlay(t)},removeTileOverlays:function(t){return this._impl.removeTileOverlays(t)},get showsMapTypeControl(){return this._impl.showsMapTypeControl},set showsMapTypeControl(t){this._impl.showsMapTypeControl=t},get showsUserLocationControl(){return this._impl.showsUserLocationControl},set showsUserLocationControl(t){this._impl.showsUserLocationControl=t},get showsPointsOfInterest(){return this._impl.showsPointsOfInterest},set showsPointsOfInterest(t){this._impl.showsPointsOfInterest=t},get pointOfInterestFilter(){return this._impl.pointOfInterestFilter},set pointOfInterestFilter(t){this._impl.pointOfInterestFilter=t},get element(){return this._impl.element},set element(t){this._impl.element=t},get visibleMapRect(){return this._impl.visibleMapRect},set visibleMapRect(t){this._impl.visibleMapRect=t},setVisibleMapRectAnimated:function(t,e){return this._impl.setVisibleMapRectAnimated(t,e)},get region(){return this._impl.region},set region(t){this._impl.region=t},setRegionAnimated:function(t,e){return this._impl.setRegionAnimated(t,e)},get isRotationAvailable(){return this._impl.isRotationAvailable},set isRotationAvailable(t){this._impl.isRotationAvailable=t},get isRotationEnabled(){return this._impl.isRotationEnabled},set isRotationEnabled(t){this._impl.isRotationEnabled=t},get rotation(){return this._impl.rotation},set rotation(t){this._impl.rotation=t},get showsCompass(){return this._impl.showsCompass},set showsCompass(t){this._impl.showsCompass=t},setRotationAnimated:function(t,e){return this._impl.setRotationAnimated(t,e)},get center(){return this._impl.center},set center(t){this._impl.center=t},setCenterAnimated:function(t,e){return this._impl.setCenterAnimated(t,e)},get cameraZoomRange(){return this._impl.cameraZoomRange},set cameraZoomRange(t){this._impl.cameraZoomRange=t},setCameraZoomRangeAnimated:function(t,e){return this._impl.setCameraZoomRangeAnimated(t,e)},get cameraDistance(){return this._impl.cameraDistance},set cameraDistance(t){this._impl.cameraDistance=t},setCameraDistanceAnimated:function(t,e){return this._impl.setCameraDistanceAnimated(t,e)},get cameraBoundary(){return this._impl.cameraBoundary},set cameraBoundary(t){this._impl.cameraBoundary=t},setCameraBoundaryAnimated:function(t,e){return this._impl.setCameraBoundaryAnimated(t,e)},get overlays(){return this._impl.overlays},set overlays(t){this._impl.overlays=t},get selectedOverlay(){return this._impl.selectedOverlay},set selectedOverlay(t){this._impl.selectedOverlay=t},addOverlay:function(t){return this._impl.addOverlay(t)},addOverlays:function(t){return this._impl.addOverlays(t)},removeOverlay:function(t){return this._impl.removeOverlay(t)},removeOverlays:function(t){return this._impl.removeOverlays(t)},topOverlayAtPoint:function(t){return this._impl.topOverlayAtPoint(t)},overlaysAtPoint:function(t){return this._impl.overlaysAtPoint(t)},get annotations(){return this._impl.annotations},set annotations(t){this._impl.annotations=t},get selectedAnnotation(){return this._impl.selectedAnnotation},set selectedAnnotation(t){this._impl.selectedAnnotation=t},addAnnotation:function(t){return this._impl.addAnnotation(t)},addAnnotations:function(t){return this._impl.addAnnotations(t)},removeAnnotation:function(t){return this._impl.removeAnnotation(t)},removeAnnotations:function(t){return this._impl.removeAnnotations(t)},showItems:function(t,e){return this._impl.showItems(t,e)},addItems:function(t){return this._impl.addItems(t)},removeItems:function(t){return this._impl.removeItems(t)},annotationsInMapRect:function(t){return this._impl.annotationsInMapRect(t)},updateSize:function(t){return this._impl.updateSize(t)},convertCoordinateToPointOnPage:function(t){return this._impl.convertCoordinateToPointOnPage(t)},convertPointOnPageToCoordinate:function(t){return this._impl.convertPointOnPageToCoordinate(t)},get showsUserLocation(){return this._impl.showsUserLocation},set showsUserLocation(t){this._impl.showsUserLocation=t},get userLocationAnnotation(){return this._impl.userLocationAnnotation},get tracksUserLocation(){return this._impl.tracksUserLocation},set tracksUserLocation(t){this._impl.tracksUserLocation=t},get tintColor(){return this._impl.tintColor},set tintColor(t){this._impl.tintColor=t},destroy:function(){this._impl.destroy()},get annotationForCluster(){return this._impl.annotationForCluster},set annotationForCluster(t){this._impl.annotationForCluster=t}}),t.exports=r},2100:function(t,e,i){"use strict";function n(t,e,i,n){1===arguments.length&&t&&"object"===typeof t?("x"in t&&(this.x=t.x),"y"in e&&(this.y=t.y),"z"in t&&(this.z=t.z),"w"in t&&(this.w=t.w)):arguments.length>0&&(this.x=t,arguments.length>1&&(this.y=e,arguments.length>2&&(this.z=i,arguments.length>3&&(this.w=n))))}n.prototype={_x:0,_y:0,_z:0,_w:1,get x(){return this._x},set x(t){if(null===t||isNaN(t))throw new Error("[DOMPoint] `"+t+"` set for x is not a number");this._x=t},get y(){return this._y},set y(t){if(null===t||isNaN(t))throw new Error("[DOMPoint] `"+t+"` set for y is not a number");this._y=t},get z(){return this._z},set z(t){if(null===t||isNaN(t))throw new Error("[DOMPoint] `"+t+"` set for z is not a number");this._z=t},get w(){return this._w},set w(t){if(null===t||isNaN(t))throw new Error("[DOMPoint] `"+t+"` set for w is not a number");this._w=t},matrixTransform:function(t){return console.warn("DOMPoint.matrixTransform is not implemented yet."),this}},t.exports=n},2101:function(t,e){t.exports=".mk-map-view{width:100%;height:100%;overflow:hidden;-webkit-tap-highlight-color:transparent}.mk-map-view.mk-dragging-annotation{cursor:none}.mk-map-view.mk-disable-all-gestures{touch-action:none}.mk-map-view.mk-disable-pinch-gestures{touch-action:pan-x pan-y}.mk-map-view.mk-disable-zoom-gestures{touch-action:manipulation}.mk-map-view.mk-disable-pan-gestures{touch-action:none;touch-action:pinch-zoom}div.mk-map-view.mk-map-view img,div.mk-map-view.mk-map-view svg{margin:0;padding:0}.mk-annotation-container,.mk-map-view{z-index:0}.mk-map-view>*{position:absolute;left:0;-webkit-user-select:none;-moz-user-select:none}.mk-map-view .rt-root{letter-spacing:.3px}.mk-controls-container{position:absolute;overflow:hidden;top:0;bottom:0;left:0;right:0;z-index:3;pointer-events:none}.mk-map-view .mk-annotation-container,.mk-map-view .mk-controls-container{-ms-user-select:text}.mk-map-view.mk-panning ::selection{background:0 0}.mk-map-view.mk-dragging-cursor{cursor:pointer;cursor:-moz-grabbing;cursor:-webkit-grabbing;cursor:grabbing}.mk-map-view>iframe{width:100%;height:100%;pointer-events:none;opacity:0;border:0}"},2102:function(t,e,i){i(1966),t.exports={OverlaysController:i(2103),LayerItemsController:i(2104),ItemCollection:i(2109),mapkit:{Style:i(2111),LineGradient:i(2113),CircleOverlay:i(2115),PolylineOverlay:i(2124),PolygonOverlay:i(2128),TileOverlay:i(2025).TileOverlay}}},2103:function(t,e,i){var n=i(2104),o=i(2105),a=i(2106),s=i(2108),r=i(1948),l=i(1986),h=i(1960),c=i(1981),d=i(1988),u=i(1987).Tints;function p(t){n.call(this,t),this._node=new o(this),this._fadeAnimationController=new s}p.Overlay=a,p.prototype=r.inheritPrototype(n,p,{itemConstructor:a,itemName:"overlay",capitalizedItemName:"Overlay",get map(){return this._map},isItemExposed:function(t){return t!==this._userLocationAccuracyRingOverlay},removeUserLocationAccuracyRingOverlay:function(){this._userLocationAccuracyRingOverlay&&(this.removeAnyItem(this._userLocationAccuracyRingOverlay),delete this._userLocationAccuracyRingOverlay)},removedReferenceToMap:function(){this._items.forEach((function(t){t._impl.setMap(null)}))},mapCameraDidChange:function(){0!==this._items.length&&(c.scheduleASAP(this),this._deletePreviousPointForPickingItem())},overlayPropertyDidChange:function(t,e){switch(e){case"selected":t.selected?this.selectedItem=t:this.selectedItem=null,this._map.overlaySelectionDidChange(t),c.scheduleASAP(this);break;case"style":case"visible":case"geometry":c.scheduleASAP(this)}},fadeOverlayTo:function(t,e){this._fadeAnimationController.fadeOverlayTo(t,e)},updateUserLocationAccuracyRingOverlay:function(t){t.coordinate&&(this._userLocationAccuracyRingOverlay?this._userLocationAccuracyRingOverlay.updateForUserLocation(t):this._userLocationAccuracyRingOverlay=this.addItem(new p.AccuracyRingOverlay(t)))},addedItem:function(t,e){n.prototype.addedItem.call(this,t,e),t._impl.setMap(this._map.public),t.selected&&(this.selectedItem=t),c.scheduleASAP(this)},removedItem:function(t){t._impl.setMap(null),n.prototype.removedItem.call(this,t),c.scheduleASAP(this)},pickableItemsCloseToPoint:function(t,e,i){var n=document.createElement("canvas"),o=n.getContext("2d"),a=n.width=n.height=1,s=this._map.camera,r=a/2,h=e.x-r,c=e.y-r;o.translate(-h,-c);var d="number"===typeof i?i:this._selectionDistance/l.devicePixelRatio,u=!1;return t.filter((function(t){return!!t._impl.shown&&(u&&(o.clearRect(h,c,n.width,n.height),u=!1),t._impl.node._renderer.render(o,s,d),u=!0,!!o.getImageData(Math.floor(r),Math.floor(r),1,1).data[3])}),this).reverse()},performScheduledUpdate:function(){var t=this.map;if(t){for(var e=t.camera.toRenderingMapRect(),i=t.worldSize,n=Math.ceil(r.log2(i)),o=[],a=this._items,s=0,l=a.length;s<l;++s){var h=a[s];if(h._impl.shown=h._impl.visibleAfterClipping(e,!0,i,n,!0),h===this._userLocationAccuracyRingOverlay){var c=t.mapType,p=c===d.MapTypes.Satellite||c===d.MapTypes.Hybrid?"satellite":t.colorScheme===u.Dark?"dark":"light";this._userLocationAccuracyRingOverlay.updateIsShown(t.region,t.worldSize,p)}h._impl.shown&&!h.selected&&(o.push(h._impl.node),h._impl.node.needsDisplay=!0)}var m=this.selectedItem;m&&m._impl.shown&&(o.push(m._impl.node),m._impl.node.needsDisplay=!0),this._node.children=o}}}),h.jsModules.AccuracyRingOverlay?p.AccuracyRingOverlay=h.jsModules.AccuracyRingOverlay:h.addEventListener("load",(function t(e){e.jsModules.AccuracyRingOverlay&&(p.AccuracyRingOverlay=e.jsModules.AccuracyRingOverlay,h.removeEventListener("load",t))})),t.exports=p},2104:function(t,e,i){var n=i(1969),o=i(1948),a=n.MapRect,s=n.CoordinateSpan,r=n.MapPoint,l=i(2005),h=i(2004),c=i(1961),d=new s(.001,.001),u=new l(12,12,12,12);function p(t){this._map=t,this._items=[]}p.checkShowItemsParameters=function(t,e){return o.checkArray(t,"[MapKit] Map.showItems expects an array of items as its first parameter."),e=o.checkOptions(e,"object","[MapKit] Map.showItems expects an object as optional second parameter."),Object.keys(e).forEach((function(t){switch(t){case"animate":break;case"padding":o.checkInstance(e.padding,l,"[MapKit] Map.showItems expects a Padding object for `options.padding`.");break;case"minimumSpan":o.checkInstance(e.minimumSpan,s,"[MapKit] Map.showItems expects a CoordinateSpan for `options.minimumSpan`.");break;case"cameraDistance":o.checkType(e.cameraDistance,"number","[MapKit] Map.showItems expects a number for `options.cameraDistance`.");break;default:console.warn("[MapKit] `"+t+"` is not a valid option of Map.showItems.")}})),e},p.getRegionForItems=function(t,e,i){for(var o=i.padding||u,s=i.minimumSpan||d,c=0,p=0,m=0,g=0,f=[],_=0,y=e.length;_<y;++_){var v=e[_];if(v.map===t.public){var b=v._impl._boundingRect||v._impl.boundingRectAtScale&&v._impl.boundingRectAtScale(1);if(b){if(v._impl.style){var w=v._impl.style._impl.halfStrokeWidthAtResolution();c=Math.max(c,w),p=Math.max(p,w),m=Math.max(m,w),g=Math.max(g,w)}f.push(b)}else{v._impl.updateLayout(!0);var C=v._impl.delegate.paddingForAnnotation(v);c=Math.max(c,C.top),p=Math.max(p,C.right),m=Math.max(m,C.bottom),g=Math.max(g,C.left),f.push(new a(v._impl.x,v._impl.y,0,0))}}}if(0===f.length)return null;o=new l(o.top+c,o.right+p,o.bottom+m,o.left+g);var k=function(t,e){var i=t.toCoordinateRegion();if(i.span.latitudeDelta>=e.latitudeDelta&&i.span.longitudeDelta>=e.longitudeDelta)return t;i.span.latitudeDelta=Math.max(i.span.latitudeDelta,e.latitudeDelta),i.span.longitudeDelta=Math.max(i.span.longitudeDelta,e.longitudeDelta);var o=i.span.latitudeDelta/2,s=i.span.longitudeDelta/2,l=new r(n.convertLongitudeToX(i.center.longitude-s),n.convertLatitudeToY(i.center.latitude+o)),h=new r(n.convertLongitudeToX(i.center.longitude+s),n.convertLatitudeToY(i.center.latitude-o));return l.x>h.x&&l.x--,new a(l.x,l.y,Math.min(h.x-l.x,1),h.y-l.y)}(h.boundingRectForSortedRects(f.sort((function(t,e){return t.minX()-e.minX()}))),s);return t.padMapRect(k,o,i.cameraDistance)},p.setRegionForItems=function(t,e,i){if(t.ensureRenderingFrame().size.height<=0||t.ensureRenderingFrame().size.width<=0)return!1;if(0===e.length)return!0;var n=!!i.animate,o=p.getRegionForItems(t,e,i);return!o||(t.setVisibleMapRectAnimated(o,n),!0)},p.prototype={constructor:p,_map:null,_selectedItem:null,_selectionDistance:10,get node(){return this._node},get items(){return this._items.filter(this.isItemExposed,this)},set items(t){o.checkArray(t,"[MapKit] Map."+this.itemName+"s expected an array of "+this.itemName+"s, but got `"+t+"` instead."),t.forEach((function(t,e){o.checkInstance(t,this.itemConstructor,"[MapKit] Map."+this.itemName+"s expected an "+this.itemName+" at index "+e+", but got `"+t+"` instead.")}),this),t=t.filter((function(t){return!t.map||t.map._impl===this._map||(console.warn("[MapKit] Map."+this.capitalizedItemName+"s: "+this.itemName+" is already in another map."),!1)}),this);var e=[].concat(this._items);t=[].concat(this._items.filter((function(t){return!this.isItemExposed(t)}),this),t);for(var i=0,n=0,a=!1;i<t.length;)e[n]!==t[i]?e[n]&&-1===t.indexOf(e[n])?(this.removedItem(e[n],!0),a=!0,n++):(t[i].map&&t[i].map._impl===this._map?e.splice(e.indexOf(t[i]),1):(this.addedItem(t[i],!0),a=!0),i++):(i++,n++);for(;n<e.length;)this.removedItem(e[n],!0),a=!0,n++;this._items=t,a&&this.manyItemsChanged(t,!0)},get selectedItem(){return this._selectedItem},set selectedItem(t){if(t!==this._selectedItem){if(null!=t&&(o.checkInstance(t,this.itemConstructor,"[MapKit] Map.selected"+this.capitalizedItemName+" expected an "+this.itemName+" or `null`, but got `"+t+"` instead."),t.map!==this._map.public))throw new Error("[MapKit] Map.selected"+this.capitalizedItemName+" cannot be set to an "+this.itemName+" that is not in the map.");if(this._selectedItem){var e=this._selectedItem;this._selectedItem=null,e.selected=!1,this._map.selectionMayChange=!1,e.dispatchEvent(new c.Event("deselect")),delete this._map.selectionMayChange}t&&(this._selectedItem=t,t.selected=!0,this._map.selectionMayChange=!1,t.dispatchEvent(new c.Event("select")),delete this._map.selectionMayChange)}},addItem:function(t,e){return o.checkInstance(t,this.itemConstructor,"[MapKit] Map.add"+this.capitalizedItemName+" expected an "+this.itemName+", but got `"+t+"` instead."),(t=this.addItemToList(t,!1,e))&&this.manyItemsAdded([t],!1),t},addItems:function(t){o.checkArray(t,"[MapKit] Map.add"+this.capitalizedItemName+"s expected an array of "+this.itemName+"s, but got `"+t+"` instead.");var e=t.filter((function(t,e){return o.checkInstance(t,this.itemConstructor,"[MapKit] Map.add"+this.capitalizedItemName+"s expected an "+this.itemName+" at index "+e+", but got `"+t+"` instead."),!!this.addItemToList(t,!0)}),this);return e.length>0&&this.manyItemsAdded(e,!0),e},shouldAddItem:function(t,e){return t.map?(t.map._impl!==this._map&&console.warn("[MapKit] Map."+this.capitalizedItemName+(e?"s":"")+": "+this.itemName+" is already in another map."),!1):!t._impl.isMapFeature||(console.warn("[MapKit] Map."+this.capitalizedItemName+(e?"s":"")+": "+this.itemName+" cannot be added to another map."),!1)},removeItem:function(t){return o.checkInstance(t,this.itemConstructor,"[MapKit] Map.remove"+this.capitalizedItemName+" expected an "+this.itemName+", but got `"+t+"` instead."),this.isItemExposed(t)?t.map!==this._map.public?console.warn("[MapKit] Map.remove"+this.capitalizedItemName+": cannot remove "+this.itemName+" as it is not attached to this map."):this.removeAnyItem(t):console.warn("[MapKit] Map.remove"+this.capitalizedItemName+": cannot remove "+this.itemName),t},removeAnyItem:function(t){var e=this._items.indexOf(t);return e>=0&&(this._items.splice(e,1),this.removedItem(t),this.manyItemsRemoved([t],!1)),t},removeItems:function(t){return o.checkArray(t,"[MapKit] Map.remove"+this.capitalizedItemName+"s expected an array of "+this.itemName+"s, but got `"+t+"` instead."),t.forEach((function(t,e){o.checkInstance(t,this.itemConstructor,"[MapKit] Map.remove"+this.capitalizedItemName+"s expected an "+this.itemName+" at index "+e+", but got `"+t+"` instead."),this.isItemExposed(t)?t.map!==this._map.public?console.warn("[MapKit] Map.remove"+this.capitalizedItemName+"s: cannot remove "+this.itemName+" at index "+e+" as it is not attached to this map."):t._impl._toBeRemoved=!0:console.warn("[MapKit] Map.remove"+this.capitalizedItemName+"s: cannot remove "+this.itemName+" at index "+e)}),this),this._items=this._items.filter((function(t){return!t._impl._toBeRemoved})),t.forEach((function(t){t._impl._toBeRemoved&&(delete t._impl._toBeRemoved,this.removedItem(t,!0))}),this),t.length>0&&this.manyItemsRemoved(t,!0),t},enabledItemCloseToPoint:function(t,e){return this._previousPointForPickingItem&&this._previousPointForPickingItem.equals(t)?(e||(this._closeItemIndex=(this._closeItemIndex+1)%this._closeItems.length),this._closeItems[this._closeItemIndex]):(this._previousPointForPickingItem=t,this._closeItems=this._itemsCloseToPoint(t).filter((function(t){return t.enabled})),this._closeItemIndex=!e&&this._closeItems.length>1&&this._closeItems[0].selected?1:0,this._closeItems[this._closeItemIndex])},get selectionMayChange(){return!this._map||this._map.selectionMayChange},addItemToList:function(t,e,i){if(this.shouldAddItem(t,e))return(void 0===i||i<0||i>this._items.length)&&(i=this._items.length),this._items.splice(i,0,t),this.addedItem(t,e),t},addedItem:function(t,e){"function"===typeof t._impl.setDelegate?t._impl.setDelegate(this):t._impl.delegate=this,t._impl.addedToMap&&t._impl.addedToMap()},manyItemsAdded:function(t,e){},removedItem:function(t){t.selected=!1,delete t._impl.delegate,t._impl.removedFromMap&&t._impl.removedFromMap()},manyItemsRemoved:function(t,e){},manyItemsChanged:function(t,e){},mapWasDestroyed:function(){delete this._map,this.removedReferenceToMap()},_node:null,_deletePreviousPointForPickingItem:function(){delete this._previousPointForPickingItem,delete this._closeItems,delete this._closeItemIndex},_itemsCloseToPoint:function(t){var e=this._items.filter((function(t){return t._impl.canBePicked()}));return 0===e.length?[]:this.pickableItemsCloseToPoint(e,t)}},t.exports=p},2105:function(t,e,i){var n=i(1972),o=i(1948);function a(t){n.GroupNode.call(this),this._controller=t}a.prototype=o.inheritPrototype(n.GroupNode,a,{stringInfo:function(){return"OverlaysControllerNode"}}),t.exports=a},2106:function(t,e,i){var n=i(1948),o=i(1961),a=i(2107);function s(t){Object.defineProperty(this,"_impl",{value:new a(null,this,t)})}s.Events={Select:"select",Deselect:"deselect"},s.prototype=n.inheritPrototype(o.EventTarget,s,{get map(){return this._impl.map},set map(t){this._impl.map=t},get data(){return this._impl.data},set data(t){this._impl.data=t},get visible(){return this._impl.visible},set visible(t){this._impl.visible=t},get enabled(){return this._impl.enabled},set enabled(t){this._impl.enabled=t},get selected(){return this._impl.selected},set selected(t){this._impl.selected=t}}),t.exports=s},2107:function(t,e,i){var n=i(1969).MapRect,o=i(1948),a=["visible","enabled","selected","data"];function s(t,e,i){this._node=t,this._public=e,i=o.checkOptions(i),a.forEach((function(t){t in i&&(this[t]=i[t])}),this),Object.keys(i).forEach((function(t){a.indexOf(t)<0&&console.warn("[MapKit] Unknown option: "+t+". Use the data property to store custom data.")}))}s.prototype={constructor:s,delegate:null,_map:null,_visible:!0,_enabled:!0,_selected:!1,get map(){return this._map},set map(t){console.warn("[MapKit] The `map` property of an overlay is read-only. Use map.addOverlay() instead.")},get data(){return Object.prototype.hasOwnProperty.call(this,"_data")||(this._data={}),this._data},set data(t){this._data=t},get visible(){return this._visible},set visible(t){var e=!!t;this._visible!==e&&(this._visible=e,this.updatedProperty("visible"))},get enabled(){return this._enabled},set enabled(t){this._enabled=!!t},get selected(){return this._selected},set selected(t){var e=!!t;if(e!==this._selected){if(this.delegate&&!this.delegate.selectionMayChange)return void console.warn("[MapKit] Selection may not change in select/deselect event handler.");this._selected=e,this.updatedProperty("selected")}},get node(){return this._node},canBePicked:function(){return this.shown&&this._visible},setMap:function(t){t?this._map=t:this._map&&delete this._map},handleEvent:function(){},updatedProperty:function(t){this.delegate&&this.delegate.overlayPropertyDidChange(this._public,t)},visibleAfterClipping:function(t,e,i,o,a){this._node.shapes=[];var s=this.visibilityToleranceAtScale(i),r=this._boundingRect||this.boundingRectAtScale(i);if(!this.visible||r.maxY()+s<t.minY()||r.minY()-s>t.maxY())return!1;for(var l=r.minX()-s,h=r.maxX()+s,c=l<0?1:0,d=1+c,u=c-1;u<=d;++u){var p=0===u?t:new n(t.origin.x-u,t.origin.y,t.size.width,t.size.height);if(h>=p.minX()&&l<=p.maxX()){var m=this.clipOverlay(p,e,i,o,a);m.length>0&&(m.xOffset=u,this._node.shapes.push(m))}}return this._node.shapes.length>0},visibilityToleranceAtScale:function(){return 0}},t.exports=s},2108:function(t,e,i){var n=i(1948),o=i(1981);function a(){this._overlays=[]}a.prototype={constructor:a,fadeOverlayTo:function(t,e){Object.prototype.hasOwnProperty.call(t,"fadeInOutOpacity")?t.fadeInOutOpacity.durationMs=350*Math.abs(t.fadeInOutOpacity.value-t.fadeInOutOpacity.end):(t.fadeInOutOpacity={durationMs:350},t.setFadeInOutOpacity(1-e),this._overlays.push(t)),t.fadeInOutOpacity.start=t.fadeInOutOpacity.value,t.fadeInOutOpacity.end=e,t.fadeInOutOpacity.startTime=Date.now(),o.scheduleASAP(this)},performScheduledUpdate:function(){var t=Date.now();this._overlays=this._overlays.filter((function(e){return e.setFadeInOutOpacity(n.clamp(e.fadeInOutOpacity.start+(e.fadeInOutOpacity.end-e.fadeInOutOpacity.start)*((t-e.fadeInOutOpacity.startTime)/e.fadeInOutOpacity.durationMs),0,1)),e.fadeInOutOpacity.value!==e.fadeInOutOpacity.end||(delete e.fadeInOutOpacity,!1)})),this._overlays.length>0&&o.scheduleOnNextFrame(this)}},t.exports=a},2109:function(t,e,i){var n=i(2110);function o(t,e){Object.defineProperty(this,"_impl",{value:new n(t,e)})}o.prototype={get data(){return this._impl.data},set data(t){this._impl.data=t},get items(){return this._impl._items},set items(t){this._impl.items=t},getFlattenedItemList:function(){return this._impl.getFlattenedItemList()}},t.exports=o},2110:function(t,e,i){"use strict";function n(t,e){this.items=t,this.data=e}n.prototype={constructor:n,get data(){return this._data},set data(t){this._data=t},get items(){return this._items},set items(t){this._items=t instanceof Array?t:null===t?[]:[t]},getFlattenedItemList:function(){return this.items.reduce((function(t,e){var i="function"===typeof e.getFlattenedItemList?e.getFlattenedItemList(e):e;return t.concat(i)}),[])}},t.exports=n},2111:function(t,e,i){var n=i(2112),o=i(1970);function a(t){o(this,a)&&Object.defineProperty(this,"_impl",{value:new n(t)})}a.prototype={constructor:a,get strokeColor(){return this._impl.strokeColor},set strokeColor(t){this._impl.strokeColor=t},get strokeOpacity(){return this._impl.strokeOpacity},set strokeOpacity(t){this._impl.strokeOpacity=t},get strokeStart(){return this._impl.strokeStart},set strokeStart(t){this._impl.strokeStart=t},get strokeEnd(){return this._impl.strokeEnd},set strokeEnd(t){this._impl.strokeEnd=t},get lineWidth(){return this._impl.lineWidth},set lineWidth(t){this._impl.lineWidth=t},get lineCap(){return this._impl.lineCap},set lineCap(t){this._impl.lineCap=t},get lineJoin(){return this._impl.lineJoin},set lineJoin(t){this._impl.lineJoin=t},get lineDash(){return this._impl.lineDash},set lineDash(t){this._impl.lineDash=t},get lineDashOffset(){return this._impl.lineDashOffset},set lineDashOffset(t){this._impl.lineDashOffset=t},get lineGradient(){return this._impl.lineGradient},set lineGradient(t){this._impl.lineGradient=t},get fillColor(){return this._impl.fillColor},set fillColor(t){this._impl.fillColor=t},get fillOpacity(){return this._impl.fillOpacity},set fillOpacity(t){this._impl.fillOpacity=t},get fillRule(){return this._impl.fillRule},set fillRule(t){this._impl.fillRule=t},toString:function(){return this._impl.toString()}},t.exports=a},2112:function(t,e,i){var n=i(1952),o=i(1948),a=i(1986),s=i(2113),r=i(2114),l=["butt","round","square"],h=["miter","round","bevel"],c=["nonzero","evenodd"];function d(t){for(var e in o.checkOptions(t),t){var i=Object.getOwnPropertyDescriptor(d.prototype,e);i&&i.set?this[e]=t[e]:console.warn("[MapKit] Style has no property named `"+e+"`, ignoring.")}}d.UPDATE_EVENT="update-style",d.prototype=o.inheritPrototype(n.EventTarget,d,{_strokeColor:"rgb(0, 122, 255)",_strokeOpacity:1,_strokeStart:0,_strokeEnd:1,_lineWidth:1,_lineCap:"round",_lineJoin:"round",_lineDash:[],_lineDashOffset:0,_lineGradient:null,_fillColor:"rgb(0, 122, 255)",_fillOpacity:.1,_fillRule:"nonzero",get strokeColor(){return this._strokeColor},set strokeColor(t){null!=t&&o.checkType(t,"string","[MapKit] Expected a string value for Style.strokeColor, but got `"+t+"` instead."),this._strokeColor!==t&&(this._strokeColor=t,this._updated())},get strokeOpacity(){return this._strokeOpacity},set strokeOpacity(t){o.checkType(t,"number","[MapKit] Expected a number value for Style.strokeOpacity, but got `"+t+"` instead.");var e=o.clamp(t,0,1);this._strokeOpacity!==e&&(this._strokeOpacity=e,this._warnLineGradientComparability(),this._updated())},get strokeStart(){return this._strokeStart},set strokeStart(t){if("number"!==typeof t||!(t>=0&&t<=1))throw new Error("[MapKit] Expected a number between 0 and 1 for Style.strokeStart, but got `"+t+"` instead.");this._strokeStart!==t&&(this._strokeStart=t,this._updated())},get strokeEnd(){return this._strokeEnd},set strokeEnd(t){if("number"!==typeof t||!(t>=0&&t<=1))throw new Error("[MapKit] Expected a number between 0 and 1 for Style.strokeEnd, but got `"+t+"` instead.");this._strokeEnd!==t&&(this._strokeEnd=t,this._updated())},get lineWidth(){return this._lineWidth},set lineWidth(t){o.checkType(t,"number","[MapKit] Expected a number value for Style.lineWidth, but got `"+t+"` instead.");var e=Math.max(0,t);this._lineWidth!==e&&(this._lineWidth=e,this._updated())},get lineCap(){return this._lineCap},set lineCap(t){var e=l,i="[MapKit] Expected one of "+e.map((function(t){return"`"+t+"`"})).join(", ")+" for Style.lineCap, but got `"+t+"` instead.";if(o.checkType(t,"string",i),e.indexOf(t)<0)throw new TypeError(i);this._lineCap!==t&&(this._lineCap=t,this._warnLineGradientComparability(),this._updated())},get lineJoin(){return this._lineJoin},set lineJoin(t){var e=h,i="[MapKit] Expected one of "+e.map((function(t){return"`"+t+"`"})).join(", ")+" for Style.lineJoin, but got `"+t+"` instead.";if(o.checkType(t,"string",i),e.indexOf(t)<0)throw new TypeError(i);this._lineJoin!==t&&(this._lineJoin=t,this._warnLineGradientComparability(),this._updated())},get lineDash(){return this._lineDash},set lineDash(t){o.checkArray(t,"[MapKit] Expected an array of numbers for Style.lineDash, but got `"+t+"` instead."),t.forEach((function(t,e){o.checkType(t,"number","[MapKit] Expected an array of numbers for Style.lineDash, but got `"+t+"` at index "+e+" instead.")})),this._lineDash=t.slice(),this._warnLineGradientComparability(),this._updated()},get lineDashOffset(){return this._lineDashOffset},set lineDashOffset(t){o.checkType(t,"number","[MapKit] Expected a number value for Style.lineDashOffset, but got `"+t+"` instead."),this._lineDashOffset!==t&&(this._lineDashOffset=t,this._updated())},get lineGradient(){return this._lineGradient},set lineGradient(t){null!==t&&o.checkInstance(t,s,"[MapKit] Expected a LineGradient object value (or null) for Style.lineGradient, but got `"+t+"` instead."),this._lineGradient!==t&&(this._lineGradient&&this._lineGradient._impl.removeEventListener(r.UPDATE_EVENT,this),this._lineGradient=t,this._lineGradient&&this._lineGradient._impl.addEventListener(r.UPDATE_EVENT,this),this._warnLineGradientComparability(),this._updated())},colorStopsForOverlay:function(t){if(!this._lineGradient)return null;var e=this._lineGradient;return 0===e._impl.indices.length?e._impl.offsets:t.getColorStops(e._impl)},get fillColor(){return this._fillColor},set fillColor(t){null!=t&&o.checkType(t,"string","[MapKit] Expected a string value for Style.fillColor, but got `"+t+"` instead."),this._fillColor!==t&&(this._fillColor=t,this._updated())},get fillOpacity(){return this._fillOpacity},set fillOpacity(t){o.checkType(t,"number","[MapKit] Expected a number value for Style.fillOpacity, but got `"+t+"` instead.");var e=o.clamp(t,0,1);this._fillOpacity!==e&&(this._fillOpacity=e,this._updated())},get fillRule(){return this._fillRule},set fillRule(t){var e=c,i="[MapKit] Expected one of "+e.map((function(t){return"`"+t+"`"})).join(", ")+" for Style.fillRule, but got `"+t+"` instead.";if(o.checkType(t,"string",i),e.indexOf(t)<0)throw new TypeError(i);this._fillRule!==t&&(this._fillRule=t,this._updated())},shouldStroke:function(){return(this.strokeColor||this.lineGradient)&&this.strokeOpacity>0&&this.lineWidth>0},shouldFill:function(){return this.fillColor&&this.fillOpacity>0},halfStrokeWidthAtResolution:function(){return this.strokeColor&&this.strokeOpacity>0?this.lineWidth/2*a.devicePixelRatio:0},styleForHitTesting:function(t){var e=Object.create(this);return null!=this._fillColor&&(e._fillColor="rgb(0, 122, 255)",e._fillOpacity=1),e._strokeColor="rgb(0, 122, 255)",e._strokeOpacity=1,e._lineWidth=this.lineWidth+t,e._impl=e,e},toString:function(){return["strokeColor","strokeOpacity","strokeStart","strokeEnd","lineWidth","lineCap","lineJoin","lineDash","lineDashOffset","lineGradient","fillColor","fillOpacity","fillRule"].filter((function(t){return Object.prototype.hasOwnProperty.call(this,"_"+t)}),this).map((function(t){return t+":"+(Array.isArray(this[t])?JSON.stringify(this[t]):this.prop&&this[t].toString?this[t].toString():this[t])}),this).join(",")},handleEvent:function(t){t.type===r.UPDATE_EVENT&&this._updated()},_warnLineGradientComparability:function(){if(this.lineGradient){var t=[];1!==this.strokeOpacity&&t.push("strokeOpacity"),"round"!==this.lineCap&&t.push("lineCap"),"round"!==this.lineJoin&&t.push("lineJoin"),0!==this.lineDash.length&&t.push("lineDash"),0!==t.length&&(1===t.length?console.warn("[MapKit] lineGradient is incompatible with the following style property: "+t[0]+"."):console.warn("[MapKit] lineGradient is incompatible with the following style properties: "+t.join(", ")+"."))}},_updated:function(){this.dispatchEvent(new n.Event(d.UPDATE_EVENT))}}),t.exports=d},2113:function(t,e,i){var n=i(2114),o=i(1970);function a(t){o(this,a)&&Object.defineProperty(this,"_impl",{value:new n(t)})}a.prototype={constructor:a,addColorStop:function(t,e){this._impl.addColorStop(t,e)},addColorStopAtIndex:function(t,e){this._impl.addColorStopAtIndex(t,e)},toString:function(){return this._impl.toString()}},t.exports=a},2114:function(t,e,i){var n=i(1952),o=i(1948),a=0;function s(t){if(this._offsets=[[0],[1]],this._indices=[],this._lastUpdate=a++,"object"===typeof t)for(var e in t)this.addColorStop(parseFloat(e),t[e])}s.UPDATE_EVENT="update-color-stop",s.prototype=o.inheritPrototype(n.EventTarget,s,{constructor:s,get offsets(){return this._offsets},get indices(){return this._indices},get lastUpdate(){return this._lastUpdate},addColorStop:function(t,e){if("number"!==typeof t||!(t>=0&&t<=1))throw new Error("[MapKit] Expected a number between 0 and 1 for offset of LineGradient.addColorStop, but got `"+t+"` instead.");o.checkType(e,"string","[MapKit] Expected a string value for color in LineGradient.addColorStop, but got `"+e+"` instead."),this._addColorStop(this._offsets,t,e)},addColorStopAtIndex:function(t,e){if("number"!==typeof t||t<0||t%1!==0)throw new Error("[MapKit] Expected a integer greater than or equal to 0 for index of LineGradient.addColorStopAtIndex, but got `"+t+"` instead.");o.checkType(e,"string","[MapKit] Expected a string value for color in LineGradient.addColorStopAtIndex, but got `"+e+"` instead."),this._addColorStop(this._indices,t,e)},toString:function(){return"LineGradient"},_addColorStop:function(t,e,i){for(var o=0,r=t.length;o<r&&t[o][0]<e;)++o;o<r&&t[o][0]===e?t[o][1]=i:t.splice(o,0,[e,i]),this._lastUpdate=a++,this.dispatchEvent(new n.Event(s.UPDATE_EVENT))}}),t.exports=s},2115:function(t,e,i){var n=i(2116),o=i(2118),a=i(1948),s=i(1970);function r(t,e,i){s(this,r)&&Object.defineProperty(this,"_impl",{value:new o(this,t,e,i)})}r.prototype=a.inheritPrototype(n,r,{get coordinate(){return this._impl.coordinate},set coordinate(t){this._impl.coordinate=t},get radius(){return this._impl.radius},set radius(t){this._impl.radius=t}}),t.exports=r},2116:function(t,e,i){var n=i(2106),o=i(2117),a=i(1948);function s(t){Object.defineProperty(this,"_impl",{value:new o(this,t)})}s.prototype=a.inheritPrototype(n,s,{constructor:s,get style(){return this._impl.style},set style(t){this._impl.style=t}}),t.exports=s},2117:function(t,e,i){var n=i(2107),o=i(2111),a=i(2112),s=i(1948),r=i(1986);function l(t,e,i){if(i&&"object"===typeof i&&"style"in i){this.style=i.style;var o={};Object.keys(i).forEach((function(t){"style"!==t&&(o[t]=i[t])})),i=o}n.call(this,t,e,i)}l.prototype=s.inheritPrototype(n,l,{constructor:l,_fillable:!0,fadeInOutOpacity:{value:1},get style(){return this._style||(this._style=new o,this._style._impl.addEventListener(a.UPDATE_EVENT,this)),this._style},set style(t){if(this._style){if(this._style===t)return;this._style._impl.removeEventListener(a.UPDATE_EVENT,this)}s.checkInstance(t,o,"[MapKit] Expected a mapkit.Style value for Overlay.style, but got `"+t+"` instead."),this._style!==t&&(this._style=t,this._style&&this._style._impl.addEventListener(a.UPDATE_EVENT,this),this.updatedProperty("style"))},visibilityToleranceAtScale:function(t){return this.style._impl.halfStrokeWidthAtResolution()/t},clipOverlay:function(t,e,i,n,o){if(this._simplifiedShapeLevel!==n){var a=Math.abs(this._simplifiedShapeLevel-n),s=!!this._hasPoints,r=this._simplifiedShape;this._simplifiedShape=this.simplifyShapeAtLevel(n),this._simplifiedShapeLevel=n,this._hasPoints=this._simplifiedShape.length>0,1===a&&s!==this._hasPoints&&(this.delegate.fadeOverlayTo(this,s?0:1),s&&(this.fadeInOutOpacity.previousShape=this.clip(r)))}var l=this.fadeInOutOpacity.previousShape||(e||!this.clippedShape?this.clip(this._simplifiedShape,t,this.style._impl.halfStrokeWidthAtResolution()/i):this.clippedShape);return o&&(this.clippedShape=l),l},setFadeInOutOpacity:function(t){this.fadeInOutOpacity.value=t,this.updatedProperty("style")},handleEvent:function(t){t.type===a.UPDATE_EVENT&&this.updatedProperty("style")},fillPath:function(t,e){t.save(),t.fillStyle=e.fillColor,t.globalAlpha=e.fillOpacity*this.fadeInOutOpacity.value*this.node.opacity,t.fill(e.fillRule),t.restore()},strokePath:function(t,e,i,n){t.save(),t.strokeStyle=n||e.strokeColor,t.globalAlpha=e.strokeOpacity*this.fadeInOutOpacity.value*this.node.opacity;var o=i||r.devicePixelRatio;t.lineWidth=e.lineWidth*o,e.lineDash.length>0&&"function"===typeof t.setLineDash&&(t.setLineDash(e.lineDash.map((function(t){return t*o}))),t.lineDashOffset=e.lineDashOffset*o),t.lineJoin=e.lineJoin,t.lineCap=e.lineCap,t.stroke(),t.restore()},updateGeometry:function(){var t=this.calculateBoundingRect();t&&(this._boundingRect=t,this.updatedProperty("geometry"))}}),t.exports=l},2118:function(t,e,i){var n=i(2117),o=i(2119),a=i(1969),s=a.Coordinate,r=a.MapRect,l=i(1948);function h(t,e,i,a){n.call(this,new o(this),t,a),this.coordinate=e,this.radius=i}function c(){return[this._coordinate.toMapPoint()]}h.prototype=l.inheritPrototype(n,h,{get coordinate(){return this._coordinate},set coordinate(t){l.checkInstance(t,s,"[MapKit] CircleOverlayInternal.coordinate expected a Coordinate value, but got `"+t+"` instead."),this._coordinate&&this._coordinate.latitude===t.latitude&&this._coordinate.longitude===t.longitude||(this._coordinate=t.copy(),this.updateGeometry())},get radius(){return this._radius},set radius(t){var e="[MapKit] CircleOverlayInternal.radius expected a non-negative number (radius in meters), but got `"+t+"` instead.";l.checkType(t,"number",e),t<0&&console.warn(e);var i=Math.max(0,t);this._radius!==i&&(this._radius=i,this.updateGeometry())},calculateBoundingRect:function(){if(!this._coordinate||isNaN(this._radius))return null;var t=this._center=this._coordinate.toMapPoint(),e=this._mapRadius=this._radius*a.mapUnitsPerMeterAtLatitude(this._coordinate.latitude);return new r(t.x-e,t.y-e,2*e,2*e)},simplifyShapeAtLevel:c,clip:c}),t.exports=h},2119:function(t,e,i){var n=i(2120),o=i(2123),a=i(1948);function s(t){n.call(this,t,!0,new o(this))}s.prototype=a.inheritPrototype(n,s,{stringInfo:function(){var t=this.overlay;return"CircleOverlayNode<radius:"+t.radius+","+t.coordinate.toString().toLowerCase()+">"+(t.style.toString()?"["+t.style+"]":"")}}),t.exports=s},2120:function(t,e,i){var n=i(2121),o=i(2122),a=i(1948);function s(t,e,i){n.call(this,t),this._closed=!!e,this._renderer=i||new o(this)}s.prototype=a.inheritPrototype(n,s,{get closed(){return this._closed}}),t.exports=s},2121:function(t,e,i){var n=i(1972),o=i(1948);function a(t){n.BaseNode.call(this),this.overlay=t}a.prototype=o.inheritPrototype(n.BaseNode,a,{}),t.exports=a},2122:function(t,e,i){var n=i(1972),o=i(1948),a=i(1976);function s(t){n.RenderItem.call(this,t)}s.prototype=o.inheritPrototype(n.RenderItem,s,{draw:function(t){if(this._node.overlay.map){var e=this._node.overlay.map._impl.camera;this.render(t,e)}},render:function(t,e,i){var n=this._node.overlay.style;"number"===typeof i&&(n=n._impl.styleForHitTesting(i));var o=this._node.closed&&n._impl.shouldFill(),a=n._impl.shouldStroke();(o||a)&&this.drawShapes(t,n,o,a,e)},drawShapes:function(t,e,i,n,o){e._impl.lineGradient&&this._node.supportsLineGradient?n&&this.drawGradient(t,e,o):(t.beginPath(),this._node.shapes.forEach((function(e){e.forEach((function(i){var n=o.transformMapPoint(new a(i[0].x+e.xOffset,i[0].y));t.moveTo(n.x,n.y);for(var s=1,r=i.length;s<r;s++)n=o.transformMapPoint(new a(i[s].x+e.xOffset,i[s].y)),t.lineTo(n.x,n.y);this._node.closed&&t.closePath()}),this)}),this),i&&this._node.overlay.fillPath(t,e),n&&this._node.overlay.strokePath(t,e,1))},drawGradient:function(t,e,i){var n=e._impl.colorStopsForOverlay(this._node.overlay),o=0;this._node.shapes.forEach((function(s){s.forEach((function(c){for(var d=[];c[0]._offset>n[o][0];)++o,f=n[o][0];for(var u=0,p=c.length;u<p;){var m=c[u]._offset,g=i.transformMapPoint(new a(c[u].x+s.xOffset,c[u].y)),f=n[o][0],_=r.normalize(n[o][1]||e.strokeColor);if(m===f)d.push([m,g,_]),++u,++o;else if(m<f){var y=n[o-1],v=y[0],b=y[1]||e.strokeColor,w=l(h(r.stringToRGBA(b),r.stringToRGBA(_),(m-v)/(f-v)));d.push([m,g,w]),++u}else d[d.length-1].push([f,_]),++o}this.strokePathForLineEvents(t,d,e)}),this)}),this)},strokePathForLineEvents:function(t,e,i){for(var n=0,a=e.length-1;n<a;++n){t.beginPath();var s=e[n],r=s[1],l=e[n+1][1];t.moveTo(r.x,r.y),t.lineTo(l.x,l.y);var h=t.createLinearGradient(r.x,r.y,l.x,l.y);if(h.addColorStop(0,s[2]),s.length>2)for(var c=s[0],d=e[n+1][0]-c,u=3;u<s.length;++u)h.addColorStop(o.clamp((s[u][0]-c)/d,0,1),s[u][1]||i.strokeColor);h.addColorStop(1,e[n+1][2]),this._node.overlay.strokePath(t,i,1,h)}}});var r={colorMap:{},normalize:function(t){return l(this.stringToRGBA(t))},stringToRGBA:function(t){if(t in this.colorMap)return this.colorMap[t];if(!this.context){var e=document.createElement("canvas");this.context=e.getContext("2d")}this.context.canvas.width=1,this.context.fillStyle=t,this.context.fillRect(0,0,1,1);var i=this.context.getImageData(0,0,1,1).data,n=[i[0],i[1],i[2],i[3]];return this.colorMap[t]=n,n}};function l(t){return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"}function h(t,e,i){var n=1-i;return[Math.round(t[0]*n+e[0]*i),Math.round(t[1]*n+e[1]*i),Math.round(t[2]*n+e[2]*i),Math.round(t[3]*n+e[3]*i)]}t.exports=s},2123:function(t,e,i){var n=i(1969).MapPoint,o=i(1976),a=i(2122),s=i(1948),r=2*Math.PI;function l(t){a.call(this,t)}function h(t,e,i,n,a,s,l){t.beginPath();var h=e.transformMapPoint(new o(i.x+n,i.y));s&&(s+=e.rotation),l&&(l-=e.rotation),t.arc(h.x,h.y,a,s||0,l||r,!0)}l.prototype=s.inheritPrototype(a,l,{drawShapes:function(t,e,i,n,o){var a=this._node.overlay;this._node.shapes.forEach((function(s){var r=s[0],l=a._mapRadius,c=l*o.worldSize;c<.5||this.drawClipped(t,e,i,n,o,r,l,s.xOffset)||(h(t,o,r,s.xOffset,c),i&&a.fillPath(t,e),n&&a.strokePath(t,e,1))}),this)},drawClipped:function(t,e,i,a,s,l,c,d){var u=s.toRenderingMapRect();if(!a||c<u.size.width||c<u.size.height)return!1;var p=e._impl.halfStrokeWidthAtResolution()/s.worldSize,m=u.minX()-p-d,g=u.maxX()+p-d,f=u.minY()-p,_=u.maxY()+p,y=l.x,v=l.y;function b(t,e){var i=y-t,n=v-e;return i*i+n*n<=c*c}var w,C=[];b(g,_)&&C.push(new n(g,_));var k=Math.acos((g-y)/c);if(!isNaN(k)){var S=v+c*Math.sin(k);S>=f&&S<=_&&((w=new n(g,S)).angle=k,C.push(w)),(S=v-c*Math.sin(k))>=f&&S<=_&&((w=new n(g,S)).angle=r-k,C.push(w))}b(g,f)&&C.push(new n(g,f));var T=Math.asin((f-v)/c);if(!isNaN(T)){var L=y+c*Math.cos(T);L>=m&&L<=g&&((w=new n(L,f)).angle=(T+r)%r,C.push(w)),(L=y-c*Math.cos(T))>=m&&L<=g&&((w=new n(L,f)).angle=Math.PI-T,C.push(w))}b(m,f)&&C.push(new n(m,f));var M=Math.acos((m-y)/c);if(!isNaN(M)){var E=v-c*Math.sin(M);E>=f&&E<=_&&((w=new n(m,E)).angle=r-M,C.push(w)),(E=v+c*Math.sin(M))>=f&&E<=_&&((w=new n(m,E)).angle=M,C.push(w))}b(m,_)&&C.push(new n(m,_));var x=Math.asin((_-v)/c);if(!isNaN(x)){var I=y-c*Math.cos(x);I>=m&&I<=g&&((w=new n(I,_)).angle=Math.PI-x,C.push(w)),(I=y+c*Math.cos(x))>=m&&I<=g&&((w=new n(I,_)).angle=(x+r)%r,C.push(w))}for(var A=C.length,P=1;A>2&&P<A&&(!isNaN(C[P-1].angle)||isNaN(C[P].angle)||isNaN(C[(P+1)%A].angle));)P+=1;if(P<A){for(var R=(P+1)%A;A>2&&!isNaN(C[R].angle)&&!isNaN(C[(R+1)%A].angle);)R=(R+1)%A;var O=c*s.worldSize,D=Math.abs(C[P].angle-C[R].angle),N=O*D-2*O*Math.sin(D/2)>.001,z=s.transformMapPoint(new o(C[P].x+d,C[P].y)),F=s.transformMapPoint(new o(C[R].x+d,C[R].y));if(i){N?h(t,s,l,d,O,C[P].angle,C[R].angle):(t.beginPath(),t.moveTo(z.x,z.y),t.lineTo(F.x,F.y));for(var U=(R+1)%A;isNaN(C[U].angle);U=(U+1)%A){var K=s.transformMapPoint(new o(C[U].x+d,C[U].y));t.lineTo(K.x,K.y)}this._node.overlay.fillPath(t,e)}a&&(N?h(t,s,l,d,O,C[P].angle,C[R].angle):(t.beginPath(),t.moveTo(z.x,z.y),t.lineTo(F.x,F.y)),this._node.overlay.strokePath(t,e))}else A>0&&i&&(t.fillStyle=e.fillColor,t.globalAlpha=e.fillOpacity,t.fillRect(0,0,u.size.width*s.worldSize,u.size.height*s.worldSize));return!0}}),t.exports=l},2124:function(t,e,i){var n=i(2116),o=i(2125),a=i(1970),s=i(1948);function r(t,e){a(this,r)&&Object.defineProperty(this,"_impl",{value:new o(this,t,e)})}r.prototype=s.inheritPrototype(n,r,{get points(){return this._impl.points},set points(t){this._impl.points=t}}),t.exports=r},2125:function(t,e,i){var n=i(1969),o=n.Coordinate,a=n.MapRect,s=i(2117),r=i(2126),l=i(2127),h=i(2004),c=i(1948);function d(t,e,i){s.call(this,new r(this),t,i),this.points=e,this.updateGeometry()}function u(t,e,i){for(var n=t[i],o=null,a=i-1;!o;--a)void 0!==t[a]._offset&&(o=t[a]);var s=null;for(a=i+1;!s;++a)void 0!==t[a]._offset&&(s=t[a]);var r=Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2));t[i]._offset=Math.min(o._offset+r/e,s._offset)}function p(t,e,i,n,o){var a,s=o.minX()-o.size.width;if(t.x<s)return m(s,(1-(a=(s-t.x)/i))*t.y+a*e.y,t,e,i,n);if(s=o.maxX()+o.size.width,t.x>s)return m(s,(1-(a=(s-t.x)/i))*t.y+a*e.y,t,e,i,n);var r=o.minY()-o.size.height;return t.y<r?m((1-(a=(r-t.y)/n))*t.x+a*e.x,r,t,e,i,n):(r=o.maxY()+o.size.height,t.y>r?m((1-(a=(r-t.y)/n))*t.x+a*e.x,r,t,e,i,n):t)}function m(t,e,i,n,o,a){var s={x:t,y:e};if("number"===typeof i._offset&&"number"===typeof n._offset){var r=Math.sqrt(o*o+a*a),l=Math.sqrt(Math.pow(t-i.x,2)+Math.pow(e-i.y,2));s._offset=i._offset+(n._offset-i._offset)*(l/r)}return s}d.prototype=c.inheritPrototype(s,d,{_fillable:!1,get points(){return this._points.slice()},set points(t){c.checkInstance(t,Array,"[MapKit] PolylineOverlay.points expected an array of Coordinates."),this._points=t.slice(),this._mapPoints=this._points.map((function(t,e){return c.checkInstance(t,o,"[MapKit] PolylineOverlay.points expected a Coordinate at index: "+e),t.toUnwrappedMapPoint()})),this._pointsNeedRemapping=!0,delete this._distances,delete this._colorStops,this.updateGeometry()},calculateBoundingRect:function(){if(0===this._mapPoints.length)return new a(0,0,0,0);var t=this._mapPoints.reduce((function(t,e){return e.x<t.xMin&&(t.xMin=e.x),e.x>t.xMax&&(t.xMax=e.x),e.y<t.yMin&&(t.yMin=e.y),e.y>t.yMax&&(t.yMax=e.y),t}),{xMin:1/0,xMax:-1/0,yMin:1,yMax:0}),e=t.xMax-t.xMin,i=c.mod(t.xMin,1);if(this._pointsNeedRemapping){delete this._pointsNeedRemapping,e>1&&console.warn("[MapKit] Polyline overlay spans over 360\xba in longitude and may not render correctly.");var n=t.xMin-i;this._mapPoints.forEach((function(t){t.x-=n})),l.preprocessPoints(this._mapPoints),delete this._simplifiedShapeLevel}return new a(i,t.yMin,e,t.yMax-t.yMin)},simplifyShapeAtLevel:function(t){delete this._distances;var e=this._simplifiedShapeLevel>t?this._simplifiedShape:this._mapPoints;return l.filterPointsAtScale(e,Math.pow(2,t))},clip:function(t,e,i){return t.length>0&&(t=this.clipShapeByStyleProperties(t)),!e||h.mapRectContains(e,this._boundingRect)?0===t.length?[]:[t]:function(t,e,i){for(var n,o=e.minX()-i,a=e.minY()-i,s=e.maxX()+i,r=e.maxY()+i,l=1e3*e.size.width,h=1e3*e.size.height,c=[],d=0,u=t.length;d<u-1;++d){var m,g=t[d],f=t[d+1],_=f.x-g.x;if(0!==_){var y=(o-g.x)/_,v=(s-g.x)/_;m=!(y<0&&v<0||y>1&&v>1)}else m=g.x>=o&&g.x<=s;if(m){var b=f.y-g.y;if(0!==b){var w=(a-g.y)/b,C=(r-g.y)/b;m=!(w<0&&C<0||w>1&&C>1)}else m=g.y>=a&&g.y<=r}var k=Math.abs(_)>l||Math.abs(b)>h;m?(n||(n=[]),k?(n.push(p(g,f,_,b,e)),n.push(p(f,g,-_,-b,e)),c.push(n),n=null):n.push(g)):n&&(k?(n.push(p(g,f,_,b,e)),n.push(p(f,g,-_,-b,e))):n.push(g),c.push(n),n=null)}return n&&(n.push(f),c.push(n)),c}(t,e,i)},clipShapeByStyleProperties:function(t){var e=this.style.strokeStart,i=this.style.strokeEnd,n=this.style.lineGradient;if(0!==e||1!==i||n){if(!this._distances||n&&!this._colorStops){this._length=0,this._distances=[];for(var o=0,a=t.length;o<a-1;++o){var s=t[o],r=t[o+1],l=Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2));this._length+=l,this._distances.push(l)}if(n){if(n._impl.indices.length>0&&void 0!==this._mapPoints[0]._offset)for(var h=0,c=this._mapPoints.length;h<c;++h)delete this._mapPoints[h]._offset;for(var d=0,u=0;d<a-1;++d)t[d]._offset=u/this._length,u+=this._distances[d];a>0&&(t[a-1]._offset=1)}}0===e&&1===i||(t=function(t,e,i,n){if(i>=n)return[];for(var o=0,a=!1,s=[],r=0,l=t.length;r<l-1;++r){var h=t[r],c=t[r+1],d=e[r];if(o+=d,!a&&o>=i){a=!0;var u=(o-i)/d;h={x:u*h.x+(1-u)*c.x,y:u*h.y+(1-u)*c.y,_offset:u*h._offset+(1-u)*c._offset}}if(a&&(s.push(h),o>=n)){c={x:(u=(o-n)/d)*h.x+(1-u)*c.x,y:u*h.y+(1-u)*c.y,_offset:u*h._offset+(1-u)*c._offset};break}}return s.push(c),s}(t,this._distances,e*this._length,i*this._length))}return t},getColorStops:function(t){if(!this._colorStops||this._colorStops.lastUpdate!==t.lastUpdate){var e=t.offsets,i=t.indices;this._colorStops=e.slice(),this._colorStops.lastUpdate=t.lastUpdate;for(var n=0,o=this._mapPoints.length,a=0,s=i.length;n<this._colorStops.length&&a<s;++n,++a){var r=i[a],l=r[0];if(!(l<o))break;void 0===this._mapPoints[l]._offset&&u(this._mapPoints,this._length,l);for(var h=this._mapPoints[l]._offset,c=r[1];this._colorStops[n][0]<h;)++n;this._colorStops[n][0]===h?this._colorStops[n][1]=c:this._colorStops.splice(n,0,[h,c])}}return this._colorStops}}),t.exports=d},2126:function(t,e,i){var n=i(2120),o=i(1948);function a(t){n.call(this,t,!1)}a.prototype=o.inheritPrototype(n,a,{supportsLineGradient:!0,stringInfo:function(){var t=this.overlay;return"PolylineOverlayNode<points:"+t.points.map((function(t){return t.toString()})).join(",")+">"+(t.style.toString()?"["+t.style+"]":"")}}),t.exports=a},2127:function(t,e){t.exports={preprocessPoints:function(t,e){var i=[];function n(t){var e=i.length;t._index=e,i.push(t),a(e)}function o(t,e){var n=i[t];return i[t]=i[e],i[e]=n,i[t]._index=t,i[e]._index=e,e}function a(t){for(;t>0;){var e=Math.floor((t-1)/2);if(i[e]._area<=i[t]._area)return;t=o(t,e)}}function s(t){for(;;){var e=2*t+1,n=2*t+2,a=i[t]._area,s=i[e]?i[e]._area:1/0,r=i[n]?i[n]._area:1/0;if(a<=s&&a<=r)return;t=o(t,s<=a&&s<=r?e:n)}}function r(){var t=i[0],e=i.pop();return i.length>0&&(i[0]=e,e._index=0,s(0)),t}function l(t){var e=t._prev,i=t,n=t._next;return Math.abs((e.x-n.x)*(i.y-e.y)-(e.x-i.x)*(n.y-e.y))/2}function h(t,e){var i=t._area;t._area=Math.max(l(t),e),t._area<i?a(t._index):s(t._index)}var c=t.length-1;if(e&&c>1){if(!t[c].equals(t[0])){t.push(t[0].copy());var d=!0;++c}var u=!0;t.unshift(t[c-1].copy()),++c}t[0]._area=t[c]._area=1/0;for(var p=1;p<c;++p){var m=t[p];m._prev=t[p-1],m._next=t[p+1],m._area=l(m),n(m)}for(u&&t.shift(),d&&t.pop();i.length>0;){var g=r(),f=g._prev,_=g._next;f._prev&&(f._next=_,h(f,g._area)),_._next&&(_._prev=f,h(_,g._area)),delete g._index,delete g._next,delete g._prev}},filterPointsAtScale:function(t,e){var i=1/(e*e),n=t.filter((function(t){return t._area>i}));if(2===n.length){var o=n[0].x-n[1].x,a=n[0].y-n[1].y;if(o*o+a*a<1*i)return[]}return n}}},2128:function(t,e,i){var n=i(2116),o=i(2129),a=i(1970),s=i(1948);function r(t,e){a(this,r)&&Object.defineProperty(this,"_impl",{value:new o(this,t,e)})}r.prototype=s.inheritPrototype(n,r,{get points(){return this._impl.points},set points(t){this._impl.points=t}}),t.exports=r},2129:function(t,e,i){var n=i(1969),o=n.Coordinate,a=n.MapRect,s=i(2117),r=i(2130),l=i(2127),h=i(1948),c=i(2004);function d(t,e,i){s.call(this,new r(this),t,i),this.points=e,this.updateGeometry()}d.prototype=h.inheritPrototype(s,d,{get points(){return this._points.map((function(t){return t.slice()}))},set points(t){h.checkArray(t,"[MapKit] PolygonOverlay.points expected an array of Coordinates."),Array.isArray(t[0])||(t=[t]),this._points=t.map((function(t,e){return h.checkArray(t,"[MapKit] PolygonOverlay.points expected an array at index: "+e),t.slice()})),this._polygons=this._points.map((function(t,e){return t.map((function(t,i){return h.checkInstance(t,o,"[MapKit] PolygonOverlay.points expected a Coordinate at index: "+e+", "+i),t.toUnwrappedMapPoint()}))})),this.updateGeometry()},calculateBoundingRect:function(){var t=function(t){var e=t.filter((function(t){return t.length>2})).map((function(t){var e=t.reduce((function(t,e){return e.x<t.xMin&&(t.xMin=e.x),e.x>t.xMax&&(t.xMax=e.x),e.y<t.yMin&&(t.yMin=e.y),e.y>t.yMax&&(t.yMax=e.y),t}),{xMin:1/0,xMax:-1/0,yMin:1,yMax:0});return new a(e.xMin,e.yMin,e.xMax-e.xMin,e.yMax-e.yMin)})).sort((function(t,e){return t.minX()-e.minX()}));return c.boundingRectForSortedRects(e)}(this._polygons);return delete this._simplifiedShapeLevel,t.size.width>1&&console.warn("[MapKit] Polygon overlay spans over 360\xba in longitude and may not render correctly."),this._polygons.forEach((function(e){0!==e.length&&(e.forEach((function(e){var i=h.mod(e.x,1);e.x=i+(i<t.minX()?1:0)})),l.preprocessPoints(e,!0))})),t},simplifyShapeAtLevel:function(t){var e=this._simplifiedShapeLevel>t?this._simplifiedShape:this._polygons,i=Math.pow(2,t);return e.reduce((function(t,e){var n=l.filterPointsAtScale(e,i);return n.length>0&&t.push(n),t}),[])},clip:function(t,e,i){return!e||c.mapRectContains(e,this._boundingRect)?t:function(t,e,i){for(var n=e.minX()-i,o=e.minY()-i,a=e.maxX()+i,s=e.maxY()+i,r=[],l=0,h=t.length;l<h;++l){for(var c=t[l],d=[],u=0,p=c.length;u<p;++u){var m=c[u],g=c[(u-1+p)%p];if(m.x>=n){if(g.x<n){var f=(n-m.x)/(g.x-m.x);d.push({x:n,y:(1-f)*m.y+f*g.y})}d.push(m)}else g.x>=n&&(f=(n-m.x)/(g.x-m.x),d.push({x:n,y:(1-f)*m.y+f*g.y}))}var _=[];for(u=0,p=d.length;u<p;++u)m=d[u],g=d[(u-1+p)%p],m.y>=o?(g.y<o&&(f=(o-m.y)/(g.y-m.y),_.push({x:(1-f)*m.x+f*g.x,y:o})),_.push(m)):g.y>=o&&(f=(o-m.y)/(g.y-m.y),_.push({x:(1-f)*m.x+f*g.x,y:o}));var y=[];for(u=0,p=_.length;u<p;++u)m=_[u],g=_[(u-1+p)%p],m.x<=a?(g.x>a&&(f=(a-m.x)/(g.x-m.x),y.push({x:a,y:(1-f)*m.y+f*g.y})),y.push(m)):g.x<=a&&(f=(a-m.x)/(g.x-m.x),y.push({x:a,y:(1-f)*m.y+f*g.y}));var v=[];for(u=0,p=y.length;u<p;++u)m=y[u],g=y[(u-1+p)%p],m.y<=s?(g.y>s&&(f=(s-m.y)/(g.y-m.y),v.push({x:(1-f)*m.x+f*g.x,y:s})),v.push(m)):g.y<=s&&(f=(s-m.y)/(g.y-m.y),v.push({x:(1-f)*m.x+f*g.x,y:s}));v.length>2&&r.push(v)}return r}(t,e,i)}}),t.exports=d},2130:function(t,e,i){var n=i(2120),o=i(1948);function a(t){n.call(this,t,!0)}a.prototype=o.inheritPrototype(n,a,{stringInfo:function(){var t=this.overlay;return"PolygonOverlayNode<points:"+t.points.map((function(t){return t.map((function(t){return t.toString()})).join(",")})).join("|")+">"+(t.style.toString()?"["+t.style+"]":"")}}),t.exports=a},2131:function(t,e,i){i(1966),t.exports={AnnotationsController:i(2132),MapFeaturesLayerController:i(2175),LayerItemsController:i(2104),ItemCollection:i(2109),MapFeatureType:i(2159),mapkit:{MapFeatureType:i(2159),Annotation:i(2137),ImageAnnotation:i(2177),MarkerAnnotation:i(2136),MapFeatureAnnotation:i(2135).prototype.constructor}}},2132:function(t,e,i){var n=i(1969),o=i(2133),a=i(2134),s=i(2167),r=i(2104),l=i(2170),h=i(2137),c=i(2140),d=i(2171),u=n.MapRect,p=i(1986),m=i(2009),g=i(1960),f=i(2172),_=i(1959),y=i(1948),v=i(1976),b=i(1977);if(window.document)var w=i(2173),C=i(1997);var k=i(1981),S=i(2055),T=null;function L(t){if(r.call(this,t),this._pendingAnnotations=[],this._mapFeatureAnnotationController=new a(this),this._clustersController=new s(this),m.activeLocale&&(this._rtl=m.activeLocale.rtl),window.document){this._node=new C.Node(p.htmlElement("div",{class:"mk-annotation-container"})),this._shadowDOMSlotController=new f(this._node);var e=function(t){var e=p.htmlElement("div",{class:"mk-annotations"});if(!p.supportsShadowDOM)return e;var i=e.insertBefore;return e.insertBefore=function(e,n){i.call(this,e,n);var o=e.firstChild,a=t.getAssignedElement(o);if(a&&a.parentNode&&0===o.assignedNodes().length){var s=a.nextSibling;t.hostNode.element.removeChild(a),t.hostNode.element.insertBefore(a,s)}return e},e}(this._shadowDOMSlotController);this._sceneGraphNode=new l(e),this._shadowRootNode=p.addShadowRootChild(this._node,i(2174)),this._annotationsNode=this._shadowRootNode.addChild(new C.Node(e)),this._oldCenterMode=!1,this._calloutsNode=this._shadowRootNode.addChild(new C.Node(p.htmlElement("div"))),this._calloutsNode.classList.add("mk-callouts"),this._styleHelper=new d(this),this._shadowRootNode.addChild(new C.Node(this._styleHelper.element)),this._annotationDraggingMapPanningController=new o(t)}else this._sceneGraphNode=new l}function M(t,e,i){return new b(t.origin.x-e,t.origin.y-i,t.size.width,t.size.height)}L.Annotation=h,L.prototype=y.inheritPrototype(r,L,{itemConstructor:h,itemName:"annotation",capitalizedItemName:"Annotation",_rtl:!1,_selectionDistance:Math.pow(r.prototype._selectionDistance,2),get sceneGraphNode(){return this._sceneGraphNode},isItemExposed:function(t){return t!==this._userLocationAnnotation&&!t.memberAnnotations},_userLocationAnnotation:null,get map(){return this._map},get userLocationAnnotation(){return this._userLocationAnnotation},get dragging(){return!!this._draggedAnnotation},get rtl(){return this._rtl},set rtl(t){this._rtl!==t&&(this._rtl=t,this._selectedItem&&this._callout&&this._showCalloutForAnnotation(this._selectedItem,!0))},preAddedAnnotation:function(t){if(!t._impl.updatedPosition())return!1;var e=!t.map,i=p.supportsShadowDOM&&this._annotationsNode&&t._impl.renderedByDOMElement&&!t.element.parentNode;return i&&this._shadowDOMSlotController.appendAssignedElement(t.element,!1),e&&t._impl.setDelegate(this),e||i},resetAnnotation:function(t){p.supportsShadowDOM&&this._annotationsNode&&t._impl.renderedByDOMElement&&t.element.parentNode&&this._shadowDOMSlotController.removeAssignedElement(t._impl.elementInAnnotationDOM,!1),-1===this._items.indexOf(t)&&delete t._impl.delegate},addItems:function(t){if(t=r.prototype.addItems.call(this,t),this._shouldAnnotationBePending())return t;t.sort((function(t,e){return e.coordinate.latitude-t.coordinate.latitude}));var e=this._map.camera.toMapRect(),i=e.size.width,n=e.size.height,o=e.origin.x-i,a=o+3*i,s=e.origin.y-n,l=s+3*n,h=0;t.forEach((function(t){t._impl.doesAnimate()&&t.visible&&t._impl.x+(t._impl.x<o?1:0)<=a&&t._impl.y>=s&&t._impl.y<=l&&(t._impl.delayRank=h,++h)}));var c=Math.min(50*h,3e3),d=0===h?0:c/h;return t.forEach((function(t){t._impl.delayMs=t._impl.delayRank*d,delete t._impl.delayRank}),this),t},addWaitingAnnotations:function(t){var e="function"===typeof t;this._waitingAnnotations?(e&&(this._completionCallback=t),window.clearTimeout(this._tileLoadingTimeout),delete this._tileLoadingTimeout,this._waitingAnnotations.forEach((function(t){t.map&&this._addAnnotationWaitingForTiles(t,!1,!e)}),this),this._updateSceneGraph(),delete this._waitingAnnotations,k.scheduleOnNextFrame(this._checkCompletion.bind(this))):e&&t()},annotationsInMapRect:function(t){y.checkInstance(t,u,"[MapKit] Map.annotationsInMapRect expects a MapRect as its argument, got `"+t+"` instead.");var e=y.mod(t.origin.x,1),i=e+t.size.width,n=t.origin.y,o=n+t.size.height;return this._items.filter((function(t){if(!this.isItemExposed(t))return!1;var a=t._impl.x+(t._impl.x<e?1:0),s=t._impl.y;return a>=e&&a<=i&&s>=n&&s<=o}),this)},removeItem:function(t){return t===this._userLocationAnnotation?(console.warn("[MapKit] Map.removeAnnotation: the user location annotation cannot be removed. Set showsUserLocation to false instead."),t):r.prototype.removeItem.call(this,t)},removeUserLocationAnnotation:function(){this._userLocationAnnotation&&(this._userLocationAnnotation._impl.removedFromMap(),r.prototype.removeAnyItem.call(this,this._userLocationAnnotation),delete this._userLocationAnnotation)},updateUserLocationAnnotation:function(t,e){if(t.coordinate){var i=this._userLocationAnnotation||new L.UserLocationAnnotation(t);if(this._userLocationAnnotation||(this._userLocationAnnotation=i,this.addItem(i,0)),t.stale)return delete this._lastGeocoderRequestCoordinate,delete this._lastUserLocationAnnotationSubtitle,void(i._impl.stale=!0);if(i._impl.stale=!1,i._impl.setCoordinate(t.coordinate),T){if(!e&&this._lastGeocoderRequestCoordinate&&this._lastGeocoderRequestCoordinate.latitude===i._impl.coordinate.latitude&&this._lastGeocoderRequestCoordinate.longitude===i._impl.coordinate.longitude)return void(this._userLocationAnnotation.subtitle=this._lastUserLocationAnnotationSubtitle)}else T=new L.Geocoder;this._lastGeocoderRequestCoordinate=i._impl.coordinate.copy(),E(T,i,this)}},mapSizeDidUpdate:function(){if(0!==this._pendingAnnotations.length){var t=this._map.shouldWaitForTilesAndControls();this._pendingAnnotations.forEach((function(e){e._impl.isPending&&this._addAnnotationWaitingForTiles(e,t)}),this),this._updateSceneGraph(),this._pendingAnnotations=[]}},updateVisibleAnnotations:function(){0!==this._items.length&&(this._updateVisibleAnnotations(this._items),this._updateSceneGraph())},startDraggingAnnotation:function(t,e){this._map.annotationDraggingWillStart(),this._draggedAnnotation=t,this._pendingDragStart=!0,t.selected&&this._hideCallout(t),this._node.classList.add("mk-dragging"),this._draggedAnnotation._impl.node.classList.add("mk-lifted"),this._draggedAnnotation._impl.lift(),this._updateSceneGraph()},mapNodeTintWasSet:function(t){this._items.forEach((function(t){t._impl.updateLayout()}))},mapTypeDidChange:function(){this._mapFeatureAnnotationController.mapTypeDidChange()},devicePixelRatioDidChange:function(){this._items.forEach((function(t){"function"===typeof t._impl.updateGlyphImages&&t._impl.updateGlyphImages()}))},styleHelperNodeDidMoveToParent:function(t){if(p.supportsShadowDOM){var e=t.assignedNodes?t:t.querySelector("slot"),i=e&&this._shadowDOMSlotController.getAssignedElement(e);e&&i&&i.parentNode&&0===e.assignedNodes().length&&(this._node.element.removeChild(i),this._node.element.appendChild(i))}},getShadowDOMTargetFromEvent:function(t){if(this._shadowRootNode.domNode)return p.getShadowDOMTargetFromEvent(this._shadowRootNode.domNode,t)},handleEvent:function(t){switch(t.type){case"region-change-start":this._nudgeStarted=!0,this._map.public.addEventListener("region-change-end",this);break;case"region-change-end":!this._nudgeStarted&&this._nudgeMapToShowCallout()||(delete this._nudgeStarted,this._callout&&this._callout.animateIn(),this._map.public.removeEventListener(t.type,this))}},performScheduledUpdate:x,addedItem:function(t,e){r.prototype.addedItem.call(this,t,e),t._impl.isWaiting=!0,e&&(t._impl.delayRank=0);var i=this._shouldAnnotationBePending(t);i&&(t._impl.isPending=!0,this._pendingAnnotations.push(t)),this._updateAnnotation(t),t._impl.selected&&this._didSelectAnnotation(t),i||this._addAnnotationWaitingForTiles(t,this._map.shouldWaitForTilesAndControls())},manyItemsAdded:function(t){this._updateSceneGraph()},removedItem:function(t,e){delete t._impl.wasCollided,"function"===typeof t._impl.node.remove&&(p.supportsShadowDOM&&t._impl.node.parent&&this._shadowDOMSlotController.removeAssignedElement(t._impl.elementInAnnotationDOM,!t._impl.renderedByDOMElement),t._impl.node.remove()),r.prototype.removedItem.call(this,t),t._impl.labelRegion&&this._removeLabelRegionForAnnotation(t),e||this._updateVisibleAnnotations([t]),this._clustersController.removedAnnotation(t),t.memberAnnotations||this._updateCollisions(this._items)},manyItemsRemoved:function(t){this._updateVisibleAnnotations(this.items),this._updateSceneGraph()},manyItemsChanged:function(t){this._updateVisibleAnnotations(this.items),this._updateSceneGraph()},removedReferenceToMap:function(){this._userLocationAnnotation&&this._userLocationAnnotation._impl.removedFromMap()},pickableItemsCloseToPoint:function(t,e){var i=t.filter((function(t,i){var n=t._impl.distanceToPoint(e);return n<=this._selectionDistance&&(t._impl.distance=n,t._impl.index=i,!0)}),this).sort((function(t,e){return t._impl.distance-e._impl.distance||e._impl.index-t._impl.index}));return i.forEach((function(t){delete t._impl.distance,delete t._impl.index})),i},annotationDraggingDidChange:function(t){this._draggedAnnotation&&!this._draggedAnnotation._impl.shouldPreventDrag&&(this._pendingDragStart&&(delete this._pendingDragStart,this._draggedAnnotation._impl.draggingDidStart(),this._map.dispatchEventWithAnnotation(c.Events.DragStart,this._draggedAnnotation)),k.scheduleASAP(this),this._draggedAnnotation._impl.setDraggingTranslationForMapFrameSize(t,this._map.ensureRenderingFrame().size),this._annotationDraggingMapPanningController.update(this._draggedAnnotation,this._draggedAnnotation._impl.node))},annotationDraggingDidEnd:function(t){this._draggedAnnotation&&(this._annotationDraggingMapPanningController.stop(),this._draggedAnnotation._impl.dropAfterDraggingAndRevertPosition(!t),this._draggedAnnotation._impl.node.classList.remove("mk-lifted"),this._node.classList.remove("mk-dragging"),this._map.annotationDraggingDidEnd(),this._map.dispatchEventWithAnnotation(c.Events.DragEnd,this._draggedAnnotation),delete this._draggedAnnotation,this._updateSceneGraph())},annotationPropertyDidChange:function(t,e){if(!(w&&t instanceof w)){switch(e){case"selected":t.selected?this._didSelectAnnotation(t):this._didDeselectAnnotation(t);break;case"coordinate":if(!t._impl.updatedPosition())return;break;case"":case"displayPriority":case"collisionMode":case"padding":break;case"calloutOffset":this._updateCalloutPositionWithTailShift(t,!0);break;case"visible":this._selectedItem===t&&(this._callout?this._callout.visible=t.visible:t.visible&&this._showCalloutForAnnotation(t,!0)),t._impl.needsColliding=!0;break;case"draggable":this._draggedAnnotation!==t||t.draggable||this._map.stopDraggingAnnotation();break;default:this._selectedItem===t&&(this._updateCalloutInfo(t),this._updateCalloutTailShift())}this._annotationsDidChangeSinceLastCollision=!0,this._updateVisibleAnnotations([t]),this._updateSceneGraph(),this._updateLabelRegionForAnnotation(t)}},mapForAnnotation:function(t){return this._map?this._map.public:null},sizeForElement:function(t){if(this._map.isRooted())return this._styleHelper.sizeForElement(t)},backgroundColorForElement:function(t,e){return this._styleHelper.backgroundColorForElement(t,e)},setAnimationForElement:function(t,e,i){return this._styleHelper.setAnimationForElement(t,e,i)},selectedAnnotationDidMoveToMap:function(t){this._updateSceneGraph(),this._showCalloutForAnnotation(t)},supportsLabelRegions:function(){return this._map.supportsLabelRegions()},annotationFinishedAnimating:function(t){this._checkCompletion()},isElementInCallout:function(t){return!!this._callout&&this._callout.containsElement(t)},isElementInCustomCallout:function(t){return!!this._callout&&this._callout.isCustomCallout()&&this._callout.node.element.contains(t)},mapPanningDuringAnnotationDrag:x,mapSupportForLabelRegionsChanged:function(){this._items.forEach((function(t){var e=t._impl;e.updateLayout(),delete e.labelRegion,this._updateLabelRegionForAnnotation(t)}),this)},containsMarkerAnnotation:function(){return this._items.some((function(t){return"string"===typeof t.glyphText}))},paddingForAnnotation:function(t){var e=0,i=0;t.size?(e=t.size.width,i=t.size.height):console.warn("[MapKit] Computing padding for showItems() when an annotation was not yet added the DOM can cause the annotation to not be entirely visible. The `size` property of the annotation can be changed to ensure that it shows up properly.");var n={top:t._impl._anchorPoint.y,right:e-t._impl._anchorPoint.x,bottom:i-t._impl._anchorPoint.y,left:t._impl._anchorPoint.x};if(t===this.selectedItem&&this._callout){var o=this._callout.boundingRect,a=t._impl.position();n.top=Math.max(n.top,a.y-o.minY()),n.right=Math.max(n.right,o.maxX()-a.x),n.bottom=Math.max(n.bottom,o.maxY()-a.y),n.left=Math.max(n.left,a.x-o.minX())}return n},calloutNodeDidRemove:function(t){p.supportsShadowDOM&&(t.isCustomCallout()&&"slot"===t.customOrContentElement.localName&&this._shadowDOMSlotController.removeAssignedElement(t.customOrContentElement),t.customLeftAccessory&&"slot"===t.customLeftAccessory.localName&&this._shadowDOMSlotController.removeAssignedElement(t.customLeftAccessory),t.customRightAccessory&&"slot"===t.customRightAccessory.localName&&this._shadowDOMSlotController.removeAssignedElement(t.customRightAccessory))},mapFeatureDidSelect:function(t){this._mapFeatureAnnotationController.mapFeatureDidSelect(t)},_addAnnotationToMapAsync:function(t){this._addAnnotationToMap(t,!1),this._updateSceneGraph()},_addAnnotationToMap:function(t,e){if(this._shouldAnnotationBePending())t._impl.isPending=!0;else{p.supportsShadowDOM&&this._annotationsNode&&this._shadowDOMSlotController.appendAssignedElement(t.element,!t._impl.renderedByDOMElement),t._impl.willMoveToMap(t._impl.canAnimate&&!e),delete t._impl.timeout,delete t._impl.isWaiting,delete t._impl.canAnimate,delete t._impl.delayMs;var i=this._items.indexOf(t);this._annotationsNode&&this._annotationsNode.addChild(t._impl.node,i),t._impl.sceneGraphNode&&this._sceneGraphNode.addChild(t._impl.sceneGraphNode,i),this._updateAnnotation(t),t.selected&&this._showCalloutForAnnotation(t),this._updateLabelRegionForAnnotation(t),t._impl.didMoveToMap()}},_addAnnotationWaitingForTiles:function(t,e,i){Object.prototype.hasOwnProperty.call(t._impl,"canAnimate")||(t._impl.canAnimate=!t._impl.isPending),delete t._impl.isPending,!e||t===this._userLocationAnnotation||this._items.some((function(t){return t!==this._userLocationAnnotation&&t._impl.mayBeDrawn()}))?!i&&t._impl.doesAnimate()&&t._impl.delayMs>0?t._impl.timeout=window.setTimeout(this._addAnnotationToMapAsync.bind(this,t),t._impl.delayMs):this._addAnnotationToMap(t,i):this._waitingAnnotations?this._waitingAnnotations.push(t):(this._waitingAnnotations=[t],this._tileLoadingTimeout=window.setTimeout(this.addWaitingAnnotations.bind(this,y.noop),3e3))},_didDeselectAnnotation:function(t){t._impl.node.classList.remove("mk-selected"),this.selectedItem=null,this._hideCallout(t),this._map.annotationSelectionDidChange(t),this._mapFeatureAnnotationController.annotationSelectionDidChange(t)},_didSelectAnnotation:function(t){t._impl.node.classList.add("mk-selected"),this.selectedItem=t,this._map.annotationSelectionDidChange(t),this._mapFeatureAnnotationController.annotationSelectionDidChange(t),t._impl.visible&&this._showCalloutForAnnotation(t)},_boundingRectForSelectedAnnotationAndCallout:function(){var t=this._callout.boundingRect,e=this._selectedItem._impl.position(),i=Math.min(t.minX(),e.x),n=Math.min(t.minY(),e.y),o=Math.max(t.maxX(),e.x)-i,a=Math.max(t.maxY(),e.y)-n;return new b(i,n,o,a)},_updateCalloutTailShift:function(t){if(!this._callout)return!1;var e=t?this._callout.boundingRect.pad(12):this._boundingRectForSelectedAnnotationAndCallout().pad(12),i=this._totalMapNudgingTranslation(e,this._map.ensureVisibleFrame(),t),n=i.x,o=i.y,a=this._callout.shiftTailBy(n);return 0!==n||0!==o?new v(-(n+a),-o):void 0},_nudgeMapToShowCallout:function(){if(this._map.cameraIsPanning||this._map.cameraIsZooming)return this._map.public.addEventListener("region-change-end",this),!0;if(!this._selectedItem._impl.isShown())return!1;var t=this._updateCalloutTailShift();return!!t&&(this._map.public.addEventListener("region-change-start",this),this._map.translateCameraAnimated(t,!0),this._map.public.removeEventListener("region-change-start",this),!!this._nudgeStarted)},_translationToFitInFrame:function(t,e){var i={x:0,y:0};return(t.maxX()>e.maxX()||t.minX()<e.minX()||t.maxY()>e.maxY()||t.minY()<e.minY())&&(i.x=t.minX()<e.minX()?t.minX()-e.minX():t.maxX()>e.maxX()?t.maxX()-e.maxX():0,i.y=t.minY()<e.minY()?t.minY()-e.minY():t.maxY()>e.maxY()?t.maxY()-e.maxY():0),i},_totalMapNudgingTranslation:function(t,e,i){var n=this._translationToFitInFrame(t,e),o=this._map.getControlBounds(),a=e.midX(),s=e.midY(),r=0,l=0;return t=M(t,n.x,n.y),o.forEach((function(e){if(t.minX()<e.maxX()&&t.maxX()>e.minX()&&t.minY()<e.maxY()&&t.maxY()>e.minY()){if(r+=e.maxX()<a?t.minX()-e.maxX():t.maxX()-e.minX(),l+=e.maxY()<s?t.minY()-e.maxY():t.maxY()-e.minY(),i)return;0!==l&&Math.abs(r)>Math.abs(l)?r=0:l=0,t=M(t,r,l)}}),this),n.x+=r,n.y+=l,n},_hideCallout:function(t,e){t._impl.calloutWillDisappear(),this._callout&&(this._callout.node.classList.remove("mk-selected"),this._callout.animateOut(e),delete this._callout)},_shouldAnnotationBePending:function(){return!this._map.isRooted()},_showCalloutForAnnotation:function(t,e){if(this._hideCallout(t,e),!t._impl.canShowCallout())return t._impl.calloutWillAppear(!1);var i,n=t._impl.callout;if(n&&"function"===typeof n.calloutShouldAppearForAnnotation&&!_(n.calloutShouldAppearForAnnotation,n,[t],!0))return t._impl.calloutWillAppear(!1);var o,a=n&&"function"===typeof n.calloutElementForAnnotation;a&&(i=_(n.calloutElementForAnnotation,n,[t]),y.checkElement(i,"[MapKit] calloutElementForAnnotation() must return a DOM element, but returned `"+i+"` instead."));var s,r=!1;if(!i&&((r=n&&"function"===typeof n.calloutContentForAnnotation)&&(o=_(n.calloutContentForAnnotation,n,[t]),y.checkElement(o,"[MapKit] contentElementForAnnotation() must return a DOM element, but returned `"+o+"` instead.")),!r&&!t.title))return t._impl.calloutWillAppear(!1);t._impl.calloutWillAppear(!0);var l,h=n&&"function"===typeof n.calloutLeftAccessoryForAnnotation;h&&(s=_(n.calloutLeftAccessoryForAnnotation,n,[t]),y.checkElement(s,"[MapKit] calloutLeftAccessoryForAnnotation() must return a DOM element, but returned `"+s+"` instead."));var c=n&&"function"===typeof n.calloutRightAccessoryForAnnotation;c&&(l=_(n.calloutRightAccessoryForAnnotation,n,[t]),y.checkElement(l,"[MapKit] calloutRightAccessoryForAnnotation() must return a DOM element, but returned `"+l+"` instead."));var d,u,m=t._impl.ignoreCalloutCornerRadiusForLeftAccessory&&!h&&!c;!h&&t._impl.canvasForCalloutAccessory&&(s=t._impl.canvasForCalloutAccessory()),p.supportsShadowDOM&&(a&&(d="mk-slot-"+Math.random().toString(32).substr(2,8),i.slot=d,(u=p.htmlElement("slot")).name=d,this._shadowDOMSlotController.appendAssignedElement(i),i=u),r&&(d="mk-slot-"+Math.random().toString(32).substr(2,8),o.slot=d,(u=p.htmlElement("slot")).name=d,this._shadowDOMSlotController.appendAssignedElement(o),o=u),h&&(d="mk-slot-"+Math.random().toString(32).substr(2,8),s.slot=d,(u=p.htmlElement("slot")).name=d,this._shadowDOMSlotController.appendAssignedElement(s),s=u),c&&(d="mk-slot-"+Math.random().toString(32).substr(2,8),l.slot=d,(u=p.htmlElement("slot")).name=d,this._shadowDOMSlotController.appendAssignedElement(l),l=u)),this._callout=new w(this,{customElement:i,contentElement:o,ignoreCalloutCornerRadiusForLeftAccessory:m,leftAccessory:this._rtl?l:s,rightAccessory:this._rtl?s:l,rtl:this._rtl}),this._callout.animates=!e&&(!n||"function"!==typeof n.calloutShouldAnimateForAnnotation||!!_(n.calloutShouldAnimateForAnnotation,n,[t],!0));var g,f=a&&this._callout.animates&&n&&"function"===typeof n.calloutAppearanceAnimationForAnnotation?_(n.calloutAppearanceAnimationForAnnotation,n,[t],""):"";if(y.checkType(f,"string","[MapKit] calloutAppearanceAnimationForAnnotation() must return a string, but returned `"+f+"` instead."),this._callout.appearanceAnimation=f,i&&(n&&"function"===typeof n.calloutAnchorOffsetForAnnotation&&(g=_(n.calloutAnchorOffsetForAnnotation,n,[t,this._callout.node.size]),y.checkInstance(g,window.DOMPoint,"[MapKit] calloutAnchorOffsetForAnnotation() must return a DOMPoint, but returned `"+g+"` instead.")),this._callout.setAnchorOffset(g)),this._updateCalloutInfo(t),t===this._userLocationAnnotation){var b=L.AccuracyRingOverlay.getMode(this._map.worldSize,100);if(this._oldCenterMode=b,b){var C=this._callout.getCenterOffset(!0);this._callout.animateAnchorOffset(C,-1),this._callout.animateTailScale(0,-1)}else this._callout.animateAnchorOffset(new v(0,0),-1),this._callout.animateTailScale(1,-1)}this._updateCalloutPositionWithTailShift(t,!1);var k=!e&&this._nudgeMapToShowCallout();this._callout.willMoveToMap(),this._callout.node.classList.add("mk-selected"),this._calloutsNode.addChild(this._callout.node),this._callout.appearanceAnimation&&this._calloutsNode.element.appendChild(this._callout.node.element),k||this._callout.animateIn()},mapWasDestroyed:function(){r.prototype.mapWasDestroyed.call(this),this._annotationDraggingMapPanningController&&this._annotationDraggingMapPanningController.mapWasDestroyed(),this._clustersController.mapWasDestroyed(),this._mapWasDestroyed=!0},_updateCalloutInfo:function(t){this._callout?this._callout.updateInfo(t,12)||this._hideCallout(t):this._showCalloutForAnnotation(t)},_updateCalloutPositionWithTailShift:function(t,e){this._selectedItem===t&&this._callout&&(this._callout.setShown(t._impl.isShown()),this._callout.setPosition(t._impl.positionForCallout()),e&&this._updateCalloutTailShift(e))},_updateLabelRegionForAnnotation:function(t){var e=t._impl;if(e.shouldHideLabels){e.labelRegion||(e.labelRegion=this._map.createLabelRegion());var i=e.labelRegion;if(i){var n=e.node.size,o=n.width,a=n.height;i.x=null==e.visibleX?e.x:e.visibleX,i.y=1-e.y,i.width=o,i.height=a,i.xOffset=o/2-e._anchorPoint.x-e._anchorOffset.x,i.yOffset=e._anchorPoint.y+e._anchorOffset.y-a/2,this._map.updatedLabelRegion()}}},_removeLabelRegionForAnnotation:function(t){this._map.unregisterLabelRegion(t._impl.labelRegion),delete t._impl.labelRegion},_updateVisibleAnnotations:function(t,e){e||this._deletePreviousPointForPickingItem();var i=this._userLocationAnnotation,n=this._map;if(i){var o=L.AccuracyRingOverlay.getMode(n.worldSize),a=this._selectedItem===i;i.isRingMode=o;var s=L.AccuracyRingOverlay.getMode(n.worldSize,100),r=this._oldCenterMode!==s;if(this._oldCenterMode=s,this._callout&&a&&r)if(this._callout.animateTailScale(s?0:1),s){var l=this._callout.getCenterOffset();l.y=l.y-i._impl._node.size.height/4,this._callout.animateAnchorOffset(l)}else this._callout.animateAnchorOffset(new v(0,0))}var h=n.camera.toRenderingMapRect(),c=h.size.width,d=Math.min(1.5*c,.5),u=h.midX(),p=h.size.height,m=h.minY()-p,g=m+3*p;t.forEach((function(t){if(t!==this._draggedAnnotation||!this._annotationDraggingMapPanningController.panning){var e=NaN,i=t._impl.y;if(c>0&&p>0&&i>=m&&i<=g)for(var o=t._impl.x,a=t.anchorOffset.x/n.worldSize,s=d,r=-1;r<=1;++r){var l=Math.abs(o-a+r-u);l<s&&(s=l,e=o+r)}isNaN(e)?t._impl.setShown(!1):(t._impl.isShown()||t!==this._selectedItem||this._showCalloutForAnnotation(t,!0),t._impl.setShown(!0),t._impl.setPosition(n.adjustMapItemPoint(n.camera.transformMapPoint(new v(e,i)))),t._impl.visibleX!==e&&(t._impl.visibleX=e,this._updateLabelRegionForAnnotation(t)))}}),this),this._updateCalloutPositionWithTailShift(this._selectedItem,!0),e||this._updateCollisions(t)},_updateCollisions:function(t){var e=!1,i=this._items.filter((function(t){var i=t.visible&&t._impl.isShown(),n=i||t._impl.needsColliding;return delete t._impl.needsColliding,n&&(t.displayPriority<h.DisplayPriority.Required||t.clusteringIdentifier)&&(e=!0),n&&i&&!t.memberAnnotations}),this);if(e){var n=this._map;this._clustersController.collideAnnotations(i,n.zoomLevel,n.rotation,this._annotationsDidChangeSinceLastCollision)}this._annotationsDidChangeSinceLastCollision=!1},addCluster:function(t){try{var e="function"===typeof this._map.annotationForCluster?_(this._map._annotationForCluster,this._map.public,[t],t):t;e=this._clustersController.setRequiredClusterAnnotationProperties(e,t),this.addItem(e)}catch(i){console.warn("[MapKit] annotationForCluster: the following error occurred; reverting to default annotation: "+i),e=this.addItem(t)}return e._impl.customCluster=e!==t,e._impl.updateLayout(!0),e},willUpdateCollisions:function(){this._items.forEach((function(t){t._impl.wasOccluded=t._impl.occluded,t._impl.previousCluster=t._impl.cluster}))},didUpdateCollisions:function(){this._items.forEach((function(t){var e=t._impl;e.wasCollided||e.occluded||(e.wasCollided=!0),t.memberAnnotations&&t.memberAnnotations[0]._impl.cluster!==t&&(e.cluster=e.memberAnnotations[0]._impl.cluster),e.updateVisibility(e.occluded),e.occluded!==e.wasOccluded&&e.animateOcclusion(),delete e.previousCluster,e.shouldHideLabels&&(e.occluded||e.labelRegion?e.occluded&&e.labelRegion&&this._removeLabelRegionForAnnotation(t):this._updateLabelRegionForAnnotation(t))}),this),this._items.forEach((function(t){delete t._impl.wasOccluded})),this._updateVisibleAnnotations(this._items,!0),this._updateSceneGraph()},deselectClusterAnnotation:function(){this._selectedItem&&this._selectedItem.memberAnnotations&&(this._selectedItem.selected=!1)},_updateAnnotation:function(t){t._impl.updatedPosition()&&this._updateVisibleAnnotations([t])},_updateSceneGraph:function(){var t=this._selectedItem,e=this._draggedAnnotation,i=this._items.filter((function(i){return i._impl.isDrawn()&&i!==t&&i!==e})).map((function(t){return t._impl.sceneGraphNode}));t&&t._impl.isDrawn()&&i.push(t._impl.sceneGraphNode),e&&e._impl.isDrawn()&&i.push(e._impl.sceneGraphNode),this._sceneGraphNode.children=i},_checkCompletion:function(){this._mapWasDestroyed||(this._annotationsDidChangeSinceLastCollision=!0,this._updateVisibleAnnotations(this._items),this._updateSceneGraph(),this._completionCallback&&(this._items.some((function(t){return!t._impl.isStable()}))||"function"!==typeof this._completionCallback||(this._completionCallback(),delete this._completionCallback)))}});var E=S((function(t,e,i){i._geocoderRequestId&&t.cancel(i._geocoderRequestId);var n=i._geocoderRequestId=t.reverseLookup(e._impl.coordinate,(function(t,o){n===i._geocoderRequestId&&(delete i._geocoderRequestId,t?(console.error("[MapKit] Error getting address for user location: "+t.message),e.subtitle=null):o.results.length>0?i._lastUserLocationAnnotationSubtitle=e.subtitle=o.results[0].formattedAddress:e.subtitle=null)}))}),1e3);function x(){if(this._draggedAnnotation&&!this._mapWasDestroyed){var t=this._draggedAnnotation._impl.dispatchDraggingEvent();this._map.dispatchEventWithAnnotation(t.type,this._draggedAnnotation,{coordinate:t.coordinate})}}var I=["UserLocationAnnotation","AccuracyRingOverlay","Geocoder"];function A(){for(var t=!0,e=0;e<I.length;e++){var i=I[e];!L[i]&&g.jsModules[i]?L[i]=g.jsModules[i]:t=!1}t&&g.removeEventListener("load",A)}g.addEventListener("load",A),A(),t.exports=L},2133:function(t,e,i){var n=i(1976),o=i(1981);function a(t){this._map=t,this.panning=!1}a.prototype={constructor:a,update:function(t,e){if(this._map.isScrollEnabled){var i=t._impl.translatedPosition(),a=i.x,s=a+e.size.width,r=i.y,l=r+e.size.height,h=this._map.ensureVisibleFrame();this._direction=new n,a<=h.minX()?this._direction.x=1:s>=h.maxX()&&(this._direction.x=-1),r<=h.minY()+5?this._direction.y=1:l>=h.maxY()-5&&(this._direction.y=-1);var c=0!==this._direction.x||0!==this._direction.y;!this.panning&&c?(this.panning=!0,this._startTime=Date.now(),this._initialSpeed=Math.floor(1/104.1*(h.size.width+h.size.height)/2),o.scheduleOnNextFrame(this)):this.panning&&!c&&this.stop()}},stop:function(){this.panning&&(this.panning=!1,delete this._direction,delete this._startTime,delete this._initialSpeed)},performScheduledUpdate:function(){if(this.panning){var t=this._initialSpeed,e=Date.now()-this._startTime;e>4e3?t*=3:e>1e3&&(t*=1.5),this._map.translateCameraAnimated(new n(this._direction.x*t,this._direction.y*t),!1),this._map.panningDuringAnnotationDrag(),o.scheduleOnNextFrame(this)}},mapWasDestroyed:function(){delete this._map}},t.exports=a},2134:function(t,e,i){var n=i(2135),o=i(1959);function a(t){this._annotationsController=t}a.prototype={mapFeatureDidSelect:function(t){var e=this._annotationsController.map,i=n.fromMapFeatureRegion(t),a=e.annotationForMapFeature;"function"===typeof a&&(i=o(a,e.public,[i])||i),i._impl.selected=!0,this._annotationsController.addItem(i,0),i._impl.isMapFeature=!0},mapTypeDidChange:function(){var t=this._annotationsController.selectedItem;t&&t._impl.isMapFeature&&this._annotationsController.items.indexOf(t)>=0&&this._annotationsController.removeItem(t)},annotationSelectionDidChange:function(t){!t.selected&&t._impl.isMapFeature&&this._annotationsController.items.indexOf(t)>=0&&this._annotationsController.removeItem(t)}},t.exports=a},2135:function(t,e,i){var n=i(1969),o=i(1943),a=i(2136),s=i(2159),r=i(1948),l=i(1968),h=i(2160),c=i(2161);function d(t,e){var n=i(2162);Object.defineProperty(this,"_impl",{value:new n(this,t,e)})}var u=function(){throw new TypeError("[MapKit] MapFeatureAnnotation may not be constructed.")};d.prototype=u.prototype=r.inheritPrototype(a,u,{get featureType(){return this._impl.featureType},fetchPlace:function(t){return this._impl.fetchPlace(t)},get pointOfInterestCategory(){return this._impl.pointOfInterestCategory},get map(){return this._impl.map},get element(){return this._impl.element},get coordinate(){return this._impl.coordinate},get title(){return this._impl.title},get subtitle(){return this._impl.subtitle},get accessibilityLabel(){return this._impl.accessibilityLabel},get enabled(){return this._impl.enabled},get calloutEnabled(){return this._impl.calloutEnabled},get anchorOffset(){return this._impl.anchorOffset},get animates(){return this._impl.animates},get appearanceAnimation(){return this._impl.appearanceAnimation},get calloutOffset(){return this._impl.calloutOffset},get callout(){return this._impl.callout},get draggable(){return this._impl.draggable},get padding(){return this._impl.padding},get collisionMode(){return this._impl.collisionMode},get size(){return this._impl.size},get color(){return this._impl.color},get glyphColor(){return this._impl.glyphColor},get glyphImage(){return this._impl.glyphImage?(this._impl._glyphImagePublic||(this._impl._glyphImagePublic=new h(this._impl,!1)),this._impl._glyphImagePublic):null},get selectedGlyphImage(){return this._impl.selectedGlyphImage?(this._impl._selectedGlyphImagePublic||(this._impl._selectedGlyphImagePublic=new h(this._impl,!0)),this._impl._selectedGlyphImagePublic):null},get glyphText(){return this._impl.glyphText},get titleVisibility(){return this._impl.titleVisibility},get subtitleVisibility(){return this._impl.subtitleVisibility}}),d.fromMapFeatureRegion=function(t){var e,i,a=!!("Poi"===t.category&&t.calloutGlyphImageUrlTemplate&&t.metadata&&t.metadata.calloutColor);a&&"Square"===t.metadata.calloutShape&&(e=i={useSquareBalloon:!0});var r=new d(new n.MapPoint(t.position[0],t.position[1]).toCoordinate(),{selected:!0,title:t.title,glyphImage:e,selectedGlyphImage:i});switch(r._impl.muid=t.muid,r._impl.styleAttributes=t.styleAttributes,t.category){case"Poi":r._impl.featureType=s.PointOfInterest;break;case"Territory":r._impl.featureType=s.Territory}if(a){r._impl.iconMetadata=t.metadata;var h=function(t){for(var e=0,i=t.length;i--;)e+=t.charCodeAt(i);return e}(t.styleAttributes),u=o.madabaDomains[h%o.madabaDomains.length]+t.calloutGlyphImageUrlTemplate;o.proxyPrefixes&&(u=o.proxyPrefixes[0]+u),r._impl.glyphImage=new c(r,u,3),r._impl.selectedGlyphImage=new c(r,u,4),t.metadata&&"Square"===t.metadata.calloutShape&&(r._impl.glyphImage.useSquareBalloon=r._impl.selectedGlyphImage.useSquareBalloon=!0),r._impl.enablesDefaultGlyphImage=!1,t.poiType&&l[t.poiType]&&(r._impl.pointOfInterestCategory=t.poiType)}return r},t.exports=d},2136:function(t,e,i){var n=i(2137),o=i(1970),a=i(1948);function s(t,e){if(o(this,s)){var n=i(2158);Object.defineProperty(this,"_impl",{value:new n(this,t,e)})}}i(2143),s.prototype=a.inheritPrototype(n,s,{get size(){return this._impl.size},set size(t){this._impl.size=t},get color(){return this._impl.color},set color(t){this._impl.color=t},get glyphColor(){return this._impl.glyphColor},set glyphColor(t){this._impl.glyphColor=t},get glyphImage(){return this._impl.glyphImage},set glyphImage(t){this._impl.glyphImage=t},get selectedGlyphImage(){return this._impl.selectedGlyphImage},set selectedGlyphImage(t){this._impl.selectedGlyphImage=t},get glyphText(){return this._impl.glyphText},set glyphText(t){this._impl.glyphText=t},get titleVisibility(){return this._impl.titleVisibility},set titleVisibility(t){this._impl.titleVisibility=t},get subtitleVisibility(){return this._impl.subtitleVisibility},set subtitleVisibility(t){this._impl.subtitleVisibility=t}}),t.exports=s},2137:function(t,e,i){var n=i(2138),o=i(2140),a=i(1970),s=i(1948);function r(t,e,n){if(a(this,r)){var o=i(2141);Object.defineProperty(this,"_impl",{value:new o(this,t,e,n)})}}r.EVENTS=o.EVENTS,r.DisplayPriority=o.DisplayPriority,r.CollisionMode=o.CollisionMode,r.prototype=s.inheritPrototype(n,r,{get map(){return this._impl.map},set map(t){this._impl.map=t},get coordinate(){return this._impl.coordinate},set coordinate(t){this._impl.coordinate=t},get title(){return this._impl.title},set title(t){this._impl.title=t},get subtitle(){return this._impl.subtitle},set subtitle(t){this._impl.subtitle=t},get accessibilityLabel(){return this._impl.accessibilityLabel},set accessibilityLabel(t){this._impl.accessibilityLabel=t},get data(){return this._impl.data},set data(t){this._impl.data=t},get enabled(){return this._impl.enabled},set enabled(t){this._impl.enabled=t},get calloutEnabled(){return this._impl.calloutEnabled},set calloutEnabled(t){this._impl.calloutEnabled=t},get selected(){return this._impl.selected},set selected(t){this._impl.selected=t},get animates(){return this._impl.animates},set animates(t){this._impl.animates=t},get calloutOffset(){return this._impl.calloutOffset},set calloutOffset(t){this._impl.calloutOffset=t},get callout(){return this._impl.callout},set callout(t){this._impl.callout=t},get draggable(){return this._impl.draggable},set draggable(t){this._impl.draggable=t},get size(){return this._impl.size},set size(t){this._impl.size=t},get displayPriority(){return this._impl.displayPriority},set displayPriority(t){this._impl.displayPriority=t},get collisionMode(){return this._impl.collisionMode},set collisionMode(t){this._impl.collisionMode=t},get clusteringIdentifier(){return this._impl.clusteringIdentifier},set clusteringIdentifier(t){this._impl.clusteringIdentifier=t},get padding(){return this._impl.padding},set padding(t){this._impl.padding=t}}),t.exports=r},2138:function(t,e,i){var n=i(1948),o=i(1961),a=i(2139);function s(){Object.defineProperty(this,"_impl",{value:new a(this)})}s.prototype=n.inheritPrototype(o.EventTarget,s,{get element(){return this._impl.element},set element(t){this._impl.element=t},get anchorOffset(){return this._impl.anchorOffset},set anchorOffset(t){this._impl.anchorOffset=t},get animates(){return this._impl.animates},set animates(t){this._impl.animates=t},get visible(){return this._impl.visible},set visible(t){this._impl.visible=t},get appearanceAnimation(){return this._impl.appearanceAnimation},set appearanceAnimation(t){this._impl.appearanceAnimation=t}}),t.exports=s},2139:function(t,e,i){var n=i(1948),o=i(1976);function a(t){t&&(this._public=t)}a.prototype={_shown:!0,_visible:!0,_position:new o,_anchorPoint:new o,_anchorOffset:new window.DOMPoint,_appearanceAnimation:"",renderedByDOMElement:!0,isMapFeature:!1,delegate:null,get node(){return this._node},get element(){return this._element},set element(t){console.warn("[MapKit] The `element` property is read-only.")},get anchorOffset(){return this._anchorOffset},set anchorOffset(t){n.checkInstance(t,window.DOMPoint,"[MapKit] Annotation.anchorOffset expected a DOMPoint, but got `"+t+"` instead."),this._anchorOffset=new window.DOMPoint(t.x,t.y),this.updatePosition()},get visible(){return this._visible},set visible(t){t=!!t,this._visible!==t&&(this._visible=t,this._updateVisibility())},get appearanceAnimation(){return this._appearanceAnimation},set appearanceAnimation(t){if(n.checkType(t,"string","[MapKit] Annotation.appearanceAnimation expected a string, but got `"+t+"` instead."),""!==t){var e=document.createElement("div");e.style.animation=e.style.webkitAnimation=t,this._appearanceAnimationName=e.style.animationName||e.style.webkitAnimationName,this._appearanceAnimationName?this._appearanceAnimation=t:console.warn("[MapKit] Annotation.appearanceAnimation expects an animation style value with an animation name, but got `"+t+"` instead.")}else this._appearanceAnimation=this._appearanceAnimationName=""},nodePosition:function(){return this._nodePosition||this._node.position},calculateNodePosition:function(){return new o(this._position.x-this._anchorPoint.x-this._anchorOffset.x,this._position.y-this._anchorPoint.y-this._anchorOffset.y)},updatePosition:function(){var t=this.calculateNodePosition();!this.renderedByDOMElement&&this.map&&this.map._impl.cameraIsMoving?this._nodePosition=t:(delete this._nodePosition,this._node.position=t),this.positionWasUpdated(t)},setShown:function(t){t=!!t,this._shown!==t&&(this._shown=t,this._node.element&&this._node.classList.toggle("mk-hidden",!t),this.shownPropertyWasUpdated(t))},shownPropertyWasUpdated:function(){},positionWasUpdated:function(t){},isShown:function(){return this._shown},position:function(){return this._position},setPosition:function(t){this._position=t,this.updatePosition()},updateVisibility:function(t){this._node.classList.toggle("mk-invisible",t)},setSize:function(t){this._node.size=t,this._anchorPoint=new o(t.width/2,t.height),this.updatePosition()},_updateVisibility:function(){!this._visible&&this._animating||(this.updateVisibility(!this._visible),this.delegate&&this.delegate.annotationPropertyDidChange(this._public||this,"visible"))}},t.exports=a},2140:function(t,e,i){var n=i(1969),o=n.Coordinate,a=i(1975),s=i(1978),r=i(1998),l=i(1976),h=i(1948),c=i(1972),d=i(2009),u=i(2005),p=i(1961),m=["title","subtitle","data","accessibilityLabel","anchorOffset","calloutOffset","size","callout","visible","enabled","selected","calloutEnabled","animates","appearanceAnimation","collisionMode","padding"],g=["draggable","displayPriority","clusteringIdentifier"],f={DragStart:"drag-start",Dragging:"dragging",DragEnd:"drag-end"},_={Low:250,High:750,Required:1e3},y={Rectangle:"rectangle",Circle:"circle",None:"none"};function v(t){function e(e,i,n,o){t.call(this,e),h.checkOptions(o),this._setCoordinate(i),this._unsized=!0,this._public=e,this.occluded=!1,this._setNode(i,n,o),o&&(m.forEach((function(t){t in o&&(this[t]=o[t])}),this),g.forEach((function(t){t in o&&this["_set"+t.replace(/^\w/,(function(t){return t.toUpperCase()}))](o[t])}),this),Object.keys(o).forEach((function(t){"map"===t||"element"===t?console.warn("[MapKit] `"+t+"` is read-only and can't be set on an Annotation."):this.isAKnownOption(t)||console.warn("[MapKit] Unknown option for annotation: "+t+" (use the `data` property instead)")}),this)),d.addEventListener(d.Events.LocaleChanged,this),this.updateLocalizedText()}return e.Events=f,e.DisplayPriority=_,e.CollisionMode=y,e.prototype=h.inheritPrototype(t,e,{_calloutOffset:new window.DOMPoint(0,1),_enabled:!0,_selected:!1,_calloutEnabled:!0,_draggable:!1,_title:"",_subtitle:"",_accessibilityLabel:null,_displayPriority:_.Required,_collisionMode:y.Rectangle,_clusteringIdentifier:null,_sceneGraphNode:null,_padding:new u,_draggingLift:40,shouldHideLabels:!1,alwaysSelected:!1,_callout:null,get map(){return this.delegate&&this.delegate.mapForAnnotation(this._public)},set map(t){console.warn("[MapKit] The `map` property is read-only.")},get coordinate(){return this._coordinate},set coordinate(t){this.memberAnnotations||this._setCoordinate(t)},get title(){return this._title},set title(t){null!=t?(h.checkType(t,"string","[MapKit] Expected a string value for Annotation.title, but got `"+t+"` instead"),this._title=t):delete this._title,this.updateLocalizedText(),this._updatedProperty("title")},get subtitle(){return this._subtitle},set subtitle(t){null!=t?(h.checkType(t,"string","[MapKit] Expected a string value for Annotation.subtitle, but got `"+t+"` instead"),this._subtitle=t):delete this._subtitle,this.updateLocalizedText(),this._updatedProperty("subtitle")},get accessibilityLabel(){return this._accessibilityLabel},set accessibilityLabel(t){null!=t?(h.checkType(t,"string","[MapKit] Expected a string value for Annotation.accessibilityLabel, but got `"+t+"` instead"),this._accessibilityLabel=t):delete this._accessibilityLabel,this.updateLocalizedText()},get data(){return Object.prototype.hasOwnProperty.call(this,"_data")||(this._data={}),this._data},set data(t){this._data=t},get enabled(){return this._enabled},set enabled(t){this._enabled=!!t},get calloutEnabled(){return this._calloutEnabled},set calloutEnabled(t){this._calloutEnabled=!!t},get selected(){return this._selected},set selected(t){var e=!!t;if(e!==this._selected){if(this.delegate&&!this.delegate.selectionMayChange)return void console.warn("[MapKit] Selection may not change in select/deselect event handler.");this._selected=e,this._updatedProperty("selected")}},get animates(){return this._animates},set animates(t){this._animates=!!t},get calloutOffset(){return this._calloutOffset},set calloutOffset(t){h.checkInstance(t,window.DOMPoint,"[MapKit] Annotation.calloutOffset expected a DOMPoint, but got `"+t+"` instead."),this._calloutOffset=new window.DOMPoint(t.x,t.y),this._updatedProperty("calloutOffset")},get callout(){return this._callout},set callout(t){h.checkType(t,"object","[MapKit] Annotation.callout expected an object, but got `"+t+"` instead."),this._callout=t},get draggable(){return this._draggable},set draggable(t){this.memberAnnotations||this._setDraggable(t)},get draggingLift(){return this._draggingLift},set draggingLift(t){if(h.checkType(t,"number","[MapKit] Annotation.draggingLift expected a number, but got `"+t+"` instead."),t<0)throw new Error("[MapKit] Annotation.draggingLift must be zero or more.");this._draggingLift=t},get size(){if(this._updateSize(),!this._unsized)return this._node.size.copy()},set size(t){var e="[MapKit] Annotation size expects a size object with width and height properties";h.checkType(t,"object",e).checkType(t.width,"number",e).checkType(t.height,"number",e),this.setSize(new a(t.width,t.height)),this._userSetSize=!0,this.updateSize()},get opacity(){return this.sceneGraphNode?this.sceneGraphNode.opacity:this.node.opacity},set opacity(t){this.sceneGraphNode?this.sceneGraphNode.opacity=t:this.node.opacity=t},get displayPriority(){return this._displayPriority},set displayPriority(t){this.memberAnnotations||this._setDisplayPriority(t)},isRequired:function(){return this.selected||this.displayPriority===_.Required},get collisionMode(){return this._collisionMode},set collisionMode(t){if(!h.checkValueIsInEnum(t,y))throw new Error("[MapKit] Unknown value for `collisionMode`. Choose from Annotation.CollisionMode.");t!==this._collisionMode&&(this._collisionMode=t,this._updatedProperty("collisionMode"))},get clusteringIdentifier(){return this._clusteringIdentifier},set clusteringIdentifier(t){this.memberAnnotations||this._setClusteringIdentifier(t)},get padding(){return this._padding.copy()},set padding(t){h.checkInstance(t,u,"[MapKit] The `padding` parameter passed to `Annotation.padding` is not a Padding."),this._padding.equals(t)||(this._padding=t.copy(),this._updatedProperty("padding"))},get needsLayout(){return this._sceneGraphNode&&this._sceneGraphNode.needsLayout},get elementInAnnotationDOM(){return this._node.element.firstChild},removedFromMap:function(){this._removedFromMap=!0,d.removeEventListener(d.Events.LocaleChanged,this),this._occludedAnimation&&this._occludedAnimation.end(),this._clusteringAnimation&&this._clusteringAnimation.end()},addedToMap:function(){this._removedFromMap&&(this._removedFromMap=!1,d.addEventListener(d.Events.LocaleChanged,this),this.updateLocalizedText())},delegate:null,setDelegate:function(t){this.delegate=t},updateLayout:function(){},doesAnimate:function(){return this._animates&&!!this._appearanceAnimationName},willMoveToMap:function(){this._isMoving=this.doesAnimate(),this._updateSize()},didMoveToMap:function(){this._isMoving&&this._appearanceAnimationName&&this._visible&&(this.element.style.animation=this.element.style.webkitAnimation=this._appearanceAnimation,(this.element.style.animationName||this.element.style.webkitAnimationName)&&(this._animating=!0,this.element.addEventListener("animationend",this),this.element.addEventListener("webkitAnimationEnd",this))),delete this._isMoving},isStable:function(){return!this.isWaiting&&!this._isMoving&&!this._isAnimating&&!this._isLifted},canShowCallout:function(){return this._calloutEnabled&&this.isStable()},calloutWillAppear:function(){},calloutWillDisappear:function(){},canBePicked:function(){return this._shown&&this._visible&&!this._isMoving&&!this._isAnimating&&!this._isLifted&&!this.occluded},draggingDidStart:function(){this._public.dispatchEvent(new p.Event(f.DragStart))},isDraggable:function(){return this.draggable&&!this._isLifted},isLifted:function(){return this._isLifted},dispatchDraggingEvent:function(){var t=new p.Event(e.Events.Dragging);return t.coordinate=this._coordinateDuringDrag(),this._public.dispatchEvent(t),t},positionForCallout:function(){var t=this._calloutAnchorPoint;if(!t){var e=this._userSetSize?this._node.size:this.delegate.sizeForElement(this.elementInAnnotationDOM);t=new window.DOMPoint(-e.width/2,0)}var i=this.nodePosition();return new l(i.x-t.x-this._calloutOffset.x,i.y-t.y-this._calloutOffset.y)},setDraggingTranslationForMapFrameSize:function(t,e){this._dragController.setTranslation(this.clampDraggingTranslationForMapFrameSize(t,e))},dropAfterDraggingAndRevertPosition:function(t){this._dragController.dropAnnotationAfterDraggingAndRevertPosition(t)},distanceToPoint:function(t){var e=this._node.position.x,i=e+this._node.size.width,n=e-t.x,o=i-t.x,a=n<=0&&o>=0?0:Math.min(Math.abs(n),Math.abs(o)),s=this._node.position.y,r=s+this._node.size.height,l=s-t.y,h=r-t.y,c=l<=0&&h>=0?0:Math.min(Math.abs(l),Math.abs(h));return a*a+c*c},lift:function(){this._isLifted=!0,this._dragController.lift(this._draggingLift),this._updatedProperty("")},translate:function(t,e){this.sceneGraphNode?this.sceneGraphNode.transform=(new s).translate(t,e):this._node.transform=(new r).translate(t,e)},translatedPosition:function(){var t=this._dragController.getTranslation();return new l(this._position.x-this._anchorPoint.x-this._anchorOffset.x+t.x,this._position.y-this._anchorPoint.y-this._anchorOffset.y+t.y)},updatedPosition:function(){return this.coordinate?(this.x=n.convertLongitudeToX(n.wrapLongitude(this.coordinate.longitude)),this.y=n.convertLatitudeToY(this.coordinate.latitude),!0):(this.setShown(!1),this.sceneGraphNode&&this.sceneGraphNode.remove(),!1)},get sceneGraphNode(){return this._sceneGraphNode},mayBeDrawn:function(){return!!this.sceneGraphNode&&this._shown&&this.visible&&!this.isWaiting},isDrawn:function(){return(!this.occluded||this._occludedAnimation)&&this.mayBeDrawn()},animateOcclusion:function(){var t=this.occluded?0:1;this._sceneGraphNode&&(this._occludedAnimation&&this._occludedAnimation.end(),this._occludedAnimation=new c.NodeAnimator.Opacity({node:this._sceneGraphNode,from:1-t,to:t,duration:200,done:function(){delete this._occludedAnimation}.bind(this)}).begin());var e=this.occluded&&this.cluster&&this.cluster._impl&&!this.cluster._impl.occluded,i=!this.occluded&&this.previousCluster&&!this.previousCluster._impl.wasOccluded;(e||i)&&this._animateClustering()},positionWasUpdated:function(t){this._sceneGraphNode&&(this._sceneGraphNode.needsDisplay=!0)},dragOffset:l.Zero,handleEvent:function(t){switch(t.type){case d.Events.LocaleChanged:this.updateLocalizedText();break;case"animationend":case"webkitAnimationEnd":if(t.animationName!==this._appearanceAnimationName)return;this.element.style.animation=this.element.style.webkitAnimation="",this.element.removeEventListener("animationend",this),this.element.removeEventListener("webkitAnimationEnd",this),this.finishedAnimating()}},updateLocalizedText:function(){this._node&&this._node.element&&this._node.element.setAttribute("aria-label",this.altText())},altText:function(){return this._accessibilityLabel||(this.title&&this.subtitle?d.get("Annotation.Generic.AccessibilityLabel",{title:this.title,subtitle:this.subtitle}):this.title||this.subtitle||"")},updateSize:function(){delete this._unsized,this._selected&&this.delegate&&this.delegate.selectedAnnotationDidMoveToMap(this._public)},clampDraggingTranslationForMapFrameSize:function(t,e){var i=this._anchorPoint.x+this._anchorOffset.x-this._position.x,n=e.width-this._node.size.width+i,o=this._anchorPoint.y+this._anchorOffset.y+this._dragController.liftAmount-this._position.y,a=e.height-this._node.size.height+o;return new l(h.clamp(t.x,i,n),h.clamp(t.y,o,a))},droppedAfterLift:function(){delete this._isLifted,this.selected&&this.delegate.selectedAnnotationDidMoveToMap(this._public),this._updatedProperty("")},draggingDidEnd:function(){this.coordinate=this._coordinateDuringDrag(),this.resetNodeTransform(),this._public.dispatchEvent(new p.Event(e.Events.DragEnd))},resetNodeTransform:function(){this.node.transform=new r},finishedAnimating:function(){delete this._isAnimating,this._selected&&this.delegate&&this.delegate.selectedAnnotationDidMoveToMap(this._public),this._visible||this._updateVisibility(),this.delegate&&this.delegate.annotationFinishedAnimating(this._public)},isAKnownOption:function(t){return m.indexOf(t)>=0||g.indexOf(t)>=0},_animateClustering:function(){if(this._sceneGraphNode){var t={annotation:this,node:this._sceneGraphNode,duration:200,done:function(){delete this._clusteringAnimation}.bind(this)};this.cluster?(t.from=this.coordinate.toMapPoint(),t.to=this.cluster.coordinate.toMapPoint()):(t.from=this.previousCluster.coordinate.toMapPoint(),t.to=this.coordinate.toMapPoint());var e=t.to.x-t.from.x;e<-.5?t.to.x+=1:e>.5&&(t.from.x+=1),this._clusteringAnimation&&this._clusteringAnimation.end(),this._clusteringAnimation=new b(t).begin()}},_setCoordinate:function(t){h.checkInstance(t,o,"[MapKit] Annotation.coordinate expected a Coordinate value."),delete this._translation,this._coordinate=t.copy(),this._updatedProperty("coordinate")},_setDraggable:function(t){var e=!!t;e!==this._draggable&&(this._draggable=e,this._updatedProperty("draggable"))},_setDisplayPriority:function(t){var e="[MapKit] Annotation displayPriority expects a number between 0 and "+_.Required;h.checkType(t,"number",e);var i=h.clamp(t,0,_.Required);if(i!==t)console.warn(e+", value was normalized");else if(i===this._displayPriority)return;this._displayPriority=i,this._updatedProperty("displayPriority")},_setClusteringIdentifier:function(t){null!==t&&h.checkType(t,"string","[MapKit] Annotation clusteringIdentifier expects a string"),this._clusteringIdentifier!==t&&(this._clusteringIdentifier=t,this._updatedProperty("clusteringIdentifier"))},_coordinateDuringDrag:function(){var t=this.sceneGraphNode?this._dragController.translation.x:0,e=this.sceneGraphNode?this._dragController.translation.y-this._dragController.liftAmount:0,i=this.node.convertPointToPage(new l(t+this.dragOffset.x+this._anchorPoint.x+this.anchorOffset.x,e+this.dragOffset.y+this._anchorPoint.y+this.anchorOffset.y));return this.delegate._map.convertPointOnPageToCoordinate(new window.DOMPoint(i.x,i.y))},_updateSize:function(){if(this._unsized&&!this._userSetSize&&this.delegate){var t=this.delegate.sizeForElement(this.elementInAnnotationDOM);t&&(delete this._unsized,this.setSize(t))}},_updatedProperty:function(t){this.delegate&&this.delegate.annotationPropertyDidChange(this._public,t)}}),e}function b(t){c.NodeAnimator.Basic.call(this,t),this.annotation=t.annotation}b.prototype=h.inheritPrototype(c.NodeAnimator.Basic,b,{update:function(t){var e=this.annotation,i=e.delegate._map,o=i.camera.toRenderingMapRect(),a=n.wrapX((1-t)*this.from.x+t*this.to.x,o.midX()),r=(1-t)*this.from.y+t*this.to.y,h=i.adjustMapItemPoint(i.camera.transformMapPoint(new l(a,r)));this.node.transform=(new s).translate(h.x-e._position.x,h.y-e._position.y)},stringInfo:function(){return c.NodeAnimator.Basic.prototype.stringInfo.call(this,"translation*")}}),v.Events=f,v.DisplayPriority=_,v.CollisionMode=y,t.exports=v},2141:function(t,e,i){var n=i(2142),o=i(2139),a=i(1959),s=i(2140),r=i(1948),l=i(1986),h=i(1997),c=s(o);c.prototype._animates=!0,c.prototype._setNode=function(t,e,i){r.checkType(e,"function");var o=a(e,window,[t,i]);r.checkElement(o,"[MapKit] Annotation element factory must return a DOM element, got `"+o+"` instead."),this._element=o;var s=o;if(l.supportsShadowDOM){var c="mk-slot-"+Math.random().toString(32).substr(2,8);o.slot=c,(s=l.htmlElement("slot")).name=c}this._node=new h.Node(l.htmlElement("div",s)),this._node.wantsHardwareCompositing=!0,this._dragController||(this._dragController=new n(this))},c.div=function(){return document.createElement("div")},t.exports=c},2142:function(t,e,i){var n=i(1976),o=i(1981);function a(t){this._annotation=t}a.prototype={liftDurationMs:200,liftOpacity:.5,animateLift:function(){var t=Math.min((Date.now()-this._liftAnimationStartDate)/this.liftDurationMs,1);this._annotation.translate(this.translation.x,this.translation.y-this.liftAmount*t),this._annotation.opacity=1-(1-this.liftOpacity)*t,t<1?(o.scheduleOnNextFrame(this),this._liftAnimationProgress=t):(delete this._liftAnimationStartDate,delete this._liftAnimationProgress)},animateDropAfterLift:function(){var t=Math.max(this._dropAnimationStartP-Math.min((Date.now()-this._dropAfterLiftAnimationStartDate)/this.liftDurationMs,1),0);this._dropAnimationRevert&&this._annotation.translate(0,-this.liftAmount*t),this._annotation.opacity=1-(1-this.liftOpacity)*t,t>0?o.scheduleOnNextFrame(this):this._annotation.droppedAfterLift()},dropAnnotationAfterDraggingAndRevertPosition:function(t){this._liftAnimationStartDate?(this._dropAnimationStartP=this._liftAnimationProgress,delete this._liftAnimationStartDate,delete this._liftAnimationProgress):this._dropAnimationStartP=1,t?this._annotation.resetNodeTransform():this._annotation.draggingDidEnd(),this._dropAfterLiftAnimationStartDate=Date.now(),this._dropAnimationRevert=t,o.scheduleOnNextFrame(this)},lift:function(t){this.liftAmount=t,this.translation=new n,t>0?(this._liftAnimationStartDate=Date.now(),this._liftAnimationProgress=0,o.scheduleOnNextFrame(this)):this._annotation.opacity=this.liftOpacity},getTranslation:function(){return new n(this.translation.x,this.translation.y-this.liftAmount)},setTranslation:function(t){this.translation=t,this._liftAnimationStartDate||this._annotation.translate(this.translation.x+this._annotation.dragOffset.x,this.translation.y-this.liftAmount+this._annotation.dragOffset.y)},performScheduledUpdate:function(){this._liftAnimationStartDate?this.animateLift():this._dropAfterLiftAnimationStartDate&&this.animateDropAfterLift()}},t.exports=a},2143:function(t,e,i){var n=i(2144),o=i(2156),a=i(1978),s=i(1948),r=i(2012),l=i(2009),h=i(1976),c=i(1986),d=i(1943),u=i(2157),p=["color","glyphColor","glyphImage","selectedGlyphImage","glyphText","titleVisibility","subtitleVisibility"],m={light:"#ff5b40",dark:"#e6523b"},g={light:"white",dark:"#e7e6e4"},f={light:"white",dark:"black"},_={Default:"default",Dot:"dot",Large:"large"};function y(t){function e(e,i,o){this._sceneGraphNode=new n(this),t.call(this,e,i,t.div,o),this._public=e,o&&p.forEach((function(t){t in o&&(this[t]=o[t])}),this),this.updateGlyph(),this.useSquareBalloon=this._glyphImage&&this._glyphImage.useSquareBalloon||this._selectedGlyphImage&&this._selectedGlyphImage.useSquareBalloon,this._sceneGraphNode._balloon.setBalloonStyle(),this._sceneGraphNode.updateState(this.selected?this.canShowCallout()?"callout":"selected":"default")}return e.StaticStyles=_,e.prototype=s.inheritPrototype(t,e,{_animates:!0,_calloutAnchorPoint:new window.DOMPoint(-n.Params.callout.radius,1),_glyphImage:null,_selectedGlyphImage:null,_glyphText:"",_color:null,_glyphColor:null,_titleVisibility:n.FeatureVisibility.Adaptive,_subtitleVisibility:n.FeatureVisibility.Adaptive,shouldHideLabels:!0,renderedByDOMElement:!1,get size(){return this._sceneGraphNode.size.copy()},set size(t){console.warn("[MapKit] The `size` property of a marker annotation cannot be set.")},get color(){return null!==this._color?this._color:this.map?m[this.map.colorScheme]:m.light},set color(t){null!==t&&s.checkType(t,"string","[MapKit] Expected a string value for MarkerAnnotation.color, but got `"+t+"` instead"),t!==this._color&&(this._color=t,this._sceneGraphNode.updateAppearance(!0),this._drawCalloutAccessory())},get fillColor(){return this.color},get haloColor(){return null},get glyphColor(){return null!==this._glyphColor?this._glyphColor:this.map?this.isGlyphImagePOIIcon?f[this.map.colorScheme]:g[this.map.colorScheme]:g.light},set glyphColor(t){null!==t&&s.checkType(t,"string","[MapKit] Expected a string value for MarkerAnnotation.glyphColor, but got `"+t+"` instead"),t!==this._glyphColor&&(this._glyphColor=t,this._sceneGraphNode.updateAppearance(!0),this._drawCalloutAccessory())},get glyphImage(){return this._glyphImage},set glyphImage(t){this._setGlyphImage("_glyphImage","updateGlyphImage",t)},get selectedGlyphImage(){return this._selectedGlyphImage},set selectedGlyphImage(t){this._setGlyphImage("_selectedGlyphImage","updateSelectedGlyphImage",t)},updateGlyphImages:function(){this._setGlyphImage("_glyphImage","updateGlyphImage",this._glyphImage),this._setGlyphImage("_selectedGlyphImage","updateSelectedGlyphImage",this._selectedGlyphImage)},get glyphText(){return this._glyphText},set glyphText(t){s.checkType(t,"string","[MapKit] Expected a string value for MarkerAnnotation.glyphText, but got `"+t+"` instead"),t!==this._glyphText&&(this._glyphText=t,this.updateLocalizedText(),this.updateGlyph(),this._sceneGraphNode.updateGlyphText(),this._drawCalloutAccessory())},get glyph(){return this._glyph},get titleVisibility(){return this._titleVisibility},set titleVisibility(t){if(!s.checkValueIsInEnum(t,n.FeatureVisibility))throw new Error("[MapKit] Expected one of Hidden, Visible or Adaptive for MarkerAnnotation.titleVisibility");t!==this._titleVisibility&&(this._titleVisibility=t,this._sceneGraphNode.needsLayout=!0)},get subtitleVisibility(){return this._subtitleVisibility},set subtitleVisibility(t){if(!s.checkValueIsInEnum(t,n.FeatureVisibility))throw new Error("[MapKit] Expected one of Hidden, Visible or Adaptive for MarkerAnnotation.subtitleVisibility");t!==this._subtitleVisibility&&(this._subtitleVisibility=t,this._sceneGraphNode.needsLayout=!0)},labelsCanBeShown:function(){return this.delegate&&this.delegate.supportsLabelRegions()},titleCanBeShown:function(){return this.title&&this._titleVisibility!==n.FeatureVisibility.Hidden},subtitleCanBeShown:function(t){return this.subtitle&&(this._subtitleVisibility===n.FeatureVisibility.Visible||this._subtitleVisibility===n.FeatureVisibility.Adaptive&&(this._public.memberAnnotations||this.selected&&t))},updateLayout:function(t){t?this._sceneGraphNode.updateLayout():this._sceneGraphNode.needsLayout=!0},updatedLayout:function(){this._updatedProperty("")},calculateNodePosition:function(){return new h(c.roundToDevicePixel(this._position.x-this._anchorPoint.x-this._anchorOffset.x),this._position.y-this._anchorPoint.y-this._anchorOffset.y)},get darkColorScheme(){return!!this.map&&c.darkColorScheme(this.map._impl.mapNodeTint)},get isGlyphImagePOIIcon(){return!!(this._glyphImage&&this._glyphImage.isPOIIcon||this._selectedGlyphImage&&this._selectedGlyphImage.isPOIIcon)},isGlyphImageInternal:!1,get enablesDefaultGlyphImage(){return this._sceneGraphNode.enablesDefaultGlyphImage},set enablesDefaultGlyphImage(t){this._sceneGraphNode.enablesDefaultGlyphImage=t},setDelegate:function(e){t.prototype.setDelegate.call(this,e),this.labelsCanBeShown()&&this._updatedProperty("title")},doesAnimate:function(){return this._animates},willMoveToMap:function(t){this._isMoving=t&&this.animates},didMoveToMap:function(){var e=this._isMoving;t.prototype.didMoveToMap.call(this),this.delegate&&e&&this.visible&&!this._appearanceAnimation&&this._shown?(this._isAnimating=!0,this._sceneGraphNode.animateAppearance((function(t){t.node.annotation.finishedAnimating()}))):this._sceneGraphNode.preventAnimation()},lift:function(e){this._sceneGraphNode.updateState("lifted"),t.prototype.lift.call(this,e)},droppedAfterLift:function(){this._sceneGraphNode.updateState("default"),t.prototype.droppedAfterLift.call(this)},canShowCallout:function(){return(!!this.callout||this.delegate&&!this.delegate.supportsLabelRegions())&&t.prototype.canShowCallout.call(this)},calloutWillAppear:function(t){this.isStable()&&this._sceneGraphNode.updateState(t?"callout":"selected")},calloutWillDisappear:function(){this.selected||(delete this._calloutAccessoryNode,this._sceneGraphNode.updateState("default"))},canvasForCalloutAccessory:function(){if(!this.callout||!(this.callout.calloutElementForAnnotation||this.callout.calloutContentForAnnotation||this.callout.calloutLeftAccessoryForAnnotation||this.callout.calloutRightAccessoryForAnnotation))return this._calloutAccessoryNode||(this._calloutAccessoryNode=new o(this,n.Params.bubble),this._calloutAccessoryNode.glyphImage=this._sceneGraphNode._balloon.glyphImage,this._calloutAccessoryNode.selectedGlyphImage=this._sceneGraphNode._balloon.selectedGlyphImage,this._calloutAccessoryNode.glyphText=this._glyphText,this._drawCalloutAccessory()),this._calloutAccessoryNode.getLayer();delete this._calloutAccessoryNode},get ignoreCalloutCornerRadiusForLeftAccessory(){return!0},altText:function(){return t.prototype.altText.call(this)||l.get("Annotation.Marker.AccessibilityLabel")},isAKnownOption:function(e){return p.indexOf(e)>=0||t.prototype.isAKnownOption.call(this,e)},resetNodeTransform:function(){this.sceneGraphNode.transform=new a},updateGlyph:function(){this._glyph=this.glyphText||(this._glyphImageElement?this._glyphImageElement.src:"")},set staticStyle(t){var e;switch(t){case _.Dot:e="callout";break;case _.Large:e="selected";break;default:e="default"}this._sceneGraphNode.updateState(e),this._sceneGraphNode._usingStaticStyle=!0},loadGlyphImage:function(t,e,i,n){u(n,function(o){if(this[e]===n)return o?void function(t,e,i,n){var o=i+"Loader";t[o]&&t[o].unschedule(),t[o]=new r.ImageLoader(r.Priority.Highest,{urlForImageLoader:e,loaderDidSucceed:function(e){t[o]===e&&(delete t[o],t[i]=e.image,t.updateGlyph(),t._sceneGraphNode[n](e.image),t._calloutAccessoryNode&&(t._calloutAccessoryNode[n](e.image),t._drawCalloutAccessory()))},loaderDidFail:function(e){t[o]===e&&(delete t[o],delete t[i],t.updateGlyph(),t._sceneGraphNode[n](),t._calloutAccessoryNode&&(t._calloutAccessoryNode[n](),t._drawCalloutAccessory()))}}),t.isGlyphImageInternal&&(t[o].crossOrigin=c.getCorsAttribute(d.withCredentials)),t[o].schedule()}(this,o.glyphImageUrl,t,i):(delete this[t],this._sceneGraphNode.glyphImageError(),void(this._calloutAccessoryNode&&this._calloutAccessoryNode.glyphImageError()))}.bind(this))},_setGlyphImage:function(t,e,i){null!=i&&s.checkType(i,"object","[MapKit] Expected a hash value or an Image delegate for MarkerAnnotation."+t.replace(/^_/,"")+", but got `"+i+"` instead"),this[t]=i;var n=t+"Element";if(!i)return delete this[n],this._sceneGraphNode[e](null),void(this._calloutAccessoryNode&&(this._calloutAccessoryNode[e](null),this._drawCalloutAccessory()));this.loadGlyphImage(n,t,e,i)},_updatedProperty:function(e){"title"!==e&&"subtitle"!==e||(this._sceneGraphNode.needsLayout=!0),t.prototype._updatedProperty.call(this,e)},_drawCalloutAccessory:function(){this._calloutAccessoryNode&&this._calloutAccessoryNode.draw()}}),e.DefaultColor=m,e}y.StaticStyles=_,y.DefaultColor=m,y.DefaultGlyphColor=g,t.exports=y},2144:function(t,e,i){var n=i(1972),o=i(1948),a=i(1986),s=i(1981),r=i(1976),l=i(1975),h=i(1978),c=i(1988).FeatureVisibility,d={borderWidth:1.5,labelOutlineWidth:2,shadowColor:"rgba(0, 0, 0, .15)",shadowOffsetY:.5,innerShadowColor:"rgba(0, 0, 0, .35)",transitionDuration:500,dotAnimationDuration:100,dotScale:1.5,anchorPointOffset:0};window.document||(d.transitionDuration=0);for(var u=T(d,{balloonRadius:13.5,shadowBlur:11.25,dotRadius:0,glyphFontSize:15,glyphImageSize:20,offset:0,style:"default",height:32}),p=T(d,{borderWidth:1.5,balloonRadius:11.5,transitionDuration:window.document?250:0,shadowBlur:5,shadowOffsetY:0,dotRadius:0,glyphFontSize:15,glyphImageSize:16,offset:0,style:"poi",height:23,anchorPointOffset:-11.5}),m=[],g=2;g<=6;g++){var f=12+.5*g;m[g]=T(p,{balloonRadius:f,height:2*f})}var _=T(d,{balloonRadius:30,shadowBlur:25,dotRadius:3,glyphFontSize:32,glyphImageSize:40,offset:8,style:"balloon",height:66}),y=T(d,{radius:4.5,shadowOffsetY:0,shadowBlur:0,shadowColor:"transparent"}),v=T(d,{balloonRadius:20,dotRadius:3,glyphFontSize:28,glyphImageSize:30,offset:0,style:"bubble",height:40}),b=i(2145),w=i(2150),C=i(2154);function k(t){n.GroupNode.call(this),this.annotation=t,this._balloon=this.addChild(new b(t)),this._balloon.setDelegate(this)}k.Params={default:u,lifted:u,selected:_,bubble:v,callout:y},k.POIIconParams=T(k.Params,{default:p,lifted:p}),k.prototype=o.inheritPrototype(n.BaseNode,k,{get position(){return this.annotation?this.annotation.nodePosition():new r},stringInfo:function(){return"MarkerAnnotationNode"+("default"!==this.state?"<"+this.state+">":"")},get enablesDefaultGlyphImage(){return this._balloon.enablesDefaultGlyphImage},set enablesDefaultGlyphImage(t){this._balloon.enablesDefaultGlyphImage=t},set needsLayout(t){t&&!this._needsLayout&&s.scheduleASAP(this),this._needsLayout=t},get needsLayout(){return this._needsLayout},getParamsFromState:function(t){var e=this.annotation.isGlyphImagePOIIcon,i=e?k.POIIconParams:k.Params;return"default"===t&&this.annotation.n&&e?m[Math.min(this.annotation.n,6)]:i[t]},balloonNodeSize:function(t){t||(t=this.state);var e=this.getParamsFromState(t);if("callout"===t)return new l(2*e.radius,2*e.radius);var i=2*e.balloonRadius;return new l(i,e.height+e.offset)},updateAppearance:function(t){window.document&&this._balloon.freeze(),t&&(this.needsDisplay=!0)},updateState:function(t){if(!this._usingStaticStyle){var e=this.annotation;this.state!==t&&(!e.selected&&"selected"!==this.state&&"callout"!==this.state||!this.state||this._animateFromState||(this._animateFromState=this.state),this.state=t,e._node.size=this._size=this._balloon.size=this.balloonNodeSize(),this.updateAppearance(),this.needsLayout=!0)}},performScheduledUpdate:function(){this.updateLayout(!1)},updateLayout:function(t){this._needsLayout&&(this._layoutSubNodes(t),this._needsLayout=!1)},updateGlyphText:function(){this.updateAppearance(!0),this._balloon.needsDisplay=!0},updateGlyphImage:function(t){this.updateAppearance(),this._balloon.glyphImage=t,this._balloon.needsDisplay=!0},updateSelectedGlyphImage:function(t){this._balloon.selectedGlyphImage=t,this._balloon.needsDisplay=!0},glyphImageError:function(){this.updateAppearance(),this._balloon.glyphImageError(this.state)},animateAppearance:function(t){var e=this.getParamsFromState(this.state);if(this.children.forEach(function(t){this.annotation.isGlyphImagePOIIcon||t===this._balloon||L(t,e)}.bind(this)),!this.annotation.isGlyphImagePOIIcon||this.annotation.selected)E(this._balloon,e,1e-12,1,new r(this._balloon.size.width/2,this._balloon.size.height),void 0,t);else{var i=new r(this._balloon.size.width/2,this._balloon.size.height/2);M(this._balloon,e,1e-12,1,i,t)}},preventAnimation:function(){this._animationPrevented=!0,this.needsLayout=!0},_layoutSubNodes:function(t){if(this.annotation){this.updateAppearance();var e=this.children.slice();this.children=[this._balloon],this._dot&&this.addChild(this._dot);var i=this._balloon.size.width,o=this.annotation,s=this.state,c=this.getParamsFromState(this.state),u=o.map&&!this._animationPrevented;delete this._animationPrevented;var p="callout"!==s&&"lifted"!==s&&!("default"===s&&o.selected)&&o.labelsCanBeShown(),m=p&&o.titleCanBeShown();m?this._prevTitle=G.call(this,"title",this._prevTitle):B.call(this,"title","_prevTitle"),p&&o.subtitleCanBeShown(m)?this._prevSubtitle=G.call(this,"subtitle",this._prevSubtitle):B.call(this,"subtitle","_prevSubtitle");var g=this._balloon.size.height;"callout"===s&&o.isGlyphImagePOIIcon&&0!==this.children.filter((function(t){return t.lineHeight})).length&&(g+=this.getParamsFromState("default").balloonRadius);var f=g,y=0;this.children.forEach((function(t){t.position=new r((i-t.size.width)/2,t.lineHeight?f:0),t.lineHeight&&(f+=t.lineHeight,t.fadingOut||(g+=t.lineHeight,y=t.lineHeight/2))})),o._anchorPoint=new r(i/2,this._balloon.size.height+c.anchorPointOffset),o._node.size=this.size=new l(i,g+y),o.updatePosition();var v=o._position.x-o._anchorPoint.x-o._anchorOffset.x,k=this.position.x;if(this.children.forEach((function(t){t.position=new r(a.roundToDevicePixel(v+t.position.x)-k,t.position.y)})),"selected"===s?(this._dot||(this._dot=this.addChild(new w(this.annotation,c.dotRadius*c.dotScale),1)),this._dot.size=new l(2*c.dotRadius*c.dotScale,2*c.dotRadius*c.dotScale),this._dot.position=new r(this._balloon.position.x+c.balloonRadius-c.dotRadius,this._balloon.size.height-2*c.dotRadius),this._dot.transform=(new h).scale(1/c.dotScale),this._dot.wantsLayerBacking=!0):this._dot&&(this._dot.remove(),delete this._dot),u&&this._animateFromState){var x=this.getParamsFromState(this._animateFromState);if("callout"===s||"callout"===this._animateFromState){var I=T(c);I.transitionDuration/=2;var A,P=this.addChild(new b(this.annotation,this._animateFromState));P.setDelegate(this),P.glyphImage=this._balloon.glyphImage,P.selectedGlyphImage=this._balloon.selectedGlyphImage,P.setBalloonStyle(),P.size=this.balloonNodeSize(P.state),this._balloon.transform=(new h).scale(1e-12),"callout"===s?(P.position=new r((this.size.width-P.size.width)/2,this._balloon.size.height/2-P.size.height-x.anchorPointOffset+4.5),A=new r(P.size.width/2,P.size.height+x.anchorPointOffset),M(P,I,1,1e-12,A,function(){P.remove();var t=T(c);t.transitionDuration/=2,M(this._balloon,t,1e-12,1,new r(this._balloon.size.width/2,this._balloon.size.height/2))}.bind(this))):(P.position=new r((this.size.width-P.size.width)/2,this._balloon.size.height+c.anchorPointOffset-P.size.height/2-4.5),A=new r(P.size.width/2,P.size.height/2),this.annotation.isGlyphImagePOIIcon?M(P,I,1,1e-12,A,function(){P.remove();var t=new r(this._balloon.size.width/2,this._balloon.size.height/2);M(this._balloon,c,1e-12,1,t)}.bind(this)):M(P,I,1,1e-12,A,function(){P.remove(),E(this._balloon,c,1e-12,1,new r(this._balloon.size.width/2,this._balloon.size.height))}.bind(this)))}else{var R,O,D,N=0;o.isGlyphImagePOIIcon?(R=x.balloonRadius/c.balloonRadius,N=_.height-_.balloonRadius+_.offset,"selected"===s?(O=new r(c.balloonRadius,c.balloonRadius+N/(1-R)),D=new r(this._balloon.size.width/2,this._balloon.size.height)):O=new r(c.balloonRadius,c.balloonRadius-N/(1-R))):(R=this.balloonNodeSize(this._animateFromState).height/this.balloonNodeSize().height,O=new r(this._balloon.size.width/2,this._balloon.size.height)),1!==R&&E(this._balloon,c,R,1,O,D);var z=this._dot;z&&L(z,{transitionDuration:c.dotAnimationDuration});var F=0;if(1!==R&&o.isGlyphImagePOIIcon&&(F=(R<1?1:-1)*this.getParamsFromState("default").balloonRadius),0!==F){var U=new r(0,0),K=new r(0,F);this.children.forEach((function(t){t.lineHeight&&function(t,e,i,o){new n.NodeAnimator.Translation({node:t,duration:e.transitionDuration,from:i,to:o,pop:!0}).begin()}(t,c,K,U)}))}}delete this._animateFromState}t||o.updatedLayout()}function B(t,i){e.forEach((function(e){e.kind===t&&(this.addChild(e),function(t,e,i){t.fadingOut=!0,new n.NodeAnimator.Opacity({node:t,duration:e.transitionDuration,from:1,to:0,done:function(){delete t.fadingOut,t.remove()}}).begin()}(e,c,this.annotation))}),this),delete this[i]}function G(t,e){var n=C.Font[t],a=o[t],s=u&&!!this.parent&&a!==e&&(!a||!e),r=this.annotation.darkColorScheme;return function(t,e){S.font=e;for(var i=t.trim().split(/\s+/),n=[];i.length>0;){for(var o=[i.shift()],a=o.join(" ").length;i.length>0&&a<=16;)o.push(i.shift()),a=o.join(" ").length;a>16&&o.length>1&&i.unshift(o.pop()),n.push([o.join(" "),S.measureText(o.join(" ")).width+d.labelOutlineWidth])}return n}(a,n).forEach((function(e){var n=new C(e[0],t,e[1],r);i=Math.max(i,e[1]),y=n.lineHeight/2,this.addChild(n),s&&L(n,c)}),this),a}}}),o.isNode()&&(k.prototype.injectDefaultImage=function(t,e){var i=this._balloon;t||(delete i.injectedDefaultImage,delete i.injectedDefaultImageScale),i.injectedDefaultImage=t,i.injectedDefaultImageScale=e}),k.FeatureVisibility=c;var S=o.createCanvas().getContext("2d");function T(t,e){var i=Object.create(t);for(var n in e)i[n]=e[n];return i}function L(t,e){new n.NodeAnimator.Opacity({node:t,duration:e.transitionDuration}).begin()}function M(t,e,i,o,a,s){new n.NodeAnimator.Scale({node:t,duration:e.transitionDuration,from:i,to:o,center:a,done:s}).begin()}function E(t,e,i,o,a,s,r){new n.NodeAnimator.Float({node:t,duration:e.transitionDuration,from:i,to:o,center:a,floatCenter:s,done:r}).begin()}t.exports=k},2145:function(t,e,i){var n=i(1972),o=i(1948),a=i(1977),s=i(2146),r=i(2149),l=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function h(t,e){n.BaseNode.call(this),this.annotation=t,e&&(this._state=e)}h.prototype=o.inheritPrototype(n.BaseNode,h,{delegate:null,enablesDefaultGlyphImage:!0,setDelegate:function(t){this.delegate=t},stringInfo:function(){var t=this._renderer.rendererForSharedLayer,e=l(this,"_state")?"<"+this.state+">":"",i=l(t,"glyphFontSize")?' "'+this.annotation.glyphText+'"@'+t.glyphFontSize:"",n=this._renderer instanceof r?" \u23f9":"",o=t.glyphImageSrc?(this.annotation.isGlyphImagePOIIcon?" \ud83c\udfde ":" \ud83d\uddbc ")+t.glyphImageSrc:"";return"MarkerAnnotationBalloonNode"+e+"<color: "+this.annotation.fillColor+(this.annotation.haloColor?"/"+this.annotation.haloColor:"")+">"+i+o+n},get state(){return l(this,"_state")?this._state:this.delegate.state},get params(){return this.delegate.getParamsFromState(this.state)},get layerBounds(){var t=Math.ceil(this.size.width/2),e=Math.ceil(this.size.height/4);return new a(-t,-e,this.size.width+2*t,Math.ceil(1.5*this.size.height)+e)},glyphImageError:function(t){"selected"===t&&this.selectedGlyphImage?delete this.selectedGlyphImage:delete this.glyphImage,this.needsDisplay=!0},setBalloonStyle:function(){this.annotation.useSquareBalloon?this._renderer=new r(this):this._renderer=new s(this)},freeze:function(){if("default"===this.state||"lifted"===this.state){var t=this.annotation;!t.glyph&&this._renderer.isFallbackGlyphTextPending&&this._renderer.addPendingNode(this);var e=t.fillColor;if(t.haloColor&&(e+="/"+t.haloColor),this.keyForFrozenLayer="balloon-"+[e,t.glyph?t.glyph:this._renderer.fallbackGlyphText,t.glyphColor,t.useSquareBalloon?"square":""].join("-"),this.annotation.isGlyphImagePOIIcon){var i=this.annotation.map?this.annotation.map._impl.mapNodeTint:"light";this.keyForFrozenLayer+=["poi",i].join("-")}}else this.keyForFrozenLayer=""}}),t.exports=h},2146:function(t,e,i){var n=i(2147),o=i(1948);function a(t){n.call(this,t)}a.prototype=o.inheritPrototype(n,a,{drawDotUnderCallout:function(t,e,i){t.strokeStyle=e,t.lineWidth=i,t.arc(i,i,i/2,0,2*Math.PI),t.stroke()},pathForBalloon:function(t,e,i){switch(i){case"balloon":t.save(),t.scale(e/256,e/256),t.moveTo(327.439,501.776),t.lineTo(327.525,501.776),t.bezierCurveTo(301.142,509.276,279.265,526.476,266.881,550.341),t.bezierCurveTo(263.709,556.456,261.65,562.811,255.956,562.811),t.bezierCurveTo(250.262,562.811,248.204,556.456,245.03,550.341),t.bezierCurveTo(232.648,526.471,210.771,509.272,184.388,501.776),t.lineTo(184.561,501.776),t.bezierCurveTo(77.943,470.858,0,372.507,0,255.944),t.bezierCurveTo(0,114.59,114.615,0,256,0),t.bezierCurveTo(397.385,0,512,114.59,512,255.944),t.bezierCurveTo(512,372.507,434.057,470.858,327.439,501.775),t.closePath(),t.restore();break;case"default":var n=e/13.5*5,o=n/6,a=n/3,s=2*e,r=.448*e,l=.385*e;t.moveTo(s,e),t.bezierCurveTo(s,1.5*e,s-l,s-n/3,e+n/2+a,s),t.bezierCurveTo(e+n/3,s+n/3,e+o,s+n,e,s+n),t.bezierCurveTo(e-o,s+n,e-n/3,s+n/3,e-(n/2+a),s),t.bezierCurveTo(l,s-n/3,0,1.5*e,0,e),t.bezierCurveTo(0,r,r,0,e,0),t.bezierCurveTo(s-r,0,s,r,s,e),t.closePath();break;default:t.arc(e,e,e,0,2*Math.PI)}},pathForMask:function(t,e,i){t.arc(e,e,i,0,2*Math.PI)}}),t.exports=a},2147:function(t,e,i){var n,o=i(1988),a=i(2148),s=i(1948),r=i(2012),l=i(1986),h=i(1943),c=i(2018),d=["default","selected","bubble"],u=[],p=" ",m="default-loading";function g(t){a.call(this,t)}function f(t,e,i){i=i||1,t.shadowBlur=10*i,t.shadowColor="rgba(0, 0, 0, .5)",t.shadowOffsetY=e*i*.1,t.globalCompositeOperation="overlay"}function _(t,e,i,n){null==n&&(n=e.glyphText);var r=e.isGlyphImagePOIIcon&&!a.shouldRenderFlatBalloon();t.save(),t.textBaseline="bottom",t.fillStyle=e.glyphColor;var l,h=i.glyphFontSize;do{t.font=h--+"px "+o.MarkerAnnotationFontFamily,l=t.measureText(n).width}while(l>i.glyphImageSize&&h>0);var c,d=i.balloonRadius+h/2+1;return g.needsLowerBaseline&&(d+=1),"1"===n?(t.textAlign="left",c=i.balloonRadius-l/2-t.measureText(n).width/16,r&&(t.save(),f(t,i.glyphImageSize),t.fillText(n,c,d,i.glyphImageSize),t.restore()),t.fillText(n,c,d,i.glyphImageSize)):s.isNode()&&g.needsExtraRenderingWorkaround&&"2"===n&&13.5===i.balloonRadius?(t.textAlign="left",c=i.balloonRadius-l/2-.2,r&&(t.save(),f(t,i.glyphImageSize),t.fillText(n,c,d,i.glyphImageSize),t.restore()),t.fillText(n,c,d,i.glyphImageSize)):(t.textAlign="center",r&&(t.save(),f(t,i.glyphImageSize),t.fillText(n,i.balloonRadius,d,i.glyphImageSize),t.restore()),t.fillText(n,i.balloonRadius,d,i.glyphImageSize)),t.restore(),h+1}function y(){var t=Math.min(l.devicePixelRatio,3),e=(t>1?"_"+t+"x":"")+".png",i={},o=d.length;function a(){0===--o&&((n=i).lifted=n.default,p="",m="default",u.forEach((function(t){t.freeze(),t.needsDisplay=!0})),u=void 0)}d.forEach((function(t){i[t]={},function(t){var n=new r.ImageLoader(r.Priority.Highest,{urlForImageLoader:c.createImageUrl("pins/marker"+(t?"-":"")+t+e),loaderDidSucceed:function(){i[t]=n.image,a()},loaderDidFail:function(){console.warn("[MapKit] Error loading marker annotation image "+n.url+"; marker annotations may not display correctly."),p="?",m="default-error",a()}});n.crossOrigin=l.getCorsAttribute(h.distUrlWithCredentials),n.schedule()}(t)}))}g.loadMarkerResources=function(){b()},g.needsLowerBaseline=!1,s.isNode()&&(g.needsExtraRenderingWorkaround=!1),g.prototype=s.inheritPrototype(a,g,{draw:function(t){this._sharedLayer&&(this._sharedLayer.renderer=this);var e=this._node,i=e.state,o=e.annotation,r=e.params;delete this.glyphImageSrc,delete this.renderType,t.save(),"bubble"!==r.style&&(t.shadowOffsetY=r.shadowOffsetY*r.balloonRadius,t.shadowBlur=r.shadowBlur,t.shadowColor=r.shadowColor);var h=o.isGlyphImagePOIIcon&&!a.shouldRenderFlatBalloon(),c="poi"===r.style;if(t.beginPath(),"callout"===i)this.drawDotUnderCallout(t,o.haloColor||o.fillColor,r.radius);else{if(this.pathForBalloon(t,r.balloonRadius,r.style),t.fillStyle=c?o.darkColorScheme?"black":"white":o.haloColor||o.fillColor,t.fill(),t.save(),c){t.beginPath();var d=r.balloonRadius-r.borderWidth;this.pathForMask(t,r.balloonRadius,d),t.fillStyle=o.fillColor,t.fill()}if(h){t.clip(),t.globalCompositeOperation="overlay",t.beginPath();var u=r.balloonRadius;t.moveTo(-u,-u),t.lineTo(-u,r.height+u),t.lineTo(2*r.balloonRadius+u,r.height+u),t.lineTo(2*r.balloonRadius+u,-u),t.lineTo(-u,-u);var g=t.createLinearGradient(r.balloonRadius,0,r.balloonRadius,r.height);g.addColorStop(0,"#a5a5a5"),g.addColorStop(.9,"#4d4d4d"),t.fillStyle=g,t.fill(),this.pathForBalloon(t,r.balloonRadius,r.style),t.fillStyle=o.haloColor||o.fillColor,t.shadowBlur=.8*r.balloonRadius,t.shadowOffsetY=.2*-r.balloonRadius,t.shadowColor="rgba(0, 0, 0, .07)",t.fill(),t.fillStyle=o.haloColor||o.fillColor,t.shadowBlur=1.1*r.balloonRadius,t.shadowOffsetY=.4*-r.balloonRadius,t.shadowColor="rgba(0, 0, 0, .35)",t.fill()}t.restore()}t.restore(),"callout"!==i&&(delete this.glyphFontSize,o.glyphText?(this.glyphFontSize=_(t,o,r),this.renderType="glyphText"):(this.glyphImageSrc=function(t,e,i,o,a,r){var h,c,d=a?2*o.balloonRadius:o.glyphImageSize,u=l.roundToDevicePixel((e.size.width-d)/2),m=!1;if(h="default"===i||"lifted"===i?e.glyphImage:e.selectedGlyphImage||e.glyphImage,s.isNode()&&!h&&e.injectedDefaultImage&&(h=e.injectedDefaultImage,c=e.injectedDefaultImageScale,d=o.glyphImageSize,u=l.roundToDevicePixel((e.size.width-d)/2,c),a=!1,m=!0),!h&&e.enablesDefaultGlyphImage){if(p)return b(),_(t,e.annotation,o,p),null;h=n["bubble"===e.params.style?"bubble":i],d=o.glyphImageSize,u=l.roundToDevicePixel((e.size.width-d)/2),a=!1,m=!0}try{var g;return s.isNode()&&c?(g=a?w(h,e.annotation.haloColor&&e.annotation.haloColor!==e.annotation.fillColor?e.annotation.fillColor:void 0,d*c,2*(o.balloonRadius-o.borderWidth)*c,r):C(h,e.annotation.glyphColor,d*c),t.save(),t.scale(1/c,1/c),t.save(),f(t,o.glyphImageSize,c),t.drawImage(g,u*c,u*c,d*c,d*c),t.restore(),t.drawImage(g,u*c,u*c,d*c,d*c),t.restore()):(g=a?w(h,e.annotation.haloColor&&e.annotation.haloColor!==e.annotation.fillColor?e.annotation.fillColor:void 0,d,2*(o.balloonRadius-o.borderWidth),r):C(h,e.annotation.glyphColor,d),t.save(),f(t,o.glyphImageSize),t.drawImage(g,u,u,d,d),t.restore(),t.drawImage(g,u,u,d,d)),m?null:h.src}catch(y){e.glyphImageError()}}(t,e,i,r,o.isGlyphImagePOIIcon,this.pathForMask.bind(this)),this.renderType=this.glyphImageSrc?"glyphImage":m))},get isFallbackGlyphTextPending(){return!n},addPendingNode:function(t){u.indexOf(t)<0&&u.push(t)},get fallbackGlyphText(){return p},get rendererForSharedLayer(){return this._sharedLayer?this._sharedLayer.renderer:this},drawDotUnderCallout:function(){},pathForBalloon:function(){},pathForMask:function(){}});var v=!1;function b(){v||(v=!0,h.state!==h.States.PENDING&&h.state!==h.States.READY?h.addEventListener(h.Events.Initialized,(function t(){h.removeEventListener(h.Events.Initialized,t),y()})):y())}function w(t,e,i,n,o){t._maskedPOIImage||(t._maskedPOIImage=[]);var a=l.devicePixelRatio,r=i*a;if(!t._maskedPOIImage[r]){var h=n*a/2,c=s.createCanvas();c.width=r,c.height=r;var d=c.getContext("2d");d.beginPath(),o(d,r/2,h),e&&(d.fillStyle=e,d.fill()),d.clip(),d.drawImage(t,0,0,r,r),t._maskedPOIImage[r]=c}return t._maskedPOIImage[r]}function C(t,e,i){t._tinted||(t._tinted={}),t._tinted[e]||(t._tinted[e]=[]);var n=i*l.devicePixelRatio;if(!t._tinted[e][n]){var o=s.createCanvas();o.width=n,o.height=n;var a=o.getContext("2d");a.fillStyle=e,a.fillRect(0,0,n,n),a.globalCompositeOperation="destination-in",a.drawImage(t,0,0,n,n),t._tinted[e][n]=o}return t._tinted[e][n]}window.document||(n={}),t.exports=g},2148:function(t,e,i){var n,o=i(1972),a=i(1948);function s(t){o.RenderItem.call(this,t)}s.prototype=a.inheritPrototype(o.RenderItem,s,{pathForSquareDot:function(t,e){var i=.6*e,n=.4*e;t.moveTo(e,0),t.lineTo(e+n,0),t.arc(e+n,i,i,Math.PI/2*3,0),t.lineTo(2*e,e+n),t.arc(e+n,e+n,i,0,Math.PI/2),t.lineTo(i,2*e),t.arc(i,e+n,i,Math.PI/2,Math.PI),t.lineTo(0,e-n),t.arc(i,i,i,Math.PI,Math.PI/2*3),t.lineTo(e,0)}}),s.shouldRenderFlatBalloon=function(){if("undefined"!==typeof n)return n;if(a.isNode())return n=!1;var t=a.createCanvas().getContext("2d");return t.globalCompositeOperation="overlay",n="overlay"!==t.globalCompositeOperation},t.exports=s},2149:function(t,e,i){var n=i(2147),o=i(1948);function a(t){n.call(this,t)}a.prototype=o.inheritPrototype(n,a,{drawDotUnderCallout:function(t,e,i){t.fillStyle=e,this.pathForSquareDot(t,i),t.fill()},pathForBalloon:function(t,e,i){t.save(),t.scale(e/256,e/256),t.moveTo(424.278,512.1),"balloon"!==i&&"default"!==i||(t.lineTo(363.104,512.1),t.bezierCurveTo(302.97,513.623,278.509,528.747,266.778,551.35),t.bezierCurveTo(263.607,557.462,261.548,563.819,255.857,563.819),t.bezierCurveTo(250.167,563.819,248.107,557.462,244.937,551.35),t.bezierCurveTo(233.205,528.747,208.743,513.623,148.61,512.1)),t.lineTo(87.723,512.1),t.bezierCurveTo(39.475,512.099,0,472.713,0,424.573),t.lineTo(0,87.525),t.bezierCurveTo(0,39.387,39.475,0,87.723,0),t.lineTo(424.278,0),t.bezierCurveTo(472.525,0,512,39.387,512,87.525),t.lineTo(512,424.573),t.bezierCurveTo(512,472.713,472.525,512.099,424.278,512.099),t.closePath(),t.restore()},pathForMask:function(t,e,i){t.save();var n=e-i;t.translate(n,n),t.scale(i/256,i/256),t.moveTo(424.278,512.1),t.lineTo(87.723,512.1),t.bezierCurveTo(39.475,512.099,0,472.713,0,424.573),t.lineTo(0,87.525),t.bezierCurveTo(0,39.387,39.475,0,87.723,0),t.lineTo(424.278,0),t.bezierCurveTo(472.525,0,512,39.387,512,87.525),t.lineTo(512,424.573),t.bezierCurveTo(512,472.713,472.525,512.099,424.278,512.099),t.closePath(),t.restore()}}),t.exports=a},2150:function(t,e,i){var n=i(1972),o=i(1948),a=i(2151),s=i(2153);function r(t,e){n.BaseNode.call(this),this.annotation=t,this.radius=e,t.useSquareBalloon?this._renderer=new s(this):this._renderer=new a(this)}r.prototype=o.inheritPrototype(n.BaseNode,r,{stringInfo:function(){var t=this._renderer instanceof s?" \u23f9":"";return"MarkerAnnotationDotNode<color: "+this.annotation.fillColor+">"+t}}),t.exports=r},2151:function(t,e,i){var n=i(2152),o=i(1948);function a(t){n.call(this,t)}a.prototype=o.inheritPrototype(n,a,{pathForDot:function(t,e){t.arc(e,e,e,0,2*Math.PI)}}),t.exports=a},2152:function(t,e,i){var n=i(2148),o=i(1948);function a(t){n.call(this,t)}a.prototype=o.inheritPrototype(n,a,{draw:function(t){var e=this._node;t.save(),t.beginPath(),this.pathForDot(t,e.radius),t.fillStyle=e.annotation.haloColor||e.annotation.fillColor,t.fill(),e.annotation.isGlyphImagePOIIcon&&!n.shouldRenderFlatBalloon()&&(t.globalCompositeOperation="overlay",t.fillStyle="#4d4d4d",t.fill(),t.fillStyle="rgba(0, 0, 0, .07)",t.fill(),t.fillStyle="rgba(0, 0, 0, .35)",t.fill()),t.restore()},pathForDot:function(){}}),t.exports=a},2153:function(t,e,i){var n=i(2152),o=i(1948);function a(t){n.call(this,t)}a.prototype=o.inheritPrototype(n,a,{pathForDot:function(t,e){this.pathForSquareDot(t,e)}}),t.exports=a},2154:function(t,e,i){var n=i(1972),o=i(1948),a=i(2155),s=i(1975);function r(t,e,i,o){n.BaseNode.call(this),this.text=t,this.kind=e,this._renderer=new a(this),this.size=new s(i,this._renderer.params[this.kind].height),this.keyForFrozenLayer=(o?"dark":"light")+"-"+e+"#"+this.text}r.prototype=o.inheritPrototype(n.BaseNode,r,{stringInfo:function(){return"MarkerAnnotationLabelNode<"+this.kind+'> "'+this.text+'"'},get lineHeight(){return this._renderer.params[this.kind].lineHeight}}),r.Font={title:a.prototype.params.title.font,subtitle:a.prototype.params.subtitle.font},t.exports=r},2155:function(t,e,i){var n=i(1988),o=i(1972),a=i(1948);function s(t){o.RenderItem.call(this,t)}s.prototype=a.inheritPrototype(o.RenderItem,s,{params:{haloColor:{light:"rgba(255, 255, 255, .8)",dark:"black"},haloSize:2,miterLimit:2,textAlign:"center",title:{font:"600 11px "+n.MarkerAnnotationFontFamily,height:16,lineHeight:12,color:{light:"#2b2b2b",dark:"#e7e6e4"},yPadding:1},subtitle:{font:"500 10px "+n.MarkerAnnotationFontFamily,height:15,lineHeight:12,color:{light:"#4c4c4c",dark:"#e7e6e4"},yPadding:1}},draw:function(t){var e=this._node,i=e.parent.annotation.darkColorScheme?"dark":"light",n=this.params[e.kind];t.font=n.font,t.textAlign=this.params.textAlign,t.textBaseline="bottom",t.fillStyle=n.color[i],t.strokeStyle=this.params.haloColor[i],t.lineWidth=this.params.haloSize,t.miterLimit=this.params.miterLimit;var o=e.size.width/2,a=e.size.height-n.yPadding;t.strokeText(e.text,o,a),t.fillText(e.text,o,a)}}),t.exports=s},2156:function(t,e,i){var n=i(1975),o=i(1977),a=i(2146),s=i(2149);function r(t,e){t.useSquareBalloon?this._renderer=new s(this):this._renderer=new a(this),this.frozen=!0,this.annotation=t,this.state="selected",this.params=e;var i=2*e.balloonRadius;this.size=new n(i,i),this.layerBounds=new o(0,0,this.size.width,this.size.height)}r.prototype.enablesDefaultGlyphImage=!0,r.prototype.draw=function(){!this.annotation.glyph&&this._renderer.isFallbackGlyphTextPending&&this._renderer.addPendingNode(this);var t=this._renderer.layer;t.style.width=t.style.height=this.size.width+"px",this._renderer.draw(t.getContext("2d"))},r.prototype.getLayer=function(){return this._renderer.layer},r.prototype.glyphImageError=function(t){"selected"===t&&this.selectedGlyphImage?delete this.selectedGlyphImage:delete this.glyphImage},r.prototype.updateGlyphImage=function(t){this.glyphImage=t},r.prototype.updateSelectedGlyphImage=function(t){this.selectedGlyphImage=t},r.prototype.freeze=function(){this.draw()},t.exports=r},2157:function(t,e,i){var n=i(1986),o=i(1959);t.exports=function(t,e){var i;if("function"!==typeof t.getImageUrl)return(i=function(t){if(t&&"object"===typeof t){for(var e,i=Object.keys(t).filter((function(e){return!!t[e]})).map(parseFloat).filter((function(t){return!isNaN(t)})).sort(),o=n.devicePixelRatio,a=i.length-1;a>=0&&((!e||i[a]>=o)&&(e=i[a]),!(i[a]<=o));--a);return e}}(t))?void e({ratio:i,glyphImageUrl:t[i]}):void e();i=n.devicePixelRatio,o(t.getImageUrl,t,[i,function(t){setTimeout(e.bind(null,t?{ratio:i,glyphImageUrl:t}:void 0))}])}},2158:function(t,e,i){var n=i(2141),o=i(2143)(n);t.exports=o},2159:function(t,e){t.exports={PointOfInterest:"PointOfInterest",Territory:"Territory"}},2160:function(t,e,i){var n=i(2012),o=i(1986),a=i(1943),s=i(1959);function r(t,e){this._selected=e,this._impl=e?t.selectedGlyphImage:t.glyphImage}var l=function(){throw new Error("[MapKit] `MapFeatureAnnotationGlyphImage` may not be constructed directly.")};r.prototype=l.prototype={constructor:l,getImageUrl:function(t,e){if(("number"!==typeof t||isNaN(t))&&(t=o.devicePixelRatio),"function"!==typeof e)throw new Error("[MapKit] Expects a callback to be provided.");HTMLCanvasElement.prototype.toBlob?this._impl.getImageUrl(t,function(t){var i=new n.ImageLoader(n.Priority.Highest,{urlForImageLoader:t,loaderDidSucceed:function(t){var i=this._impl.annotation._impl.iconMetadata,n=this._selected?i.calloutColor:i.badgeColor,o=t.image,a=document.createElement("canvas");a.width=o.naturalWidth,a.height=o.naturalHeight;var r=a.getContext("2d");n&&(r.fillStyle=n,r.fillRect(0,0,a.width,a.height)),r.drawImage(o,0,0),a.toBlob((function(t){s(e,null,[URL.createObjectURL(t)])}))}.bind(this),loaderDidFail:function(t){setTimeout((function(){s(e,null)}))}});i.crossOrigin=o.getCorsAttribute(a.withCredentials),i.schedule()}.bind(this)):setTimeout((function(){s(e,null)}))}},t.exports=r},2161:function(t,e,i){var n=i(1943);function o(t,e,i){this.annotation=t,this._url=e.replace("{{size}}",i.toString())}o.prototype.getImageUrl=function(t,e){var i;this.annotation.map?i=this.annotation.map.colorScheme:(console.warn("[MapKit] Returning the URL of light color scheme GlyphImage."),i="light"),t=Math.ceil(Math.min(Math.max(t,1),3)),e(this._url.replace("{{accessKey}}",encodeURIComponent(n.accessKey)).replace("{{scale}}",t).replace("{{tint}}",i))},t.exports=o},2162:function(t,e,i){var n=i(2163),o=i(2158),a=i(1948);function s(t,e,i){o.call(this,t,e,i)}s.prototype=a.inheritPrototype(o,s,{styleAttributes:"",featureType:"",pointOfInterestCategory:null,iconMetadata:void 0,get isGlyphImagePOIIcon(){return!0},get _color(){return this.iconMetadata?this.selected?this.iconMetadata.calloutColor:this.iconMetadata.badgeColor||this.iconMetadata.calloutColor:null},get haloColor(){return this.iconMetadata?this.selected?this.iconMetadata.calloutHaloColor:this.iconMetadata.haloColor:null},muid:void 0,fetchPlace:function(t){return a.required(t,"[MapKit] Missing `callback` in call to `MapFeatureAnnotation.fetch()`.").checkType(t,"function","[MapKit] `callback` passed to `MapFeatureAnnotation.fetch()` is not a function."),(new n).fetch(this.muid,t)},isGlyphImageInternal:!0,loadGlyphImage:function(t,e,i,n){this.map&&o.prototype.loadGlyphImage.call(this,t,e,i,n)},updateLayout:function(t){this.updateGlyphImages(),o.prototype.updateLayout.call(this,t)},addedToMap:function(){o.prototype.addedToMap.call(this),this.updateGlyphImages()}}),t.exports=s},2163:function(t,e,i){var n=i(1943),o=i(1948),a=i(2164),s=i(2166),r=i(1959);function l(){a.call(this,"MapFeatureAnnotation",{})}l.prototype=o.inheritPrototype(a,l,{fetch:function(t,e){if("CN"!==n.countryCode){var i={mapsId:JSON.stringify({muid:t})};return this._send("placedata",i,e,(function(t,e){if(e&&e.result)return new s(e.result)}),"placedata")}setTimeout((function(){var t=new Error("[MapKit] MapFeatureAnnotation.fetch() is not supported in China yet.");r(e,null,[t])}))}}),t.exports=l},2164:function(t,e,i){var n=i(1943),o=i(1945),a=i(1948),s=i(1969).Coordinate,r=i(2165),l=i(2012).XHRLoader,h=i(1942),c=i(2060),d=i(1959),u=i(1960),p={enableHighAccuracy:!1,timeout:8e3,maximumAge:9e5};function m(t,e){this._name=t,this._requestMap=new r,n.state===n.States.ERROR&&(this._configFailed=!0),this.language=e.language,"getsUserLocation"in e&&(this.getsUserLocation=!!e.getsUserLocation)}m.prototype={constructor:m,_getsUserLocation:!1,get getsUserLocation(){return this._getsUserLocation},set getsUserLocation(t){this._getsUserLocation=!!t},get language(){return this._language},set language(t){this._language=null==t?null:this._bestLanguage(t)},cancel:function(t){a.required(t,"[MapKit] Missing `id` in call to `"+this._name+".cancel()`.").checkType(t,"number","[MapKit] `id` passed to `"+this._name+".cancel()` is not a number.");var e=this._requestMap.typeForId(t);if(e)switch(e){case"query":case"geo":return this._requestMap.remove(t);case"xhr":var i=this._requestMap.get(t);if(i)return i.unschedule(),this._requestMap.remove(t);break;default:throw new Error("Unknown type: "+e)}return!1},handleEvent:function(t){switch(t.type){case n.Events.Error:this._configFailed=!0;case n.Events.Changed:this._requestMap.idsByType("query").forEach((function(t){var e=this._requestMap.get(t);this._send(e.path,e.parameters,e.callback,e.transform,e.name),this._requestMap.remove(t)}),this)}0===this._requestMap.idsByType("query").length&&this._stopWatchingConfiguration()},_watchingConfiguration:!1,_watchConfiguration:function(){this._watchingConfiguration||(this._watchingConfiguration=!0,n.addEventListener(n.Events.Changed,this),n.addEventListener(n.Events.Error,this))},_stopWatchingConfiguration:function(){this._watchingConfiguration&&(this._watchingConfiguration=!1,n.removeEventListener(n.Events.Changed,this),n.removeEventListener(n.Events.Error,this))},_logNetworkEvent:function(t,e){var i;switch(t){case"search":i=c.Events.Search;break;case"autocomplete":i=c.Events.SearchAC;break;case"geocode":i=c.Events.ForwardGeocoder;break;case"reverseGeocode":i=c.Events.ReverseGeocoder;break;case"directions":i=c.Events.Directions;break;case"nearbyPoi":i=c.Events.PointsOfInterestSearch;break;default:return}c.log(i,e)},_send:function(t,e,i,o,s){var r,c=this._requestMap;if(!n.apiBaseUrl||n.state===n.States.PENDING)return this._configFailed?(setTimeout((function(){d(i,null,[new Error("MapKit failed to initialize.")])})),0):(console.warn("[MapKit] The configuration has not been initialized, or it is loading. The request has been queued."),this._watchConfiguration(),c.add({path:t,parameters:e,callback:i,transform:o,name:s},"query"));r=0===t.search(/\/v?[0-9]+\//)?n.apiBaseUrl.replace(/\/v?[0-9]+\//,"")+t:n.apiBaseUrl+t,(e=e||{}).mkjsVersion=h.version;var u=a.toQueryString(e);""!==u&&(r+=(a.parseURL(t).search?"&":"?")+u);var p=this,m=new l(r,{loaderDidSucceed:function(t,n){var a;if(p._logNetworkEvent(s,{responseCode:n.status}),c.remove(t.id),n.status<200||n.status>=300){try{a=JSON.parse(n.responseText)}catch(r){return void d(i,null,[new Error("HTTP error: "+n.status)])}a&&a.error&&a.error.message?(/categor(y|ies)/i.test(a.error.message)&&console.warn("[MapKit] The version of MapKit may be deprecated."),d(i,null,[new Error("HTTP error: "+n.status+". Message: "+a.error.message+".")])):d(i,null,[new Error("HTTP error: "+n.status)])}else{try{a=JSON.parse(n.responseText)}catch(r){return void d(i,null,[new Error("Failed to parse response: "+n.responseText)])}d(i,null,[null,o(e,a)])}},loaderDidFail:function(t,e){p._logNetworkEvent(s,{responseCode:e.status}),c.remove(t.id);var o=n.ErrorStatus.Unknown;0===e.status?o=n.ErrorStatus.NetworkError:e.status===n.HTTP.UNAUTHORIZED?o=n.ErrorStatus.Unauthorized:e.status===n.HTTP.TOO_MANY_REQUESTS?o=n.ErrorStatus.TooManyRequests:e.status===n.HTTP.BAD_REQUEST&&(o=n.ErrorStatus.BadRequest),d(i,null,[new Error(o)])}},n.appendServiceAuthOptions({}));return m.schedule(),m.id=c.add(m,"xhr"),m.id},_sendImmediatelyOrWithUserLocation:function(t,e,i,n,o){return this.getsUserLocation||e.getsUserLocation?this._sendWithUserLocation.apply(this,arguments):this._send.apply(this,arguments)},_sendWithUserLocation:function(t,e,i,n,o){var a=this._requestMap.add({path:t,parameters:e,callback:i,transform:n,name:o},"geo");return this._locate(function(t,e){var i=this._requestMap.get(a);i&&(t?console.warn("[MapKit] Unable to get current location:",t.message):i.parameters.userLocation=[e.latitude,e.longitude].join(","),this._send(i.path,i.parameters,i.callback,i.transform,i.name),this._requestMap.remove(a))}.bind(this)),a},_checkOptions:function(t,e){a.checkType(t,"object","[MapKit] The `options` object is invalid."),Object.keys(t).forEach((function(t){-1===e.indexOf(t)&&console.warn("[MapKit] `"+t+"` is not a valid option.")}))},_bestLanguage:function(t){a.checkType(t,"string","[MapKit] `language` is not a string.");var e=o.bestMatch(t);return null===e?console.warn("[MapKit] "+this._name+": \u201c"+t+"\u201d is not supported."):e!==t&&console.warn("[MapKit] "+this._name+": \u201c"+t+"\u201d is not supported. Substituting \u201c"+e+"\u201d"),e},_locate:function(t){a.required(t,"Missing callback").checkType(t,"function"),m.userLocation.locate((function(e){var i=e.coords;t(null,new s(i.latitude,i.longitude))}),(function(e){var i;switch(e.code){case e.PERMISSION_DENIED:i="PERMISSION_DENIED";break;case e.POSITION_UNAVAILABLE:i="POSITION_UNAVAILABLE";break;case e.TIMEOUT:i="TIMEOUT";break;default:throw new Error("Unknown PositionError code: "+e.code)}t(new Error(i))}),p)}},u.jsModules.userLocation?m.userLocation=u.jsModules.userLocation:u.addEventListener("load",(function t(e){e.jsModules.userLocation&&(m.userLocation=e.jsModules.userLocation,u.removeEventListener("load",t))})),t.exports=m},2165:function(t,e,i){function n(){this._requests={},this._types={},this._counter=1}n.prototype={constructor:n,add:function(t,e){var i=this._counter;return this._counter+=1,this._requests[i]=t,this._types[i]=e,i},get:function(t){return this._requests[t]},typeForId:function(t){return this._types[t]},idsByType:function(t){return Object.keys(this._requests).filter((function(e){return this._types[e]===t}),this).map((function(t){return parseInt(t)}))},remove:function(t){return!!this.get(t)&&(delete this._requests[t],delete this._types[t],!0)}},t.exports=n},2166:function(t,e,i){var n=i(1969),o=n.BoundingRegion,a=n.Coordinate,s=i(1968);function r(t){var e,i;t.muid&&(this.muid=t.muid),t.placecardUrl&&(this._wpURL=t.placecardUrl),t.style&&t.style.attributes&&(this._styleAttributes=t.style.attributes.map((function(t){return t.key+":"+t.value})).join(","),t.poiCategory&&-1!==Object.keys(s).indexOf(t.poiCategory)&&(this.pointOfInterestCategory=s[t.poiCategory])),t.name&&(this.name=t.name),t.attribution&&(this._providerId=t.attribution.vendorId,this._providerItemId=t.attribution.externalItemId),t.displayMapRegion&&(e=t.displayMapRegion,i=new o(e.northLat,e.eastLng,e.southLat,e.westLng),this.region=i.toCoordinateRegion(),this.coordinate=this.region.center),t.formattedAddressLines&&(this.formattedAddress=t.formattedAddressLines.join(", ")),t.center&&(this.coordinate=new a(t.center.lat,t.center.lng)),t.countryCode&&(this.countryCode=t.countryCode),this.telephone=t.telephone,this.urls=t.urls||[],this.country=t.country,this.administrativeArea=t.administrativeArea,this.administrativeAreaCode=t.administrativeAreaCode,this.locality=t.locality,this.postCode=t.postCode,this.subLocality=t.subLocality,this.thoroughfare=t.thoroughfare,this.subThoroughfare=t.subThoroughfare,this.fullThoroughfare=t.fullThoroughfare,this.areasOfInterest=t.areasOfInterest,this.dependentLocalities=t.dependentLocalities,this.timezone=t.timezone,this.timezoneSecondsFromGmt=t.timezoneSecondsFromGmt}var l=function(){throw new TypeError("[MapKit] Place may not be constructed.")};r.prototype=l.prototype={constructor:l},t.exports=r},2167:function(t,e,i){var n=i(2137),o=i(2168),a=i(1969),s=i(1948),r=i(1981);function l(t){this._annotationsController=t,this._clusters=[],this._previousClusters=[],this._previousOverlaps=[],this._previousAnnotations=[],this._frameCounter=0}function h(t,e){var i=n.DisplayPriority.Required,o=t.selected?i:t.displayPriority;return(e.selected?i:e.displayPriority)-o||e._impl.boundingBox.y2-t._impl.boundingBox.y2}function c(t,e){return e.displayPriority-t.displayPriority||t._impl.index-e._impl.index}function d(t,e){return t._impl.collisionMode===n.CollisionMode.None||e._impl.collisionMode===n.CollisionMode.None?0:t._impl.boundingBox.x1-e._impl.boundingBox.x1}function u(t){var e=t._impl.node,i=t._impl.nodePosition(),o=t.padding,a=e.size,s=a.width,r=a.height,l={x1:i.x+o.left,x2:i.x+s-o.right,y1:i.y+o.top,y2:i.y+r-o.bottom};return t._impl.collisionMode===n.CollisionMode.Circle&&(l.cx=(l.x1+l.x2)/2,l.cy=(l.y1+l.y2)/2,l.r=Math.min(s,r)/2),l}function p(t,e){var i={x1:t.x1-e,x2:t.x2+e,y1:t.y1-e,y2:t.y2+e};return Object.prototype.hasOwnProperty.call(t,"r")&&(i.r=t.r+e,i.cx=t.cx,i.cy=t.cy),i}function m(t,e){var i=t.cx-s.clamp(t.cx,e.x1,e.x2),n=t.cy-s.clamp(t.cy,e.y1,e.y2);return i*i+n*n<=t.r*t.r}function g(t,e){t._impl.occluded=e,t._impl.updateVisibility(e)}l.prototype={collideAnnotations:function(t,e,i,n){this._locked||(this._annotations=t,this._zoomLevel=e,this._rotation=i,this._changesSinceLastCollision=n,r.scheduleOnNextFrame(this))},setRequiredClusterAnnotationProperties:function(t,e){return t!==e&&(t||(t=e),t.coordinate=e.coordinate,t.draggable=!1,t.displayPriority=e.memberAnnotations[0].displayPriority,t.clusteringIdentifier=e.memberAnnotations[0].clusteringIdentifier,t.selected=!1,Object.defineProperty(t,"memberAnnotations",{enumerable:!0,get:function(){return this._impl.memberAnnotations}}),Object.defineProperty(t._impl,"memberAnnotations",{enumerable:!0,value:e.memberAnnotations})),t.animates=e.memberAnnotations.some((function(t){return!t._impl.wasCollided})),t},removedAnnotation:function(t){t.memberAnnotations||(this._previousClusters=this._previousClusters.filter((function(e){if(e.memberAnnotations.indexOf(t)<0)return!0;this._annotationsController.removeAnyItem(e)}),this))},mapWasDestroyed:function(){this._annotationsController=null},performScheduledUpdate:function(){if(this._annotationsController)if(this._frameCounter=(this._frameCounter+1)%10,1===this._frameCounter){var t=this._needsUpdate();if(t){this._changesSinceLastCollision=!1,this._previousZoomLevel=this._zoomLevel,this._previousRotation=this._rotation,this._previousAnnotations=this._annotations.slice(),this._locked=!0,this._annotationsController.willUpdateCollisions(),"region"===t&&this._annotationsController.deselectClusterAnnotation(),this._overlaps=[];for(var e=0,i=0,o=this._annotations.length;i<o;++i){var a=this._annotations[i];if(a._impl.needsLayout)return this._frameCounter=0,this._locked=!1,void r.scheduleOnNextFrame(this);a._impl.index=i,a._impl.occluded=!1,a._impl.previousCluster=a._impl.cluster,delete a._impl.cluster,a._impl.collisionMode!==n.CollisionMode.None&&(a._impl.boundingBox=u(a),e=Math.max(e,a._impl.boundingBox.x2-a._impl.boundingBox.x1))}var s=this._annotations.sort(d),l={};s.forEach((function(t){if(!t.selected&&t._impl.collisionMode!==n.CollisionMode.None){var e=t.clusteringIdentifier;e&&(l[e]?l[e].push(t):l[e]=[t])}}));var h=this._clusters;for(var c in this._clusters=[],l)l[c].length>1&&(e=this._clusterAnnotationsWithMaxWidth(l[c],e));h.forEach((function(t){this._clusters.indexOf(t)<0&&(g(t,!0),t.selected&&(t.selected=!1))}),this),this._collideAnnotationsAndClusters(s,e),this._previousOverlaps=this._overlaps,this._annotationsController.didUpdateCollisions(),this._locked=!1}}else r.scheduleOnNextFrame(this)},_clusterAnnotationsWithMaxWidth:function(t,e){for(var i=0;i<t.length;){var o=t[i];if(o._impl.cluster)++i;else{var a=o._impl.boundingBox.x2,s=[o],r=i+1;if(o.memberAnnotations&&i>0){var l=o._impl.boundingBox.x1-e;for(r=i-1;r>0&&t[r]._impl.boundingBox.x1>=l;)r-=1}for(;r<t.length&&t[r]._impl.boundingBox.x1<=a;++r){var h=t[r];!h._impl.cluster&&r!==i&&this._annotationsOverlapExcludingSelected(o,h)&&s.push(h)}if(s.length>1){s=s.reduce((function(t,e){return e.memberAnnotations?(t=t.concat(e.memberAnnotations),e._impl.cluster=!0,g(e,!0)):t.push(e),t}),[]).sort(c);var d=this._clusterAnnotationForMemberAnnotations(s);for(d._impl.occluded=!1,d._impl.collisionMode!==n.CollisionMode.None&&(d._impl.boundingBox=u(d),e=Math.max(e,d._impl.boundingBox.x2-d._impl.boundingBox.x1)),delete d._impl.cluster,r=0;r<s.length;++r)s[r]._impl.occluded=!0,s[r]._impl.cluster=d;for(r=0;r<t.length&&t[r]._impl.boundingBox.x1<d._impl.boundingBox.x1;)r+=1;t.splice(r,0,d),i=Math.min(i+1,r)}else++i}}return t.forEach((function(t){t.memberAnnotations&&!t._impl.cluster&&(this._clusters.push(t),t.map||this._annotationsController.addItem(t))}),this),e},_collideAnnotationsAndClusters:function(t,e){for(var i=!1,o=[],a=0,s=0,r=t.length,l=this._clusters.length;a<r||s<l;){var h=t[a],c=this._clusters[s];h?h._impl.cluster||h._impl.collisionMode===n.CollisionMode.None?++a:c&&c._impl.boundingBox.x1<h._impl.boundingBox.x1?(c._impl.isRequired()||(i=!0),o.push(c),++s):(h._impl.isRequired()||(i=!0),o.push(h),++a):(c._impl.isRequired()||(i=!0),o.push(c),++s)}i&&this._collideAnnotationsWithMaxWidth(o,e)},_collideAnnotationsWithMaxWidth:function(t,e){for(var i=[],n=0,o=t.length;n<o;++n)for(var a=t[n],s=a._impl.boundingBox.x2,r=n+1;r<o;++r){var l=t[r];if(l._impl.boundingBox.x1>s)break;a._impl.isRequired()&&l._impl.isRequired()||this._annotationsOverlap(a,l)&&i.push(h(a,l)<=0?[a,l]:[l,a])}i.sort((function(t,e){return h(t[0],e[0])})).forEach((function(t){t[0]._impl.occluded||(t[1]._impl.occluded=!0)}))},_annotationsOverlapExcludingSelected:function(t,e){return!t.selected&&!e.selected&&this._annotationsOverlap(t,e)},_annotationsOverlap:function(t,e){if(t._impl.isLifted()||e._impl.isLifted())return!1;for(var i,n=c(t,e)<=0?[t,e]:[e,t],o=0,a=this._previousOverlaps.length;o<a&&!i;++o){var s=this._previousOverlaps[o];s[0]===n[0]&&s[1]===n[1]&&(i=s)}var r=function(t,e,i){var n=t._impl.boundingBox,o=e._impl.boundingBox;return i&&(n=p(n,5),o=p(o,5)),function(t,e){if(!(e.x2>=t.x1&&e.x1<=t.x2&&e.y2>=t.y1&&e.y1<=t.y2))return!1;if(Object.prototype.hasOwnProperty.call(t,"r")){if(Object.prototype.hasOwnProperty.call(e,"r")){var i=t.cx-e.cx,n=t.cy-e.cy,o=Math.sqrt(i*i+n*n);return t.r+e.r>=o}return m(t,e)}return!Object.prototype.hasOwnProperty.call(e,"r")||m(e,t)}(n,o)}(t,e,i);return r&&this._overlaps.push(n),r},_clusterAnnotationForMemberAnnotations:function(t){var e,i=function(t,e){for(var i=0,n=t.length;i<n;++i){var o=t[i],a=e.length;if(o.memberAnnotations.length===a){for(var s=0;s<a&&e[s]===o.memberAnnotations[s];)s+=1;if(s===a)return i}}return-1}(this._previousClusters,t);if(i>=0)(e=this._previousClusters[i])._impl.resetNodeTransform();else{var n=function(t){var e=0,i=0,n=0;t.forEach((function(t){e+=t.coordinate.latitude;var o=a.wrapLongitude(t.coordinate.longitude)/180*Math.PI;i+=Math.cos(o),n+=Math.sin(o)}));var o=t.length,s=e/o,r=0===i?n<0?-90:90:180*Math.atan(n/i)/Math.PI+(i<0?180:0);return new a.Coordinate(s,r)}(t);e=this._annotationsController.addCluster(new o(n,t)),this._previousClusters.push(e)}return e},_needsUpdate:function(){if(this._zoomLevel!==this._previousZoomLevel||this._rotation!==this._previousRotation)return"region";if(this._changesSinceLastCollision)return"annotations";var t=this._annotations.length;if(this._previousAnnotations.length!==t)return"annotations";for(var e=0;e<t;++e)if(this._annotations[e]!==this._previousAnnotations[e])return"annotations";return""}},t.exports=l},2168:function(t,e,i){var n=i(2136),o=i(1948);function a(t,e,n){var o=i(2169);Object.defineProperty(this,"_impl",{value:new o(this,t,e,n)})}var s=function(){throw new TypeError("[MapKit] ClusterAnnotation may not be constructed.")};a.prototype=s.prototype=o.inheritPrototype(n,s,{get memberAnnotations(){return this._impl.memberAnnotations}}),t.exports=a},2169:function(t,e,i){var n=i(2141),o=i(2158),a=i(1948),s=i(2009),r=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function l(t,e,i,n){this._memberAnnotations=i,o.call(this,t,e,n)}l.prototype=a.inheritPrototype(o,l,{get memberAnnotations(){return this._memberAnnotations},get n(){return this._memberAnnotations.length},get title(){return r(this,"_title")?this._title:this._topAnnotation.title},set title(t){Object.getOwnPropertyDescriptor(n.prototype,"title").set.call(this,t)},get subtitle(){var t=this.n-1;return r(this,"_subtitle")?this._subtitle:s.get("Annotation.Clustering.More"+(t>1?".Plural":""),{n:s.digits(t)})},set subtitle(t){Object.getOwnPropertyDescriptor(n.prototype,"subtitle").set.call(this,t)},get glyphText(){return r(this,"_glyphText")?this._glyphText:r(this,"_glyphImage")||r(this,"_selectedGlyphImage")?"":s.digits(this.n)},set glyphText(t){Object.getOwnPropertyDescriptor(o.prototype,"glyphText").set.call(this,t)},get draggable(){return!1},get displayPriority(){return this._topAnnotation.displayPriority},get clusteringIdentifier(){return this._topAnnotation.clusteringIdentifier},get _topAnnotation(){return this._memberAnnotations[0]},get _showDefaultAltText(){return r(this,"_glyphText")||r(this,"_glyphImage")||r(this,"_selectedGlyphImage")},get isGlyphImagePOIIcon(){return!!this._topAnnotation._impl.isGlyphImagePOIIcon},updateLocalizedText:function(){n.prototype.updateLocalizedText.call(this),this.updateGlyph(),this._sceneGraphNode.updateAppearance(!0)},altText:function(){return this._showDefaultAltText?n.prototype.altText.call(this):this.title?s.get("Annotation.Clustering.AccessibilityLabel",{n:this.glyphText,title:this.title,subtitle:this.subtitle}):s.get("Annotation.Clustering.NoTitle.AccessibilityLabel",{n:this.glyphText,subtitle:this.subtitle})}}),t.exports=l},2170:function(t,e,i){var n=i(1972),o=i(1948);function a(t){n.GroupNode.call(this),this._element=t}a.prototype=o.inheritPrototype(n.GroupNode,a,{get element(){return this._element},stringInfo:function(){return"AnnotationsControllerNode"}}),t.exports=a},2171:function(t,e,i){var n=i(1977),o=i(1986);function a(t){this._element=o.htmlElement("div",{class:"mk-style-helper"}),this.delegate=t}a.prototype={constructor:a,delegate:null,get element(){return this._element},sizeForElement:function(t){var e=t.cloneNode(!0),i=[],a=[];!function(t,e,i){if(o.supportsShadowDOM){if("slot"===t.localName)e.push(t),i.push(t.name);else{var n=t.getElementsByTagName("slot");0!==n.length&&Array.prototype.forEach.call(n,(function(t){e.push(t),i.push(t.name)}))}e.forEach((function(t){t.name="mk-slot-disabled"}))}}(t,i,a),this._element.appendChild(e),this.delegate&&this.delegate.styleHelperNodeDidMoveToParent&&this.delegate.styleHelperNodeDidMoveToParent(e);var s=e;o.supportsShadowDOM&&"slot"===t.localName&&(s=e.assignedNodes()[0]);var r=function(t){if(t&&t.nodeType===window.Node.ELEMENT_NODE){var e=window.getComputedStyle(t),i=parseFloat(e.marginLeft),o=parseFloat(e.marginTop),a=parseFloat(e.marginRight),s=parseFloat(e.marginBottom);return n.rectFromClientRect(t.getBoundingClientRect()).inset(-i,-o,-a,-s)}}(s);return this._element.removeChild(e),function(t,e){o.supportsShadowDOM&&t.forEach((function(t,i){t.name=e[i]}))}(i,a),r&&r.size},backgroundColorForElement:function(t,e){this._element.appendChild(t),this.delegate&&this.delegate.styleHelperNodeDidMoveToParent&&this.delegate.styleHelperNodeDidMoveToParent(t);var i=t;if(o.supportsShadowDOM&&"slot"===t.localName&&!(i=t.assignedNodes()[0]))return this._element.removeChild(t),null;var n=window.getComputedStyle(i).backgroundColor;return e&&(i.style.backgroundColor="transparent"),this._element.removeChild(t),/^transparent|initial|rgba\(.*, 0\)$/.test(n)?null:n},setAnimationForElement:function(t,e,i){var n=t;if(!o.supportsShadowDOM||"slot"!==t.localName||(n=t.assignedNodes()[0])){n.style.animation=n.style.webkitAnimation=e;var a=function(t){t.animationName===i&&(n.style.animation=n.style.webkitAnimation="",n.removeEventListener("animationend",a),n.removeEventListener("webkitAnimationEnd",a))};n.addEventListener("animationend",a),n.addEventListener("webkitAnimationEnd",a)}}},t.exports=a},2172:function(t,e,i){var n,o,a=i(1948);function s(t){this.hostNode=t,this._elementNodeMap={}}window.document&&(n=i(1997),(o=function(t){n.Node.call(this,t)}).prototype=a.inheritPrototype(n.Node,o,{toString:function(){return this.stringInfo()+" \u2192"}})),s.prototype={constructor:s,appendAssignedElement:function(t,e){var i=t.slot,n=new o(t);this._elementNodeMap[i]=n,this.hostNode.addChild(n),e||this.hostNode.element.appendChild(t)},removeAssignedElement:function(t,e){var i=t.name,n=this._elementNodeMap[i];delete this._elementNodeMap[i],this.hostNode.removeChild(n),e||this.hostNode.element.removeChild(n.element)},getAssignedElement:function(t){return this._elementNodeMap[t.name]?this._elementNodeMap[t.name].element:null}},t.exports=s},2173:function(t,e,i){var n=i(2139),o=i(1976),a=i(1977),s=i(1975),r=i(1997),l=i(1998),h=i(1986),c=i(1948),d=i(1981),u=3.5826363,p=3.58028186,m=10,g=10,f={left:4,right:4},_=7.5,y=10,v=7.5,b=7.5;function w(t){r.Node.call(this,h.htmlElement("div",{class:"mk-callout",style:"direction: ltr"})),this._callout=t}function C(t,e){n.call(this),this.delegate=t,this._rtl=e.rtl,this._node=new w(this);var i=this._node.element;function o(e){return t.backgroundColorForElement(e,!0)}function a(t,e){var i=h.htmlElement("div",{class:"mk-callout-accessory-content"},t);return i.style.maxWidth="186.5px",e&&(i.style.padding="0"),h.htmlElement("div",{class:"mk-callout-accessory"},i)}e.customElement?(this._containerElement=this._customElement=e.customElement,this.setSize(this.delegate.sizeForElement(this._customElement)),i.appendChild(e.customElement)):(this._ignoreCalloutCornerRadiusForLeftAccessory=e.ignoreCalloutCornerRadiusForLeftAccessory,this._tailScale=e.tailScale||1,this._bubbleElement=h.svgElement("path"),this._svgElement=i.appendChild(h.svgElement("svg",{class:"mk-bubble"},this._bubbleElement)),this._containerElement=h.htmlElement("div"),this._containerElementNode=new r.Node(this._containerElement),e.leftAccessory&&(this._leftAccessoryBackgroundColor=o(e.leftAccessory),this._leftAccessory=a(e.leftAccessory,!this._rtl&&this._ignoreCalloutCornerRadiusForLeftAccessory),this._containerElement.appendChild(this._leftAccessory)),this._containerContentElement=this._containerElement.appendChild(h.htmlElement("div")),this._containerContentElement.className="mk-callout-content",e.rightAccessory&&(this._rightAccessoryBackgroundColor=o(e.rightAccessory),this._rightAccessory=a(e.rightAccessory,this._rtl&&this._ignoreCalloutCornerRadiusForLeftAccessory),this._containerElement.appendChild(this._rightAccessory)),(this._leftAccessoryBackgroundColor||this._rightAccessoryBackgroundColor)&&(this._calloutId=function t(){var e=Math.random().toString(36).substr(2);return document.getElementById(e)?t():e}(),this._linearGradientElement=h.svgElement("linearGradient",{id:this._calloutId}),this._svgElement.appendChild(h.svgElement("defs",this._linearGradientElement))),e.contentElement?this._setContentElement(e.contentElement):(this._containerElementNode.classList.add("mk-standard"),e.rtl&&(this._containerContentElement.className+=" mk-rtl")),i.appendChild(this._containerElement)),e.position&&this.setPosition(e.position),this._node.wantsHardwareCompositing=!0}function k(t,e,i){var n=17*e,o=13*e,a=t.width/2-n,s=10*e,r=12*e;return"M0,10.5c0,"+(p-10.5)+" "+u+",-10.5 10.5,-10.5h"+t.width+"c"+(10.5-u)+",0 10.5,"+p+" 10.5,10.5v"+t.height+"c0,"+(10.5-p)+" "+-u+",10.5 -10.5,10.5h"+(-i-a)+"c"+-s+",0 "+-r+","+o+" "+-n+","+o+"c"+(r-n)+",0 "+(s-n)+","+-o+" "+-n+","+-o+"h"+(i-a)+"c"+(u-10.5)+",0 -10.5,"+-p+" -10.5,-10.5z"}w.prototype=c.inheritPrototype(r.Node,w,{constructor:w,didMoveToParent:function(t){null===t&&this._callout.didRemoveFromParent()}}),C.prototype=c.inheritPrototype(n,C,{_tailShift:0,get node(){return this._node},get boundingRect(){var t=this._node.position;return new a(t.x,t.y,this._node.size.width,this._node.size.height)},delegate:null,willMoveToMap:function(){this._node.transform=(new l).scale(0)},setAnchorOffset:function(t){this._anchorOffset=t?new window.DOMPoint(t.x,t.y):new window.DOMPoint},containsElement:function(t){if(t===this._svgElement)return!1;if(this._containerElement.contains(t))return!0;if(!h.supportsShadowDOM||!this.isCustomCallout())return!1;var e=this.customOrContentElement.assignedNodes()[0];return!!e&&e.contains(t)},isCustomCallout:function(){return!!this.customOrContentElement},get customOrContentElement(){return this._customElement||this._contentElement},get customLeftAccessory(){if(this._leftAccessory)return this._leftAccessory.firstChild.firstChild},get customRightAccessory(){if(this._rightAccessory)return this._rightAccessory.firstChild.firstChild},updateInfo:function(t,e){if(this.isCustomCallout())return!0;if(!t||!t.title)return!1;this._containerContentElement.innerHTML="",this._containerElement.style.width="",this._containerContentElement.appendChild(h.htmlElement("div",{class:"mk-title",dir:"auto"},t.title)),t.subtitle?(this._containerContentElement.appendChild(h.htmlElement("div",{class:"mk-subtitle",dir:"auto"},t.subtitle)),this._containerElementNode.classList.remove("mk-no-subtitle")):(this._containerElementNode.classList.add("mk-no-subtitle"),this._containerElementNode.classList.toggle("mk-no-accessories",!this._leftAccessory&&!this._rightAccessory)),this._updateAccessoryViews(),this._containerElement.className=this._containerElementNode.classList.toString();var i=this.delegate.sizeForElement(this._containerElement),n=t.map._impl.ensureVisibleFrame().size.width-2*e-this._extraWidth(this._ignoreCalloutCornerRadiusForLeftAccessory);return i.width=c.clamp(i.width,74,c.clamp(n,74,373)),0!==this._accessoryHeight&&(i.height=Math.max(this._accessoryHeight,i.height)),this._updateSize(i,!1),this.updatePosition(),!0},shiftTailBy:function(t){if(this._customElement)return 0;var e=Math.max(0,(this._bubbleSize.width-74-10.5)/2);return this._tailShift=t<0?Math.min(e,-t):-Math.min(e,t),this._bubbleElement.setAttribute("d",k(this._bubbleSize,this._tailScale,this._tailShift)),this._node.position=new o(this._node.position.x+this._tailShift,this._node.position.y),this._tailShift},animateIn:function(){if(!this.animates||this.animates&&this._customElement&&!this.appearanceAnimation)this._node.transform=new l;else{if(this._appearanceAnimationName)return this._node.transform=new l,void this.delegate.setAnimationForElement(this._containerElement,this._appearanceAnimation,this._appearanceAnimationName);this._scaleXOffset=-this._tailShift,this._scaleYOffset=this._node.size.height/2,this._scaleAnimationParameterIndex=0,this._scaleAnimationStartDate=Date.now(),d.scheduleOnNextFrame(this)}},animateOut:function(t){!t&&this.visible?(this._scaleAnimationStartDate&&this._finishAnimatingScale(),this._fadeoutAnimationStartDate=Date.now(),d.scheduleOnNextFrame(this)):this._node.remove()},performScheduledUpdate:function(){this._scaleAnimationStartDate&&this._animateScale(),this._fadeoutAnimationStartDate&&this._animateFadeout(),this._tailAnimation&&this._animateTail(),this._anchorOffsetAnimation&&this._animateAnchorOffset()},didRemoveFromParent:function(){this.delegate.calloutNodeDidRemove(this)},setSize:function(t){this._svgElement&&(this._svgElement.style.width=t.width+"px",this._svgElement.style.height=t.height+"px",this._svgElement.setAttribute("viewBox","-0.5 -0.5 "+t.width+" "+t.height)),n.prototype.setSize.call(this,t)},_updateSize:function(t,e){var i=this._ignoreCalloutCornerRadiusForLeftAccessory,n=t.width-this.node.size.width-22;this._tailShift=Math.max(0,this._tailShift+Math.min(0,n)),this._containerElement.style.width=t.width+"px";var o=this._extraWidth(i),a=13*this._tailScale,r=22+a;t.width+=o;var l=t.height,h=(i?55:50)+a;t.height+=r,t.height-=10.5,t.height=e?t.height:Math.max(t.height,h);var c=e?0:5.5,d=(t.height-l-a)/2;this._containerElement.style.top=l/2+Math.max(c,d)+"px";var u,p=v,m=b;this._containerElement.style.left=p+"px",this.setSize(t),this._bubbleSize=new s(t.width-22,t.height-22-a),this._bubbleElement.setAttribute("d",k(this._bubbleSize,this._tailScale,this._tailShift)),this._leftAccessoryBackgroundColor&&(u=100*(this._leftAccessoryWidth+p)/t.width,this._updateAccessoryViewBackground(u,this._leftAccessoryBackgroundColor,"white")),this._rightAccessoryBackgroundColor&&(u=100-100*(this._rightAccessoryWidth+m)/t.width,this._updateAccessoryViewBackground(u,"white",this._rightAccessoryBackgroundColor))},_extraWidth:function(t){return t?_+y:m+g-f.left},_updateAccessoryViews:function(){if(this._accessoryHeight=0,this._leftAccessory){var t=this.delegate.sizeForElement(this._leftAccessory.children[0]);this._leftAccessoryWidth=(!this._rtl&&this._ignoreCalloutCornerRadiusForLeftAccessory?0:10.5)+t.width,this._accessoryHeight=t.height,this._leftAccessory.style.width=this._leftAccessoryWidth+"px",this._ignoreCalloutCornerRadiusForLeftAccessory&&!this._rtl&&(this._leftAccessory.style.height=this._leftAccessoryWidth+"px",this._leftAccessory.style.overflow="visible"),this._containerContentElement.style.marginLeft=this._leftAccessoryWidth+"px"}if(this._rightAccessory){var e=this.delegate.sizeForElement(this._rightAccessory.children[0]);this._rightAccessoryWidth=(this._rtl&&this._ignoreCalloutCornerRadiusForLeftAccessory?0:10.5)+e.width,this._accessoryHeight=Math.max(this._accessoryHeight,e.height),this._rightAccessory.style.width=this._rightAccessoryWidth+"px",this._ignoreCalloutCornerRadiusForLeftAccessory&&this._rtl&&(this._rightAccessory.style.height=this._rightAccessoryWidth+"px",this._rightAccessory.style.overflow="visible"),this._containerContentElement.style.marginRight=this._rightAccessoryWidth+"px"}},_updateAccessoryViewBackground:function(t,e,i){this._linearGradientElement.appendChild(h.svgElement("stop",{offset:t+"%","stop-color":""+e})),this._linearGradientElement.appendChild(h.svgElement("stop",{offset:t+"%","stop-color":""+i})),this._bubbleElement.style.fill="url(#"+this._calloutId+")"},_setContentElement:function(t){this._updateAccessoryViews(),this._contentElement=t,this._containerContentElement.appendChild(h.htmlElement("div",t)),this._containerElementNode.classList.add("mk-custom-content"),this._containerElement.className=this._containerElementNode.classList.toString();var e=this.delegate.sizeForElement(this._containerElement);e.height=Math.max(e.height,this._accessoryHeight),this._updateSize(e,!0)},_scaleAnimationParameters:[[8e3/60,30/249,277/249],[5e3/60,277/249,237/249],[5e3/60,237/249,1]],_animateScale:function(){var t=this._scaleAnimationParameters[this._scaleAnimationParameterIndex],e=t[0],i=t[1],n=t[2],o=Date.now(),a=Math.min((o-this._scaleAnimationStartDate)/e,1),s=i+(n-i)*a;if(this._node.transform=(new l).translate(this._scaleXOffset,this._scaleYOffset).scale(s).translate(-this._scaleXOffset,-this._scaleYOffset),1===a){if(++this._scaleAnimationParameterIndex,!(this._scaleAnimationParameterIndex<this._scaleAnimationParameters.length))return void this._finishAnimatingScale();this._scaleAnimationStartDate=o}d.scheduleOnNextFrame(this)},_finishAnimatingScale:function(){delete this._scaleXOffset,delete this._scaleYOffset,delete this._scaleAnimationStartDate,delete this._scaleAnimationParameterIndex},_animateFadeout:function(){var t=(Date.now()-this._fadeoutAnimationStartDate)/100,e=Math.max(0,1-t);0!==e?(this._node.opacity=e,d.scheduleOnNextFrame(this)):this._node.remove()},animateTailScale:function(t,e){var i=(new Date).getTime();e=e||0===e?e:500,this._tailAnimation={timeStart:i,timeEnd:i+e,valueStart:this._tailScale,valueEnd:t},this._animateTail()},_animateTail:function(){if(this._tailAnimation){var t=(new Date).getTime(),e=this._tailAnimation.timeStart,i=this._tailAnimation.timeEnd,n=this._tailAnimation.valueStart,o=this._tailAnimation.valueEnd,a=i<=e?1:(t-e)/(i-e),r=h.easeInOut(c.clamp(a,0,1)),l=h.lerp(r,n,o),u=13*(l-this._tailScale);this._tailScale=l,this.setSize(new s(this.node.size.width,this.node.size.height+u)),this._bubbleElement.setAttribute("d",k(this._bubbleSize,this._tailScale,this._tailShift)),t<i?d.scheduleOnNextFrame(this):this._tailAnimation=null}},animateAnchorOffset:function(t,e){var i=(new Date).getTime();e=e||0===e?e:500,this._anchorOffsetAnimation={timeStart:i,timeEnd:i+e,startX:this._anchorOffset.x,startY:this._anchorOffset.y,endX:t.x,endY:t.y},this._animateAnchorOffset()},_animateAnchorOffset:function(){if(this._anchorOffsetAnimation){var t=(new Date).getTime(),e=this._anchorOffsetAnimation.timeStart,i=this._anchorOffsetAnimation.timeEnd,n=this._anchorOffsetAnimation.startX,o=this._anchorOffsetAnimation.endX,a=this._anchorOffsetAnimation.startY,s=this._anchorOffsetAnimation.endY,r=i<=e?1:(t-e)/(i-e),l=h.easeInOut(c.clamp(r,0,1)),u=h.lerp(l,n,o),p=h.lerp(l,a,s);this._anchorOffset.x=u,this._anchorOffset.y=p,this.updatePosition(),t<i?d.scheduleOnNextFrame(this):this._anchorOffsetAnimation=null}},getCenterOffset:function(t){var e=13*this._tailScale,i=this._node.size;return new o(0,(e-i.height-(t?13:0))/2)}}),t.exports=C},2174:function(t,e){t.exports=':host(.mk-annotation-container.mk-dragging) ::selection,div.mk-annotations ::selection{background:0 0}.mk-invisible{opacity:0;pointer-events:none}.mk-hidden{display:none}div.mk-annotations,div.mk-annotations>div,div.mk-callouts,div.mk-style-helper{position:absolute;top:0;left:0}.mk-selected{z-index:1}.mk-lifted{z-index:2}.mk-callout{position:absolute;top:0;left:0;pointer-events:auto;-webkit-user-select:auto;-moz-user-select:text;-ms-user-select:text}:host(.mk-dark-mode) .mk-callout{color:#fff}.mk-callout>*{position:absolute;top:0;left:0}svg.mk-bubble{display:block;width:100%;height:100%}div.mk-callout-accessory{position:absolute;top:50%;transform:translateY(-50%);overflow:hidden}div.mk-callout-accessory-content{white-space:nowrap;position:relative;text-align:center;font-size:12px}div.mk-callout-accessory:first-child{left:0}div.mk-callout-accessory:last-child{right:0}div.mk-callout-accessory:first-child .mk-callout-accessory-content{padding-right:8px}div.mk-callout-accessory:last-child .mk-callout-accessory-content{padding-left:8px}div.mk-standard{font-family:"-apple-system",BlinkMacSystemFont,"Helvetica Neue",Helvetica,Arial,sans-serif;box-sizing:border-box;position:relative}div.mk-custom-content,div.mk-standard{transform:translateY(-50%)}div.mk-standard .mk-callout-content>div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}div.mk-standard .mk-callout-content{padding:0 4px}.mk-callout-content.mk-rtl{direction:rtl}.mk-callout-content.mk-rtl *{text-align:right}div.mk-callout-accessory:first-child+.mk-callout-content{padding-left:8px}div.mk-standard .mk-callout-content:nth-last-child(2){padding-right:8px}div.mk-standard .mk-title{font-size:17px;font-weight:500;color:#000;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;letter-spacing:.025em}:host(.mk-dark-mode) div.mk-standard .mk-title{color:#fff}div.mk-standard .mk-subtitle{font-size:13px;color:rgba(0,0,0,.7);letter-spacing:.025em}:host(.mk-dark-mode) div.mk-standard .mk-subtitle{color:rgba(255,255,255,.7)}svg.mk-bubble path{fill:#fff;stroke:rgba(0,0,0,.2)}:host(.mk-dark-mode) svg.mk-bubble path{fill:#3e3e3e;stroke:rgba(0,0,0,.5)}'},2175:function(t,e,i){var n=i(1986),o=i(1969).MapPoint,a=i(1976),s=i(1975);if(window.document)var r=i(1997);function l(t){this.map=t,window.document&&(this.node=new r.Node(n.htmlElement("div",{class:"mk-map-features-container"})),this._shadowRootNode=n.addShadowRootChild(this.node,i(2176)),this._featuresContainer=this._shadowRootNode.addChild(new r.Node(n.htmlElement("div",{class:"mk-map-features"}))))}l.prototype={constructor:l,update:function(t,e){this._featuresContainer.children=[];for(var i=0;i<t.length;i++){var l=t[i],h=l.rects[0],c=e.transformMapPoint(new o(l.position[0],l.position[1])),d=h.size,u=c.x+h.offset[0],p=c.y+h.offset[1];d[0]<44&&(u-=(44-d[0])/2,d[0]=44),d[1]<44&&(p-=(44-d[1])/2,d[1]=44);var m=new r.Node(n.htmlElement("div",{"aria-label":l.title}));m.position=new a(u,p),m.size=new s(d[0],d[1]),this._featuresContainer.addChild(m)}}},t.exports=l},2176:function(t,e){t.exports=":host(.mk-map-features-container) .mk-map-features>div{position:absolute;top:0;left:0}"},2177:function(t,e,i){var n=i(2137),o=i(1970),a=i(1948);function s(t,e){if(o(this,s)){var n=i(2181);Object.defineProperty(this,"_impl",{value:new n(this,t,e)})}}i(2178),s.prototype=a.inheritPrototype(n,s,{get url(){return this._impl._url},set url(t){this._impl.url=t}}),t.exports=s},2178:function(t,e,i){var n,o=i(2179),a=i(1986),s=i(1948),r=i(1975),l=i(1976),h=i(1978),c=i(2157);t.exports=function(t){function e(e,i,n){if(this._sceneGraphNode=new o(this),t.call(this,e,i,t.div,n),!n||!("url"in n))throw new Error("[MapKit] No URL for image of ImageAnnotation");this._waitingForImageSize=!this._userSetSize,this._setSceneGraphNode(),this.url=n.url}return e.prototype=s.inheritPrototype(t,e,{renderedByDOMElement:!1,get url(){return this._url},set url(t){this._pendingGlyphImage=t,c(t,function(e){if(this._pendingGlyphImage===t){if(delete this._pendingGlyphImage,!e)throw new Error("[MapKit] No URL for image of ImageAnnotation");var i=e.ratio,n=e.glyphImageUrl;this._ratio=i,this._url=t,this._setSceneGraphNode(),this._removeImageEventListener(),(this._sceneGraphNode.image=a.htmlElement("img",{src:n})).complete?this.updateSize():(this._userSetSize||(this._waitingForImageSize=!0),this._addImageEventListener())}}.bind(this)),this._url=t},positionForCallout:function(){if(this._sceneGraphNode instanceof o)return t.prototype.positionForCallout.call(this);var e=this._node.size,i=new l(-e.width/2,0),n=this.nodePosition(),a=new l(0,1);return new l(n.x-i.x-a.x,n.y-i.y-a.y)},calculateNodePosition:function(){return this._sceneGraphNode instanceof o?t.prototype.calculateNodePosition.call(this):new l(this._position.x-this._anchorPoint.x,this._position.y-this._anchorPoint.y)},handleEvent:function(e){switch(e.type){case"load":this._removeImageEventListener(),this._handleImageLoaded();break;case"error":this._removeImageEventListener(),this._handleImageError();break;default:return void t.prototype.handleEvent.call(this,e)}},resetNodeTransform:function(){this.sceneGraphNode.transform=new h},updateSize:function(){if(this._waitingForImageSize=!1,this._sceneGraphNode instanceof o){var e;if(this._userSetSize)e=this._node.size;else{var i=this._sceneGraphNode.image;e=new r(i.naturalWidth/this._ratio,i.naturalHeight/this._ratio),this.setSize(e)}this._sceneGraphNode.size=e}else e=this._sceneGraphNode.size,this._userSetSize&&console.warn("[MapKit] Size set on the ImageAnnotation is removed."),this.setSize(e),this._userSetSize=!1;this._setElementSize(e),t.prototype.updateSize.call(this)},isAKnownOption:function(e){return"url"===e||t.prototype.isAKnownOption.call(this,e)},willMoveToMap:function(){this._isMoving=this.doesAnimate()},canShowCallout:function(){return!this._waitingForImageSize&&t.prototype.canShowCallout.call(this)},_addImageEventListener:function(){this._sceneGraphNode.image.addEventListener("load",this),this._sceneGraphNode.image.addEventListener("error",this)},_removeImageEventListener:function(){this._sceneGraphNode.image&&(this._sceneGraphNode.image.removeEventListener("load",this),this._sceneGraphNode.image.removeEventListener("error",this))},_handleImageLoaded:function(){this.updateSize()},_handleImageError:function(){this._sceneGraphNode.image&&console.error("[MapKit] Could not load image for ImageAnnotation at URL "+this._sceneGraphNode.image.src),this._setSceneGraphNodeToFallback(),this.updatePosition(),this.updateSize()},_setElementSize:function(t){this._element.style.width=t.width+"px",this._element.style.height=t.height+"px"},_setSceneGraphNode:function(){if(!(this._sceneGraphNode instanceof o)){var t=this._sceneGraphNode;this._sceneGraphNode=new o(this),t.parent&&t.parent.replaceChild(this._sceneGraphNode,t)}},_setSceneGraphNodeToFallback:function(){if(n||(n=i(2180)),!(this._sceneGraphNode instanceof n)){this._removeImageEventListener();var t=this._sceneGraphNode;this._sceneGraphNode=new n(this),s.isNode()&&t.injectedDefaultImage&&t.injectedDefaultImageScale&&this._sceneGraphNode.injectDefaultImage(t.injectedDefaultImage,t.injectedDefaultImageScale),t.parent&&t.parent.replaceChild(this._sceneGraphNode,t)}}}),e}},2179:function(t,e,i){var n=i(1972),o=i(1948);function a(t){n.ImageNode.call(this),this._annotation=t}a.prototype=o.inheritPrototype(n.ImageNode,a,{get position(){return this._annotation.nodePosition()}}),o.isNode()&&(a.prototype.injectDefaultImage=function(t,e){this.injectedDefaultImage=t,this.injectedDefaultImageScale=e}),t.exports=a},2180:function(t,e,i){var n=i(1972),o=i(1975),a=i(1977),s=i(1948),r=i(2144),l=i(2146),h=i(2143);function c(t){this._realAnnotation=t}function d(t){n.BaseNode.call(this),this._realAnnotation=t,this.annotation=new c(t),this._renderer=new l(this);var e=2*this.params.balloonRadius;this.size=new o(e,this.params.height+this.params.offset),this.layerBounds=new a(0,0,this.size.width,this.size.height),this._renderer.isFallbackGlyphTextPending&&this._renderer.addPendingNode(this),this.needsDisplay=!0}c.prototype={constructor:c,glyphText:"",get glyphColor(){var t=this._realAnnotation.map;return t?h.DefaultGlyphColor[t.colorScheme]:h.DefaultGlyphColor.light},isGlyphImagePOIIcon:!1,get fillColor(){var t=this._realAnnotation.map;return t?h.DefaultColor[t.colorScheme]:h.DefaultColor.light},get haloColor(){return null},useSquareBalloon:!1},d.prototype=s.inheritPrototype(n.BaseNode,d,{enablesDefaultGlyphImage:!0,get position(){return this._realAnnotation.nodePosition()},frozen:!0,state:"default",params:r.Params.default,stringInfo:function(){return"ImageAnnotationFallbackNode"},freeze:function(){}}),s.isNode()&&(d.prototype.injectDefaultImage=function(t,e){this.injectedDefaultImage=t,this.injectedDefaultImageScale=e}),t.exports=d},2181:function(t,e,i){var n=i(2141),o=i(2178)(n);t.exports=o},2182:function(t,e,i){i(1966),t.exports={mapkit:{importGeoJSON:i(2183)}}},2183:function(t,e,i){"use strict";var n=i(2012).XHRLoader,o=i(2184),a=i(1959);t.exports=function(t,e){var i="function"===typeof e,s="object"===typeof e,r="string"===typeof t;if(r&&!i&&!s)throw new Error("[MapKit] For GeoJSON file imports, a callback must be provided as a second argument");return r?function(t,e){var i=new n(t,{loaderDidSucceed:function(i,n){var o;try{o=JSON.parse(n.responseText)}catch(a){return void e(new Error("[MapKit] The response of "+t+" does not appear to be valid JSON:"+n.responseText))}e(null,o)},loaderDidFail:function(i,n){e(new Error("[MapKit] Failed to load "+t))}});return i.schedule(),i.id}(t,(function(t,n){if(!t)return o.importGeoJSON(n,e);s&&e.geoJSONDidError?a(e.geoJSONDidError,e,[t]):i&&a(e,null,[t])})):o.importGeoJSON(t,e)}},2184:function(t,e,i){"use strict";var n={importGeoJSON:i(2185),constants:i(2187),validate:i(2186)};t.exports=n},2185:function(t,e,i){"use strict";var n=i(2109),o=i(1969).Coordinate,a=i(2186),s=i(2187),r=i(1959),l=i(1981),h={Point:i(2136),LineString:i(2124),Polygon:i(2128)},c={MultiPoint:s.Point,MultiLineString:s.LineString,MultiPolygon:s.Polygon},d=[s.MultiPoint,s.MultiLineString,s.MultiPolygon];function u(t){this.message=t}function p(t,e,i){var n=function(){var e=i(n.collection?n.collection.items[n.index]:t.scheduledTaskItem);n.collection?n.collection.items[n.index]=e:t.scheduledTaskItem=e};return e&&(n.collection=e,n.index=e.items.length),l.scheduleInBackground(n,l.Priority.Highest),n}function m(t){if(!a.isPosition(t))throw new u("[MapKit] Expected a GeoJSON Position type, instead got "+t);return new o(t[1],t[0])}function g(t,e,i){var o,a=d.indexOf(t.type)>-1,l="GeometryCollection"===t.type;if(a||l){var f=a?t.coordinates:t.geometries;if(a)switch(t.type){case s.MultiPoint:o=e.delegate.itemForMultiPoint;break;case s.MultiLineString:o=e.delegate.itemForMultiLineString;break;case s.MultiPolygon:o=e.delegate.itemForMultiPolygon}l&&(o=e.delegate.itemForPoint);var _=new n([],t);return f.forEach((function(i){a&&(i={type:c[t.type],coordinates:i}),_.items.push(g(i,e,_))})),e.hasCallbackOrDelegate&&p(e,i,(function(){return _._impl.items=_.items.filter((function(t){return!!t})),o?r(o,e.delegate,[_,t],_):_})),_}var y=h[t.type];if(!y)throw new u("[MapKit] Expected a GeoJSON "+t.type+" type, instead got "+t);var v,b,w=function(t,e){switch(e){case s.MultiPoint:case s.LineString:return t.map((function(t){return m(t)}));case s.Polygon:return t.map((function(t){return t.map((function(t){return m(t)}))}));default:return m(t)}}(t.coordinates,t.type);switch(t.type){case s.Point:o=e.delegate.itemForPoint,v=w;break;case s.LineString:o=e.delegate.itemForLineString,b=e.delegate.styleForOverlay;break;case s.Polygon:o=e.delegate.itemForPolygon,b=e.delegate.styleForOverlay}function C(){var i=new y(w,{data:t}),n=o?r(o,e.delegate,[v||i,t],i):i;return n?(++e.itemCount,b&&(n.style=r(b,e.delegate,[i,t],i)),n):null}return e.hasCallbackOrDelegate?p(e,i,C):C()}u.prototype=Object.create(Error.prototype),t.exports=function(t,e){var i={delegate:{},itemCount:0,hasCallbackOrDelegate:!1};e&&(i.delegate=e,i.hasCallbackOrDelegate=!0);try{var o="[MapKit] importGeoJSON expects an Object and was passed ";if(!t)throw new u(o+"a falsy value");if(!(t instanceof Object))throw new u(o+t);if(Array.isArray(t))throw new u(o+"an array");var h=function t(e,i,o){var l;switch(e.type){case s.Feature:return l=function(t,e,i){if(null===t.geometry)return e.hasCallbackOrDelegate?p(e,i,(function(){return null})):null;if(!a.isValid(t))throw new u("[MapKit] Expected a GeoJSON "+t.type+" type, instead got "+t);var n=g(t.geometry,e,i);if(!n)throw new u("[MapKit] "+t+" is an unknown GeoJSON type");return n}(e,i,o),i.delegate.itemForFeature&&p(i,o,(function(t){return r(i.delegate.itemForFeature,i.delegate,[t,e],t)})),l;case s.FeatureCollection:return l=new n([],e),e.features.forEach((function(e){var n=t(e,i,l);n&&l.items.push(n)})),i.hasCallbackOrDelegate&&p(i,o,(function(){return l._impl.items=l.items.filter((function(t){return!!t})),i.delegate.itemForFeatureCollection?r(i.delegate.itemForFeatureCollection,i.delegate,[l,e],l):l})),l;case s.GeometryCollection:case s.MultiPoint:case s.MultiLineString:case s.MultiPolygon:case s.Point:case s.LineString:case s.Polygon:case s.Position:return g(e,i,o);default:throw"string"===typeof e.type?new u('[MapKit] "'+e.type+'" is an unknown GeoJSON type.'):new u("[MapKit] importGeoJSON expects an object with a known GeoJSON `type` property.")}}(t,i);return i.hasCallbackOrDelegate?void l.scheduleInBackground((function(){var o=void 0===i.scheduledTaskItem?h:i.scheduledTaskItem;o instanceof n||(o=new n(o,t)),"function"===typeof e?r(e,null,[null,o]):i.delegate.geoJSONDidComplete?(0===i.itemCount&&console.warn("[MapKit] No item is imported with importGeoJSON, either because GeoJSON has no geometries, or the delegate methods did not return any item."),r(i.delegate.geoJSONDidComplete,i.delegate,[o,t])):console.warn("[MapKit] importGeoJSON was called asynchronously with a delegate object but no `geoJSONDidComplete` method was defined.")}),l.Priority.Highest):(h instanceof n||(h=new n(h,t)),h)}catch(c){if(!(c instanceof u))throw c;"function"===typeof i.delegate.geoJSONDidError?r(i.delegate.geoJSONDidError,i.delegate,[c,t]):"function"===typeof e?r(e,null,[c]):console.error(c.message)}}},2186:function(t,e,i){"use strict";var n=i(2187),o={Feature:function(t){return a(t,t.geometry&&t.geometry.type)},FeatureCollection:function(t){if(!(t instanceof Object)||!(t.features instanceof Array))return!1;for(var e in t.features){var i=t.features[e];if(i.geometry&&!a(i,i.geometry.type))return!1}return!0},Position:function(t){return function(t){if(!Array.isArray(t)||t.length<2)return!1;for(var e=0;e<2;++e)if("number"!==typeof t[e]||isNaN(t[e]))return!1;return!0}(t)},Point:function(t){return s(t,n.Point)},MultiPoint:function(t){return s(t,n.MultiPoint)},LineString:function(t){return s(t,n.LineString)},MultiLineString:function(t){return s(t,n.MultiLineString)},Polygon:function(t){return s(t,n.Polygon)},MultiPolygon:function(t){return s(t,n.MultiPolygon)},GeometryCollection:function(t){if(!(t instanceof Object)||!(t.geometries instanceof Array))return!1;for(var e in t.features)if(!s(t,t.geometries[e].type))return!1;return!0}};function a(t,e){return t instanceof Object&&t.type===n.Feature&&!!s(t.geometry,e)}function s(t,e){return t instanceof Object&&(!e||t.type===e)&&((i=t.type)instanceof String||"string"===typeof i)&&(t.type===n.GeometryCollection?o.GeometryCollection(t):t.type===n.MultiLineString||t.type===n.MultiPolygon||t.type===n.MultiPoint?function(t){for(var e=0;e<t.length;e+=1)if(!(t[e]instanceof Array))return!1;return!0}(t.coordinates):t.coordinates instanceof Array);var i}t.exports={isValid:function(t){return!!o[t.type]&&o[t.type](t)},isPosition:function(t){return o.Position(t)}}},2187:function(t,e,i){"use strict";t.exports={Feature:"Feature",FeatureCollection:"FeatureCollection",GeometryCollection:"GeometryCollection",MultiPoint:"MultiPoint",MultiLineString:"MultiLineString",MultiPolygon:"MultiPolygon",Point:"Point",LineString:"LineString",Polygon:"Polygon",Position:"Position"}},2188:function(t,e,i){i(1966),i(2131),i(2102),t.exports={AnnotationsController:i(2132),MapFeaturesLayerController:i(2175),OverlaysController:i(2103),UserLocationController:i(2189),LayerItemsController:i(2104),ItemCollection:i(2109),AccuracyRingOverlay:i(2192),UserLocationAnnotation:i(2194),Geocoder:i(2198),userLocation:i(2190),mapkit:{}}},2189:function(t,e,i){var n=i(2190);function o(t){this._delegate=t,this._showsUserLocation=!1,this._tracksUserLocation=!1}o.prototype={constructor:o,get showsUserLocation(){return this._showsUserLocation},set showsUserLocation(t){!t||n.isAvailable?(this._showsUserLocation=t,t?(n.addEventListener(n.Events.Change,this),n.addEventListener(n.Events.Error,this),n.watch()):(n.removeEventListener(n.Events.Change,this),n.removeEventListener(n.Events.Error,this))):console.warn("[MapKit] User location is unavailable.")},get tracksUserLocation(){return this._tracksUserLocation},set tracksUserLocation(t){!t||n.isAvailable?(this._tracksUserLocation=t,t?(n.addEventListener(n.Events.Change,this),n.addEventListener(n.Events.Error,this),n.watch()):(n.removeEventListener(n.Events.Change,this),n.removeEventListener(n.Events.Error,this))):console.warn("[MapKit] User location is unavailable.")},get userLocation(){return n},handleEvent:function(t){switch(t.type){case n.Events.Change:this._handleUserLocationChange(t);break;case n.Events.Error:this._handleUserLocationError(t)}},mapWasDestroyed:function(){delete this._delegate,n.removeEventListener(n.Events.Change,this),n.removeEventListener(n.Events.Error,this)},_handleUserLocationChange:function(t){n.errorCode=0,this._delegate.userLocationDidChange(t)},_handleUserLocationError:function(t){n.errorCode=t.code,this._delegate.userLocationDidError(t)}},t.exports=o},2190:function(t,e,i){var n=i(1969),o=n.MapRect,a=n.Coordinate,s=i(1952),r=i(1948),l=i(1943),h=i(2191),c={Change:"user-location-change",Error:"user-location-error"},d=null;function u(){this._location=null,this._coordinate=null,this._stale=!1,this._watchers=0,l.addEventListener(l.Events.Changed,this),l.addEventListener(l.Events.Error,this)}u.prototype=r.inheritPrototype(s.EventTarget,u,{Events:c,get location(){return this._location},get coordinate(){return this._coordinate},get stale(){return this._stale},get mapAccuracyRadius(){var t=this.location;return!this.stale&&t.accuracy>0?t.accuracy:0},get isAvailable(){return window.navigator.geolocation&&"function"===typeof window.navigator.geolocation.watchPosition&&"function"===typeof window.navigator.geolocation.getCurrentPosition},getMapRect:function(){var t=this.location&&this.location.accuracy||0,e=this.coordinate.latitude,i=this.coordinate.toMapPoint(),a=t*n.mapUnitsPerMeterAtLatitude(e);return new o(i.x-a,i.y-a,2*a,2*a)},watch:function(){this._watchId||(window.navigator.geolocation.watchPosition?(f(),this._watchId=window.navigator.geolocation.watchPosition(y,b),d=setTimeout((function(){f(),b({code:3,message:"Timeout expired"})}),15e3)):console.warn("[MapKit] User location is unavailable."))},locate:function(t,e,i){window.navigator.geolocation.getCurrentPosition?p&&this._watchId?_(p,t,e):window.navigator.geolocation.getCurrentPosition((function(i){_(i,t,e)}),e,i):console.warn("[MapKit] User location is unavailable.")},addEventListener:function(){s.EventTarget.prototype.addEventListener.apply(this,arguments)&&++this._watchers},removeEventListener:function(){s.EventTarget.prototype.removeEventListener.apply(this,arguments)&&(--this._watchers,0===this._watchers&&this._watchId&&(window.navigator.geolocation.clearWatch(this._watchId),this._watchId=null))},handleEvent:function(t){switch(t.type){case l.Events.Changed:case l.Events.Error:if(m&&(p=m,m=null),!p)return;y(p)}},reset:function(){f(),this._watchers=0,this._watchId=null,p=null}});var p,m=null,g=new u;function f(){clearTimeout(d),d=null}function _(t,e,i){if("AutoNavi"===l.tileProvider){var n=new a(t.coords.latitude,t.coords.longitude);h.shift(n,(function(n,o){if(n)i&&i(n);else{var a={coords:{latitude:o.latitude,longitude:o.longitude}};"accuracy"in t.coords&&(a.coords.accuracy=t.coords.accuracy),e&&e(a)}}))}else e&&e(t)}function y(t){f(),p=t,l.error?b({code:4,message:"MapKit not initialized."}):l.ready?!g._stale&&g._coordinate&&t.coords.latitude===g._coordinate.latitude&&t.coords.longitude===g._coordinate.longitude||_(t,v,b):m=t}function v(t){g._stale=!1,g._location=t.coords,g._coordinate=new a(t.coords.latitude,t.coords.longitude),g.dispatchEvent(new w(g._coordinate,t.coords.floorLevel))}function b(t){m=null,p=null,g._stale=!0,g.dispatchEvent(new C(t))}function w(t,e){s.Event.call(this,c.Change),this.coordinate=t,this.floorLevel=e,this.timestamp=new Date}function C(t){s.Event.call(this,c.Error),this.code=t.code,this.message=t.message}w.prototype=r.inheritPrototype(s.Event,w,{}),C.prototype=r.inheritPrototype(s.Event,C,{}),t.exports=g},2191:function(t,e,i){"use strict";var n=i(1969),o=i(2012).XHRLoader,a=i(1943),s=n.MapPoint,r=Math.pow(2,21);function l(t){var e=t.toMapPoint(),i=r*n.tileSize;return{x:Math.floor(e.x*i),y:Math.floor(e.y*i),z:21}}e.shift=function(t,e){var i=a.locationShiftUrl;!function(t,e,i){new o(e,{getDataToSend:function(){return t},loaderDidSucceed:function(t,e){if(e.status<200||e.status>=300)i(new Error("HTTP error:"+e.status));else try{i(null,JSON.parse(e.responseText))}catch(n){return void i(new Error("Failed to parse response: "+e.responseText))}},loaderDidFail:function(t,e){i(new Error("Network error"))}},{method:"POST",withCredentials:a.withCredentials}).schedule()}(JSON.stringify({pixelPoint:l(t)}),i,(function(t,i){t?e(new Error):i&&i.shiftedPixelPoint?e(null,function(t){function e(t){return t/r/n.tileSize}return new s(e(t.x),e(t.y)).toCoordinate()}(i.shiftedPixelPoint)):e(new Error)}))}},2192:function(t,e,i){var n=i(2115),o=i(2111),a=i(1948),s=i(1987).Tints,r=i(1986),l=i(1988),h=i(2193),c=i(2190),d=new o({lineWidth:2,strokeColor:"white"}),u=function(t,e){var i=c.location,n=void 0===e?56:e,o=(i&&i.accuracy||0)<=3e4;return c.getMapRect().size.width*t>=n&&o},p=r.lerp,m=function(t,e,i){return a.clamp((t-e)/(i-e),0,1)},g=function(){var t=c.location,e=t&&t.accuracy||0;return e>3e4?0:e};function f(t){var e=t.coordinate,i=g();n.call(this,e,i,{style:d}),h.setIsAnimated(this,!0),this._isRingMode=!1,this._isShown=!1,this._fadeClock=0}f.prototype=a.inheritPrototype(n,f,{updateIsShown:function(t,e,i){var n=h.getClock(),o=u(e),a=o!==this._isRingMode?n:this._fadeClock,s=n-a<1e3,r=this._impl.shown&&(o||s);r!==this._isShown&&h.setIsAnimated(this,r),this._impl.shown=r,this._fadeClock=a,this._isRingMode=o,this._isShown=r,this._mapRegion=t,this._worldSize=e,this._colorScheme=i},performScheduledUpdate:function(){var t=h.getClock(),e=c.stale,i=this._mapRegion&&this._mapRegion.toMapRect(),n=i?i.size.width*this._worldSize:0,o=c.getMapRect().size.width*this._worldSize,a=l.SystemColors[s.Light],d=l.SystemColors[s.Dark],u="light"===this._colorScheme?e?a.gray:a.blue:e?d.gray:d.blue;this.style.fillColor="rgb("+u.join(",")+")",this.style.strokeColor="dark"===this._colorScheme?"rgba("+a.gray3.join(",")+", 0.5)":"white";var g=m(o,56,940),f=(e?.2:.14)*("satellite"===this._colorScheme?2:1);this.style.fillOpacity=Math.pow(1-g,2)*f;var _=t-this._fadeClock,y=m(_,0,1e3),v=this._isRingMode?y:1-y;this._impl.node.opacity=v;var b=m(o,56,n),w=p(b,2,2.5),C=p(b,4,5),k=t%2e3/2e3,S=r.easeInOut(1-Math.abs(2*k-1));this.style.lineWidth=p(S,w,C)},updateForUserLocation:function(t){this.coordinate=c.coordinate,this.radius=g()}}),Object.defineProperties(f,{getMode:{value:u}}),t.exports=f},2193:function(t,e,i){var n=i(1981),o=[],a=Date.now(),s=null,r=function t(){var e=o.length;if(null===s&&e>0){for(var i=0;i<e;++i)n.scheduleASAP(o[i]);n.scheduleOnNextFrame(t)}},l=function(){s=Date.now()},h=function(){null!==s&&(a+=Date.now()-s,s=null,n.scheduleASAP(r))};t.exports={setIsAnimated:function(t,e){var i=o.indexOf(t);if(e&&i<0&&(o.push(t),1===o.length)){n.scheduleASAP(r);try{window.top.addEventListener("blur",l),window.top.addEventListener("focus",h)}catch(a){}}if(!e&&i>-1&&(o.splice(i,1),0===o.length))try{window.top.removeEventListener("blur",l),window.top.removeEventListener("focus",h)}catch(a){}},getIsAnimated:function(t){return o.indexOf(t)>-1},isRunning:function(){return null===s},getClock:function(){return Date.now()-a}}},2194:function(t,e,i){var n=i(2193),o=i(2137),a=i(1948);function s(t){var e=i(2195);Object.defineProperty(this,"_impl",{value:new e(this,t)})}var r=function(){throw new TypeError("[MapKit] UserLocationAnnotation may not be constructed.")};s.prototype=r.prototype=a.inheritPrototype(o,r,{set coordinate(t){this._impl.coordinate=t},set isRingMode(t){var e=this._impl._sceneGraphNode._renderer,i=t?0:1;i!==e.opacity&&(e.opacity=i,e.opacityTime=n.getClock())},get coordinate(){return this._impl.coordinate},get draggable(){return this._impl.draggable},set draggable(t){this._impl.draggable=t},get size(){return this._impl.size},set size(t){this._impl.size=t}}),t.exports=s},2195:function(t,e,i){var n=i(2141),o=i(2196),a=i(2009),s=i(1948),r=i(1987).Tints,l=i(1975),h=i(2193),c=i(1988),d=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function u(t,e){var i=c.SystemColors.default,a={INNER_RADIUS:8,OUTER_RADIUS:11,SHADOW_BLUR:10,TOTAL_RADIUS:0,OUTER_FILL:[255,255,255],STALE_FILL:i.gray2,SHADOW_COLOR:[0,0,0,.25],ANIMATION_DURATION_MS:3e3,ANIMATION_HALF_DURATION_MS:0,ANIMATION_SCALE_FROM:1,ANIMATION_SCALE_TO:.81,ANIMATION_FILL_FROM:i.blue,ANIMATION_FILL_TO:i.blue};a.TOTAL_RADIUS=a.OUTER_RADIUS+a.SHADOW_BLUR,a.ANIMATION_HALF_DURATION_MS=a.ANIMATION_DURATION_MS/2;var s=a.TOTAL_RADIUS,r=a.SHADOW_BLUR,d=window.DOMPoint;this.style=a,this.stale=!1,this._animationScheduler=h,this._anchorOffset=new d(0,-s),this._calloutAnchorPoint=new d(-s,-r),n.call(this,t,e.coordinate,n.div),this._updateTitleAndSubtitleForLocale();var u=2*s;this.setSize(new l(u,u)),this._userSetSize=!0,this._sceneGraphNode=new o(this),this.shownPropertyWasUpdated(!0)}u.prototype=s.inheritPrototype(n,u,{_collisionMode:n.CollisionMode.None,renderedByDOMElement:!1,get coordinate(){return this._coordinate},set coordinate(t){d(this,"_coordinate")?console.warn("[MapKit] The `coordinate` property of the user location annotation cannot be set."):this._coordinate=t.copy()},get draggable(){return!1},set draggable(t){console.warn("[MapKit] The `draggable` property of the user location annotation cannot be set.")},get size(){return this._node.size.copy()},set size(t){console.warn("[MapKit] The `size` property of the user location annotation cannot be set.")},get node(){return this._node},handleEvent:function(t){t.type===a.Events.LocaleChanged&&this._updateTitleAndSubtitleForLocale()},shownPropertyWasUpdated:function(t){h.setIsAnimated(this,t)},removedFromMap:function(){h.setIsAnimated(this,!1),a.removeEventListener(a.Events.LocaleChanged,this)},setCoordinate:function(t){Object.getOwnPropertyDescriptor(n.prototype,"coordinate").set.call(this,t)},performScheduledUpdate:function(){var t=this.map&&this.map.colorScheme,e=this.map&&this.map.mapType,i=c.SystemColors.default,n=c.SystemColors[r.Light],o=c.SystemColors[r.Dark],a=c.SystemColors[t]||i,s=e===c.MapTypes.Satellite||e===c.MapTypes.Hybrid?"satellite":t===r.Dark?"dark":"light";this.style.OUTER_FILL="dark"===s?n.gray3:[255,255,255],this.style.STALE_FILL="light"===s?n.gray:o.gray2,this.style.ANIMATION_FILL_FROM=a.blue,this.style.ANIMATION_FILL_TO=a.blue,this.style.SHADOW_COLOR=[0,0,0,"light"===s?.25:.3],this._sceneGraphNode.needsDisplay=!0},_updateTitleAndSubtitleForLocale:function(){this.title=a.get("Location.Title"),this.subtitle=a.get("Location.Subtitle")}}),t.exports=u},2196:function(t,e,i){var n=i(1972),o=i(1948),a=i(2197);function s(t){n.BaseNode.call(this),this._annotation=t,this._renderer=new a(this)}s.prototype=o.inheritPrototype(n.BaseNode,s,{stringInfo:function(){return"UserLocationAnnotationNode< "+(this._renderer.stale?"stale ":"live ")+">"},get size(){return this._annotation.node.size},get position(){return this._annotation.nodePosition()}}),t.exports=s},2197:function(t,e,i){var n=i(1972),o=i(1948),a=i(1986),s=i(2193);function r(t){n.RenderItem.call(this,t),this.opacity=null,this.opacityTime=0}r.prototype=o.inheritPrototype(n.RenderItem,r,{draw:function(t){var e,i,n,o=this._node._annotation.stale,r=this._node._annotation.style,l=s.getClock(),h=l-this.opacityTime,c=Math.min(h,500)/500,d=a.lerp(c,1-this.opacity,this.opacity);if(d>0){var u=r.ANIMATION_HALF_DURATION_MS,p=l%r.ANIMATION_DURATION_MS,m=a.easeInOut(p<u?1-p/u:(p-u)/u),g=a.lerp(m,r.ANIMATION_SCALE_TO,r.ANIMATION_SCALE_FROM),f=t.globalAlpha,_=r.INNER_RADIUS*g,y=r.OUTER_RADIUS-_,v=_+y/2,b=r.TOTAL_RADIUS,w=r.TOTAL_RADIUS;t.save(),t.globalAlpha=d,t.beginPath(),t.arc(b,w,v,0,2*Math.PI),t.strokeStyle="rgb("+r.OUTER_FILL.join(",")+")",t.shadowColor="rgba("+r.SHADOW_COLOR.join(",")+")",t.shadowBlur=r.SHADOW_BLUR,t.lineWidth=y,t.stroke(),t.restore(),t.globalAlpha=d,t.beginPath(),t.arc(b,w,_,0,2*Math.PI),t.fillStyle=o?"rgb("+r.STALE_FILL.join(",")+")":(e=r.ANIMATION_FILL_FROM,i=r.ANIMATION_FILL_TO,n=m,"rgb("+e.map((function(t,e){return Math.round(t+(i[e]-t)*n)})).join(", ")+")"),t.fill(),t.globalAlpha=f}}}),t.exports=r},2198:function(t,e,i){var n=i(1948),o=i(2199),a=i(2200),s=i(1970);function r(t){s(this,r)&&Object.defineProperty(this,"_impl",{value:new a(t)})}r.prototype=n.inheritPrototype(o,r,{constructor:r,lookup:function(t,e,i){return this._impl.lookup(t,e,i)},reverseLookup:function(t,e,i){return this._impl.reverseLookup(t,e,i)}}),t.exports=r},2199:function(t,e,i){var n=i(2164);function o(t,e){Object.defineProperty(this,"_impl",{value:new n(t,e)})}o.prototype={constructor:o,get getsUserLocation(){return this._impl.getsUserLocation},set getsUserLocation(t){this._impl.getsUserLocation=t},get language(){return this._impl.language},set language(t){this._impl.language=t},cancel:function(t){return this._impl.cancel(t)}},t.exports=o},2200:function(t,e,i){"use strict";var n=i(1943),o=i(1948),a=i(1969),s=i(2164),r=i(2166),l=a.Coordinate,h=["language","getsUserLocation"],c=["language","region","coordinate","limitToCountries"],d=["language"];function u(t){t=o.checkOptions(t),this._checkOptions(t,h),s.call(this,"Geocoder",t)}u.prototype=o.inheritPrototype(s,u,{constructor:u,lookup:function(t,e,i){var a={};i=o.checkOptions(i),this._checkOptions(i,c),o.required(t,"[MapKit] Missing `address` in call to `Geocoder.lookup()`.").checkType(t,"string","[MapKit] `address` passed to `Geocoder.lookup()` is not a string."),o.required(e,"[MapKit] Missing `callback` in call to `Geocoder.lookup()`.").checkType(e,"function","[MapKit] `callback` passed to `Geocoder.lookup()` is not a function."),a.q=t;var s=i.region,r=i.coordinate,l=i.limitToCountries,h=this.language||n.language;if(s){var d=s.toBoundingRegion();a.searchRegion=[d.northLatitude,d.eastLongitude,d.southLatitude,d.westLongitude].join(",")}else r&&(a.searchLocation=[r.latitude,r.longitude].join(","));return i.language&&(h=this._bestLanguage(i.language)),h&&(a.lang=h),l&&(o.checkType(l,"string","[MapKit] `limitToCountries` is not a string."),a.limitToCountries=l),this._sendImmediatelyOrWithUserLocation("geocode",a,e,this._transform,"geocode")},reverseLookup:function(t,e,i){var a={},s=this.language||n.language;return i=o.checkOptions(i),this._checkOptions(i,d),o.required(t,"[MapKit] Missing `coordinate` in call to `Geocoder.reverseLookup()`.").checkInstance(t,l,"[MapKit] `coordinate` passed to `Geocoder.reverseLookup()` is not a Coordinate."),o.required(e,"[MapKit] Missing `callback` in call to `Geocoder.reverseLookup()`.").checkType(e,"function","[MapKit] `callback` passed to `Geocoder.reverseLookup()` is not a function."),a.loc=t.latitude+","+t.longitude,i.language&&(s=this._bestLanguage(i.language)),s&&(a.lang=s),this._send("reverseGeocode",a,e,this._transform,"reverseGeocode")},_transform:function(t,e){var i={status:e.status,results:[]};return e.results&&(i.results=e.results.map((function(t){return new r(t)}))),i}}),t.exports=u},2201:function(t,e,i){var n=i(1967),o=i(1969);t.exports={PointOfInterestFilter:n,userLocation:i(2190),mapkit:{CoordinateRegion:o.CoordinateRegion,CoordinateSpan:o.CoordinateSpan,Coordinate:o.Coordinate,BoundingRegion:o.BoundingRegion,MapPoint:o.MapPoint,MapRect:o.MapRect,MapSize:o.MapSize,Geocoder:i(2198),Search:i(2202),Directions:i(2205),PointsOfInterestSearch:i(2207),PointOfInterestCategory:i(1968),PointOfInterestFilter:n.exposedConstructor}}},2202:function(t,e,i){var n=i(1948),o=i(2199),a=i(2203),s=i(1970);function r(t){s(this,r)&&Object.defineProperty(this,"_impl",{value:new a(t)})}r.prototype=n.inheritPrototype(o,r,{constructor:r,get coordinate(){return this._impl.coordinate},set coordinate(t){this._impl.coordinate=t},get region(){return this._impl.region},set region(t){this._impl.region=t},get includeAddresses(){return this._impl.includeAddresses},set includeAddresses(t){this._impl.includeAddresses=t},get includePointsOfInterest(){return this._impl.includePointsOfInterest},set includePointsOfInterest(t){this._impl.includePointsOfInterest=t},get includeQueries(){return this._impl.includeQueries},set includeQueries(t){this._impl.includeQueries=t},get pointOfInterestFilter(){return this._impl.pointOfInterestFilter},set pointOfInterestFilter(t){this._impl.pointOfInterestFilter=t},get limitToCountries(){return this._impl.limitToCountries},set limitToCountries(t){this._impl.limitToCountries=t},search:function(t,e,i){return this._impl.search(t,e,i)},autocomplete:function(t,e,i){return this._impl.autocomplete(t,e,i)}}),t.exports=r},2203:function(t,e,i){var n=i(1943),o=i(1948),a=i(1969),s=i(2164),r=i(1967),l=i(2166),h=i(2204),c=a.BoundingRegion,d=a.CoordinateRegion,u=a.Coordinate,p=["language","getsUserLocation","coordinate","region","includeAddresses","includePointsOfInterest","includeQueries","pointOfInterestFilter","limitToCountries"],m=["language","region","coordinate","includeAddresses","includePointsOfInterest","pointOfInterestFilter","limitToCountries"],g=m.concat(["includeQueries"]);function f(t){t=o.checkOptions(t),this._checkOptions(t,p),s.call(this,"Search",t),this.coordinate=t.coordinate,this.region=t.region,"includeAddresses"in t&&(this.includeAddresses=t.includeAddresses),"includePointsOfInterest"in t&&(this.includePointsOfInterest=t.includePointsOfInterest),"includeQueries"in t&&(this.includeQueries=t.includeQueries),"pointOfInterestFilter"in t&&(this.pointOfInterestFilter=t.pointOfInterestFilter),"limitToCountries"in t&&(this.limitToCountries=t.limitToCountries)}f.prototype=o.inheritPrototype(s,f,{constructor:f,_coordinate:null,_region:null,_includeAddresses:!0,_includePointsOfInterest:!0,_includeQueries:!0,_pointOfInterestFilter:null,_limitToCountries:null,get coordinate(){return this._coordinate},set coordinate(t){null!=t&&(o.checkInstance(t,u,"[MapKit] Search.coordinate expected a Coordinate value."),t=t.copy()),this._coordinate=t||null},get region(){return this._region},set region(t){null!=t&&(o.checkInstance(t,d,"[MapKit] Search.region expected a CoordinateRegion value."),t=t.copy()),this._region=t||null},get includeAddresses(){return this._includeAddresses},set includeAddresses(t){this._includeAddresses=!!t},get includePointsOfInterest(){return this._includePointsOfInterest},set includePointsOfInterest(t){this._includePointsOfInterest=!!t},get includeQueries(){return this._includeQueries},set includeQueries(t){this._includeQueries=!!t},get pointOfInterestFilter(){return this._pointOfInterestFilter},set pointOfInterestFilter(t){t&&o.checkInstance(t,r,"[MapKit] Unknown value for `pointOfInterestFilter`. It must be an instance of mapkit.PointOfInterestFilter."),this._pointOfInterestFilter=t||null},get limitToCountries(){return this._limitToCountries},set limitToCountries(t){t&&o.checkType(t,"string","[MapKit] `limitToCountries` is not a string."),this._limitToCountries=t||null},search:function(t,e,i){return i=o.checkOptions(i),this._checkOptions(i,m),this._request("search","search",this._searchTransform,t,e,i)},autocomplete:function(t,e,i){i=o.checkOptions(i),this._checkOptions(i,g),this._request("autocomplete","searchAutocomplete",this._autocompleteTransform,t,e,i)},_request:function(t,e,i,a,s,l){if("object"===typeof s){var c=s;s=function(e,i){var n="search"===t?c.searchDidError:c.autocompleteDidError,o="search"===t?c.searchDidComplete:c.autocompleteDidComplete;e?"function"===typeof n&&n.call(c,e):"function"===typeof o&&o.call(c,i)}}var d={},u="Search."+t+"()";if(o.required(a,"[MapKit] Missing `query` in call to `"+u+"`."),o.required(s,"[MapKit] Missing `callback` in call to `"+u+"`.").checkType(s,"function","[MapKit] `callback` passed to `"+u+"` is not a function."),a instanceof h)e=a._completionUrl;else{if("string"!==typeof a)throw new TypeError("[MapKit] `query` passed to `"+u+"` is neither a string nor SearchAutocompleteResult.");d.q=a}var p=l.region||this.region,m=l.coordinate||this.coordinate,g=this.language||n.language;if(p){var f=p.toBoundingRegion();d.searchRegion=[f.northLatitude,f.eastLongitude,f.southLatitude,f.westLongitude].join(",")}else m&&(d.searchLocation=[m.latitude,m.longitude].join(","));l.language&&(g=this._bestLanguage(l.language)),g&&(d.lang=g),l.pointOfInterestFilter&&o.checkInstance(l.pointOfInterestFilter,r,"[MapKit] Unknown value for `pointOfInterestFilter`. It must be an instance of mapkit.PointOfInterestFilter."),l.limitToCountries&&o.checkType(l.limitToCountries,"string","[MapKit] `limitToCountries` is not a string."),(l.limitToCountries||this.limitToCountries)&&(d.limitToCountries=l.limitToCountries||this.limitToCountries);var _=l.pointOfInterestFilter||this.pointOfInterestFilter,y=!0;_&&(l.includePointsOfInterest||this.includePointsOfInterest||console.warn("[MapKit] `includePointsOfInterest` is false but `pointOfInterestFilter` is set."),_._includes&&(0===_._includes.length?y=!1:d.includePoiCategories=_._includes.join(",")),_._excludes&&(d.excludePoiCategories=_._excludes.join(",")));var v=[];if("includeAddresses"in l?l.includeAddresses&&v.push("address"):this.includeAddresses&&v.push("address"),_?y&&v.push("poi"):"includePointsOfInterest"in l?l.includePointsOfInterest&&v.push("poi"):this.includePointsOfInterest&&v.push("poi"),"searchAutocomplete"===e&&("includeQueries"in l?l.includeQueries&&v.push("query"):this.includeQueries&&v.push("query")),0===v.length)throw new Error("[MapKit] At least one of the types needs to be included in the search/autocomplete request.");return d.resultTypeFilter=v.join(","),this._sendImmediatelyOrWithUserLocation(e,d,s,i,t)},_searchTransform:function(t,e){var i={places:[]};if(t.q&&(i.query=t.q),e.displayMapRegion){var n=new c(e.displayMapRegion.northLat,e.displayMapRegion.eastLng,e.displayMapRegion.southLat,e.displayMapRegion.westLng);i.boundingRegion=n.toCoordinateRegion()}return e.results&&(i.places=e.results.map((function(t){return new l(t)}))),i},_autocompleteTransform:function(t,e){var i={query:t.q,results:[]};return e.results&&(i.results=e.results.map((function(t){return new h(t)}))),i}}),t.exports=f},2204:function(t,e,i){var n=i(1969).Coordinate;function o(t){this.displayLines=t.displayLines,t.location&&(this.coordinate=new n(t.location.lat,t.location.lng)),this._completionUrl=t.completionUrl,t.attribution&&(this._providerId=t.attribution.vendorId,this._providerItemId=t.attribution.externalItemId),this.name=t.name,this.telephone=t.telephone,this.urls=t.urls||[],this.country=t.country,this.administrativeArea=t.administrativeArea,this.administrativeAreaCode=t.administrativeAreaCode,this.locality=t.locality,this.postCode=t.postCode,this.subLocality=t.subLocality,this.thoroughfare=t.thoroughfare,this.subThoroughfare=t.subThoroughfare,this.fullThoroughfare=t.fullThoroughfare,this.areasOfInterest=t.areasOfInterest,this.dependentLocalities=t.dependentLocalities,this.timezone=t.timezone,this.timezoneSecondsFromGmt=t.timezoneSecondsFromGmt}var a=function(){throw new TypeError("[MapKit] SearchAutocompleteResult may not be constructed.")};o.prototype=a.prototype={constructor:a},t.exports=o},2205:function(t,e,i){var n=i(1948),o=i(2199),a=i(2206),s=i(1970);function r(t){s(this,r)&&Object.defineProperty(this,"_impl",{value:new a(t)})}r.Transport=a.Transport,r.prototype=n.inheritPrototype(o,r,{constructor:r,eta:function(t,e){return this._impl.eta(t,e)},route:function(t,e){return this._impl.route(t,e)}}),t.exports=r},2206:function(t,e,i){var n=i(1943),o=i(1969).Coordinate,a=i(1948),s=i(2164),r=i(2166),l=i(1959),h=i(1960),c=["language"],d=["origin","destination","transportType","requestsAlternateRoutes","arrivalDate","departureDate","avoidTolls"],u=["origin","destinations","transportType","departureDate"],p=Object.prototype.hasOwnProperty.call.bind(Object.prototype.hasOwnProperty);function m(t){t=a.checkOptions(t),this._checkOptions(t,c),s.call(this,"Directions",t)}function g(t,e){if(!(t instanceof Date)||isNaN(t.getTime()))throw new TypeError("[MapKit] Expected a `Date` object for `"+e+"`, but got `"+t+"` instead.")}function f(t){if("string"===typeof t)return{q:t};if("object"===typeof t&&t.muid)return{muid:t.muid};var e=t.coordinate||t;if(e instanceof o)return{loc:{lat:e.latitude,lng:e.longitude}};throw new Error("[MapKit] Location must be an address (string), Coordinate object or Place object.")}function _(t,e){return e?new r(e):t instanceof r?t:t instanceof o?t.copy():void 0}function y(t,e,i){this.name=t.name,this.distance=t.distanceMeters,this.expectedTravelTime=t.durationSeconds,this.transportType=t.transportType;var n=t.avoidTolls;this.hasTolls="boolean"===typeof n?!n:void 0,this._path=t.stepIndexes.map((function(t){return i[t]})),this.steps=t.stepIndexes.map((function(t){return e[t]}))}m.Transport={Automobile:"AUTOMOBILE",Walking:"WALKING"},m.prototype=a.inheritPrototype(s,m,{constructor:m,eta:function(t,e){if(a.required(t,"[MapKit] Missing `request` in call to `Directions.eta()`.").checkOptions(t,"[MapKit] `request` is not a valid object."),a.required(e,"[MapKit] Missing `callback` in call to `Directions.eta()`.").checkType(e,"function","[MapKit] `callback` passed to `Directions.eta()` is not a function."),this._checkOptions(t,u),a.required(t.origin,"[MapKit] Missing required property `origin` in `request` object."),a.required(t.destinations,"[MapKit] Missing required property `destinations` in `request` object."),!Array.isArray(t.destinations))throw new Error("[MapKit] Required property `destinations` in `request` object must be an array.");if(t.destinations.length>10)throw new Error("[MapKit] `destinations` array must be less than 10 destinations.");if(a.checkInstance(t.origin,o,"[MapKit] `origin` property in `request` is not a Coordinate."),t.destinations.forEach((function(t){a.checkInstance(t,o,"[MapKit] One of the values in `destinations` property in `request` is not a Coordinate.")})),"CN"!==n.countryCode){var i=this._handleEtaResponse.bind(this,t),s={origin:t.origin.latitude+","+t.origin.longitude,destinations:t.destinations.map((function(t){return t.latitude+","+t.longitude})).join("|")},r=t.transportType;if(r){for(var h in m.Transport)r===m.Transport[h]&&(s.transportType=m.Transport[h]);if(!s.transportType)throw new TypeError("[MapKit] transportType must be a value of `Directions.Transport`.")}var c=t.departureDate;c&&(g(c,"departureDate"),s.departureDate=c.toISOString());var d=this.language||n.language;return d&&(s.lang=d),this._send("etas",s,e,i,"etas")}setTimeout((function(){var t=new Error("[MapKit] ETA Requests are not supported in China yet.");l(e,null,[t])}))},route:function(t,e){a.required(t,"[MapKit] Missing `request` in call to `Directions.route()`.").checkOptions(t,"[MapKit] `request` is not a valid object."),a.required(e,"[MapKit] Missing `callback` in call to `Directions.route()`.").checkType(e,"function","[MapKit] `callback` passed to `Directions.route()` is not a function."),this._checkOptions(t,d);var i=this._handleResponse.bind(this,t),o={},s=t.origin,r=t.destination,l=t.transportType,h=t.arrivalDate,c=t.departureDate,u=t.avoidTolls,_=l===m.Transport.Automobile,y=l===m.Transport.Walking;if(a.required(s,"[MapKit] Missing required property `origin` in `request` object."),a.required(r,"[MapKit] Missing required property `destination` in `request` object."),o.wps=JSON.stringify([f(s),f(r)]),l){if(!_&&!y)throw new TypeError("[MapKit] transportType must be either Directions.Transport.Automobile or Directions.Transport.Walking.");o.transport=l}h&&c?console.warn("[MapKit] `Directions.route()` should not be sent an `arrivalDate` and `departureDate` in the same request. These parameters have been dropped from the request."):"CN"===n.countryCode&&(h||c)?console.warn("[MapKit] `arrivalDate` and `departureDate` are not supported in China yet. These parameters have been dropped from the request."):h?(g(h,"arrivalDate"),o.arrivalDate=h.toISOString()):c&&(g(c,"departureDate"),o.departureDate=c.toISOString()),p(t,"requestsAlternateRoutes")?o.n=t.requestsAlternateRoutes?"3":"1":o.n="1";var v=this.language||n.language;return v&&(o.lang=v),u&&y?console.warn("[MapKit] When `transportType` is `Directions.Transport.Walking`, the `avoidTolls` parameter has no effect. The `avoidTolls` parameter has been dropped from the request."):u&&"CN"===n.countryCode?console.warn("[MapKit] `avoidTolls` is not supported in China yet. This parameter has been dropped from the request."):u&&(o.avoid="tolls"),this._send("directions",o,e,i,"directions")},_handleEtaResponse:function(t,e,i){return{request:e,origin:t.origin.copy(),etas:i.etas.map((function(e,i){return{destination:t.destinations[i]?t.destinations[i].copy():void 0,transportType:e.transportType,distance:e.distanceMeters,expectedTravelTime:e.expectedTravelTimeSeconds,staticTravelTime:e.staticTravelTimeSeconds}}))}},_handleResponse:function(t,e,i){var n=i.stepPaths.map((function(t){return t.map((function(t){return new o(t.lat,t.lng)}))})),a=i.steps.map((function(t){return new C(t,n,i.shieldDomains)})),s=i.routes.map((function(t){return new y(t,a,n)}));return{request:e,origin:_(t.origin,i.origin),destination:_(t.destination,i.destination),routes:s}}});var v=function(){throw new TypeError("[MapKit] Route may not be constructed.")};function b(t){delete y.prototype.polyline,Object.defineProperty(y.prototype,"polyline",{enumerable:!0,configurable:!0,get:function(){return this._polyline||(this._polyline=new t(this._path.reduce((function(t,e){return t.concat(e)}),[]))),this._polyline}})}v.prototype=y.prototype={constructor:v,get path(){return console.warn("[MapKit] The `Route.path` property is deprecated and will be removed in a future release."),this._path},get polyline(){throw new Error("[MapKit] Route.polyline is not available until the required library is loaded.")}},h.jsModules.mapkit.PolylineOverlay?b(h.jsModules.mapkit.PolylineOverlay):h.addEventListener("load",(function t(e){e.jsModules.mapkit.PolylineOverlay&&(h.removeEventListener("load",t),b(h.jsModules.mapkit.PolylineOverlay))})),m.Route=y;var w=["ON_RAMP","OFF_RAMP","HIGHWAY_OFF_RAMP_LEFT","HIGHWAY_OFF_RAMP_RIGHT","CHANGE_HIGHWAY","CHANGE_HIGHWAY_LEFT","CHANGE_HIGHWAY_RIGHT"];function C(t,e,i){if(this.instructions=t.instructions,this.pathIndex=t.stepPathIndex,this.distance=t.distanceMeters,this.transportType=t.transportType,this.path=e[t.stepPathIndex],i&&i.length&&t.maneuver){var n,o,a=i[t.stepPathIndex%i.length],s=t.maneuver;if(s.names&&s.names.length){var r=s.names.filter((function(t){return t.type&&t.shieldUrl}));r.length&&(n="//"+a+r[0].shieldUrl)}s.arrowUrl&&(o="//"+a+s.arrowUrl);var l=n&&-1!==w.indexOf(s.type);this._imageUrl=l?n:o}}var k=function(){throw new TypeError("[MapKit] Step may not be constructed.")};k.prototype=C.prototype={constructor:k},t.exports=m},2207:function(t,e,i){var n=i(1948),o=i(2199),a=i(2208),s=i(1970);function r(t){s(this,r)&&Object.defineProperty(this,"_impl",{value:new a(t)})}r.prototype=n.inheritPrototype(o,r,{constructor:r,get center(){return this._impl.center},set center(t){this._impl.center=t},get radius(){return this._impl.radius},set radius(t){this._impl.radius=t},get region(){return this._impl.region},set region(t){this._impl.region=t},get pointOfInterestFilter(){return this._impl.pointOfInterestFilter},set pointOfInterestFilter(t){this._impl.pointOfInterestFilter=t},search:function(t,e){return this._impl.search(t,e)}}),Object.defineProperty(r,"MaxRadius",{enumerable:!0,value:2e3}),t.exports=r},2208:function(t,e,i){var n=i(1943),o=i(1948),a=i(1969),s=i(2164),r=i(1967),l=i(2166),h=a.CoordinateRegion,c=a.Coordinate,d=i(1959),u=["language","getsUserLocation","center","radius","region","pointOfInterestFilter"];function p(t){t=o.checkOptions(t),this._checkOptions(t,u),s.call(this,"PointsOfInterestsSearch",t),this.center=t.center,this.radius=t.radius,this.region=t.region,"pointOfInterestFilter"in t&&(this.pointOfInterestFilter=t.pointOfInterestFilter)}p.prototype=o.inheritPrototype(s,p,{constructor:p,_center:null,_radius:null,_region:null,_pointOfInterestFilter:null,get center(){return this._center},set center(t){null!=t&&(o.checkInstance(t,c,"[MapKit] PointsOfInterestSearch.center expected a Coordinate value."),t=t.copy()),this._center=t||null},get radius(){return this._radius},set radius(t){null!=t&&o.checkType(t,"number","[MapKit] PointsOfInterestSearch.radius expected a number value."),this._radius=t||null},get region(){return this._region},set region(t){null!=t&&(o.checkInstance(t,h,"[MapKit] PointsOfInterestSearch.region expected a CoordinateRegion value."),t=t.copy()),this._region=t||null},get getsUserLocation(){return!1},set getsUserLocation(t){throw new TypeError("[MapKit] getsUserLocation on PointsOfInterestSearch has not effect.")},get pointOfInterestFilter(){return this._pointOfInterestFilter},set pointOfInterestFilter(t){t&&o.checkInstance(t,r,"[MapKit] Unknown value for `pointOfInterestFilter`. It must be an instance of mapkit.PointOfInterestFilter."),this._pointOfInterestFilter=t||null},search:function(t,e){if(e=o.checkOptions(e),this._checkOptions(e,u),"object"===typeof t){var i=t;t=function(t,e){var n=i.searchDidError,o=i.searchDidComplete;t?"function"===typeof n&&n.call(i,t):"function"===typeof o&&o.call(i,e)}}if("CN"!==n.countryCode){var a={};e.pointOfInterestFilter&&o.checkInstance(e.pointOfInterestFilter,r,"[MapKit] Unknown value for `pointOfInterestFilter`. It must be an instance of mapkit.PointOfInterestFilter."),o.required(t,"[MapKit] Missing `callback` in call to `search`.").checkType(t,"function","[MapKit] `callback` passed to `search` is not a function.");var s=e.center||this.center,l=e.radius||this.radius,p=e.region||this.region;if((s||l)&&p)setTimeout((function(){var e=new Error("[MapKit] Setting both `center`/`radius` and region are not allowed. Expects either a circular region defined by `center`/`radius` or a rectangular region defined by `region`.");d(t,null,[e])}));else{if(s||l||p){if(s||l)o.checkInstance(s,c,"[MapKit] `center` should be a Coordinate when specify a circular search region."),a.center=[s.latitude,s.longitude].join(","),l&&(a.radius=l.toString(10));else if(p){o.checkInstance(p,h,"[MapKit] `region` should be a CoordinateRegion when specify a rectangular search region.");var m=p.toBoundingRegion();a.mapRegion=[m.northLatitude,m.eastLongitude,m.southLatitude,m.westLongitude].join(",")}if("getsUserLocation"in e)throw Error("[MapKit] getsUserLocation on PointsOfInterestSearch has not effect.");var g=this.language||n.language;e.language&&(g=this._bestLanguage(e.language)),g&&(a.lang=g);var f=e.pointOfInterestFilter||this.pointOfInterestFilter;if(f){if(f._includes){if(0===f._includes.length)return void setTimeout(function(){d(t,null,[null,this._nearbyPoiTransform(void 0,{})])}.bind(this));a.includePoiCategories=f._includes.join(",")}f._excludes&&(a.excludePoiCategories=f._excludes.join(","))}return this._send("nearbyPoi",a,t,this._nearbyPoiTransform,"nearbyPoi")}setTimeout((function(){var e=new Error("[MapKit] No search region specified. Expects either a circular region defined by `center`/`radius` or a rectangular region defined by `region`.");d(t,null,[e])}))}}else setTimeout((function(){var e=new Error("[MapKit] PointsOfInterestSearch is not supported in China yet.");d(t,null,[e])}))},_checkOptions:function(t,e){if(("center"in t||"radius"in t)&&"region"in t)throw new Error("[MapKit] Setting both `center`/`radius` and region are not allowed. Expects either a circular region defined by `center`/`radius` or a rectangular region defined by `region`.");return s.prototype._checkOptions.call(this,t,e)},_nearbyPoiTransform:function(t,e){var i={places:[]};return e.results&&(i.places=e.results.map((function(t){return new l(t)}))),i}}),t.exports=p},2209:function(t,e,i){i(1966),t.exports={mapkit:{PinAnnotation:i(2210)}}},2210:function(t,e,i){var n=i(2137),o=i(1970),a=i(1948),s=i(2211);function r(t,e){if(o(this,r)){console.warn("[MapKit] mapkit.PinAnnotation is deprecated and will be removed in a future release. Please use the newer mapkit.MarkerAnnotation class instead.");var n=i(2215);Object.defineProperty(this,"_impl",{value:new n(this,t,e)})}}r.Colors=s.Colors,r.prototype=a.inheritPrototype(n,r,{get size(){return this._impl.size},set size(t){this._impl.size=t},get color(){return this._impl._color},set color(t){this._impl.color=t}}),t.exports=r},2211:function(t,e,i){var n=i(2212),o=i(2214),a=i(1975),s=i(1976),r=i(1978),l=i(1948),h=i(2009),c=new a(15,36),d={Red:"#ff3d38",Green:"#54d669",Purple:"#c969e0"},u=new window.DOMPoint(8,35),p=new window.DOMPoint(-8,0);function m(t){function e(e,i,a){this._animationController=new o(this),this._dragController=this._animationController,this._sceneGraphNode=new n(this),t.call(this,e,i,t.div,a),this._public=e,this.setSize(c),a&&"color"in a&&(this.color=a.color)}return e.Colors=d,e.prototype=l.inheritPrototype(t,e,{_animates:!0,_color:d.Red,_anchorPoint:u,_calloutAnchorPoint:p,renderedByDOMElement:!1,get size(){return c.copy()},set size(t){console.warn("[MapKit] The `size` property of a pin annotation cannot be set.")},get color(){return this._color},set color(t){l.checkType(t,"string","[MapKit] Expected a string value for PinAnnotation.color, but got `"+t+"` instead"),t!==this._color&&(this._color=t,this.updateLocalizedText(),this._sceneGraphNode.needsDisplay=!0)},get shouldPreventDrag(){return this._animationController.isBouncing},doesAnimate:function(){return this._animates},willMoveToMap:function(t){this._isMoving=t&&this.animates},didMoveToMap:function(){var e=this._isMoving;t.prototype.didMoveToMap.call(this),this.delegate&&e&&this.visible&&!this._appearanceAnimation&&this._shown&&(this._isAnimating=!0,this._animationController.drop())},droppedAfterLift:function(){this.resetNodeTransform(),this._sceneGraphNode.updateState(),t.prototype.droppedAfterLift.call(this)},finishedAnimating:function(){this._sceneGraphNode.updateState(),t.prototype.finishedAnimating.call(this)},altText:function(){return t.prototype.altText.call(this)||(this._color===d.Green?h.get("Annotation.Pin.Green.AccessibilityLabel"):this._color===d.Purple?h.get("Annotation.Pin.Purple.AccessibilityLabel"):this._color===d.Red?h.get("Annotation.Pin.Red.AccessibilityLabel"):h.get("Annotation.Pin.AccessibilityLabel"))},draggingDidEnd:function(){t.prototype.draggingDidEnd.call(this),t.prototype.updatePosition.call(this)},dragOffset:new s(0,2),isAKnownOption:function(e){return"color"===e||t.prototype.isAKnownOption.call(this,e)},resetNodeTransform:function(){this.sceneGraphNode.transform=new r}}),e}m.Colors=d,t.exports=m},2212:function(t,e,i){var n=i(1972),o=i(1975),a=i(1948),s=i(2213);function r(t){n.BaseNode.call(this),this.size=new o(32,39),this._annotation=t,this._renderer=new s(this),this.updateState()}r.prototype=a.inheritPrototype(n.BaseNode,r,{get position(){return this._annotation.nodePosition()},stringInfo:function(){return"PinAnnotationNode"+(this._state?"<"+this._state+">":"")},updateState:function(t){t=this._annotation.floating?"floating":t||"",this._state!==t&&(this._state=t,this.needsDisplay=!0)}}),t.exports=r},2213:function(t,e,i){var n,o=i(1972),a=i(1948),s=i(1986),r=i(1943),l=i(2018),h=Math.min(s.devicePixelRatio,3),c=(h>1?"_"+h+"x":"")+".png",d={},u=[],p=!1;function m(t){o.RenderItem.call(this,t),f||(f=!0,r.state!==r.States.PENDING&&r.state!==r.States.READY?r.addEventListener(r.Events.Initialized,(function t(){r.removeEventListener(r.Events.Initialized,t),g()})):g())}function g(){var t={};function e(e,o){var a=l.createImageUrl("pins/pin"+(e?"-":"")+e+"-"+o+c),h=s.htmlElement("img",{src:a}),d={handleEvent:function(a){switch(h.removeEventListener("load",d),h.removeEventListener("error",d),a.type){case"load":t[e][o]=h;break;case"error":console.warn("[MapKit] Error loading pin annotation image "+a.target.src+"; pin annotations may not display correctly."),p=!0}0===--i&&(n=t,u.forEach((function(t){t.needsDisplay=!0})),u=void 0)}};h.crossOrigin=s.getCorsAttribute(r.distUrlWithCredentials),h.addEventListener("load",d),h.addEventListener("error",d)}var i=["","floating","down1","down2","down3"].reduce((function(i,n){return t[n]={},e(n,"base"),e(n,"head"),i+2}),1);e("","shadow")}m.prototype=a.inheritPrototype(o.RenderItem,m,{draw:function(t){if(n){var e=this._node,i=e.size.width,o=e.size.height;if(p)!function(t,e,i,n){t.strokeStyle="#ff4040",t.lineWidth=2,t.strokeRect(0,e,i,n-e),t.beginPath(),t.moveTo(0,e),t.lineTo(i,n),t.moveTo(0,n),t.lineTo(i,e),t.stroke()}(t,o-e._annotation.size.height,e._annotation.size.width,o);else{var a=e._state,s=e._annotation.color;if(d[s]||(d[s]={}),!d[s][a]){var r=document.createElement("canvas");r.width=i*h,r.height=o*h;var l=r.getContext("2d");l.fillStyle=s,l.fillRect(0,0,r.width,r.height),l.save(),l.globalCompositeOperation="destination-in",l.drawImage(n[a].head,0,0),l.restore(),l.drawImage(n[a].base,0,0),d[s][a]=r}e.shadowTransform&&t.drawImage(n[""].shadow,e.shadowTransform.e,e.shadowTransform.f,i,o),t.drawImage(d[s][a],0,0,i,o)}}else u.indexOf(this._node)<0&&u.push(this._node)}});var f=!1;t.exports=m},2214:function(t,e,i){var n=i(2142),o=i(1978),a=i(1981),s=i(1948),r=[1,2,3,2,1],l=Math.tan(.820304748437335);function h(t){n.call(this,t)}h.prototype=s.inheritPrototype(n,h,{get isBouncing(){return this._bounceAnimationFrameIndex>=0},animateDropAfterLift:function(){var t=Math.max(this._dropAnimationStartP-Math.min((Date.now()-this._dropAfterLiftAnimationStartDate)/this.liftDurationMs,1),0),e=this.liftAmount*t;this._annotation.sceneGraphNode.transform=(new o).translate(0,-e),this._dropAnimationRevert||(e*=1.25),this._annotation.sceneGraphNode.shadowTransform=(new o).translate(l*e,-e),0===t&&(delete this._annotation.floating,this._annotation.sceneGraphNode.updateState(),delete this._dropAfterLiftAnimationStartDate,delete this._dropAnimationStartP,delete this._dropAnimationRevert,this._dequeueNextAnimation()),a.scheduleOnNextFrame(this)},animateLift:function(){var t=Math.min((Date.now()-this._liftAnimationStartDate)/this.liftDurationMs,1),e=this.liftAmount*t;this._annotation.sceneGraphNode.transform=(new o).translate(this.translation.x,this.translation.y-e),this._shadowLiftDamping&&(e=this.liftAmount*(1+.25*t)),this._annotation.sceneGraphNode.shadowTransform=(new o).translate(l*e,-e),t<1?(a.scheduleOnNextFrame(this),this._liftAnimationProgress=t):(delete this._liftAnimationStartDate,delete this._liftAnimationProgress,delete this._shadowLiftDamping,this._dequeueNextAnimation())},drop:function(){var t=this._annotation.position().y;this._pinVerticalTranslation=-t-4,this._shadowHorizontalTranslation=l*-this._pinVerticalTranslation,this._shadowVerticalTranslation=this._pinVerticalTranslation;var e=t/this._annotation.delegate.mapForAnnotation(this._annotation._public)._impl.ensureRenderingFrame().size.height;this._dropDurationMs=1e3*Math.min(.35*(e+(1-e)/2),3),this._dropAnimationStartDate=Date.now(),this._annotation.floating=!0,this._annotation.sceneGraphNode.updateState(),this._animateDrop(),this._annotation._isAnimating=!0,this._animationQueue=[this._bounce,this._annotation.finishedAnimating.bind(this._annotation)],a.scheduleOnNextFrame(this)},dropAnnotationAfterDraggingAndRevertPosition:function(t){var e=this._annotation.droppedAfterLift.bind(this._annotation);this._bounceAnimationFrameIndex>=0?this._animationQueue=[e]:(this._liftAnimationStartDate?(this._dropAnimationStartP=this._liftAnimationProgress,delete this._liftAnimationStartDate,delete this._liftAnimationProgress):this._dropAnimationStartP=1,t?(this._dropAfterLift(),this._animationQueue=[this._bounce,e]):(this._annotation.draggingDidEnd(),this._shadowLiftDamping=!0,this._animationQueue=[this._dropAfterLift,this._bounce,e],n.prototype.lift.call(this,this.nominalLiftAmount)),this._dropAnimationRevert=t,a.scheduleOnNextFrame(this))},lift:function(t){this.nominalLiftAmount=t,this._animationQueue=[this._liftAfterBounce],this._bounce(),a.scheduleOnNextFrame(this)},setTranslation:function(t){this.translation=t,this._bounceAnimationFrameIndex>=0||this._liftAnimationStartDate||(this._annotation.sceneGraphNode.transform=(new o).translate(t.x,t.y-this.liftAmount),this._annotation.sceneGraphNode.shadowTransform=(new o).translate(l*this.liftAmount,-this.liftAmount))},performScheduledUpdate:function(){this._dropAnimationStartDate?this._animateDrop():this._bounceAnimationFrameIndex>=0?this._animateBounce():n.prototype.performScheduledUpdate.call(this)},_animateBounce:function(){this._bounceAnimationFrameIndex<r.length?(this._annotation.sceneGraphNode.updateState("down"+r[this._bounceAnimationFrameIndex]),++this._bounceAnimationFrameIndex):(delete this._bounceAnimationFrameIndex,this._dequeueNextAnimation()),a.scheduleOnNextFrame(this)},_animateDrop:function(){var t=Math.min((Date.now()-this._dropAnimationStartDate)/this._dropDurationMs,1),e=1-t;this._annotation.sceneGraphNode.transform=(new o).translate(0,e*this._pinVerticalTranslation),this._annotation.sceneGraphNode.shadowTransform=(new o).translate(e*this._shadowHorizontalTranslation,e*this._shadowVerticalTranslation),1===t&&(delete this._pinVerticalTranslation,delete this._shadowHorizontalTranslation,delete this._shadowVerticalTranslation,delete this._dropAnimationStartDate,delete this._dropDurationMs,this._annotation.floating=!1,this._annotation.sceneGraphNode.updateState(),this._dequeueNextAnimation()),a.scheduleOnNextFrame(this)},_bounce:function(){this._bounceAnimationFrameIndex=0},_dequeueNextAnimation:function(){this._animationQueue.length>0&&this._animationQueue.shift().call(this)},_dropAfterLift:function(){delete this.translation,this._dropAfterLiftAnimationStartDate=Date.now(),a.scheduleOnNextFrame(this)},_liftAfterBounce:function(){n.prototype.lift.call(this,this.nominalLiftAmount),this._annotation.floating=!0,this._annotation.sceneGraphNode.updateState()}}),t.exports=h},2215:function(t,e,i){var n=i(2141),o=i(2211)(n);t.exports=o},2216:function(t,e,i){var n=i(1943),o=i(1960);t.exports=function(t){if(t){var e=t.dataset.callback,i=t.dataset.language,a=t.dataset.libraries,s=t.dataset.initialToken,r=t.dataset.distUrl,l=t.dataset.proxyPrefix,h={};if(e||i||a||s||r||l){i&&(h.language=i);var c,d=!1;if(a&&o.IS_CHUNKED&&(c=a.split(",").map((function(t){return t.replace(/^\s+(.+?)\s+$/,"$1")})),h.libraries=c,d=!0),s&&(h.authorizationCallback=function(t){t(s)}),r&&(h._distUrl=r),l&&(h._proxyPrefixes=[l]),n.init(h,!0),e){if(!d)return void setTimeout((function(){"function"===typeof window[e]&&window[e]()}));o.addEventListener(o.Events.LOADEND,(function t(i){i.libraryNames.join(",")===c.join(",")&&(o.removeEventListener(o.Events.LOADEND,t),setTimeout((function(){"function"===typeof window[e]&&window[e]()})))}))}e&&c&&!s&&console.warn("[MapKit] Initialization was delayed because a static authorization token was not specified with data attribute.");var u=function(){document.removeEventListener("DOMContentLoaded",u),setTimeout((function(){n.authorizationCallback===h.authorizationCallback&&console.warn("[MapKit] MapKit was initialized with a static authorization token. authorizationCallback is needed to refresh authorization later.")}),5e3)};s&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",u):u())}}}},2217:function(t,e,i){},2218:function(t,e,i){},2219:function(t,e,i){},2452:function(t,e,i){"use strict";i.r(e),i.d(e,"InfoPanel",(function(){return ti}));var n={};i.r(n),i.d(n,"getLensModel",(function(){return k})),i.d(n,"getLensMake",(function(){return S})),i.d(n,"getFocalLenIn35mmFilm",(function(){return T})),i.d(n,"getFocalLength",(function(){return L})),i.d(n,"getDigitalZoomRatio",(function(){return M})),i.d(n,"getFlash",(function(){return E}));var o={};i.r(o),i.d(o,"getExif",(function(){return G})),i.d(o,"getTiff",(function(){return W})),i.d(o,"getMakerNotes",(function(){return Z})),i.d(o,"getMoop",(function(){return j})),i.d(o,"getMakeAndModel",(function(){return H})),i.d(o,"getMake",(function(){return V})),i.d(o,"getModel",(function(){return q})),i.d(o,"getLensMake",(function(){return X})),i.d(o,"getLensModel",(function(){return Y})),i.d(o,"getFocalLenIn35mmFilm",(function(){return Q})),i.d(o,"getFocalLength",(function(){return J})),i.d(o,"getDigitalZoomRatio",(function(){return $})),i.d(o,"getIsCinematicVideo",(function(){return tt}));var a={};i.r(a),i.d(a,"MakerAppleKeys",(function(){return D})),i.d(a,"SemanticStyleKeys",(function(){return N})),i.d(a,"semanticStyleObjectFromMakerNotes",(function(){return et})),i.d(a,"mediaMetadataTypeStillImageCaptureTypeFromMakerNotes",(function(){return it}));var s={};i.r(s),i.d(s,"originalType",(function(){return xt})),i.d(s,"codecForHash",(function(){return It})),i.d(s,"isProResForHash",(function(){return At})),i.d(s,"isHDRVideoForHash",(function(){return Pt}));var r={};i.r(r),i.d(r,"assetSubtypeForHash",(function(){return Rt})),i.d(r,"getIsBurstFromAssetHash",(function(){return Ot}));var l=i(1152),h=i(1205),c=i.n(h),d=(i(1940),i(1483));const u=i(1152).createElement;var p=function(t){return u(d.a,{originalProps:t,metadata:{name:"bolt.circle",svgPath:"M 58.5449 14.5508 C 85.791 14.5508 108.35 -8.05664 108.35 -35.2539 C 108.35 -62.5 85.7422 -85.0586 58.4961 -85.0586 C 31.2988 -85.0586 8.74023 -62.5 8.74023 -35.2539 C 8.74023 -8.05664 31.3477 14.5508 58.5449 14.5508 Z M 58.5449 6.25 C 35.498 6.25 17.0898 -12.207 17.0898 -35.2539 C 17.0898 -58.3008 35.4492 -76.7578 58.4961 -76.7578 C 81.543 -76.7578 100 -58.3008 100.049 -35.2539 C 100.098 -12.207 81.5918 6.25 58.5449 6.25 Z M 37.1094 -31.8848 C 37.1094 -30.6152 38.0859 -29.7852 39.3555 -29.7852 L 55.9082 -29.7852 L 47.0703 -6.05469 C 45.8984 -2.88086 49.2188 -1.2207 51.2695 -3.71094 L 78.0273 -37.3047 C 78.5645 -37.9395 78.8574 -38.623 78.8574 -39.209 C 78.8574 -40.4785 77.8809 -41.3574 76.6113 -41.3574 L 60.0586 -41.3574 L 68.8965 -65.0879 C 70.0684 -68.2129 66.748 -69.9219 64.6973 -67.3828 L 37.9395 -33.7891 C 37.4023 -33.1543 37.1094 -32.4707 37.1094 -31.8848 Z",layoutBox:{viewBox:"0 0 233.30078125 159.98291015625",width:233.30078125,height:159.98291015625,translateX:58.105236816406205,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 99.6097412109375 99.6572265625",width:99.6097412109375,height:99.6572265625,translateX:-8.740283203125045,translateY:85.05859375,baseline:85.05859375,capline:14.5986328125}}})},m=i(2478);function g(t,e){var i=new Intl.NumberFormat(window.navigator.language,{useGrouping:!1});return e?Object(m.a)("InfoPanel.Metadata.FocalLengthFormat",{focalLength:i.format(t)}):i.format(t)}var f=Object(m.a)("PXInfoPanelLCDFrontCamera"),_=Object(m.a)("PXInfoPanelLCDRearCamera"),y=Object(m.a)("PXInfoPanelLCDWideCamera"),v=Object(m.a)("PXInfoPanelLCDUltraWideCamera"),b=Object(m.a)("PXInfoPanelLCDTelephotoCamera"),w=Object(m.a)("PXInfoPanelLCDMainCamera"),C={"iPhone 14 Pro Max":{2.69:{lensNameKey:f,focalLengthIn35mmKey:23},6.86:{lensNameKey:w,focalLengthIn35mmKey:24},2.22:{lensNameKey:v,focalLengthIn35mmKey:13},9:{lensNameKey:b,focalLengthIn35mmKey:77}},"iPhone 14 Pro":{2.69:{lensNameKey:f,focalLengthIn35mmKey:23},6.86:{lensNameKey:w,focalLengthIn35mmKey:24},2.22:{lensNameKey:v,focalLengthIn35mmKey:13},9:{lensNameKey:b,focalLengthIn35mmKey:77}},"iPhone 14 Plus":{2.69:{lensNameKey:f,focalLengthIn35mmKey:23},5.7:{lensNameKey:w,focalLengthIn35mmKey:26},1.54:{lensNameKey:v,focalLengthIn35mmKey:13}},"iPhone 14":{2.69:{lensNameKey:f,focalLengthIn35mmKey:23},5.7:{lensNameKey:w,focalLengthIn35mmKey:26},1.54:{lensNameKey:v,focalLengthIn35mmKey:13}},"iPhone 13 Pro Max":{2.71:{lensNameKey:f,focalLengthIn35mmKey:23},5.7:{lensNameKey:y,focalLengthIn35mmKey:26},1.57:{lensNameKey:v,focalLengthIn35mmKey:13},9:{lensNameKey:b,focalLengthIn35mmKey:77}},"iPhone 13 Pro":{2.71:{lensNameKey:f,focalLengthIn35mmKey:23},5.7:{lensNameKey:y,focalLengthIn35mmKey:26},1.57:{lensNameKey:v,focalLengthIn35mmKey:13},9:{lensNameKey:b,focalLengthIn35mmKey:77}},"iPhone 13":{2.71:{lensNameKey:f,focalLengthIn35mmKey:23},5.1:{lensNameKey:y,focalLengthIn35mmKey:26},1.54:{lensNameKey:v,focalLengthIn35mmKey:13}},"iPhone 13 mini":{2.71:{lensNameKey:f,focalLengthIn35mmKey:23},5.1:{lensNameKey:y,focalLengthIn35mmKey:26},1.54:{lensNameKey:v,focalLengthIn35mmKey:13}},"iPhone 12 Pro Max":{2.71:{lensNameKey:f,focalLengthIn35mmKey:23},5.1:{lensNameKey:y,focalLengthIn35mmKey:26},1.54:{lensNameKey:v,focalLengthIn35mmKey:13},7.5:{lensNameKey:b,focalLengthIn35mmKey:65}},"iPhone 12 Pro":{2.71:{lensNameKey:f,focalLengthIn35mmKey:23},4.2:{lensNameKey:y,focalLengthIn35mmKey:26},1.54:{lensNameKey:v,focalLengthIn35mmKey:13},6:{lensNameKey:b,focalLengthIn35mmKey:52}},"iPhone 12":{2.71:{lensNameKey:f,focalLengthIn35mmKey:23},4.2:{lensNameKey:y,focalLengthIn35mmKey:26},1.55:{lensNameKey:v,focalLengthIn35mmKey:13}},"iPhone 12 mini":{2.71:{lensNameKey:f,focalLengthIn35mmKey:23},4.2:{lensNameKey:y,focalLengthIn35mmKey:26},1.55:{lensNameKey:v,focalLengthIn35mmKey:13}},"iPhone 11":{2.71:{lensNameKey:f,focalLengthIn35mmKey:23},4.25:{lensNameKey:y,focalLengthIn35mmKey:26},1.54:{lensNameKey:v,focalLengthIn35mmKey:13}},"iPhone SE":{2.87:{lensNameKey:f,focalLengthIn35mmKey:32},3.99:{lensNameKey:_,focalLengthIn35mmKey:28},2.15:{lensNameKey:f,focalLengthIn35mmKey:31},4.15:{lensNameKey:_,focalLengthIn35mmKey:29}},"iPhone 11 Pro Max":{2.71:{lensNameKey:f,focalLengthIn35mmKey:23},4.25:{lensNameKey:y,focalLengthIn35mmKey:26},1.54:{lensNameKey:v,focalLengthIn35mmKey:13},6:{lensNameKey:b,focalLengthIn35mmKey:52}},"iPhone 11 Pro":{2.71:{lensNameKey:f,focalLengthIn35mmKey:23},4.25:{lensNameKey:y,focalLengthIn35mmKey:26},1.54:{lensNameKey:v,focalLengthIn35mmKey:13},6:{lensNameKey:b,focalLengthIn35mmKey:52}},"iPhone XR":{2.87:{lensNameKey:f,focalLengthIn35mmKey:32},4.25:{lensNameKey:_,focalLengthIn35mmKey:26}},"iPhone XS Max":{2.87:{lensNameKey:f,focalLengthIn35mmKey:32},4.25:{lensNameKey:y,focalLengthIn35mmKey:26},6:{lensNameKey:b,focalLengthIn35mmKey:52}},"iPhone XS":{2.87:{lensNameKey:f,focalLengthIn35mmKey:32},4.25:{lensNameKey:y,focalLengthIn35mmKey:26},6:{lensNameKey:b,focalLengthIn35mmKey:52}},"iPhone X":{2.87:{lensNameKey:f,focalLengthIn35mmKey:32},4:{lensNameKey:y,focalLengthIn35mmKey:28},6:{lensNameKey:b,focalLengthIn35mmKey:52}},"iPhone 8 Plus":{2.87:{lensNameKey:f,focalLengthIn35mmKey:32},3.99:{lensNameKey:y,focalLengthIn35mmKey:28},6.6:{lensNameKey:b,focalLengthIn35mmKey:56}},"iPhone 8":{2.87:{lensNameKey:f,focalLengthIn35mmKey:32},3.99:{lensNameKey:y,focalLengthIn35mmKey:28}},"iPhone 7 Plus":{2.87:{lensNameKey:f,focalLengthIn35mmKey:32},3.99:{lensNameKey:y,focalLengthIn35mmKey:28},6.6:{lensNameKey:b,focalLengthIn35mmKey:56}},"iPhone 7":{2.87:{lensNameKey:f,focalLengthIn35mmKey:32},3.99:{lensNameKey:_,focalLengthIn35mmKey:28}},"iPhone 6s Plus":{2.65:{lensNameKey:f,focalLengthIn35mmKey:31},4.15:{lensNameKey:_,focalLengthIn35mmKey:29}},"iPhone 6s":{2.65:{lensNameKey:f,focalLengthIn35mmKey:31},4.15:{lensNameKey:_,focalLengthIn35mmKey:29}},"iPhone 6 Plus":{2.65:{lensNameKey:f,focalLengthIn35mmKey:31},4.15:{lensNameKey:_,focalLengthIn35mmKey:29}},"iPhone 6":{2.65:{lensNameKey:f,focalLengthIn35mmKey:31},4.15:{lensNameKey:_,focalLengthIn35mmKey:29}},"iPhone 5s":{2.15:{lensNameKey:f,focalLengthIn35mmKey:31},4.12:{lensNameKey:_,focalLengthIn35mmKey:30}},"iPhone 5c":{2.2:{lensNameKey:f,focalLengthIn35mmKey:33},4.12:{lensNameKey:_,focalLengthIn35mmKey:33}}};function k(t){return t?t.LensModel:void 0}function S(t){return t?t.LensMake:void 0}function T(t){if(t)return t.FocalLenIn35mmFilm?t.FocalLenIn35mmFilm:t.FocalLenIn35Film}function L(t){return t?t.FocalLength:void 0}function M(t){return t?t.DigitalZoomRatio:void 0}function E(t){return t?t.Flash:void 0}function x(t){return t?t.Make:void 0}function I(t){return t?t.Model:void 0}function A(t){if(t&&"object"===typeof t)return{make:t["com.apple.quicktime.make"],model:t["com.apple.quicktime.model"]}}function P(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t,e){t||O(e)}function O(t){throw t}var D,N,z=function(){function t(t,e,i){this.bytes=void 0,this.start=void 0,this.pos=void 0,this.end=void 0,this.bytes=new Uint8Array(t),this.start=e||0,this.pos=this.start,this.end=e+i||this.bytes.length}var e,i,n=t.prototype;return n.readU8Array=function(t){if(this.pos>this.end-t)return null;var e=this.bytes.subarray(this.pos,this.pos+t);return this.pos+=t,e},n.readU32Array=function(t,e,i){if(e=e||1,this.pos>this.end-t*e*4)return null;if(1===e){for(var n=new Uint32Array(t),o=0;o<t;o++)n[o]=this.readU32();return n}for(var a=new Array(t),s=0;s<t;s++){var r=null;if(i){r={};for(var l=0;l<e;l++)r[i[l]]=this.readU32()}else{r=new Uint32Array(e);for(var h=0;h<e;h++)r[h]=this.readU32()}a[s]=r}return a},n.read8=function(){return this.readU8()<<24>>24},n.readU8=function(){return this.pos>=this.end?null:this.bytes[this.pos++]},n.read16=function(){return this.readU16()<<16>>16},n.readU16=function(){if(this.pos>=this.end-1)return null;var t=this.bytes[this.pos+0]<<8|this.bytes[this.pos+1];return this.pos+=2,t},n.read24=function(){return this.readU24()<<8>>8},n.readU24=function(){var t=this.pos,e=this.bytes;if(t>this.end-3)return null;var i=e[t+0]<<16|e[t+1]<<8|e[t+2];return this.pos+=3,i},n.peek32=function(t){var e=this.pos,i=this.bytes;if(e>this.end-4)return null;var n=i[e+0]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3];return t&&(this.pos+=4),n},n.read32=function(){return this.peek32(!0)},n.readU32=function(){return this.peek32(!0)>>>0},n.read4CC=function(){var t=this.pos;if(t>this.end-4)return null;for(var e="",i=0;i<4;i++)e+=String.fromCharCode(this.bytes[t+i]);return this.pos+=4,e},n.readFP16=function(){return this.read32()/65536},n.readFP8=function(){return this.read16()/256},n.readISO639=function(){for(var t=this.readU16(),e="",i=0;i<3;i++){var n=t>>>5*(2-i)&31;e+=String.fromCharCode(n+96)}return e},n.readUTF8=function(t){for(var e="",i=0;i<t;i++)e+=String.fromCharCode(this.readU8());return e},n.readPString=function(t){var e=this.readU8();R(e<=t);var i=this.readUTF8(e);return this.reserved(t-e-1,0),i},n.skip=function(t){this.seek(this.pos+t)},n.reserved=function(t,e){for(var i=0;i<t;i++)R(this.readU8()===e)},n.seek=function(t){(t<0||t>this.end)&&O("Index out of bounds (bounds: [0, "+this.end+"], index: "+t+")."),this.pos=t},n.subStream=function(e,i){return new t(this.bytes.buffer,e,i)},n.uint=function(t){for(var e=this.position,i=e+t,n=0,o=e;o<i;o++)n<<=8,n|=255&this.readU8();return n},e=t,(i=[{key:"length",get:function(){return this.end-this.start}},{key:"position",get:function(){return this.pos}},{key:"remaining",get:function(){return this.end-this.pos}}])&&P(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),F=function(){function t(t){this.stream=void 0,this.tracks=void 0,this.metaData=void 0,this.file=void 0,this.stream=t,this.tracks={},this.metaData={}}var e=t.prototype;return e.getPath=function(t){for(var e=t.split("."),i=this,n=0,o=e.length;n<o;n++)i=i?i[e[n]]:void 0;return i},e.readBoxes=function(t,e){for(;t.peek32();){var i=this.readBox(t);if(i.type in e){var n=e[i.type];Array.isArray(n)||(e[i.type]=[n]),e[i.type].push(i)}else e[i.type]=i}},e.readBox=function(t){var e,i,n,o={offset:t.position},a=this;function s(){o.version=t.readU8(),o.flags=t.readU24()}function r(){return o.size-(t.position-o.offset)}function l(){t.skip(r())}function h(){var e=t.subStream(t.position,r());a.readBoxes(e,o),t.skip(e.length)}switch(o.size=t.readU32(),o.type=t.read4CC(),o.type){case"ftyp":var c=o;c.name="File Type Box",c.majorBrand=t.read4CC(),c.minorVersion=t.readU32(),c.compatibleBrands=new Array((c.size-16)/4);for(var d=0;d<c.compatibleBrands.length;d++)c.compatibleBrands[d]=t.read4CC();break;case"moov":o.name="Movie Box",h();break;case"mvhd":var u=o;u.name="Movie Header Box",s(),R(0==u.version),u.creationTime=t.readU32(),u.modificationTime=t.readU32(),u.timeScale=t.readU32(),u.duration=t.readU32(),u.rate=t.readFP16(),u.volume=t.readFP8(),t.skip(10),u.matrix=t.readU32Array(9),t.skip(24),u.nextTrackId=t.readU32();break;case"trak":var p=o;p.name="Track Box",h();var m=new U(this,p),g=p.mdia&&p.mdia.hdlr&&p.mdia.hdlr.handlerType||"unknownHandlerType",f=this.tracks;(f[g]||(f[g]=[])).push(m),f[p.tkhd.trackId]=m;break;case"tkhd":var _=o;_.name="Track Header Box",s(),R(0==_.version),_.creationTime=t.readU32(),_.modificationTime=t.readU32(),_.trackId=t.readU32(),t.skip(4),_.duration=t.readU32(),t.skip(8),_.layer=t.readU16(),_.alternateGroup=t.readU16(),_.volume=t.readFP8(),t.skip(2),_.matrix=t.readU32Array(9),_.width=t.readFP16(),_.height=t.readFP16();break;case"edts":o.name="Edit Atom",h();break;case"elst":var y=o;y.name="Edit List Atom",s(),y.editList=[],n=t.readU32();for(var v=0;v<n;v++)y.editList.push({trackDuration:t.read32(),mediaTime:t.read32(),mediaRate:t.readU32()});R(!r()),l();break;case"mdia":o.name="Media Box",h();break;case"mdhd":var b=o;b.name="Media Header Box",s(),R(0==b.version),b.creationTime=t.readU32(),b.modificationTime=t.readU32(),b.timeScale=t.readU32(),b.duration=t.readU32(),b.language=t.readISO639(),t.skip(2);break;case"hdlr":var w=o;w.name="Handler Reference Box",s(),t.skip(4),w.handlerType=t.read4CC(),t.skip(12),(i=w.size-32)>0&&(w.name=t.readUTF8(i));break;case"minf":o.name="Media Information Box",h();break;case"stbl":o.name="Sample Table Box",h();break;case"stsd":var C=o;C.name="Sample Description Box",s(),C.sd=[],t.readU32(),h();break;case"avc1":var k=o;t.reserved(6,0),k.dataReferenceIndex=t.readU16(),R(0==t.readU16()),R(0==t.readU16()),t.readU32(),t.readU32(),t.readU32(),k.width=t.readU16(),k.height=t.readU16(),k.horizontalResolution=t.readFP16(),k.verticalResolution=t.readFP16(),R(0==t.readU32()),k.frameCount=t.readU16(),k.compressorName=t.readPString(32),k.depth=t.readU16(),R(65535==t.readU16()),h();break;case"mp4a":var S=o;if(t.reserved(6,0),S.dataReferenceIndex=t.readU16(),S.version=t.readU16(),0!==S.version){l();break}t.skip(2),t.skip(4),S.channelCount=t.readU16(),S.sampleSize=t.readU16(),S.compressionId=t.readU16(),S.packetSize=t.readU16(),S.sampleRate=t.readU32()>>>16,h();break;case"esds":o.name="Elementary Stream Descriptor",s(),l();break;case"avcC":var T=o;T.name="AVC Configuration Box",T.configurationVersion=t.readU8(),T.avcProfileIndicaation=t.readU8(),T.profileCompatibility=t.readU8(),T.avcLevelIndication=t.readU8(),T.lengthSizeMinusOne=3&t.readU8(),R(3==T.lengthSizeMinusOne,"TODO"),e=31&t.readU8(),T.sps=[];for(var L=0;L<e;L++)T.sps.push(t.readU8Array(t.readU16()));e=31&t.readU8(),T.pps=[];for(var M=0;M<e;M++)T.pps.push(t.readU8Array(t.readU16()));l();break;case"btrt":var E=o;E.name="Bit Rate Box",E.bufferSizeDb=t.readU32(),E.maxBitrate=t.readU32(),E.avgBitrate=t.readU32();break;case"stts":var x=o;x.name="Decoding Time to Sample Box",s(),x.table=t.readU32Array(t.readU32(),2,["count","delta"]);break;case"stss":var I=o;I.name="Sync Sample Box",s(),I.samples=t.readU32Array(t.readU32());break;case"stsc":var A=o;A.name="Sample to Chunk Box",s(),A.table=t.readU32Array(t.readU32(),3,["firstChunk","samplesPerChunk","sampleDescriptionId"]);break;case"stsz":var P=o;P.name="Sample Size Box",s(),P.sampleSize=t.readU32(),e=t.readU32(),0==P.sampleSize&&(P.table=t.readU32Array(e));break;case"stco":var O=o;O.name="Chunk Offset Box",s(),O.table=t.readU32Array(t.readU32());break;case"smhd":var D=o;D.name="Sound Media Header Box",s(),D.balance=t.readFP8(),t.reserved(2,0);break;case"mdat":var N=o;N.name="Media Data Box",R(N.size>=8,"Cannot parse large media data yet."),N.data=t.readU8Array(r());break;case"mebx":o.name="Mebx",h();break;case"meta":o.name="Metadata",h();break;case"keys":var z=o;z.name="Metadata Item Keys",s();var F=z.keyCount=t.read32(),K=z.offset-z.size;z.keyList=new Map;for(var B=1;B<=F;B++){var G=t.read32()-8;G<1||G>K||(t.skip(4),z.keyList.set(t.readUTF8(G),B))}this.metaData.keys=z;break;case"ilst":var W=o;W.name="Metadata Item List",W.items=[];for(var Z=W.offset+W.size;t.position<Z;){t.position,t.readU32();var j=t.readU32(),H=t.readU32()-16,V=(t.read4CC(),t.readU8()),q=t.readU24(),X=(t.readU16(),t.readU16());X=0===V&&1!==q?t.uint(H):t.readUTF8(H),W.items[j]=X}this.metaData.values=W;break;default:l()}return o},e.read=function(){(new Date).getTime(),this.file={},this.readBoxes(this.stream,this.file)},e.traceSamples=function(){for(var t=this.tracks[1],e=this.tracks[2],i=0,n=0,o=0;o<100;o++){var a=t.sampleToOffset(i),s=e.sampleToOffset(n);t.sampleToSize(i,1),e.sampleToSize(n,1),a<s?i++:n++}},t}(),U=function(){function t(t,e){this.file=void 0,this.trak=void 0,this.file=t,this.trak=e}var e=t.prototype;return e.getSampleSizeTable=function(){return this.trak.mdia.minf.stbl.stsz.table},e.getSampleCount=function(){return this.getSampleSizeTable().length},e.sampleToSize=function(t,e){for(var i=this.getSampleSizeTable(),n=0,o=t;o<t+e;o++)n+=i[o];return n},e.sampleToChunk=function(t){var e=this.trak.mdia.minf.stbl.stsc.table;if(1===e.length){var i=e[0];return R(1===i.firstChunk),{index:t/i.samplesPerChunk,offset:t%i.samplesPerChunk}}for(var n=0,o=0;o<e.length;o++){var a=e[o];if(o>0){var s=e[o-1],r=a.firstChunk-s.firstChunk,l=s.samplesPerChunk*r;if(!(t>=l))return{index:n+Math.floor(t/s.samplesPerChunk),offset:t%s.samplesPerChunk};if(t-=l,o===e.length-1)return{index:n+r+Math.floor(t/a.samplesPerChunk),offset:t%a.samplesPerChunk};n+=r}}R(!1)},e.chunkToOffset=function(t){return this.trak.mdia.minf.stbl.stco.table[t]},e.sampleToOffset=function(t){var e=this.sampleToChunk(t);return this.chunkToOffset(e.index)+this.sampleToSize(t-e.offset,e.offset)},e.timeToSample=function(t){for(var e=this.trak.mdia.minf.stbl.stts.table,i=0,n=0;n<e.length;n++){var o=e[n].count*e[n].delta;if(!(t>=o))return i+Math.floor(t/e[n].delta);t-=o,i+=e[n].count}},e.sampleToTime=function(t){for(var e=this.trak.mdia.minf.stbl.stts.table,i=0,n=0,o=0;o<e.length&&i<t;o++){var a=e[o],s=Math.min(t-i,a.count);i+=s,n+=s*a.delta}return n},e.getTotalTime=function(){for(var t=this.trak.mdia.minf.stbl.stts.table,e=0,i=0;i<t.length;i++)e+=t[i].count*t[i].delta;return R(this.trak.mdia.mdhd.duration===e),this.trak.mdia.mdhd.duration},e.getTotalTimeInSeconds=function(){return this.timeToSeconds(this.getTotalTime())},e.getTimeScale=function(){return this.trak.mdia.mdhd.timeScale},e.timeToSeconds=function(t){return t/this.getTimeScale()},e.secondsToTime=function(t){return t*this.getTimeScale()},e.secondsToSample=function(t){return this.timeToSample(this.secondsToTime(t))},e.sampleToSeconds=function(t){return this.timeToSeconds(this.sampleToTime(t))},e.getAllSampleTimes=function(){for(var t=[],e=this.getSampleCount(),i=0;i<e;i++)t.push(this.sampleToTime(i));return t},e.getAllSampleSeconds=function(){for(var t=[],e=this.getSampleCount(),i=0;i<e;i++)t.push(this.sampleToSeconds(i));return t},e.getSampleNALUnits=function(t){for(var e=this.file.stream.bytes,i=this.sampleToOffset(t),n=i+this.sampleToSize(t,1),o=[];n-i>0;){var a=new z(e.buffer,i).readU32();o.push(e.subarray(i+4,i+a+4)),i=i+a+4}return o},t}();function K(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(t){if("string"===typeof t)return B(t,void 0);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?B(t,void 0):void 0}}(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function G(t){return t?t["{Exif}"]:void 0}function W(t){return t?t["{TIFF}"]:void 0}function Z(t){return t?t["{MakerApple}"]:void 0}function j(t){if(t&&t.moop&&!(t.moop.byteLength<=0)){var e={};try{var i,n=new F(new z(null==t||null==(i=t.moop)?void 0:i.buffer));n.read();var o=n.metaData;if(o){var a,s,r=null==(a=o.keys)?void 0:a.keyList,l=null==(s=o.values)?void 0:s.items;if(r&&l)for(var h,c=K(r.entries());!(h=c()).done;){var d=h.value,u=d[0],p=d[1];e[u]||(e[u]=l[p])}}var m=n.tracks.meta;if(m){var g=Array.from(m);if(g.length>0)for(var f=0;f<g.length;f++)for(var _,y=g[f],v=y.file.metaData.keys.keyList,b=y.file.metaData.values.items,w=K(v.entries());!(_=w()).done;){var C=_.value,k=C[0],S=C[1];e[k]||(e[k]=b[S])}}}catch(O){}return Object.keys(e).length?e:void 0}}function H(t){if(t){var e=W(t);if(e)return{make:x(e),model:I(e)};var i=A(j(t));return i?{make:i.make,model:i.model}:void 0}}function V(t){if(t){var e=x(W(t));if(e)return e;var i=A(j(t));if(i)return i.make}}function q(t){if(t){var e=I(W(t));if(e)return e;var i=A(j(t));if(i)return i.model}}function X(t){return S(G(t))}function Y(t){return k(G(t))}function Q(t){return T(G(t))}function J(t){return L(G(t))}function $(t){return M(G(t))}function tt(t){return!(!(e=j(t))||"object"!==typeof e)&&"com.apple.quicktime.cinematic-video"in e;var e}function et(t){return t?t[D.SemanticStyle]:void 0}function it(t){return t?t[D.StillImageCaptureType]:void 0}function nt(t){for(var e=t.split(" "),i=0;i<e.length;i++)if(-1!==e[i].indexOf("mm"))return Number(e[i].split("mm").join(""));return Number(t)}function ot(t){return t.split("f/").join("\u0192").split("F/").join("\u0192")}!function(t){t[t.Version=1]="Version",t[t.StillImageCaptureType=20]="StillImageCaptureType",t[t.SemanticStyle=64]="SemanticStyle"}(D||(D={})),function(t){t[t.RenderingVersion=48]="RenderingVersion",t[t.ToneBias=49]="ToneBias",t[t.WarmthBias=50]="WarmthBias",t[t.Preset=51]="Preset"}(N||(N={}));var at=i(1496),st=i(1497),rt=i(1498),lt=i(1499);const ht=i(1152).createElement;var ct=function(t){return ht(d.a,{originalProps:t,metadata:{name:"record.circle",svgPath:"M 58.5449 14.5508 C 85.791 14.5508 108.35 -8.05664 108.35 -35.2539 C 108.35 -62.5 85.7422 -85.0586 58.4961 -85.0586 C 31.2988 -85.0586 8.74023 -62.5 8.74023 -35.2539 C 8.74023 -8.05664 31.3477 14.5508 58.5449 14.5508 Z M 58.5449 6.25 C 35.498 6.25 17.0898 -12.207 17.0898 -35.2539 C 17.0898 -58.3008 35.4492 -76.7578 58.4961 -76.7578 C 81.543 -76.7578 100 -58.3008 100.049 -35.2539 C 100.098 -12.207 81.5918 6.25 58.5449 6.25 Z M 58.5938 -16.1621 C 69.1406 -16.1621 77.7344 -24.707 77.7344 -35.3027 C 77.7344 -45.8496 69.1406 -54.4434 58.5938 -54.4434 C 47.998 -54.4434 39.4043 -45.8496 39.4043 -35.3027 C 39.4043 -24.707 47.998 -16.1621 58.5938 -16.1621 Z",layoutBox:{viewBox:"0 0 233.30078125 159.98291015625",width:233.30078125,height:159.98291015625,translateX:58.105236816406205,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 99.6097412109375 99.6572265625",width:99.6097412109375,height:99.6572265625,translateX:-8.740283203125045,translateY:85.05859375,baseline:85.05859375,capline:14.5986328125}}})},dt=i(1500),ut=i(1501),pt=i(1502);const mt=i(1152).createElement;var gt=function(t){return mt(d.a,{originalProps:t,metadata:{name:"person.crop.square",svgPath:"M 27.7832 9.76562 L 87.0117 9.76562 C 97.2656 9.76562 102.344 4.6875 102.344 -5.37109 L 102.344 -64.9902 C 102.344 -75.0488 97.2656 -80.127 87.0117 -80.127 L 27.7832 -80.127 C 17.5781 -80.127 12.4512 -75.0977 12.4512 -64.9902 L 12.4512 -5.37109 C 12.4512 4.73633 17.5781 9.76562 27.7832 9.76562 Z M 20.3125 -5.76172 L 20.3125 -64.5996 C 20.3125 -69.6777 22.998 -72.2656 27.8809 -72.2656 L 86.9141 -72.2656 C 91.748 -72.2656 94.4824 -69.6777 94.4824 -64.5996 L 94.4824 -5.76172 C 94.4824 -1.95312 92.9199 0.488281 90.0879 1.41602 C 85.8398 -10.5469 72.9492 -18.8965 57.4219 -18.8965 C 41.8457 -18.8965 29.0039 -10.5469 24.7559 1.46484 C 21.875 0.488281 20.3125 -1.95312 20.3125 -5.76172 Z M 57.4219 -27.0508 C 66.748 -26.9531 74.0723 -34.9121 74.0723 -45.3613 C 74.0723 -55.1758 66.748 -63.2812 57.4219 -63.2812 C 48.0957 -63.2812 40.6738 -55.1758 40.7227 -45.3613 C 40.7715 -34.9121 48.0957 -27.1484 57.4219 -27.0508 Z",layoutBox:{viewBox:"0 0 233.30078125 159.98291015625",width:233.30078125,height:159.98291015625,translateX:59.252856445312545,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 89.892822265625 89.9912109375",width:89.892822265625,height:89.9912109375,translateX:-12.451123046874955,translateY:80.2255859375,baseline:80.2255859375,capline:9.765625}}})};const ft=i(1152).createElement;var _t=function(t){return ft(d.a,{originalProps:t,metadata:{name:"video.circle.fill",svgPath:"M 58.5449 14.5996 C 85.791 14.5996 108.35 -7.95898 108.35 -35.2051 C 108.35 -62.4023 85.7422 -85.0098 58.4961 -85.0098 C 31.2988 -85.0098 8.74023 -62.4023 8.74023 -35.2051 C 8.74023 -7.95898 31.3477 14.5996 58.5449 14.5996 Z M 37.5 -14.8926 C 32.4707 -14.8926 29.4922 -17.8223 29.4922 -22.7539 L 29.4922 -47.5586 C 29.4922 -52.5879 32.666 -55.4688 37.5 -55.4688 L 64.3555 -55.4688 C 69.4336 -55.4688 72.0703 -52.5879 72.0703 -47.5586 L 72.0703 -22.7539 C 72.0703 -17.8223 69.1406 -14.8926 64.1113 -14.8926 Z M 74.9023 -28.3203 L 74.9023 -42.041 L 84.7656 -50.4395 C 85.5957 -51.123 86.6699 -51.6113 87.5488 -51.6113 C 89.4531 -51.6113 90.7227 -50.2441 90.7227 -48.1445 L 90.7227 -22.2168 C 90.7227 -20.0684 89.4531 -18.7012 87.5488 -18.7012 C 86.6699 -18.7012 85.6445 -19.1895 84.7656 -19.9219 Z",layoutBox:{viewBox:"0 0 233.30078125 159.98291015625",width:233.30078125,height:159.98291015625,translateX:58.105236816406205,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 99.6097412109375 99.6591796875",width:99.6097412109375,height:99.6591796875,translateX:-8.740283203125045,translateY:85.0595703125,baseline:85.0595703125,capline:14.599609375}}})};const yt=i(1152).createElement;var vt,bt,wt=function(t){return yt(d.a,{originalProps:t,metadata:{name:"cinematic.video",svgPath:"M36.4746-42.6758Q37.8418-42.6758 38.6719-43.5059Q39.502-44.3359 39.502-45.7031L39.502-51.5625Q39.502-54.4434 42.334-54.4434L48.3887-54.4434Q49.7559-54.4434 50.5615-55.2734Q51.3672-56.1035 51.3672-57.4707Q51.3672-58.8379 50.5615-59.6191Q49.7559-60.4004 48.3887-60.4004L42.2852-60.4004Q37.9883-60.4004 35.7666-58.2031Q33.5449-56.0059 33.5449-51.7578L33.5449-45.7031Q33.5449-44.2871 34.3506-43.4814Q35.1562-42.6758 36.4746-42.6758ZM82.2266-42.6758Q83.5449-42.6758 84.3506-43.4814Q85.1562-44.2871 85.1562-45.7031L85.1562-51.7578Q85.1562-60.4004 76.416-60.4004L70.3125-60.4004Q68.9453-60.4004 68.1396-59.6191Q67.334-58.8379 67.334-57.4707Q67.334-56.1035 68.1396-55.2734Q68.9453-54.4434 70.3125-54.4434L76.3672-54.4434Q79.1992-54.4434 79.1992-51.5625L79.1992-45.7031Q79.1992-44.3359 80.0293-43.5059Q80.8594-42.6758 82.2266-42.6758ZM42.2852-10.1074L48.3887-10.1074Q49.8047-10.1074 50.5859-10.9131Q51.3672-11.7188 51.3672-13.0859Q51.3672-14.4531 50.5615-15.2832Q49.7559-16.1133 48.3887-16.1133L42.334-16.1133Q39.502-16.1133 39.502-18.9453L39.502-24.8535Q39.502-26.2207 38.6719-27.0508Q37.8418-27.8809 36.4746-27.8809Q35.1562-27.8809 34.3506-27.0752Q33.5449-26.2695 33.5449-24.8535L33.5449-18.7988Q33.5449-10.1074 42.2852-10.1074ZM70.3125-10.1074L76.416-10.1074Q80.7129-10.1074 82.9346-12.3047Q85.1562-14.502 85.1562-18.7988L85.1562-24.8535Q85.1562-26.2695 84.3506-27.0752Q83.5449-27.8809 82.2266-27.8809Q80.8594-27.8809 80.0293-27.0508Q79.1992-26.2207 79.1992-24.8535L79.1992-18.9453Q79.1992-16.1133 76.3672-16.1133L70.3125-16.1133Q68.9453-16.1133 68.1396-15.2832Q67.334-14.4531 67.334-13.0859Q67.334-11.6699 68.1396-10.8887Q68.9453-10.1074 70.3125-10.1074ZM33.8379 4.88281L84.8633 4.88281Q93.7988 4.88281 98.8525-0.0732422Q103.906-5.0293 103.906-13.9648L103.906-56.5918Q103.906-65.4785 98.8525-70.4346Q93.7988-75.3906 84.8633-75.3906L33.8379-75.3906Q25.293-75.3906 20.0439-70.4346Q14.7949-65.4785 14.7949-56.5918L14.7949-13.9648Q14.7949-5.0293 19.8486-0.0732422Q24.9023 4.88281 33.8379 4.88281ZM35.2051-2.49023Q29.1992-2.49023 25.9277-5.61523Q22.6562-8.74023 22.6562-15.0879L22.6562-55.4199Q22.6562-61.7676 25.9277-64.917Q29.1992-68.0664 35.2051-68.0664L83.4961-68.0664Q89.502-68.0664 92.7734-64.917Q96.0449-61.7676 96.0449-55.4199L96.0449-15.0879Q96.0449-8.74023 92.7734-5.61523Q89.502-2.49023 83.4961-2.49023ZM102.783-48.9258L102.783-39.6484L126.025-58.8379Q126.367-59.082 126.636-59.2529Q126.904-59.4238 127.197-59.4238Q128.027-59.4238 128.027-58.252L128.027-12.2559Q128.027-11.1328 127.197-11.1328Q126.904-11.1328 126.636-11.3037Q126.367-11.4746 126.025-11.6699L102.783-30.8594L102.783-21.6309L122.363-5.0293Q123.828-3.80859 125.391-3.05176Q126.953-2.29492 128.467-2.29492Q131.689-2.29492 133.643-4.44336Q135.596-6.5918 135.596-10.0098L135.596-60.498Q135.596-63.916 133.643-66.0645Q131.689-68.2129 128.467-68.2129Q126.953-68.2129 125.391-67.4561Q123.828-66.6992 122.363-65.4785Z",layoutBox:{viewBox:"0 0 145.5001220703125 87.5478515625",width:145.5001220703125,height:87.5478515625,translateX:1.555029296875091,translateY:79.00390625,baseline:79.00390625,capline:8.5439453125},glyphBox:{viewBox:"0 0 128.8018798828125 80.3212890625",width:128.8018798828125,height:80.3212890625,translateX:-6.794091796874909,translateY:75.390625,baseline:75.390625,capline:4.9306640625}}})};!function(t){t.Unknown="unknown",t.CaMcgillMniBicMnc="ca.mcgill.mni.bic.mnc",t.ComAdobeFlashVideo="com.adobe.flash.video",t.ComAdobeIllustratorAiImage="com.adobe.illustrator.ai-image",t.ComAdobePdf="com.adobe.pdf",t.ComAdobePhotoshopImage="com.adobe.photoshop-image",t.ComAdobePhotoshopLargeImage="com.adobe.photoshop-large-image",t.ComAdobeRawImage="com.adobe.raw-image",t.ComAppleAudioUnitPreset="com.apple.audio-unit-preset",t.ComAppleCoreaudioFormat="com.apple.coreaudio-format",t.ComAppleDrawing="com.apple.drawing",t.ComAppleFinderClipping="com.apple.finder.clipping",t.ComAppleFinderPictclipping="com.apple.finder.pictclipping",t.ComAppleGaragebandProject="com.apple.garageband.project",t.ComAppleIcns="com.apple.icns",t.ComAppleLocalizableNameBundle="com.apple.localizable-name-bundle",t.ComAppleLocalizedPdfBundle="com.apple.localized-pdf-bundle",t.ComAppleM4aAudio="com.apple.m4a-audio",t.ComAppleM4vVideo="com.apple.m4v-video",t.ComAppleMacpaintImage="com.apple.macpaint-image",t.ComAppleMpeg4Ringtone="com.apple.mpeg-4-ringtone",t.ComApplePackage="com.apple.package",t.ComApplePict="com.apple.pict",t.ComAppleProtectedMpeg4Audio="com.apple.protected-mpeg-4-audio",t.ComAppleProtectedMpeg4AudioB="com.apple.protected-mpeg-4-audio-b",t.ComAppleProtectedMpeg4Video="com.apple.protected-mpeg-4-video",t.ComAppleQuicktimeImage="com.apple.quicktime-image",t.ComAppleQuicktimeMovie="com.apple.quicktime-movie",t.ComAppleXmlPropertyList="com.apple.xml-property-list",t.ComAudibleAaAudio="com.audible.aa-audio",t.ComAudibleAaAudiobook="com.audible.aa-audiobook",t.ComAudibleAaxAudiobook="com.audible.aax-audiobook",t.ComAvidOpenMediaFramework="com.avid.open-media-framework",t.ComCanonCr2RawImage="com.canon.cr2-raw-image",t.ComCanonCr3RawImage="com.canon.cr3-raw-image",t.ComCanonCrwRawImage="com.canon.crw-raw-image",t.ComCanonTifRawImage="com.canon.tif-raw-image",t.ComCompuserveGif="com.compuserve.gif",t.ComDigidesignSd2Audio="com.digidesign.sd2-audio",t.ComDxoRawImage="com.dxo.raw-image",t.ComEpsonRawImage="com.epson.raw-image",t.ComFujiRawImage="com.fuji.raw-image",t.ComHasselblad3frRawImage="com.hasselblad.3fr-raw-image",t.ComHasselbladFffRawImage="com.hasselblad.fff-raw-image",t.ComIlmOpenexrImage="com.ilm.openexr-image",t.ComJ2EfxFax="com.j2.efx-fax",t.ComKodakFlashpixImage="com.kodak.flashpix-image",t.ComKodakRawImage="com.kodak.raw-image",t.ComKonicaminoltaRawImage="com.konicaminolta.raw-image",t.ComLeafamericaRawImage="com.leafamerica.raw-image",t.ComLeicaPwlRawImage="com.leica.pwl-raw-image",t.ComLeicaRawImage="com.leica.raw-image",t.ComLeicaRwlRawImage="com.leica.rwl-raw-image",t.ComMicrosoftAdvancedStreamRedirector="com.microsoft.advanced-stream-redirector",t.ComMicrosoftAdvancedSystemsFormat="com.microsoft.advanced-systems-format",t.ComMicrosoftBmp="com.microsoft.bmp",t.ComMicrosoftIco="com.microsoft.ico",t.ComMicrosoftWaveformAudio="com.microsoft.waveform-audio",t.ComMicrosoftWindowsMediaWax="com.microsoft.windows-media-wax",t.ComMicrosoftWindowsMediaWm="com.microsoft.windows-media-wm",t.ComMicrosoftWindowsMediaWma="com.microsoft.windows-media-wma",t.ComMicrosoftWindowsMediaWmp="com.microsoft.windows-media-wmp",t.ComMicrosoftWindowsMediaWmv="com.microsoft.windows-media-wmv",t.ComMicrosoftWindowsMediaWmx="com.microsoft.windows-media-wmx",t.ComMicrosoftWindowsMediaWvx="com.microsoft.windows-media-wvx",t.ComNikonNrwRawImage="com.nikon.nrw-raw-image",t.ComNikonRawImage="com.nikon.raw-image",t.ComOlympusOrRawImage="com.olympus.or-raw-image",t.ComOlympusRawImage="com.olympus.raw-image",t.ComOlympusSrRawImage="com.olympus.sr-raw-image",t.ComPanasonicRawImage="com.panasonic.raw-image",t.ComPanasonicRw2RawImage="com.panasonic.rw2-raw-image",t.ComPentaxRawImage="com.pentax.raw-image",t.ComPhaseoneRawImage="com.phaseone.raw-image",t.ComRealRealaudio="com.real.realaudio",t.ComSamsungRawImage="com.samsung.raw-image",t.ComSgiSgiImage="com.sgi.sgi-image",t.ComSonyArwRawImage="com.sony.arw-raw-image",t.ComSonyRawImage="com.sony.raw-image",t.ComSonySr2RawImage="com.sony.sr2-raw-image",t.ComSonyWave64="com.sony.wave64",t.ComSoundblasterSoundfont="com.soundblaster.soundfont",t.ComTruevisionTgaImage="com.truevision.tga-image",t.Org3gppAdaptiveMultiRateAudio="org.3gpp.adaptive-multi-rate-audio",t.OrgKhronosColladaDigitalAssetExchange="org.khronos.collada.digital-asset-exchange",t.OrgOasisOpenOpendocument="org.oasis-open.opendocument",t.OrgOasisOpenOpendocumentImage="org.oasis-open.opendocument.image",t.OrgOasisOpenOpendocumentImageTemplate="org.oasis-open.opendocument.image-template",t.OrgWebmprojectWebm="org.webmproject.webm",t.OrgWebmprojectWebp="org.webmproject.webp",t.OrgXiphFlac="org.xiph.flac",t._3dContent="public.3d-content",t._3gpp="public.3gpp",t._3gpp2="public.3gpp2",t.AacAudio="public.aac-audio",t.Ac3Audio="public.ac3-audio",t.AifcAudio="public.aifc-audio",t.AiffAudio="public.aiff-audio",t.AppCategory="public.app-category",t.AppCategoryPhotography="public.app-category.photography",t.AppCategoryPhotographyAndVideo="public.app-category.photography-and-video",t.AppCategoryVideo="public.app-category.video",t.Archive="public.archive",t.AuAudio="public.au-audio",t.Audio="public.audio",t.AudiovisualContent="public.audiovisual-content",t.AudiovisualContentCollection="public.audiovisual-content-collection",t.AvchdCollection="public.avchd-collection",t.Avci="public.avci",t.Avcs="public.avcs",t.Avi="public.avi",t.CameraRawImage="public.camera-raw-image",t.CddaAudio="public.cdda-audio",t.CompositeContent="public.composite-content",t.Content="public.content",t.Data="public.data",t.DiskImage="public.disk-image",t.DownloadableSound="public.downloadable-sound",t.DvMovie="public.dv-movie",t.EnhancedAc3Audio="public.enhanced-ac3-audio",t.Fax="public.fax",t.FlcAnimation="public.flc-animation",t.Heic="public.heic",t.Heics="public.heics",t.Heif="public.heif",t.HeifStandard="public.heif-standard",t.Heifs="public.heifs",t.Image="public.image",t.Jpeg="public.jpeg",t.Jpeg2000="public.jpeg-2000",t.M3uPlaylist="public.m3u-playlist",t.Message="public.message",t.MidiAudio="public.midi-audio",t.Movie="public.movie",t.Mp2="public.mp2",t.Mp3="public.mp3",t.Mp4aLatm="public.mp4a-latm",t.Mp4aLoas="public.mp4a-loas",t.Mpeg="public.mpeg",t.Mpeg2Video="public.mpeg-2-video",t.Mpeg4="public.mpeg-4",t.Mpeg4Audio="public.mpeg-4-audio",t.MpoImage="public.mpo-image",t.PlainText="public.plain-text",t.Playlist="public.playlist",t.PlsPlaylist="public.pls-playlist",t.Png="public.png",t.SvgImage="public.svg-image",t.Text="public.text",t.Tiff="public.tiff",t.UlawAudio="public.ulaw-audio",t.Video="public.video",t.XbitmapImage="public.xbitmap-image",t.Xml="public.xml"}(bt||(bt={}));var Ct,kt,St,Tt,Lt,Mt=((vt={})[bt.ComAdobePdf]={conformsTo:[bt.Data,bt.CompositeContent],mimeType:["application/pdf"],extension:["pdf"]},vt[bt.ComCompuserveGif]={conformsTo:[bt.Image],mimeType:["image/gif"],extension:["gif"]},vt[bt.ComMicrosoftBmp]={conformsTo:[bt.Image],mimeType:["image/bmp"],extension:["bmp","dib"]},vt[bt.ComMicrosoftIco]={conformsTo:[bt.Image],mimeType:["image/vnd.microsoft.icon"],extension:["ico"]},vt[bt.OrgWebmprojectWebp]={conformsTo:[bt.Image],mimeType:["image/webp"],extension:["webp"]},vt[bt.OrgWebmprojectWebm]={conformsTo:[bt.Movie],mimeType:["video/webm","audio/webm"],extension:["webm"]},vt[bt.OrgOasisOpenOpendocumentImage]={conformsTo:[bt.OrgOasisOpenOpendocument,bt.Image],mimeType:["application/vnd.oasis.opendocument.image"],extension:["odi"]},vt[bt.OrgOasisOpenOpendocumentImageTemplate]={conformsTo:[bt.OrgOasisOpenOpendocument,bt.Image],mimeType:["application/vnd.oasis.opendocument.image-template"],extension:["oti"]},vt[bt.ComAppleGaragebandProject]={conformsTo:[bt.ComApplePackage,bt.AudiovisualContent],mimeType:[],extension:["band","gbProj"]},vt[bt.ComAdobePhotoshopImage]={conformsTo:[bt.Image],mimeType:["image/vnd.adobe.photoshop","image/photoshop","image/x-photoshop","image/psd","application/photoshop"],extension:["psd"]},vt[bt.ComAdobePhotoshopLargeImage]={conformsTo:[bt.Image],mimeType:[],extension:["psb"]},vt[bt.ComAdobeIllustratorAiImage]={conformsTo:[bt.Image],mimeType:[],extension:["ai"]},vt[bt.ComTruevisionTgaImage]={conformsTo:[bt.Image],mimeType:["image/targa","image/tga","application/tga"],extension:["tga"]},vt[bt.ComSgiSgiImage]={conformsTo:[bt.Image],mimeType:["image/sgi"],extension:["sgi"]},vt[bt.ComIlmOpenexrImage]={conformsTo:[bt.Image],mimeType:[],extension:["exr"]},vt[bt.ComKodakFlashpixImage]={conformsTo:[bt.Image],mimeType:["image/fpx","application/vnd.fpx"],extension:["fpx"]},vt[bt.HeifStandard]={conformsTo:[bt.Image],mimeType:[],extension:[]},vt[bt.Heif]={conformsTo:[bt.HeifStandard],mimeType:["image/heif"],extension:["heif","hif"]},vt[bt.Heic]={conformsTo:[bt.HeifStandard],mimeType:["image/heic"],extension:["heic"]},vt[bt.Avci]={conformsTo:[bt.HeifStandard],mimeType:["image/avci"],extension:["avci"]},vt[bt.Heifs]={conformsTo:[bt.HeifStandard],mimeType:["image/heif-sequence"],extension:["heifs"]},vt[bt.Heics]={conformsTo:[bt.HeifStandard],mimeType:["image/heic-sequence"],extension:["heics"]},vt[bt.Avcs]={conformsTo:[bt.HeifStandard],mimeType:["image/avcs"],extension:["avcs"]},vt[bt.ComAppleDrawing]={conformsTo:[bt.Image],mimeType:[],extension:["drawing"]},vt[bt.ComJ2EfxFax]={conformsTo:[bt.Fax],mimeType:["image/efax"],extension:["efx"]},vt[bt.ComDigidesignSd2Audio]={conformsTo:[bt.Audio],mimeType:[],extension:["sd2"]},vt[bt.ComMicrosoftWaveformAudio]={conformsTo:[bt.Audio],mimeType:["audio/vnd.wave","audio/wav","audio/wave","audio/x-wav"],extension:["wav","wave","bwf"]},vt[bt.ComMicrosoftAdvancedSystemsFormat]={conformsTo:[bt.AudiovisualContent],mimeType:["video/x-ms-asf"],extension:["asf"]},vt[bt.ComMicrosoftWindowsMediaWm]={conformsTo:[bt.Movie,bt.ComMicrosoftAdvancedSystemsFormat],mimeType:["video/x-ms-wm"],extension:["wm"]},vt[bt.ComMicrosoftWindowsMediaWmv]={conformsTo:[bt.Movie,bt.ComMicrosoftAdvancedSystemsFormat],mimeType:["video/x-ms-wmv"],extension:["wmv"]},vt[bt.ComMicrosoftWindowsMediaWmp]={conformsTo:[bt.Movie,bt.ComMicrosoftAdvancedSystemsFormat],mimeType:["video/x-ms-wmp"],extension:["wmp"]},vt[bt.ComMicrosoftWindowsMediaWma]={conformsTo:[bt.Audio,bt.ComMicrosoftAdvancedSystemsFormat],mimeType:["video/x-ms-wma"],extension:["wma"]},vt[bt.ComMicrosoftAdvancedStreamRedirector]={conformsTo:[bt.AudiovisualContent,bt.Xml],mimeType:["video/x-ms-asx"],extension:["asx"]},vt[bt.ComMicrosoftWindowsMediaWmx]={conformsTo:[bt.Movie,bt.ComMicrosoftAdvancedStreamRedirector],mimeType:["video/x-ms-wmx"],extension:["wmx"]},vt[bt.ComMicrosoftWindowsMediaWvx]={conformsTo:[bt.Movie,bt.ComMicrosoftAdvancedStreamRedirector],mimeType:["video/x-ms-wvx"],extension:["wvx"]},vt[bt.ComMicrosoftWindowsMediaWax]={conformsTo:[bt.Audio,bt.ComMicrosoftAdvancedStreamRedirector],mimeType:["video/x-ms-wax"],extension:["wax"]},vt[bt.ComRealRealaudio]={conformsTo:[bt.Audio],mimeType:["audio/vnd.rn-realaudio","audio/x-pn-realaudio","audio/x-realaudio"],extension:["ram","ra"]},vt[bt.ComSoundblasterSoundfont]={conformsTo:[bt.Audio],mimeType:[],extension:["sf2"]},vt[bt.OrgXiphFlac]={conformsTo:[bt.Audio],mimeType:["audio/flac"],extension:["flac"]},vt[bt.ComAvidOpenMediaFramework]={conformsTo:[bt.AudiovisualContent],mimeType:[],extension:["omf"]},vt[bt.Mp4aLoas]={conformsTo:[bt.Audio],mimeType:[],extension:["loas","latm"]},vt[bt.Mp4aLatm]={conformsTo:[bt.Audio],mimeType:["audio/mp4a-latm"],extension:[]},vt[bt.ComAdobeFlashVideo]={conformsTo:[bt.Movie],mimeType:["video/x-flv"],extension:["flv","f4v","f4p","f4a","f4b"]},vt[bt.OrgKhronosColladaDigitalAssetExchange]={conformsTo:[bt.Xml,bt.AudiovisualContent,bt._3dContent],mimeType:[],extension:["dae"]},vt[bt.ComAdobeRawImage]={conformsTo:[bt.CameraRawImage],mimeType:["image/x-adobe-dng"],extension:["dng"]},vt[bt.ComDxoRawImage]={conformsTo:[bt.CameraRawImage],mimeType:["image/x-dxo-dxo"],extension:["dxo"]},vt[bt.ComCanonCrwRawImage]={conformsTo:[bt.CameraRawImage],mimeType:["image/x-canon-crw"],extension:["crw"]},vt[bt.ComCanonCr2RawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["cr2"]},vt[bt.ComCanonCr3RawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["cr3"]},vt[bt.ComCanonTifRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:[]},vt[bt.ComEpsonRawImage]={conformsTo:[bt.CameraRawImage],mimeType:["image/x-epson-erf"],extension:["erf"]},vt[bt.ComFujiRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["raf"]},vt[bt.ComHasselbladFffRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["fff"]},vt[bt.ComHasselblad3frRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["3fr"]},vt[bt.ComKodakRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["dcr"]},vt[bt.ComKonicaminoltaRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["mrw"]},vt[bt.ComLeafamericaRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["mos"]},vt[bt.ComLeicaPwlRawImage]={conformsTo:[bt.CameraRawImage],mimeType:["image/x-leica-pwl"],extension:["pwl"]},vt[bt.ComNikonRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["nef"]},vt[bt.ComNikonNrwRawImage]={conformsTo:[bt.CameraRawImage],mimeType:["image/x-nikon-nrw"],extension:["nrw"]},vt[bt.ComOlympusRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["orf"]},vt[bt.ComPanasonicRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["raw"]},vt[bt.ComPanasonicRw2RawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["rw2"]},vt[bt.ComLeicaRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["raw"]},vt[bt.ComSamsungRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["srw"]},vt[bt.ComLeicaRwlRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["rwl"]},vt[bt.ComPentaxRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["pef"]},vt[bt.ComSonyRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["srf"]},vt[bt.ComSonyArwRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["arw"]},vt[bt.ComSonySr2RawImage]={conformsTo:[bt.CameraRawImage],mimeType:["image/x-sony-sr2"],extension:["sr2"]},vt[bt.ComOlympusSrRawImage]={conformsTo:[bt.ComOlympusRawImage],mimeType:["image/x-olympus-sr"],extension:["orf"]},vt[bt.ComOlympusOrRawImage]={conformsTo:[bt.ComOlympusRawImage],mimeType:["image/x-olympus-or"],extension:["orf"]},vt[bt.ComPhaseoneRawImage]={conformsTo:[bt.CameraRawImage],mimeType:[],extension:["iiq"]},vt[bt.ComAppleFinderPictclipping]={conformsTo:[bt.ComAppleFinderClipping,bt.Image],mimeType:[],extension:["pictclipping"]},vt[bt.DiskImage]={conformsTo:[bt.Archive],mimeType:[],extension:[]},vt[bt.Image]={conformsTo:[bt.Data,bt.Content],mimeType:[],extension:[]},vt[bt.Fax]={conformsTo:[bt.Image,bt.Message],mimeType:[],extension:[]},vt[bt.CameraRawImage]={conformsTo:[bt.Image],mimeType:[],extension:[]},vt[bt.Jpeg]={conformsTo:[bt.Image],mimeType:["image/jpeg","image/jpg"],extension:["jpeg","jpg","jpe"]},vt[bt.Jpeg2000]={conformsTo:[bt.Image],mimeType:["image/jp2"],extension:["jp2","jpf","jpx","j2k","j2c"]},vt[bt.Tiff]={conformsTo:[bt.Image],mimeType:["image/tiff"],extension:["tiff","tif"]},vt[bt.ComApplePict]={conformsTo:[bt.Image],mimeType:["image/pict","image/x-pict","image/x-macpict"],extension:["pict","pct","pic"]},vt[bt.ComAppleMacpaintImage]={conformsTo:[bt.Image],mimeType:[],extension:["pntg"]},vt[bt.Png]={conformsTo:[bt.Image],mimeType:["image/png"],extension:["png"]},vt[bt.SvgImage]={conformsTo:[bt.Image,bt.Xml],mimeType:["image/svg+xml"],extension:["svg","svgz"]},vt[bt.ComAppleQuicktimeImage]={conformsTo:[bt.Image],mimeType:["image/x-quicktime"],extension:["qtif","qti"]},vt[bt.ComAppleIcns]={conformsTo:[bt.Image],mimeType:[],extension:["icns"]},vt[bt.XbitmapImage]={conformsTo:[bt.Image],mimeType:["image/x-xbitmap"],extension:["xbm"]},vt[bt.MpoImage]={conformsTo:[bt.Image],mimeType:[],extension:["mpo"]},vt[bt.CaMcgillMniBicMnc]={conformsTo:[bt.Image],mimeType:[],extension:["mnc","minc"]},vt[bt.AudiovisualContent]={conformsTo:[bt.Data,bt.Content],mimeType:[],extension:[]},vt[bt.Movie]={conformsTo:[bt.AudiovisualContent],mimeType:[],extension:[]},vt[bt.Video]={conformsTo:[bt.Movie],mimeType:[],extension:[]},vt[bt.Audio]={conformsTo:[bt.AudiovisualContent],mimeType:[],extension:[]},vt[bt.ComAppleQuicktimeMovie]={conformsTo:[bt.Movie],mimeType:["video/quicktime"],extension:["mov","qt"]},vt[bt.Mpeg]={conformsTo:[bt.Movie],mimeType:["video/mpeg","video/mpg","video/x-mpeg","video/x-mpg"],extension:["mpg","mpeg","mpe","m75","m15"]},vt[bt.Mpeg2Video]={conformsTo:[bt.Video],mimeType:["video/mpeg2","video/mpeg2-video"],extension:["m2v"]},vt[bt.Mpeg4]={conformsTo:[bt.Movie],mimeType:["video/mp4","video/mp4v-es"],extension:["mp4","mpg4"]},vt[bt.ComAppleM4vVideo]={conformsTo:[bt.Mpeg4],mimeType:["video/x-m4v"],extension:["m4v"]},vt[bt.ComAppleProtectedMpeg4Video]={conformsTo:[bt.ComAppleM4vVideo],mimeType:[],extension:[]},vt[bt.DvMovie]={conformsTo:[bt.Movie],mimeType:["video/x-dv"],extension:["dv","dif"]},vt[bt.Avi]={conformsTo:[bt.Movie],mimeType:["video/avi","video/msvideo","video/x-msvideo"],extension:["avi","vfw"]},vt[bt._3gpp]={conformsTo:[bt.Movie],mimeType:["video/3gpp","audio/3gpp"],extension:["3gp","3gpp","sdv"]},vt[bt._3gpp2]={conformsTo:[bt.Movie],mimeType:["video/3gpp2","audio/3gpp2"],extension:["3g2","3gp2"]},vt[bt.FlcAnimation]={conformsTo:[bt.Movie],mimeType:["video/flc"],extension:["flc","fli","cel"]},vt[bt.AvchdCollection]={conformsTo:[bt.ComApplePackage,bt.AudiovisualContentCollection],mimeType:[],extension:["avchd"]},vt[bt.ComAppleAudioUnitPreset]={conformsTo:[bt.ComAppleXmlPropertyList],mimeType:[],extension:["aupreset"]},vt[bt.Mp2]={conformsTo:[bt.Audio],mimeType:[],extension:["mp2"]},vt[bt.Mp3]={conformsTo:[bt.Audio],mimeType:["audio/mpeg","audio/mpeg3","audio/mpg","audio/mp3","audio/x-mpeg","audio/x-mpeg3","audio/x-mpg","audio/x-mp3"],extension:["mp3","mpga"]},vt[bt.M3uPlaylist]={conformsTo:[bt.PlainText,bt.Playlist],mimeType:["audio/mpegurl","application/vnd.apple.mpegurl","audio/x-mpegurl"],extension:["m3u","m3u8"]},vt[bt.PlsPlaylist]={conformsTo:[bt.Text,bt.Playlist],mimeType:["audio/x-scpls"],extension:["pls"]},vt[bt.Mpeg4Audio]={conformsTo:[bt.Audio],mimeType:["audio/mp4","audio/mp4a-latm"],extension:["mp4","mpg4"]},vt[bt.ComAppleM4aAudio]={conformsTo:[bt.Mpeg4Audio],mimeType:["audio/x-m4a"],extension:["m4a"]},vt[bt.ComAppleMpeg4Ringtone]={conformsTo:[bt.Mpeg4Audio],mimeType:["audio/x-m4r"],extension:["m4r"]},vt[bt.ComAppleProtectedMpeg4Audio]={conformsTo:[bt.Audio],mimeType:[],extension:["m4p"]},vt[bt.ComAppleProtectedMpeg4AudioB]={conformsTo:[bt.ComAppleProtectedMpeg4Audio],mimeType:[],extension:["m4b"]},vt[bt.UlawAudio]={conformsTo:[bt.Audio],mimeType:[],extension:["ul","ulw","ulaw"]},vt[bt.AuAudio]={conformsTo:[bt.Audio],mimeType:["audio/basic"],extension:["au","snd"]},vt[bt.AifcAudio]={conformsTo:[bt.Audio],mimeType:[],extension:["aifc"]},vt[bt.AiffAudio]={conformsTo:[bt.AifcAudio],mimeType:["audio/aiff","audio/x-aiff"],extension:["aiff","aif"]},vt[bt.CddaAudio]={conformsTo:[bt.AifcAudio],mimeType:[],extension:["cdda"]},vt[bt.MidiAudio]={conformsTo:[bt.Audio],mimeType:["audio/midi","audio/x-midi"],extension:["midi","mid","smf","kar"]},vt[bt.DownloadableSound]={conformsTo:[bt.Audio],mimeType:["audio/dls"],extension:["dls"]},vt[bt.ComAppleCoreaudioFormat]={conformsTo:[bt.Audio],mimeType:[],extension:["caf"]},vt[bt.Ac3Audio]={conformsTo:[bt.Audio],mimeType:["audio/ac3"],extension:["ac3"]},vt[bt.EnhancedAc3Audio]={conformsTo:[bt.Audio],mimeType:["audio/eac3"],extension:["eac3","ec3"]},vt[bt.Org3gppAdaptiveMultiRateAudio]={conformsTo:[bt.Audio],mimeType:["audio/amr"],extension:["amr"]},vt[bt.AacAudio]={conformsTo:[bt.Audio],mimeType:["audio/aac","audio/x-aac"],extension:["aac","adts"]},vt[bt.ComAudibleAaAudio]={conformsTo:[bt.Audio],mimeType:[],extension:[]},vt[bt.ComAudibleAaAudiobook]={conformsTo:[bt.ComAudibleAaAudio],mimeType:["audio/audible","audio/x-pn-audibleaudio","audio/x-audible"],extension:["aa"]},vt[bt.ComAudibleAaxAudiobook]={conformsTo:[bt.ComAudibleAaAudio],mimeType:["audio/vnd.audible.aax"],extension:["aax"]},vt[bt.ComSonyWave64]={conformsTo:[bt.Audio],mimeType:[],extension:["w64"]},vt[bt.ComAppleLocalizedPdfBundle]={conformsTo:[bt.ComAppleLocalizableNameBundle,bt.ComApplePackage,bt.CompositeContent],mimeType:[],extension:["lpdf"]},vt[bt.AppCategoryVideo]={conformsTo:[bt.AppCategory],mimeType:[],extension:[]},vt[bt.AppCategoryPhotographyAndVideo]={conformsTo:[bt.AppCategoryPhotography,bt.AppCategoryVideo],mimeType:[],extension:[]},vt);function Et(t,e){if(!t||!e)return!1;if(t===e)return!0;if(o=t,Object.keys(Mt).includes(o)){var i=[].concat(Mt[t].conformsTo);if(!i||i.length<1)return!1;if(i.includes(e))return!0;if(i)for(var n=0;n<i.length;n++)if(Et(i[n],e))return!0}var o;return!1}function xt(t){if(!t||!t.resOriginalFileType)return bt.Unknown;var e=t.resOriginalFileType;return Et(e,bt.Jpeg)?bt.Jpeg:Et(e,bt.HeifStandard)?bt.HeifStandard:Et(e,bt.CameraRawImage)?bt.CameraRawImage:Et(e,bt.ComCompuserveGif)?bt.ComCompuserveGif:Et(e,bt.Png)?bt.Png:Et(e,bt.Tiff)?bt.Tiff:Et(e,bt.ComAdobePdf)?bt.ComAdobePdf:Et(e,bt.ComAdobePhotoshopImage)?bt.ComAdobePhotoshopImage:Et(e,bt.Jpeg2000)?bt.Jpeg2000:Et(e,bt.Audio)?bt.Audio:Et(e,bt.Movie)?bt.Movie:bt.Unknown}function It(t){if(t&&t.codec){var e=t.codec.toLowerCase().split(".").join("");return-1!==e.indexOf("prores")?Ct.ProRes:-1!==e.indexOf("hevc")?Ct.HEVC:-1!==e.indexOf("h264")?Ct.H264:void 0}}function At(t){return It(t)===Ct.ProRes}function Pt(t){return void 0!==t&&void 0!==t.resVidHDRMedRes}function Rt(t){if(t)return t._assetSubtypeV2||t._assetSubtype}function Ot(t){if(t&&t.burstId&&(void 0!==t.burstFlags||void 0!==t.burstFlagsExt)){var e=31&t.burstFlags|2147483616&t.burstFlagsExt;return Boolean(e&Lt.STACK)}return!1}[].concat(Mt[bt.Jpeg].mimeType,Mt[bt.Png].mimeType,Mt[bt.ComCompuserveGif].mimeType,Mt[bt.ComMicrosoftBmp].mimeType),function(){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){var e=t.width>0&&t.height>0;e}}(),function(t){t.ProRes="ProRes",t.HEVC="HEVC",t.H264="H264"}(Ct||(Ct={})),function(t){t[t.None=0]="None",t[t.PhotoPanorama=1]="PhotoPanorama",t[t.PhotoSupportingVideo=2]="PhotoSupportingVideo",t[t.PhotoScreenshot=3]="PhotoScreenshot",t[t.VideoSlomo=100]="VideoSlomo",t[t.VideoTimelapse=101]="VideoTimelapse",t[t.VideoScreenRecording=102]="VideoScreenRecording"}(kt||(kt={})),function(t){t[t.NotCustom=0]="NotCustom",t[t.Custom=1]="Custom",t[t.HDRImage=2]="HDRImage",t[t.HDRPlusEV0_HDRImage=3]="HDRPlusEV0_HDRImage",t[t.HDRPlusEV0_EV0Image=4]="HDRPlusEV0_EV0Image",t[t.PanoramaImage=6]="PanoramaImage",t[t.SDOFImage=7]="SDOFImage",t[t.SDOFPlusOriginal_SDOFImage=8]="SDOFPlusOriginal_SDOFImage",t[t.SDOFPlusOriginal_OriginalImage=9]="SDOFPlusOriginal_OriginalImage"}(St||(St={})),function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.AUTOLOOP=1]="AUTOLOOP",t[t.PORTRAIT=2]="PORTRAIT",t[t.LONG_EXPOSURE=4]="LONG_EXPOSURE",t[t.MIRROR=8]="MIRROR"}(Tt||(Tt={})),function(t){t[t.NOT_IN_BURST=0]="NOT_IN_BURST",t[t.UNKNOWN=1]="UNKNOWN",t[t.NOT_PICKED=2]="NOT_PICKED",t[t.AUTO_PICKED=4]="AUTO_PICKED",t[t.USER_FAVORITE=8]="USER_FAVORITE",t[t.STACK=16]="STACK",t[t.FIRST_PICKED=32]="FIRST_PICKED"}(Lt||(Lt={}));var Dt=i(1391);function Nt(t,e){var i=null==e?void 0:e.PixelWidth,n=null==e?void 0:e.PixelHeight;return i&&n||(i=null==t?void 0:t.resOriginalWidth,n=null==t?void 0:t.resOriginalHeight),i&&n?{width:i,height:n}:void 0}function zt(t){return!(null==t||!t.duration)}function Ft(t){return r.assetSubtypeForHash(t)===kt.PhotoScreenshot}function Ut(t){return r.assetSubtypeForHash(t)===kt.VideoScreenRecording}function Kt(t,e,i){var a,l=Nt(e,i),h=void 0;l&&(a=l.width,h=l.height);var c=r.assetSubtypeForHash(t),d=o.getExif(i),u=n.getLensMake(d),p=n.getLensModel(d),m=o.getMake(i);return c===kt.PhotoPanorama?st.a:Ft(t)?lt.a:Ut(t)?ct:o.getIsCinematicVideo(i)?wt:c===kt.VideoSlomo?dt.a:c===kt.VideoTimelapse?ut.a:a&&h&&u&&p&&m&&function(t,e,i,n,o){if(e&&i){if("Apple"===e&&-1!==i.toLowerCase().indexOf("front")&&-1!==i.toLowerCase().indexOf("camera"))return!0}else if("Apple"===t&&function(t,e){return 640===t&&480===e||480===t&&640===e||1280===t&&960===e||960===t&&1280===e}(n,o))return!0;return!1}(m,u,p,a,h)?gt:function(t){if(!t)return!1;var e,i=t.customRenderedValue,n=!1;return void 0!==t._adjustmentRenderType&&(n=(e=t._adjustmentRenderType,Object(Dt.b)(e||0,4)).includes(Tt.PORTRAIT)),i===St.SDOFImage||i===St.SDOFPlusOriginal_SDOFImage||n}(t)?rt.a:s.isProResForHash(e)?_t:zt(t)?pt.a:c===kt.PhotoSupportingVideo?at.a:void 0}var Bt=["CEKSemanticStyleMakerPresetStandard","CEKSemanticStyleMakerPresetCustom","CEKSemanticStyleMakerPresetVibrant","CEKSemanticStyleMakerPresetRichContrast","CEKSemanticStyleMakerPresetWarm","CEKSemanticStyleMakerPresetCool","CEKSemanticStyleMakerPresetVibrantWarm","CEKSemanticStyleMakerPresetVibrantCool","CEKSemanticStyleMakerPresetRichWarm","CEKSemanticStyleMakerPresetRichCool"];var Gt,Wt=i(1353);function Zt(t){if(void 0!==t&&null!==t)return Math.round(10*t)/10}function jt(t){var e=o.getExif(t);if(e&&e&&e.ISOSpeedRatings){var i=Zt(1===e.ISOSpeedRatings.length?e.ISOSpeedRatings[0]:void 0);if(i)return Object(m.a)("InfoPanel.Metadata.ISOFormat",{iso:i})}}function Ht(t){if(o.getExif(t)){var e=Zt(o.getFocalLenIn35mmFilm(t)||o.getFocalLength(t));return e?Object(m.a)("InfoPanel.Metadata.FocalLengthFormat",{focalLength:e}):void 0}}function Vt(t,e){var i=o.getExif(e);if(i){var n=i.ExposureBiasValue;if(null!==n&&void 0!==n){var a=Zt(n);if(!Ft(t))return Object(m.a)("InfoPanel.Metadata.ExposureCompensationFormat",{exposureCompensation:a})}}}function qt(t){var e=o.getExif(t);if(e){var i=null==e?void 0:e.FNumber;return i?"\u0192"+Zt(i):void 0}}function Xt(t){if(t){var e=Zt(t.videoFrameRate);return void 0===e||null===e?void 0:Object(m.a)("InfoPanel.Metadata.FrameRateFormat",{frameRate:e})}}function Yt(t){var e=o.getExif(t);if(e){var i=e.ExposureTime;if(void 0!==i&&null!==i){var n=function(t){if(void 0!==t&&null!==t&&!isNaN(t))return t<.25001&&t>0?"1/"+Math.floor(.5+1/t):""+Zt(t)}(i);if(n)return Object(m.a)("InfoPanel.Metadata.ShutterSpeedFormat",{shutterSpeed:n})}}}function Qt(t){var e=null==t?void 0:t.duration;return null==e||void 0===e?void 0:function(t){if(void 0===t)return"";var e=Math.round(t/1e3),i=e%60,n=e/60%60|0,o=e/3600|0;return 0===o&&0===n&&0===i&&t>0&&(i=1),o?o+":"+Jt(n)+":"+Jt(i):n+":"+Jt(i)}(e)}!function(t){t[t.Burst=0]="Burst",t[t.RAW=1]="RAW",t[t.RAWPlusJPEG=2]="RAWPlusJPEG",t[t.JPEG=3]="JPEG",t[t.JPEGPlusLivePhoto=4]="JPEGPlusLivePhoto",t[t.HEIF=5]="HEIF",t[t.HEIFPlusLivePhoto=6]="HEIFPlusLivePhoto",t[t.GIF=7]="GIF",t[t.TIFF=8]="TIFF",t[t.PNG=9]="PNG",t[t.PDF=10]="PDF",t[t.PSD=11]="PSD",t[t.JP2=12]="JP2",t[t.Movie=13]="Movie",t[t.Audio=14]="Audio",t[t.TimeLapse=15]="TimeLapse",t[t.SloMo=16]="SloMo",t[t.Unknown=17]="Unknown"}(Gt||(Gt={}));var Jt=function(t){return("00"+t).slice(-2)},$t=i(1480);const te=i(1152).createElement;var ee=function(t){return te(d.a,{originalProps:t,metadata:{name:"tv",svgPath:"M 25 -3.02734 L 121.875 -3.02734 C 130.225 -3.02734 134.375 -7.03125 134.375 -15.5762 L 134.375 -71.5332 C 134.375 -80.0781 130.225 -84.082 121.875 -84.082 L 25 -84.082 C 16.6504 -84.082 12.4512 -80.0781 12.4512 -71.5332 L 12.4512 -15.5762 C 12.4512 -7.03125 16.6504 -3.02734 25 -3.02734 Z M 25.1465 -10.8887 C 21.7773 -10.8887 20.3125 -12.2559 20.3125 -15.7227 L 20.3125 -71.4355 C 20.3125 -74.8535 21.7773 -76.2207 25.1465 -76.2207 L 121.729 -76.2207 C 125.049 -76.2207 126.514 -74.8535 126.514 -71.4355 L 126.514 -15.7227 C 126.514 -12.2559 125.049 -10.8887 121.729 -10.8887 Z M 48.9258 13.4766 L 97.9004 13.4766 C 100.098 13.4766 101.855 11.7188 101.855 9.57031 C 101.855 7.37305 100.098 5.56641 97.9004 5.56641 L 48.9258 5.56641 C 46.7773 5.56641 44.9707 7.37305 44.9707 9.57031 C 44.9707 11.7188 46.7773 13.4766 48.9258 13.4766 Z",layoutBox:{viewBox:"0 0 233.30078125 159.98291015625",width:233.30078125,height:159.98291015625,translateX:43.237250976562564,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 121.923828125 97.7041015625",width:121.923828125,height:97.7041015625,translateX:-12.451225585937436,translateY:84.08203125,baseline:84.08203125,capline:13.6220703125}}})},ie=function(){return l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",className:"InfoPanelMetadata-nightmodeIcon"},l.createElement("path",{d:"M8.47 15.31c2.59 0 4.874-1.38 6.152-3.438a6.84 6.84 0 0 0 .595-1.183H7.13a6.913 6.913 0 0 1-.711-.704h9.03a6.52 6.52 0 0 0 .233-1.271H5.51a8.231 8.231 0 0 1-.342-.697h10.541a7.782 7.782 0 0 0-.116-1.272H4.758a7.956 7.956 0 0 1-.116-.704h10.766a6.405 6.405 0 0 0-.506-1.271H4.601c.013-.233.04-.472.075-.698h9.803a6.756 6.756 0 0 0-1.06-1.271H4.997c.089-.24.185-.479.294-.704h7.185A6.951 6.951 0 0 0 8.463.825c-.937 0-1.832.185-2.68.533-.034.014-.075.028-.116.048l.014-.02c-2.612 1.1-4.457 3.691-4.457 6.685 0 3.979 3.267 7.24 7.246 7.24Zm3.363-2.87c-.91 0-1.777-.171-2.577-.48h5.154a7.19 7.19 0 0 1-2.577.48Z",fillRule:"nonzero"}))},ne=function(t){var e=t.assetHash,i=t.masterHash,h=t.mediaMetaDataHash,c=function(t){if(!t)return Object(m.a)("PXInfoPanelLCDUnknownLens");var e=o.getMake(t),i=o.getModel(t)||"",n=o.getLensModel(t);if(!e||-1===e.toLowerCase().indexOf("apple"))return n?ot(n):Object(m.a)("PXInfoPanelLCDUnknownLens");if(n){var a=n,s=function(t){for(var e=t.split(" "),i=0;i<e.length;i++)if(-1!==e[i].indexOf("f/"))return e[i]}(a=a.split(i).join("")),r=nt(a),l=function(t,e){if(e&&(!e||-1!==e.toLowerCase().indexOf("iphone"))){var i=C[e];if(i&&t){var n=i[t];if(n)return{lensDisplayName:n.lensNameKey,focalLengthIn35mmKey:n.focalLengthIn35mmKey}}}}(r,i);if(l){var h=g(l.focalLengthIn35mmKey,!0);a=l.lensDisplayName+" \u2014 "+h+" "+s}else{var c=o.getDigitalZoomRatio(t),d=o.getFocalLenIn35mmFilm(t);if(void 0!==r&&void 0!==d){var u=void 0!==c&&c>0?d/(c||0):d,p=nt(a),f=g(Math.round(u),!0);p&&f&&(a=a.split(p.toString()+"mm").join(f))}a=function(t){var e=t.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}));return(e=(e=(e=(e=e.split("Facetime").join(Object(m.a)("PXInfoPanelLCDFaceTimeCamera"))).split("Isight").join(Object(m.a)("PXInfoPanelLCDFrontiSightCamera"))).split("Truedepth").join(Object(m.a)("PXInfoPanelLCDFrontTrueDepthCamera"))).split("Mm").join("mm")).split("Camera").join("Camera \u2014 ")}(a)}return ot(a)}return Object(m.a)("PXInfoPanelLCDUnknownLens")}(h),d=zt(e),u=Kt(e,i,h),f=function(t){var e=o.getMakerNotes(t);if(e){var i=a.semanticStyleObjectFromMakerNotes(e);if(i){var n=function(t){if(t){var e=t[a.SemanticStyleKeys.Preset];return void 0===e||e<0||e>Bt.length-1?void 0:Bt[e]}}(i);if(n&&"CEKSemanticStyleMakerPresetStandard"!==n)return Object(m.a)(n)}}}(h),_=function(t){return 9===n.getFlash(o.getExif(t))}(h),y=function(t,e){if(e){var i=s.codecForHash(e);if(void 0!==i)switch(i){case Ct.HEVC:return Object(m.a)("PXInfoPanelCodecTypeHEVC");case Ct.ProRes:return Object(m.a)("PRORES_BADGE_TEXT");case Ct.H264:return Object(m.a)("PXInfoPanelCodecTypeH264")}switch(function(t,e){if(!e||!e.resOriginalFileType)return Gt.Unknown;if(r.getIsBurstFromAssetHash(t))return Gt.Burst;var i=s.originalType(e),n=r.assetSubtypeForHash(t);switch(i){case Wt.b.CameraRawImage:return Gt.RAW;case Wt.b.Jpeg:return n===kt.PhotoSupportingVideo?Gt.JPEGPlusLivePhoto:Gt.JPEG;case Wt.b.HeifStandard:return n===kt.PhotoSupportingVideo?Gt.HEIFPlusLivePhoto:Gt.HEIF;case Wt.b.ComCompuserveGif:return Gt.GIF;case Wt.b.Tiff:return Gt.TIFF;case Wt.b.Png:return Gt.PNG;case Wt.b.ComAdobePdf:return Gt.PDF;case Wt.b.ComAdobePhotoshopImage:return Gt.PSD;case Wt.b.Jpeg2000:return Gt.JP2;case Wt.b.Audio:return Gt.Audio;case Wt.b.Movie:return n===kt.VideoTimelapse?Gt.TimeLapse:n===kt.VideoSlomo?Gt.SloMo:Gt.Movie;default:return Gt.Unknown}}(t,e)){case Gt.RAW:return Object(m.a)("PXInfoPanelFileTypeRAW");case Gt.JPEG:case Gt.JPEGPlusLivePhoto:case Gt.Burst:return Object(m.a)("PXInfoPanelFileTypeJPEG");case Gt.HEIF:case Gt.HEIFPlusLivePhoto:return Object(m.a)("PXInfoPanelFileTypeHEIF");case Gt.GIF:return Object(m.a)("PXInfoPanelFileTypeGIF");case Gt.TIFF:return Object(m.a)("PXInfoPanelFileTypeTIFF");case Gt.PNG:return Object(m.a)("PXInfoPanelFileTypePNG");case Gt.PDF:return Object(m.a)("PXInfoPanelFileTypePDF");case Gt.PSD:return Object(m.a)("PXInfoPanelFileTypePSD");case Gt.JP2:return Object(m.a)("PXInfoPanelFileTypeJP2");case Gt.Movie:case Gt.SloMo:case Gt.TimeLapse:case Gt.Audio:case Gt.Unknown:return}}}(e,i),v=function(t){if(s.isHDRVideoForHash(t))return s.isProResForHash(t)?Object(m.a)("PHOTOS_DETAILS_EXIF_VIDEO_HDR_PRORES_BADGE"):Object(m.a)("PHOTOS_DETAILS_EXIF_VIDEO_HDR_BADGE")}(i);return l.createElement("div",{className:"InfoPanelMetadata"},l.createElement("div",{className:"InfoPanelMetadata-section InfoPanelMetadata-header"},l.createElement($t.a,{variant:"bodySmall",component:"span"},function(t,e){var i=o.getMakeAndModel(e),n=(null==i?void 0:i.make)||"",a=(null==i?void 0:i.model)||"";if(n.length>0){var s=n.split(" ");if(1===s.length&&(s=n.split("/")),1===s.length&&(n=s[0].trim(),a.includes(n)||(a=(n+" "+a).trim())),a.length>0)return a}return Ft(t)?Object(m.a)("InfoPanel.Metadata.Screenshot"):Ut(t)?Object(m.a)("InfoPanel.Metadata.ScreenRecording"):Object(m.a)("InfoPanel.Metadata.NoCameraInfo")}(e,h)),l.createElement("div",{className:"InfoPanelMetadata-fileFormatContainer"},!!y&&l.createElement($t.a,{className:"InfoPanelMetadata-fileFormat",component:"div",variant:"infoPanelMetadata"},y),!!_&&l.createElement("div",{className:"InfoPanelMetadata-icon"},l.createElement(p,{desiredFontSize:12,layoutMode:"glyphBox"})),!!u&&l.createElement("div",{className:"InfoPanelMetadata-icon"},l.createElement(u,{desiredFontSize:12,layoutMode:"glyphBox"})))),l.createElement("div",{className:"InfoPanelMetadata-section InfoPanelMetadata-fileInfoSection"},l.createElement($t.a,{variant:"infoPanelMetadata",component:"div",className:"InfoPanelMetadata-lens"},c),l.createElement("div",{className:"InfoPanelMetadata-fileInfo"},l.createElement($t.a,{component:"div",variant:"infoPanelMetadata"},function(t,e,i){var n=Nt(e,i);if(!n)return"";var o=n.width,a=n.height,s=[];if(zt(t)){var r=function(t,e){var i=t>e?e:t;return 480===i?Object(m.a)("PXInfoPanelVideoResolution480p"):720===i?Object(m.a)("PXInfoPanelVideoResolution720p"):1080===i?Object(m.a)("PXInfoPanelVideoResolution1080p"):1440===i?Object(m.a)("PXInfoPanelVideoResolution1440p"):2160===i?Object(m.a)("PXInfoPanelVideoResolution4k"):4320===i?Object(m.a)("PXInfoPanelVideoResolution8k"):void 0}(o,a);r&&s.push(r)}else{var l=Math.floor(o*a/1e6);s.push(Object(m.a)("PXInfoPanelMegaPixelsFormat",{megapixels:l}))}s.push(Object(m.a)("PXInfoPanelLCDResolutionFormat",{width:o,height:a})),null!=e&&e.resOriginalResSize&&s.push(function(t){for(var e=["B","KB","MB","GB","TB"],i=0,n=e;i<n.length;i++){var o=n[i];if(t<1e3)return t.toFixed(1)+" "+o;t/=1e3}return t.toFixed(1)+" "+e[e.length-1]}(null==e?void 0:e.resOriginalResSize));var h=Object(m.a)("InfoPanel.Metadata.FileInfo.Separator");return s.join(h)}(e,i,h),!!v&&l.createElement(l.Fragment,null,Object(m.a)("InfoPanel.Metadata.FileInfo.Separator"),l.createElement("span",{className:"InfoPanelMetadata-fileInfo-HDRVideo"},l.createElement(ee,{desiredFontSize:9,layoutMode:"glyphBox",className:"InfoPanelMetadata-fileInfo-HDRVideo-badge"}),v))),!!f&&l.createElement($t.a,{component:"span",variant:"infoPanelMetadata",className:"InfoPanelMetadata-photographicStyle"},f))),l.createElement("div",{className:"InfoPanelMetadata-section InfoPanelMetadata-cameraInfo"},d?l.createElement(l.Fragment,null,l.createElement(ae,{str:Xt(i),isVideo:!0}),l.createElement(ae,{str:Qt(e),isVideo:!0})):l.createElement(l.Fragment,null,l.createElement(ae,{str:jt(h)}),l.createElement(ae,{str:Ht(h)}),l.createElement(ae,{str:Vt(e,h)}),l.createElement(ae,{str:qt(h)}),function(t){if(!t)return!1;var e=t["{MakerApple}"];if(e){var i=a.mediaMetadataTypeStillImageCaptureTypeFromMakerNotes(e);if(void 0!==i)return function(t){return 11===t}(i)}return!1}(h)?l.createElement(ae,{str:Yt(h),IncludedIcon:ie}):l.createElement(ae,{str:Yt(h)}))))},oe=l.memo(ne),ae=function(t){var e=t.str,i=t.IncludedIcon,n=t.isVideo,o=Object(m.a)("PXInfoPanelMissingValuePlaceholder");if(e){var a=c()("InfoPanelMetadata-cameraInfoCell",{"is-centered-cell":!!n});return l.createElement("div",{className:a},!!i&&l.createElement(i,null),l.createElement($t.a,{variant:"infoPanelMetadata",component:"span"},e))}return l.createElement("div",{className:"InfoPanelMetadata-cameraInfoCell is-centered-cell"},l.createElement($t.a,{variant:"infoPanelMetadata",component:"span"},o))},se=i(1468);const re=i(1152).createElement;var le=function(t){return re(d.a,{originalProps:t,metadata:{name:"arrow.up.right",svgPath:"M 84.5703 -17.334 L 84.5215 -66.4551 C 84.5215 -69.2383 82.7148 -71.1914 79.7852 -71.1914 L 30.6641 -71.1914 C 27.9297 -71.1914 26.0742 -69.0918 26.0742 -66.748 C 26.0742 -64.4043 28.1738 -62.4023 30.4688 -62.4023 L 47.4609 -62.4023 L 71.2891 -63.1836 L 62.207 -55.2246 L 13.8184 -6.73828 C 12.9395 -5.85938 12.4512 -4.73633 12.4512 -3.66211 C 12.4512 -1.31836 14.5508 0.878906 16.9922 0.878906 C 18.1152 0.878906 19.1895 0.488281 20.0684 -0.439453 L 68.5547 -48.877 L 76.6113 -58.0078 L 75.7324 -35.2051 L 75.7324 -17.1387 C 75.7324 -14.8438 77.7344 -12.6953 80.127 -12.6953 C 82.4707 -12.6953 84.5703 -14.6973 84.5703 -17.334 Z",layoutBox:{viewBox:"0 0 233.30078125 159.98291015625",width:233.30078125,height:159.98291015625,translateX:68.13969238281243,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 72.119140625 72.2177734375",width:72.119140625,height:72.2177734375,translateX:-12.451127929687573,translateY:71.3388671875,baseline:71.3388671875,capline:.87890625}}})},he=(i(2218),function(t){var e=c()("OutboundLink",t.className,{"is-disabled":t.disabled,"is-reduced":"reduced"===t.variant});return l.createElement("a",{className:e,onClick:t.onClick,href:t.linkUrl,target:"_blank",rel:"noopener noreferrer","aria-label":t.ariaTitle,title:t.ariaTitle},l.createElement($t.a,{className:"OutboundLink-text",variant:"reduced"===t.variant?"bodySmall":"body",component:"span"},l.createElement("span",{className:"OutboundLink-textContent"},t.children),"\xa0",l.createElement(se.a,{color:se.c.Primary,desiredFontSize:"reduced"===t.variant?7:10,symbol:le})))}),ce=i(1150),de=i(1463);const ue=i(1152).createElement;var pe,me=function(t){return ue(d.a,{originalProps:t,metadata:{name:"photo.fill",svgPath:"M 27.7832 9.76562 L 112.256 9.76562 C 122.51 9.76562 127.588 4.6875 127.588 -5.37109 L 127.588 -64.9902 C 127.588 -75.0488 122.51 -80.127 112.256 -80.127 L 27.7832 -80.127 C 17.5781 -80.127 12.4512 -75.0977 12.4512 -64.9902 L 12.4512 -5.37109 C 12.4512 4.73633 17.5781 9.76562 27.7832 9.76562 Z M 49.0723 -33.9844 C 42.4316 -33.9844 37.0117 -39.4043 37.0117 -46.0449 C 37.0117 -52.6367 42.4316 -58.1055 49.0723 -58.1055 C 55.6641 -58.1055 61.084 -52.6367 61.084 -46.0449 C 61.084 -39.4043 55.6641 -33.9844 49.0723 -33.9844 Z M 27.8809 1.9043 C 23.1445 1.9043 20.3125 -0.927734 20.3125 -5.71289 L 20.3125 -8.69141 L 35.3027 -21.7773 C 37.4512 -23.6816 39.7949 -24.6582 41.9434 -24.6582 C 44.3359 -24.6582 46.8262 -23.6816 48.9746 -21.6797 L 58.3008 -13.2812 L 81.6406 -33.9844 C 84.0332 -36.1328 86.7188 -37.1094 89.502 -37.1094 C 92.1875 -37.1094 94.9707 -36.084 97.2656 -33.9355 L 119.727 -13.1348 L 119.727 -5.61523 C 119.727 -0.927734 116.846 1.9043 112.207 1.9043 Z",layoutBox:{viewBox:"0 0 233.30078125 159.98291015625",width:233.30078125,height:159.98291015625,translateX:46.630852050781186,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 115.1368408203125 89.9912109375",width:115.1368408203125,height:89.9912109375,translateX:-12.451118164062564,translateY:80.2255859375,baseline:80.2255859375,capline:9.765625}}})},ge=i(1941),fe=i.n(ge),_e=(i(2217),function(t){var e=t.image,i=l.useRef(null);return l.useLayoutEffect((function(){var t=i.current;return t&&(t.firstChild&&t.removeChild(t.firstChild),e&&t.appendChild(e)),function(){e&&e.remove()}}),[e]),l.createElement("div",{className:"InfoPanelMap-annotation"},!e&&l.createElement(me,{className:"InfoPanelMap-annotationIcon",layoutMode:"glyphBox",desiredFontSize:14}),l.createElement("div",{ref:i,className:"InfoPanelMap-annotationImg"}))});!function(t){t[t.NotInitialized=0]="NotInitialized",t[t.Initializing=1]="Initializing",t[t.Loaded=2]="Loaded"}(pe||(pe={}));var ye=pe.NotInitialized,ve=function(t){var e=t.lat,i=t.long,n=t.jwt,o=t.thumbnail,a=t.itemLocationString,s=l.useRef(null),r=l.useRef(),h=l.useRef(),c=Object(de.a)();function d(){if(c()&&!r.current&&ye===pe.Loaded){var t=be(e,i),n=Ce(t);ke(t,o).then((function(t){h.current=t;var o=new fe.a.Map(s.current,{region:n,isScrollEnabled:!1,isZoomEnabled:!1,annotations:[t]});o.setCenterAnimated(we(e,i),!1),r.current=o}))}}l.useLayoutEffect((function(){var t=r.current;if(ye===pe.Loaded&&t&&t.region){var n=be(e,i),a=Ce(n);t.setRegionAnimated(a,!1),function(t,e){t.removeAnnotations(t.annotations),e&&e.element&&ce.unmountComponentAtNode(e.element)}(t,h.current),t.setCenterAnimated(we(e,i),!1),ke(n,o).then((function(e){h.current=e,t.addAnnotation(e)}))}}),[o,e,i]),l.useEffect((function(){r.current||ye===pe.Initializing||(ye===pe.Loaded?d():n&&(ye=pe.Initializing,fe.a.init({authorizationCallback:function(t){t(n),ye=pe.Loaded,d()}})))}));var u,p=Object(m.a)("InfoPanel.Map.LinkTitle");return a&&e&&i&&(u=l.createElement(he,{variant:"reduced",ariaTitle:p,linkUrl:"https://maps.apple.com/place?/&ll="+encodeURIComponent(e+","+i)},a)),n||a?l.createElement("div",{className:"InfoPanelMap"},n&&l.createElement("div",{className:"InfoPanelMap-mapContainer",ref:s}),l.createElement("div",{className:"InfoPanelMap-placeContainer"},u)):l.createElement(l.Fragment,null)};function be(t,e){return new fe.a.Coordinate(t,e)}function we(t,e){return new fe.a.Coordinate(t+.0016,e)}function Ce(t){var e=new fe.a.CoordinateSpan(.01,.01);return new fe.a.CoordinateRegion(t,e)}function ke(t,e){return new Promise((function(i){var n=new fe.a.Annotation(t,(function(){return function(t,e){var o=document.createElement("div");return ce.render(t,o,(function(){return i(n)})),o}(l.createElement(_e,{image:e}))}))}))}i(1820);const Se=i(1152).createElement;var Te=function(t){return Se(d.a,{originalProps:t,metadata:{name:"checkmark.icloud",svgPath:"M 105.225 3.22266 C 119.971 3.22266 131.494 -7.56836 131.494 -20.9961 C 131.494 -31.25 125.586 -40.1367 116.064 -44.1406 C 116.162 -65.918 100.488 -81.6406 80.5176 -81.6406 C 67.2852 -81.6406 57.8613 -74.5605 52.002 -66.0156 C 39.9902 -69.5312 26.9043 -60.4004 26.6602 -46.7285 C 15.625 -44.9707 8.74023 -35.1074 8.74023 -23.1934 C 8.74023 -8.83789 21.2891 3.22266 37.9883 3.22266 Z M 105.225 -4.63867 L 37.9883 -4.63867 C 25.6836 -4.63867 16.6016 -13.2324 16.6016 -23.1934 C 16.6016 -32.959 22.5098 -40.7227 32.8613 -40.7227 C 33.5449 -40.7227 33.7891 -41.0645 33.7891 -41.6992 C 33.7891 -56.7383 44.6289 -61.1816 54.6387 -57.9102 C 55.2246 -57.7148 55.5664 -57.8613 55.8594 -58.3984 C 60.5957 -66.8457 67.8711 -73.7793 80.5176 -73.7793 C 96.5332 -73.7793 107.617 -61.084 108.447 -46.582 C 108.594 -44.3359 108.447 -41.6992 108.252 -39.4043 C 108.203 -38.7695 108.447 -38.4277 109.033 -38.2812 C 117.92 -36.3281 123.633 -29.834 123.633 -20.9961 C 123.633 -11.9141 115.625 -4.63867 105.225 -4.63867 Z M 66.6504 -15.9668 C 68.2617 -15.9668 69.6289 -16.748 70.5566 -18.2129 L 89.6484 -49.3164 C 90.1367 -50.0977 90.7715 -51.2207 90.7715 -52.3438 C 90.7715 -54.4922 88.916 -56.1035 86.6211 -56.1035 C 85.2539 -56.1035 83.9355 -55.2734 83.1543 -53.9062 L 66.4551 -26.0254 L 58.0566 -37.0117 C 57.1289 -38.2812 55.9082 -38.9648 54.4434 -38.9648 C 52.2461 -38.9648 50.4883 -37.207 50.4883 -34.9121 C 50.4883 -33.8867 50.8789 -32.9102 51.6113 -31.9336 L 62.5488 -18.1641 C 63.7207 -16.6504 65.0391 -15.9668 66.6504 -15.9668 Z",layoutBox:{viewBox:"0 0 233.30078125 159.98291015625",width:233.30078125,height:159.98291015625,translateX:46.53328369140627,translateY:115.221435546875,baseline:115.221435546875,capline:44.761474609375},glyphBox:{viewBox:"0 0 122.7537841796875 92.8212890625",width:122.7537841796875,height:92.8212890625,translateX:-8.740214843749982,translateY:81.640625,baseline:81.640625,capline:11.1806640625}}})},Le=["com.apple.mobileslideshow","com.apple.Photos","com.apple.sharingd","com.apple.springboard","com.apple.camera","com.apple.share.System.add-to-iphoto","com.apple.camera.CameraMessagesApp"],Me=i(1460),Ee=i(1471),xe=i(1461),Ie=i(1936),Ae=i(1488),Pe=i(1489),Re=l.useLayoutEffect,Oe=function(t,e){"function"!==typeof t?t.current=e:t(e)},De={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Ne=function(t){Object.keys(De).forEach((function(e){t.style.setProperty(e,De[e],"important")}))},ze=null,Fe=function(){},Ue=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Ke=!!document.documentElement.currentStyle,Be=function(t,e){var i=t.cacheMeasurements,n=t.maxRows,o=t.minRows,a=t.onChange,s=void 0===a?Fe:a,r=t.onHeightChange,h=void 0===r?Fe:r,c=Object(Pe.a)(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),d=void 0!==c.value,u=Object(l.useRef)(null),p=function(t,e){var i=Object(l.useRef)();return Object(l.useCallback)((function(n){t.current=n,i.current&&Oe(i.current,null),i.current=e,e&&Oe(e,n)}),[e])}(u,e),m=Object(l.useRef)(0),g=Object(l.useRef)(),f=function(){var t=u.current,e=i&&g.current?g.current:function(t){var e=window.getComputedStyle(t);if(null===e)return null;var i,n=(i=e,Ue.reduce((function(t,e){return t[e]=i[e],t}),{})),o=n.boxSizing;return""===o?null:(Ke&&"border-box"===o&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px"),{sizingStyle:n,paddingSize:parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),borderSize:parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth)})}(t);if(e){g.current=e;var a=function(t,e,i,n){void 0===i&&(i=1),void 0===n&&(n=1/0),ze||((ze=document.createElement("textarea")).setAttribute("tabindex","-1"),ze.setAttribute("aria-hidden","true"),Ne(ze)),null===ze.parentNode&&document.body.appendChild(ze);var o=t.paddingSize,a=t.borderSize,s=t.sizingStyle,r=s.boxSizing;Object.keys(s).forEach((function(t){var e=t;ze.style[e]=s[e]})),Ne(ze),ze.value=e;var l=function(t,e){var i=t.scrollHeight;return"border-box"===e.sizingStyle.boxSizing?i+e.borderSize:i-e.paddingSize}(ze,t);ze.value="x";var h=ze.scrollHeight-o,c=h*i;"border-box"===r&&(c=c+o+a),l=Math.max(c,l);var d=h*n;return"border-box"===r&&(d=d+o+a),[l=Math.min(d,l),h]}(e,t.value||t.placeholder||"x",o,n),s=a[0],r=a[1];m.current!==s&&(m.current=s,t.style.setProperty("height",s+"px","important"),h(s,{rowHeight:r}))}};return Object(l.useLayoutEffect)(f),function(t){var e=function(t){var e=l.useRef(t);return Re((function(){e.current=t})),e}(t);Object(l.useLayoutEffect)((function(){var t=function(t){e.current(t)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[])}(f),Object(l.createElement)("textarea",Object(Ae.a)({},c,{onChange:function(t){d||f(),s(t)},ref:p}))},Ge=Object(l.forwardRef)(Be),We=i(1937),Ze=(i(1939),["className","id","labelText","useAutoSize"]);function je(){return(je=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}var He=l.forwardRef((function(t,e){var i,n=t.className,o=t.id,a=t.labelText,s=t.useAutoSize,r=function(t,e){if(null==t)return{};var i,n,o={},a=Object.keys(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(o[i]=t[i]);return o}(t,Ze),h=l.useState(!1),d=h[0],u=h[1],p=Object(Ie.a)(o),m=Object(Me.b)().pointerType===xe.b.Coarse,g=c()("MarcomTextArea",n,{"is-coarse-pointer":m,"has-value":!!r.value,"is-autosizing":!!s,"is-focused":d}),f=p+"_label",_=function(e){u(!0),t.onFocus&&t.onFocus(e)},y=function(e){u(!1),t.onBlur&&t.onBlur(e)};return i=s?l.createElement(Ge,je({id:p},r,{"aria-labelledby":f,className:"MarcomTextArea-textarea",onFocus:_,onBlur:y})):l.createElement("textarea",je({ref:e,id:p},r,{"aria-labelledby":f,className:"MarcomTextArea-textarea",onFocus:_,onBlur:y})),l.createElement("div",{className:g},l.createElement("div",{className:"MarcomTextArea-textareaWrapper"},i,l.createElement(We.a,{inputId:p,labelId:f,text:a})))}));He.displayName="MarcomTextArea";var Ve=i(1934),qe=(i(1933),function(t){var e,i=c()("InfoPanelCaptionBlock",t.className),n=t.titleText,o=t.captionText,a=t.onTitleAndCaptionChange,s=t.assetPK,r=Object(Me.b)().pointerType,h=Object(m.a)("InfoPanel.Label.Title"),d=Object(m.a)("InfoPanel.Label.Caption"),u=l.useState(o||""),p=u[0],g=u[1],f=l.useState(n||""),_=f[0],y=f[1],v=l.useState(!1),b=v[0],w=v[1];return l.useEffect((function(){w(!1)}),[s]),l.useEffect((function(){b||(y(n||""),g(o||""))}),[b,n,o]),e=b&&s?l.createElement("div",{className:"InfoPanelCaptionBlock-editing"},l.createElement("div",{className:"InfoPanelCaptionBlock-buttons"},l.createElement(Ee.a,{className:"InfoPanelCaptionBlock-cancel no-margin-start",textColor:Ee.b.Primary,onActivate:function(){w(!1)},pointerType:r,text:Object(m.a)("Button.Cancel"),wantsHoverStyle:!1}),l.createElement(Ee.a,{className:"InfoPanelCaptionBlock-save no-margin-end",textColor:Ee.b.Primary,onActivate:function(){a(_.trim(),p.trim()),w(!1)},pointerType:r,textWeight:"semibold",text:Object(m.a)("Button.Save"),wantsHoverStyle:!1})),l.createElement(Ve.a,{className:"InfoPanel-title",labelText:h,value:_,onChange:function(t){y(t.target.value)}}),l.createElement(He,{className:"InfoPanel-caption",labelText:d,value:p,useAutoSize:!0,onChange:function(t){g(t.target.value)},maxRows:4})):l.createElement("div",{className:"InfoPanelCaptionBlock-readOnly"},l.createElement("div",{className:"InfoPanelCaptionBlock-rows"},l.createElement(Xe,{label:h,value:n,preserveWhiteSpace:!1,emptyValue:Object(m.a)("InfoPanel.NoTitle")}),l.createElement(Xe,{label:d,value:o,preserveWhiteSpace:!0,emptyValue:Object(m.a)("InfoPanel.NoCaption")})),!!s&&!t.editingDisabled&&l.createElement(Ee.a,{className:"InfoPanelCaptionBlock-edit no-margin-end",onActivate:function(){w(!0)},text:Object(m.a)("Button.Edit"),wantsHoverStyle:!1,pointerType:r,textColor:Ee.b.Primary})),l.createElement("div",{className:i},e)}),Xe=function(t){return l.createElement("div",{className:c()("InfoPanelCaptionBlock-row",{"is-empty":!t.value})},l.createElement($t.a,{className:"InfoPanelCaptionBlock-rowLabel",component:"div",variant:"labelSmall"},t.label),l.createElement($t.a,{component:"div",variant:"bodySmall",className:c()("InfoPanelCaptionBlock-rowValue",{"is-pre":t.preserveWhiteSpace})},t.value||t.emptyValue))};function Ye(t){var e=t.children,i=t.interpolations,n=Object.entries(i).sort((function(t,e){var i=t[0];return e[0].length-i.length})).reduce((function(t,i){var n=i[0],o=i[1];if(-1===e.indexOf(n))throw'Unable to interpolate. Match not found for "'+n+'" in string: "'+e+'"';return t.reduce((function(t,e){if("string"===typeof e){var i=e.split(n);i.forEach((function(e,a){""!==e&&t.push(e),a<i.length-1&&t.push({value:o,key:n+"-"+a})}))}else t.push(e);return t}),[])}),[e]);return l.createElement(l.Fragment,null,n.map((function(t){if("string"===typeof t)return t;var e=t.value,i=t.key;return l.isValidElement(e)?l.cloneElement(e,{key:null===e.key?i:e.key}):e})))}i(2219);var Qe=function(t){var e=t.addedByNames,i=l.createElement($t.a,{className:"InfoPanelSource-sharedLibrary"},Object(m.a)("Library.Shared")),n=l.createElement($t.a,{weight:"semibold",className:"InfoPanelSource-name"},e[0]);return 0===e.length?l.createElement(Ye,{interpolations:{"#{sharedLibrary}":i}},Object(m.a)("InfoPanel.AddedBy.NoNames")):1===e.length?l.createElement(Ye,{interpolations:{"#{name1}":n,"#{sharedLibrary}":i}},Object(m.a)("InfoPanel.AddedBy.OnePerson")):2===e.length?l.createElement(Ye,{interpolations:{"#{name1}":n,"#{name2}":l.createElement($t.a,{weight:"semibold",className:"InfoPanelSource-name"},e[1]),"#{sharedLibrary}":i}},Object(m.a)("InfoPanel.AddedBy.TwoPeople")):l.createElement(Ye,{interpolations:{"#{name1}":n,"#{name2}":l.createElement($t.a,{weight:"semibold",className:"InfoPanelSource-name"},e[1]),"#{others}":l.createElement($t.a,{weight:"semibold",className:"InfoPanelSource-name"},Object(m.b)("InfoPanel.AddedBy.Others",e.length-2)),"#{sharedLibrary}":i}},Object(m.a)("InfoPanel.AddedBy.MorePeople"))},Je=function(t){var e=t.addedByNames,i=t.savedFromApp;return l.createElement("div",{className:"InfoPanelSource"},!!e&&l.createElement("div",{className:"InfoPanelSource-row"},l.createElement($t.a,{variant:"bodySmall",component:"div",className:"InfoPanelSource-text"},l.createElement(Qe,{addedByNames:e}))),!!i&&l.createElement("div",{className:"InfoPanelSource-row"},l.createElement($t.a,{variant:"bodySmall",component:"div",className:"InfoPanelSource-text"},l.createElement(Ye,{interpolations:{"#{app}":l.createElement($t.a,{weight:"semibold",className:"InfoPanelSource-name"},i)}},Object(m.a)("InfoPanel.SavedFrom")))))},$e=i(1822),ti=l.forwardRef((function(t,e){var i=t.masterHash,n=t.assetHash,o=t.mediaMetaDataHash,a=t.itemIsObfuscated,s=t.onTitleAndCaptionChange,r=t.titleText,h=t.captionText,c=t.onCancelClicked,d=t.thumbnail,u=t.dateString,p=t.itemLocationString,g=t.jwt,f=t.editingDisabled,_=t.addedByNames,y=function(t){var e=null==t?void 0:t.importedByDisplayNameEnc,i=null==t?void 0:t.importedByBundleIdentifierEnc;if(e&&i){var n=atob(e),o=atob(i);if(Le.includes(o))return;return n}}(i),v=function(t){return{lat:null==t?void 0:t.locationLatitude,long:null==t?void 0:t.locationLongitude}}(n),b=v.lat,w=v.long;return l.createElement("div",{ref:e,className:"InfoPanel"},l.createElement($e.a,{onCancelClicked:c}),a?l.createElement($t.a,{className:"InfoPanel-contentContainer no-info",variant:"bodySmall",muted:!0,component:"div"},Object(m.a)("InfoPanel.ItemHidden")):l.createElement("div",{className:"InfoPanel-contentContainer is-draggable"},l.createElement(qe,{captionText:h,titleText:r,assetPK:null==n?void 0:n.pk,onTitleAndCaptionChange:s,editingDisabled:f}),l.createElement("div",{className:"InfoPanel-dateAndFilename"},l.createElement("div",{className:"InfoPanel-date"},l.createElement($t.a,{variant:"bodySmall",component:"span"},u)),l.createElement("div",{className:"InfoPanel-filename"},l.createElement("div",{className:"InfoPanel-cloudIcon"},l.createElement(Te,{desiredFontSize:12,layoutMode:"glyphBox"})),l.createElement($t.a,{variant:"bodySmall",muted:!0,component:"div"},function(t){var e=null==t?void 0:t.filenameEnc;if(e){var i=atob(e),n=i.indexOf(".");return-1!==n?i.substr(0,n):i}}(i)))),l.createElement(oe,{assetHash:n,masterHash:i,mediaMetaDataHash:o}),void 0!==b&&void 0!==w&&l.createElement(ve,{lat:b,long:w,thumbnail:d,jwt:g,itemLocationString:p}),(!!y||!!_)&&l.createElement(Je,{addedByNames:_,savedFromApp:y})))}));ti.displayName="InfoPanel"}}]);